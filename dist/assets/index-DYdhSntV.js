function jd(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const h=Object.getOwnPropertyDescriptor(s,i);h&&Object.defineProperty(e,i,h.get?h:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function r(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(i){if(i.ep)return;i.ep=!0;const h=r(i);fetch(i.href,h)}})();function Td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mc={exports:{}},ln={},Oc={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xs=Symbol.for("react.element"),Pd=Symbol.for("react.portal"),Ad=Symbol.for("react.fragment"),Nd=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),Id=Symbol.for("react.forward_ref"),Hd=Symbol.for("react.suspense"),Fd=Symbol.for("react.memo"),$d=Symbol.for("react.lazy"),al=Symbol.iterator;function zd(e){return e===null||typeof e!="object"?null:(e=al&&e[al]||e["@@iterator"],typeof e=="function"?e:null)}var Bc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ic=Object.assign,Hc={};function Xr(e,t,r){this.props=e,this.context=t,this.refs=Hc,this.updater=r||Bc}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fc(){}Fc.prototype=Xr.prototype;function oa(e,t,r){this.props=e,this.context=t,this.refs=Hc,this.updater=r||Bc}var aa=oa.prototype=new Fc;aa.constructor=oa;Ic(aa,Xr.prototype);aa.isPureReactComponent=!0;var ll=Array.isArray,$c=Object.prototype.hasOwnProperty,la={current:null},zc={key:!0,ref:!0,__self:!0,__source:!0};function Uc(e,t,r){var s,i={},h=null,m=null;if(t!=null)for(s in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(h=""+t.key),t)$c.call(t,s)&&!zc.hasOwnProperty(s)&&(i[s]=t[s]);var n=arguments.length-2;if(n===1)i.children=r;else if(1<n){for(var u=Array(n),d=0;d<n;d++)u[d]=arguments[d+2];i.children=u}if(e&&e.defaultProps)for(s in n=e.defaultProps,n)i[s]===void 0&&(i[s]=n[s]);return{$$typeof:Xs,type:e,key:h,ref:m,props:i,_owner:la.current}}function Ud(e,t){return{$$typeof:Xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ca(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xs}function Wd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cl=/\/+/g;function Nn(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Wd(""+e.key):t.toString(36)}function xi(e,t,r,s,i){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(h){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Xs:case Pd:m=!0}}if(m)return m=e,i=i(m),e=s===""?"."+Nn(m,0):s,ll(i)?(r="",e!=null&&(r=e.replace(cl,"$&/")+"/"),xi(i,t,r,"",function(d){return d})):i!=null&&(ca(i)&&(i=Ud(i,r+(!i.key||m&&m.key===i.key?"":(""+i.key).replace(cl,"$&/")+"/")+e)),t.push(i)),1;if(m=0,s=s===""?".":s+":",ll(e))for(var n=0;n<e.length;n++){h=e[n];var u=s+Nn(h,n);m+=xi(h,t,r,u,i)}else if(u=zd(e),typeof u=="function")for(e=u.call(e),n=0;!(h=e.next()).done;)h=h.value,u=s+Nn(h,n++),m+=xi(h,t,r,u,i);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function si(e,t,r){if(e==null)return e;var s=[],i=0;return xi(e,s,"","",function(h){return t.call(r,h,i++)}),s}function Vd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Me={current:null},Ci={transition:null},Kd={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Ci,ReactCurrentOwner:la};function Wc(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:si,forEach:function(e,t,r){si(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return si(e,function(){t++}),t},toArray:function(e){return si(e,function(t){return t})||[]},only:function(e){if(!ca(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Xr;re.Fragment=Ad;re.Profiler=Md;re.PureComponent=oa;re.StrictMode=Nd;re.Suspense=Hd;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kd;re.act=Wc;re.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ic({},e.props),i=e.key,h=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,m=la.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var n=e.type.defaultProps;for(u in t)$c.call(t,u)&&!zc.hasOwnProperty(u)&&(s[u]=t[u]===void 0&&n!==void 0?n[u]:t[u])}var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){n=Array(u);for(var d=0;d<u;d++)n[d]=arguments[d+2];s.children=n}return{$$typeof:Xs,type:e.type,key:i,ref:h,props:s,_owner:m}};re.createContext=function(e){return e={$$typeof:Bd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Od,_context:e},e.Consumer=e};re.createElement=Uc;re.createFactory=function(e){var t=Uc.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Id,render:e}};re.isValidElement=ca;re.lazy=function(e){return{$$typeof:$d,_payload:{_status:-1,_result:e},_init:Vd}};re.memo=function(e,t){return{$$typeof:Fd,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Ci.transition;Ci.transition={};try{e()}finally{Ci.transition=t}};re.unstable_act=Wc;re.useCallback=function(e,t){return Me.current.useCallback(e,t)};re.useContext=function(e){return Me.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return Me.current.useDeferredValue(e)};re.useEffect=function(e,t){return Me.current.useEffect(e,t)};re.useId=function(){return Me.current.useId()};re.useImperativeHandle=function(e,t,r){return Me.current.useImperativeHandle(e,t,r)};re.useInsertionEffect=function(e,t){return Me.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return Me.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return Me.current.useMemo(e,t)};re.useReducer=function(e,t,r){return Me.current.useReducer(e,t,r)};re.useRef=function(e){return Me.current.useRef(e)};re.useState=function(e){return Me.current.useState(e)};re.useSyncExternalStore=function(e,t,r){return Me.current.useSyncExternalStore(e,t,r)};re.useTransition=function(){return Me.current.useTransition()};re.version="18.3.1";Oc.exports=re;var O=Oc.exports;const ct=Td(O),qd=jd({__proto__:null,default:ct},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=O,Xd=Symbol.for("react.element"),Qd=Symbol.for("react.fragment"),Yd=Object.prototype.hasOwnProperty,Jd=Gd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zd={key:!0,ref:!0,__self:!0,__source:!0};function Vc(e,t,r){var s,i={},h=null,m=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(m=t.ref);for(s in t)Yd.call(t,s)&&!Zd.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:Xd,type:e,key:h,ref:m,props:i,_owner:Jd.current}}ln.Fragment=Qd;ln.jsx=Vc;ln.jsxs=Vc;Mc.exports=ln;var v=Mc.exports,uo={},Kc={exports:{}},Ge={},qc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,A){var P=R.length;R.push(A);e:for(;0<P;){var M=P-1>>>1,H=R[M];if(0<i(H,A))R[M]=A,R[P]=H,P=M;else break e}}function r(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var A=R[0],P=R.pop();if(P!==A){R[0]=P;e:for(var M=0,H=R.length,z=H>>>1;M<z;){var X=2*(M+1)-1,K=R[X],J=X+1,T=R[J];if(0>i(K,P))J<H&&0>i(T,K)?(R[M]=T,R[J]=P,M=J):(R[M]=K,R[X]=P,M=X);else if(J<H&&0>i(T,P))R[M]=T,R[J]=P,M=J;else break e}}return A}function i(R,A){var P=R.sortIndex-A.sortIndex;return P!==0?P:R.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var m=Date,n=m.now();e.unstable_now=function(){return m.now()-n}}var u=[],d=[],y=1,f=null,g=3,x=!1,E=!1,w=!1,a=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,o=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(R){for(var A=r(d);A!==null;){if(A.callback===null)s(d);else if(A.startTime<=R)s(d),A.sortIndex=A.expirationTime,t(u,A);else break;A=r(d)}}function _(R){if(w=!1,c(R),!E)if(r(u)!==null)E=!0,$(S);else{var A=r(d);A!==null&&W(_,A.startTime-R)}}function S(R,A){E=!1,w&&(w=!1,l(p),p=-1),x=!0;var P=g;try{for(c(A),f=r(u);f!==null&&(!(f.expirationTime>A)||R&&!j());){var M=f.callback;if(typeof M=="function"){f.callback=null,g=f.priorityLevel;var H=M(f.expirationTime<=A);A=e.unstable_now(),typeof H=="function"?f.callback=H:f===r(u)&&s(u),c(A)}else s(u);f=r(u)}if(f!==null)var z=!0;else{var X=r(d);X!==null&&W(_,X.startTime-A),z=!1}return z}finally{f=null,g=P,x=!1}}var b=!1,L=null,p=-1,k=5,C=-1;function j(){return!(e.unstable_now()-C<k)}function D(){if(L!==null){var R=e.unstable_now();C=R;var A=!0;try{A=L(!0,R)}finally{A?N():(b=!1,L=null)}}else b=!1}var N;if(typeof o=="function")N=function(){o(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=D,N=function(){B.postMessage(null)}}else N=function(){a(D,0)};function $(R){L=R,b||(b=!0,N())}function W(R,A){p=a(function(){R(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){E||x||(E=!0,$(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(R){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var P=g;g=A;try{return R()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,A){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var P=g;g=R;try{return A()}finally{g=P}},e.unstable_scheduleCallback=function(R,A,P){var M=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?M+P:M):P=M,R){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=P+H,R={id:y++,callback:A,priorityLevel:R,startTime:P,expirationTime:H,sortIndex:-1},P>M?(R.sortIndex=P,t(d,R),r(u)===null&&R===r(d)&&(w?(l(p),p=-1):w=!0,W(_,P-M))):(R.sortIndex=H,t(u,R),E||x||(E=!0,$(S))),R},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(R){var A=g;return function(){var P=g;g=A;try{return R.apply(this,arguments)}finally{g=P}}}})(Gc);qc.exports=Gc;var ef=qc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=O,qe=ef;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xc=new Set,Rs={};function vr(e,t){Fr(e,t),Fr(e+"Capture",t)}function Fr(e,t){for(Rs[e]=t,e=0;e<t.length;e++)Xc.add(t[e])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=Object.prototype.hasOwnProperty,rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ul={},hl={};function sf(e){return ho.call(hl,e)?!0:ho.call(ul,e)?!1:rf.test(e)?hl[e]=!0:(ul[e]=!0,!1)}function nf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function of(e,t,r,s){if(t===null||typeof t>"u"||nf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,r,s,i,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ua=/[\-:]([a-z])/g;function ha(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ua,ha);Re[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ua,ha);Re[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ua,ha);Re[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function da(e,t,r,s){var i=Re.hasOwnProperty(t)?Re[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(of(t,r,i,s)&&(r=null),s||i===null?sf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var jt=tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ii=Symbol.for("react.element"),wr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),fa=Symbol.for("react.strict_mode"),fo=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),Yc=Symbol.for("react.context"),pa=Symbol.for("react.forward_ref"),po=Symbol.for("react.suspense"),_o=Symbol.for("react.suspense_list"),_a=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),Jc=Symbol.for("react.offscreen"),dl=Symbol.iterator;function ss(e){return e===null||typeof e!="object"?null:(e=dl&&e[dl]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,Mn;function fs(e){if(Mn===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mn=t&&t[1]||""}return`
`+Mn+e}var On=!1;function Bn(e,t){if(!e||On)return"";On=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),h=s.stack.split(`
`),m=i.length-1,n=h.length-1;1<=m&&0<=n&&i[m]!==h[n];)n--;for(;1<=m&&0<=n;m--,n--)if(i[m]!==h[n]){if(m!==1||n!==1)do if(m--,n--,0>n||i[m]!==h[n]){var u=`
`+i[m].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=m&&0<=n);break}}}finally{On=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fs(e):""}function af(e){switch(e.tag){case 5:return fs(e.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 2:case 15:return e=Bn(e.type,!1),e;case 11:return e=Bn(e.type.render,!1),e;case 1:return e=Bn(e.type,!0),e;default:return""}}function mo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xr:return"Fragment";case wr:return"Portal";case fo:return"Profiler";case fa:return"StrictMode";case po:return"Suspense";case _o:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yc:return(e.displayName||"Context")+".Consumer";case Qc:return(e._context.displayName||"Context")+".Provider";case pa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _a:return t=e.displayName||null,t!==null?t:mo(e.type)||"Memo";case Mt:t=e._payload,e=e._init;try{return mo(e(t))}catch{}}return null}function lf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mo(t);case 8:return t===fa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cf(e){var t=Zc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(m){s=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ni(e){e._valueTracker||(e._valueTracker=cf(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Zc(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vo(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Yt(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tu(e,t){t=t.checked,t!=null&&da(e,"checked",t,!1)}function go(e,t){tu(e,t);var r=Yt(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yo(e,t.type,r):t.hasOwnProperty("defaultValue")&&yo(e,t.type,Yt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function yo(e,t,r){(t!=="number"||Ni(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ps=Array.isArray;function Nr(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Yt(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function So(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _l(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(ps(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yt(r)}}function ru(e,t){var r=Yt(t.value),s=Yt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ml(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function su(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?su(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oi,iu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oi=oi||document.createElement("div"),oi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ds(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uf=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(e){uf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gs[t]=gs[e]})});function nu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||gs.hasOwnProperty(e)&&gs[e]?(""+t).trim():t+"px"}function ou(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=nu(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var hf=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(e,t){if(t){if(hf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function ma(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bo=null,Mr=null,Or=null;function vl(e){if(e=Js(e)){if(typeof bo!="function")throw Error(G(280));var t=e.stateNode;t&&(t=fn(t),bo(e.stateNode,e.type,t))}}function au(e){Mr?Or?Or.push(e):Or=[e]:Mr=e}function lu(){if(Mr){var e=Mr,t=Or;if(Or=Mr=null,vl(e),t)for(e=0;e<t.length;e++)vl(t[e])}}function cu(e,t){return e(t)}function uu(){}var In=!1;function hu(e,t,r){if(In)return e(t,r);In=!0;try{return cu(e,t,r)}finally{In=!1,(Mr!==null||Or!==null)&&(uu(),lu())}}function js(e,t){var r=e.stateNode;if(r===null)return null;var s=fn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Eo=!1;if(Et)try{var is={};Object.defineProperty(is,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Eo=!1}function df(e,t,r,s,i,h,m,n,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(y){this.onError(y)}}var ys=!1,Mi=null,Oi=!1,Lo=null,ff={onError:function(e){ys=!0,Mi=e}};function pf(e,t,r,s,i,h,m,n,u){ys=!1,Mi=null,df.apply(ff,arguments)}function _f(e,t,r,s,i,h,m,n,u){if(pf.apply(this,arguments),ys){if(ys){var d=Mi;ys=!1,Mi=null}else throw Error(G(198));Oi||(Oi=!0,Lo=d)}}function gr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function du(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gl(e){if(gr(e)!==e)throw Error(G(188))}function mf(e){var t=e.alternate;if(!t){if(t=gr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var h=i.alternate;if(h===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===h.child){for(h=i.child;h;){if(h===r)return gl(i),e;if(h===s)return gl(i),t;h=h.sibling}throw Error(G(188))}if(r.return!==s.return)r=i,s=h;else{for(var m=!1,n=i.child;n;){if(n===r){m=!0,r=i,s=h;break}if(n===s){m=!0,s=i,r=h;break}n=n.sibling}if(!m){for(n=h.child;n;){if(n===r){m=!0,r=h,s=i;break}if(n===s){m=!0,s=h,r=i;break}n=n.sibling}if(!m)throw Error(G(189))}}if(r.alternate!==s)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function fu(e){return e=mf(e),e!==null?pu(e):null}function pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pu(e);if(t!==null)return t;e=e.sibling}return null}var _u=qe.unstable_scheduleCallback,yl=qe.unstable_cancelCallback,vf=qe.unstable_shouldYield,gf=qe.unstable_requestPaint,ve=qe.unstable_now,yf=qe.unstable_getCurrentPriorityLevel,va=qe.unstable_ImmediatePriority,mu=qe.unstable_UserBlockingPriority,Bi=qe.unstable_NormalPriority,Sf=qe.unstable_LowPriority,vu=qe.unstable_IdlePriority,cn=null,gt=null;function wf(e){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(cn,e,void 0,(e.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:kf,xf=Math.log,Cf=Math.LN2;function kf(e){return e>>>=0,e===0?32:31-(xf(e)/Cf|0)|0}var ai=64,li=4194304;function _s(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ii(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,h=e.pingedLanes,m=r&268435455;if(m!==0){var n=m&~i;n!==0?s=_s(n):(h&=m,h!==0&&(s=_s(h)))}else m=r&~i,m!==0?s=_s(m):h!==0&&(s=_s(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,h=t&-t,i>=h||i===16&&(h&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ut(t),i=1<<r,s|=e[r],t&=~i;return s}function bf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ef(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-ut(h),n=1<<m,u=i[m];u===-1?(!(n&r)||n&s)&&(i[m]=bf(n,t)):u<=t&&(e.expiredLanes|=n),h&=~n}}function Ro(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gu(){var e=ai;return ai<<=1,!(ai&4194240)&&(ai=64),e}function Hn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ut(t),e[t]=r}function Lf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ut(r),h=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~h}}function ga(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ut(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var ie=0;function yu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Su,ya,wu,xu,Cu,Do=!1,ci=[],zt=null,Ut=null,Wt=null,Ts=new Map,Ps=new Map,Bt=[],Rf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sl(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Ut=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(t.pointerId)}}function ns(e,t,r,s,i,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:h,targetContainers:[i]},t!==null&&(t=Js(t),t!==null&&ya(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Df(e,t,r,s,i){switch(t){case"focusin":return zt=ns(zt,e,t,r,s,i),!0;case"dragenter":return Ut=ns(Ut,e,t,r,s,i),!0;case"mouseover":return Wt=ns(Wt,e,t,r,s,i),!0;case"pointerover":var h=i.pointerId;return Ts.set(h,ns(Ts.get(h)||null,e,t,r,s,i)),!0;case"gotpointercapture":return h=i.pointerId,Ps.set(h,ns(Ps.get(h)||null,e,t,r,s,i)),!0}return!1}function ku(e){var t=ir(e.target);if(t!==null){var r=gr(t);if(r!==null){if(t=r.tag,t===13){if(t=du(r),t!==null){e.blockedOn=t,Cu(e.priority,function(){wu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ki(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ko=s,r.target.dispatchEvent(s),ko=null}else return t=Js(r),t!==null&&ya(t),e.blockedOn=r,!1;t.shift()}return!0}function wl(e,t,r){ki(e)&&r.delete(t)}function jf(){Do=!1,zt!==null&&ki(zt)&&(zt=null),Ut!==null&&ki(Ut)&&(Ut=null),Wt!==null&&ki(Wt)&&(Wt=null),Ts.forEach(wl),Ps.forEach(wl)}function os(e,t){e.blockedOn===t&&(e.blockedOn=null,Do||(Do=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,jf)))}function As(e){function t(i){return os(i,e)}if(0<ci.length){os(ci[0],e);for(var r=1;r<ci.length;r++){var s=ci[r];s.blockedOn===e&&(s.blockedOn=null)}}for(zt!==null&&os(zt,e),Ut!==null&&os(Ut,e),Wt!==null&&os(Wt,e),Ts.forEach(t),Ps.forEach(t),r=0;r<Bt.length;r++)s=Bt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)ku(r),r.blockedOn===null&&Bt.shift()}var Br=jt.ReactCurrentBatchConfig,Hi=!0;function Tf(e,t,r,s){var i=ie,h=Br.transition;Br.transition=null;try{ie=1,Sa(e,t,r,s)}finally{ie=i,Br.transition=h}}function Pf(e,t,r,s){var i=ie,h=Br.transition;Br.transition=null;try{ie=4,Sa(e,t,r,s)}finally{ie=i,Br.transition=h}}function Sa(e,t,r,s){if(Hi){var i=jo(e,t,r,s);if(i===null)Xn(e,t,s,Fi,r),Sl(e,s);else if(Df(i,e,t,r,s))s.stopPropagation();else if(Sl(e,s),t&4&&-1<Rf.indexOf(e)){for(;i!==null;){var h=Js(i);if(h!==null&&Su(h),h=jo(e,t,r,s),h===null&&Xn(e,t,s,Fi,r),h===i)break;i=h}i!==null&&s.stopPropagation()}else Xn(e,t,s,null,r)}}var Fi=null;function jo(e,t,r,s){if(Fi=null,e=ma(s),e=ir(e),e!==null)if(t=gr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=du(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function bu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yf()){case va:return 1;case mu:return 4;case Bi:case Sf:return 16;case vu:return 536870912;default:return 16}default:return 16}}var Ht=null,wa=null,bi=null;function Eu(){if(bi)return bi;var e,t=wa,r=t.length,s,i="value"in Ht?Ht.value:Ht.textContent,h=i.length;for(e=0;e<r&&t[e]===i[e];e++);var m=r-e;for(s=1;s<=m&&t[r-s]===i[h-s];s++);return bi=i.slice(e,1<s?1-s:void 0)}function Ei(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ui(){return!0}function xl(){return!1}function Xe(e){function t(r,s,i,h,m){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var n in e)e.hasOwnProperty(n)&&(r=e[n],this[n]=r?r(h):h[n]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ui:xl,this.isPropagationStopped=xl,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Xe(Qr),Ys=pe({},Qr,{view:0,detail:0}),Af=Xe(Ys),Fn,$n,as,un=pe({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(Fn=e.screenX-as.screenX,$n=e.screenY-as.screenY):$n=Fn=0,as=e),Fn)},movementY:function(e){return"movementY"in e?e.movementY:$n}}),Cl=Xe(un),Nf=pe({},un,{dataTransfer:0}),Mf=Xe(Nf),Of=pe({},Ys,{relatedTarget:0}),zn=Xe(Of),Bf=pe({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),If=Xe(Bf),Hf=pe({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ff=Xe(Hf),$f=pe({},Qr,{data:0}),kl=Xe($f),zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wf[e])?!!t[e]:!1}function Ca(){return Vf}var Kf=pe({},Ys,{key:function(e){if(e.key){var t=zf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?Ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qf=Xe(Kf),Gf=pe({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bl=Xe(Gf),Xf=pe({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),Qf=Xe(Xf),Yf=pe({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jf=Xe(Yf),Zf=pe({},un,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ep=Xe(Zf),tp=[9,13,27,32],ka=Et&&"CompositionEvent"in window,Ss=null;Et&&"documentMode"in document&&(Ss=document.documentMode);var rp=Et&&"TextEvent"in window&&!Ss,Lu=Et&&(!ka||Ss&&8<Ss&&11>=Ss),El=" ",Ll=!1;function Ru(e,t){switch(e){case"keyup":return tp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Du(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function sp(e,t){switch(e){case"compositionend":return Du(t);case"keypress":return t.which!==32?null:(Ll=!0,El);case"textInput":return e=t.data,e===El&&Ll?null:e;default:return null}}function ip(e,t){if(Cr)return e==="compositionend"||!ka&&Ru(e,t)?(e=Eu(),bi=wa=Ht=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lu&&t.locale!=="ko"?null:t.data;default:return null}}var np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!np[e.type]:t==="textarea"}function ju(e,t,r,s){au(s),t=$i(t,"onChange"),0<t.length&&(r=new xa("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ws=null,Ns=null;function op(e){$u(e,0)}function hn(e){var t=Er(e);if(eu(t))return e}function ap(e,t){if(e==="change")return t}var Tu=!1;if(Et){var Un;if(Et){var Wn="oninput"in document;if(!Wn){var Dl=document.createElement("div");Dl.setAttribute("oninput","return;"),Wn=typeof Dl.oninput=="function"}Un=Wn}else Un=!1;Tu=Un&&(!document.documentMode||9<document.documentMode)}function jl(){ws&&(ws.detachEvent("onpropertychange",Pu),Ns=ws=null)}function Pu(e){if(e.propertyName==="value"&&hn(Ns)){var t=[];ju(t,Ns,e,ma(e)),hu(op,t)}}function lp(e,t,r){e==="focusin"?(jl(),ws=t,Ns=r,ws.attachEvent("onpropertychange",Pu)):e==="focusout"&&jl()}function cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hn(Ns)}function up(e,t){if(e==="click")return hn(t)}function hp(e,t){if(e==="input"||e==="change")return hn(t)}function dp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dt=typeof Object.is=="function"?Object.is:dp;function Ms(e,t){if(dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!ho.call(t,i)||!dt(e[i],t[i]))return!1}return!0}function Tl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pl(e,t){var r=Tl(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tl(r)}}function Au(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Au(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nu(){for(var e=window,t=Ni();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ni(e.document)}return t}function ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fp(e){var t=Nu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Au(r.ownerDocument.documentElement,r)){if(s!==null&&ba(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,h=Math.min(s.start,i);s=s.end===void 0?h:Math.min(s.end,i),!e.extend&&h>s&&(i=s,s=h,h=i),i=Pl(r,h);var m=Pl(r,s);i&&m&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pp=Et&&"documentMode"in document&&11>=document.documentMode,kr=null,To=null,xs=null,Po=!1;function Al(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Po||kr==null||kr!==Ni(s)||(s=kr,"selectionStart"in s&&ba(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xs&&Ms(xs,s)||(xs=s,s=$i(To,"onSelect"),0<s.length&&(t=new xa("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=kr)))}function hi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var br={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionend:hi("Transition","TransitionEnd")},Vn={},Mu={};Et&&(Mu=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function dn(e){if(Vn[e])return Vn[e];if(!br[e])return e;var t=br[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Mu)return Vn[e]=t[r];return e}var Ou=dn("animationend"),Bu=dn("animationiteration"),Iu=dn("animationstart"),Hu=dn("transitionend"),Fu=new Map,Nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(e,t){Fu.set(e,t),vr(t,[e])}for(var Kn=0;Kn<Nl.length;Kn++){var qn=Nl[Kn],_p=qn.toLowerCase(),mp=qn[0].toUpperCase()+qn.slice(1);Zt(_p,"on"+mp)}Zt(Ou,"onAnimationEnd");Zt(Bu,"onAnimationIteration");Zt(Iu,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(Hu,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ms));function Ml(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,_f(s,t,void 0,e),e.currentTarget=null}function $u(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var m=s.length-1;0<=m;m--){var n=s[m],u=n.instance,d=n.currentTarget;if(n=n.listener,u!==h&&i.isPropagationStopped())break e;Ml(i,n,d),h=u}else for(m=0;m<s.length;m++){if(n=s[m],u=n.instance,d=n.currentTarget,n=n.listener,u!==h&&i.isPropagationStopped())break e;Ml(i,n,d),h=u}}}if(Oi)throw e=Lo,Oi=!1,Lo=null,e}function le(e,t){var r=t[Bo];r===void 0&&(r=t[Bo]=new Set);var s=e+"__bubble";r.has(s)||(zu(t,e,2,!1),r.add(s))}function Gn(e,t,r){var s=0;t&&(s|=4),zu(r,e,s,t)}var di="_reactListening"+Math.random().toString(36).slice(2);function Os(e){if(!e[di]){e[di]=!0,Xc.forEach(function(r){r!=="selectionchange"&&(vp.has(r)||Gn(r,!1,e),Gn(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[di]||(t[di]=!0,Gn("selectionchange",!1,t))}}function zu(e,t,r,s){switch(bu(t)){case 1:var i=Tf;break;case 4:i=Pf;break;default:i=Sa}r=i.bind(null,t,r,e),i=void 0,!Eo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Xn(e,t,r,s,i){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var n=s.stateNode.containerInfo;if(n===i||n.nodeType===8&&n.parentNode===i)break;if(m===4)for(m=s.return;m!==null;){var u=m.tag;if((u===3||u===4)&&(u=m.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;m=m.return}for(;n!==null;){if(m=ir(n),m===null)return;if(u=m.tag,u===5||u===6){s=h=m;continue e}n=n.parentNode}}s=s.return}hu(function(){var d=h,y=ma(r),f=[];e:{var g=Fu.get(e);if(g!==void 0){var x=xa,E=e;switch(e){case"keypress":if(Ei(r)===0)break e;case"keydown":case"keyup":x=qf;break;case"focusin":E="focus",x=zn;break;case"focusout":E="blur",x=zn;break;case"beforeblur":case"afterblur":x=zn;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Qf;break;case Ou:case Bu:case Iu:x=If;break;case Hu:x=Jf;break;case"scroll":x=Af;break;case"wheel":x=ep;break;case"copy":case"cut":case"paste":x=Ff;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=bl}var w=(t&4)!==0,a=!w&&e==="scroll",l=w?g!==null?g+"Capture":null:g;w=[];for(var o=d,c;o!==null;){c=o;var _=c.stateNode;if(c.tag===5&&_!==null&&(c=_,l!==null&&(_=js(o,l),_!=null&&w.push(Bs(o,_,c)))),a)break;o=o.return}0<w.length&&(g=new x(g,E,null,r,y),f.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&r!==ko&&(E=r.relatedTarget||r.fromElement)&&(ir(E)||E[Lt]))break e;if((x||g)&&(g=y.window===y?y:(g=y.ownerDocument)?g.defaultView||g.parentWindow:window,x?(E=r.relatedTarget||r.toElement,x=d,E=E?ir(E):null,E!==null&&(a=gr(E),E!==a||E.tag!==5&&E.tag!==6)&&(E=null)):(x=null,E=d),x!==E)){if(w=Cl,_="onMouseLeave",l="onMouseEnter",o="mouse",(e==="pointerout"||e==="pointerover")&&(w=bl,_="onPointerLeave",l="onPointerEnter",o="pointer"),a=x==null?g:Er(x),c=E==null?g:Er(E),g=new w(_,o+"leave",x,r,y),g.target=a,g.relatedTarget=c,_=null,ir(y)===d&&(w=new w(l,o+"enter",E,r,y),w.target=c,w.relatedTarget=a,_=w),a=_,x&&E)t:{for(w=x,l=E,o=0,c=w;c;c=Sr(c))o++;for(c=0,_=l;_;_=Sr(_))c++;for(;0<o-c;)w=Sr(w),o--;for(;0<c-o;)l=Sr(l),c--;for(;o--;){if(w===l||l!==null&&w===l.alternate)break t;w=Sr(w),l=Sr(l)}w=null}else w=null;x!==null&&Ol(f,g,x,w,!1),E!==null&&a!==null&&Ol(f,a,E,w,!0)}}e:{if(g=d?Er(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var S=ap;else if(Rl(g))if(Tu)S=hp;else{S=cp;var b=lp}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=up);if(S&&(S=S(e,d))){ju(f,S,r,y);break e}b&&b(e,g,d),e==="focusout"&&(b=g._wrapperState)&&b.controlled&&g.type==="number"&&yo(g,"number",g.value)}switch(b=d?Er(d):window,e){case"focusin":(Rl(b)||b.contentEditable==="true")&&(kr=b,To=d,xs=null);break;case"focusout":xs=To=kr=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Al(f,r,y);break;case"selectionchange":if(pp)break;case"keydown":case"keyup":Al(f,r,y)}var L;if(ka)e:{switch(e){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Cr?Ru(e,r)&&(p="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(p="onCompositionStart");p&&(Lu&&r.locale!=="ko"&&(Cr||p!=="onCompositionStart"?p==="onCompositionEnd"&&Cr&&(L=Eu()):(Ht=y,wa="value"in Ht?Ht.value:Ht.textContent,Cr=!0)),b=$i(d,p),0<b.length&&(p=new kl(p,e,null,r,y),f.push({event:p,listeners:b}),L?p.data=L:(L=Du(r),L!==null&&(p.data=L)))),(L=rp?sp(e,r):ip(e,r))&&(d=$i(d,"onBeforeInput"),0<d.length&&(y=new kl("onBeforeInput","beforeinput",null,r,y),f.push({event:y,listeners:d}),y.data=L))}$u(f,t)})}function Bs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $i(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,h=i.stateNode;i.tag===5&&h!==null&&(i=h,h=js(e,r),h!=null&&s.unshift(Bs(e,h,i)),h=js(e,t),h!=null&&s.push(Bs(e,h,i))),e=e.return}return s}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ol(e,t,r,s,i){for(var h=t._reactName,m=[];r!==null&&r!==s;){var n=r,u=n.alternate,d=n.stateNode;if(u!==null&&u===s)break;n.tag===5&&d!==null&&(n=d,i?(u=js(r,h),u!=null&&m.unshift(Bs(r,u,n))):i||(u=js(r,h),u!=null&&m.push(Bs(r,u,n)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var gp=/\r\n?/g,yp=/\u0000|\uFFFD/g;function Bl(e){return(typeof e=="string"?e:""+e).replace(gp,`
`).replace(yp,"")}function fi(e,t,r){if(t=Bl(t),Bl(e)!==t&&r)throw Error(G(425))}function zi(){}var Ao=null,No=null;function Mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oo=typeof setTimeout=="function"?setTimeout:void 0,Sp=typeof clearTimeout=="function"?clearTimeout:void 0,Il=typeof Promise=="function"?Promise:void 0,wp=typeof queueMicrotask=="function"?queueMicrotask:typeof Il<"u"?function(e){return Il.resolve(null).then(e).catch(xp)}:Oo;function xp(e){setTimeout(function(){throw e})}function Qn(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),As(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);As(t)}function Vt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),vt="__reactFiber$"+Yr,Is="__reactProps$"+Yr,Lt="__reactContainer$"+Yr,Bo="__reactEvents$"+Yr,Cp="__reactListeners$"+Yr,kp="__reactHandles$"+Yr;function ir(e){var t=e[vt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Lt]||r[vt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hl(e);e!==null;){if(r=e[vt])return r;e=Hl(e)}return t}e=r,r=e.parentNode}return null}function Js(e){return e=e[vt]||e[Lt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function fn(e){return e[Is]||null}var Io=[],Lr=-1;function er(e){return{current:e}}function ce(e){0>Lr||(e.current=Io[Lr],Io[Lr]=null,Lr--)}function ae(e,t){Lr++,Io[Lr]=e.current,e.current=t}var Jt={},Pe=er(Jt),He=er(!1),ur=Jt;function $r(e,t){var r=e.type.contextTypes;if(!r)return Jt;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},h;for(h in r)i[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fe(e){return e=e.childContextTypes,e!=null}function Ui(){ce(He),ce(Pe)}function Fl(e,t,r){if(Pe.current!==Jt)throw Error(G(168));ae(Pe,t),ae(He,r)}function Uu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(G(108,lf(e)||"Unknown",i));return pe({},r,s)}function Wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jt,ur=Pe.current,ae(Pe,e),ae(He,He.current),!0}function $l(e,t,r){var s=e.stateNode;if(!s)throw Error(G(169));r?(e=Uu(e,t,ur),s.__reactInternalMemoizedMergedChildContext=e,ce(He),ce(Pe),ae(Pe,e)):ce(He),ae(He,r)}var xt=null,pn=!1,Yn=!1;function Wu(e){xt===null?xt=[e]:xt.push(e)}function bp(e){pn=!0,Wu(e)}function tr(){if(!Yn&&xt!==null){Yn=!0;var e=0,t=ie;try{var r=xt;for(ie=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}xt=null,pn=!1}catch(i){throw xt!==null&&(xt=xt.slice(e+1)),_u(va,tr),i}finally{ie=t,Yn=!1}}return null}var Rr=[],Dr=0,Vi=null,Ki=0,Ye=[],Je=0,hr=null,Ct=1,kt="";function rr(e,t){Rr[Dr++]=Ki,Rr[Dr++]=Vi,Vi=e,Ki=t}function Vu(e,t,r){Ye[Je++]=Ct,Ye[Je++]=kt,Ye[Je++]=hr,hr=e;var s=Ct;e=kt;var i=32-ut(s)-1;s&=~(1<<i),r+=1;var h=32-ut(t)+i;if(30<h){var m=i-i%5;h=(s&(1<<m)-1).toString(32),s>>=m,i-=m,Ct=1<<32-ut(t)+i|r<<i|s,kt=h+e}else Ct=1<<h|r<<i|s,kt=e}function Ea(e){e.return!==null&&(rr(e,1),Vu(e,1,0))}function La(e){for(;e===Vi;)Vi=Rr[--Dr],Rr[Dr]=null,Ki=Rr[--Dr],Rr[Dr]=null;for(;e===hr;)hr=Ye[--Je],Ye[Je]=null,kt=Ye[--Je],Ye[Je]=null,Ct=Ye[--Je],Ye[Je]=null}var Ke=null,Ve=null,ue=!1,lt=null;function Ku(e,t){var r=Ze(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ke=e,Ve=Vt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ke=e,Ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:Ct,overflow:kt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ze(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ke=e,Ve=null,!0):!1;default:return!1}}function Ho(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fo(e){if(ue){var t=Ve;if(t){var r=t;if(!zl(e,t)){if(Ho(e))throw Error(G(418));t=Vt(r.nextSibling);var s=Ke;t&&zl(e,t)?Ku(s,r):(e.flags=e.flags&-4097|2,ue=!1,Ke=e)}}else{if(Ho(e))throw Error(G(418));e.flags=e.flags&-4097|2,ue=!1,Ke=e}}}function Ul(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ke=e}function pi(e){if(e!==Ke)return!1;if(!ue)return Ul(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mo(e.type,e.memoizedProps)),t&&(t=Ve)){if(Ho(e))throw qu(),Error(G(418));for(;t;)Ku(e,t),t=Vt(t.nextSibling)}if(Ul(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ve=Vt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ve=null}}else Ve=Ke?Vt(e.stateNode.nextSibling):null;return!0}function qu(){for(var e=Ve;e;)e=Vt(e.nextSibling)}function zr(){Ve=Ke=null,ue=!1}function Ra(e){lt===null?lt=[e]:lt.push(e)}var Ep=jt.ReactCurrentBatchConfig;function ls(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var s=r.stateNode}if(!s)throw Error(G(147,e));var i=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var n=i.refs;m===null?delete n[h]:n[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function _i(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wl(e){var t=e._init;return t(e._payload)}function Gu(e){function t(l,o){if(e){var c=l.deletions;c===null?(l.deletions=[o],l.flags|=16):c.push(o)}}function r(l,o){if(!e)return null;for(;o!==null;)t(l,o),o=o.sibling;return null}function s(l,o){for(l=new Map;o!==null;)o.key!==null?l.set(o.key,o):l.set(o.index,o),o=o.sibling;return l}function i(l,o){return l=Xt(l,o),l.index=0,l.sibling=null,l}function h(l,o,c){return l.index=c,e?(c=l.alternate,c!==null?(c=c.index,c<o?(l.flags|=2,o):c):(l.flags|=2,o)):(l.flags|=1048576,o)}function m(l){return e&&l.alternate===null&&(l.flags|=2),l}function n(l,o,c,_){return o===null||o.tag!==6?(o=io(c,l.mode,_),o.return=l,o):(o=i(o,c),o.return=l,o)}function u(l,o,c,_){var S=c.type;return S===xr?y(l,o,c.props.children,_,c.key):o!==null&&(o.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mt&&Wl(S)===o.type)?(_=i(o,c.props),_.ref=ls(l,o,c),_.return=l,_):(_=Ai(c.type,c.key,c.props,null,l.mode,_),_.ref=ls(l,o,c),_.return=l,_)}function d(l,o,c,_){return o===null||o.tag!==4||o.stateNode.containerInfo!==c.containerInfo||o.stateNode.implementation!==c.implementation?(o=no(c,l.mode,_),o.return=l,o):(o=i(o,c.children||[]),o.return=l,o)}function y(l,o,c,_,S){return o===null||o.tag!==7?(o=lr(c,l.mode,_,S),o.return=l,o):(o=i(o,c),o.return=l,o)}function f(l,o,c){if(typeof o=="string"&&o!==""||typeof o=="number")return o=io(""+o,l.mode,c),o.return=l,o;if(typeof o=="object"&&o!==null){switch(o.$$typeof){case ii:return c=Ai(o.type,o.key,o.props,null,l.mode,c),c.ref=ls(l,null,o),c.return=l,c;case wr:return o=no(o,l.mode,c),o.return=l,o;case Mt:var _=o._init;return f(l,_(o._payload),c)}if(ps(o)||ss(o))return o=lr(o,l.mode,c,null),o.return=l,o;_i(l,o)}return null}function g(l,o,c,_){var S=o!==null?o.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return S!==null?null:n(l,o,""+c,_);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ii:return c.key===S?u(l,o,c,_):null;case wr:return c.key===S?d(l,o,c,_):null;case Mt:return S=c._init,g(l,o,S(c._payload),_)}if(ps(c)||ss(c))return S!==null?null:y(l,o,c,_,null);_i(l,c)}return null}function x(l,o,c,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return l=l.get(c)||null,n(o,l,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ii:return l=l.get(_.key===null?c:_.key)||null,u(o,l,_,S);case wr:return l=l.get(_.key===null?c:_.key)||null,d(o,l,_,S);case Mt:var b=_._init;return x(l,o,c,b(_._payload),S)}if(ps(_)||ss(_))return l=l.get(c)||null,y(o,l,_,S,null);_i(o,_)}return null}function E(l,o,c,_){for(var S=null,b=null,L=o,p=o=0,k=null;L!==null&&p<c.length;p++){L.index>p?(k=L,L=null):k=L.sibling;var C=g(l,L,c[p],_);if(C===null){L===null&&(L=k);break}e&&L&&C.alternate===null&&t(l,L),o=h(C,o,p),b===null?S=C:b.sibling=C,b=C,L=k}if(p===c.length)return r(l,L),ue&&rr(l,p),S;if(L===null){for(;p<c.length;p++)L=f(l,c[p],_),L!==null&&(o=h(L,o,p),b===null?S=L:b.sibling=L,b=L);return ue&&rr(l,p),S}for(L=s(l,L);p<c.length;p++)k=x(L,l,p,c[p],_),k!==null&&(e&&k.alternate!==null&&L.delete(k.key===null?p:k.key),o=h(k,o,p),b===null?S=k:b.sibling=k,b=k);return e&&L.forEach(function(j){return t(l,j)}),ue&&rr(l,p),S}function w(l,o,c,_){var S=ss(c);if(typeof S!="function")throw Error(G(150));if(c=S.call(c),c==null)throw Error(G(151));for(var b=S=null,L=o,p=o=0,k=null,C=c.next();L!==null&&!C.done;p++,C=c.next()){L.index>p?(k=L,L=null):k=L.sibling;var j=g(l,L,C.value,_);if(j===null){L===null&&(L=k);break}e&&L&&j.alternate===null&&t(l,L),o=h(j,o,p),b===null?S=j:b.sibling=j,b=j,L=k}if(C.done)return r(l,L),ue&&rr(l,p),S;if(L===null){for(;!C.done;p++,C=c.next())C=f(l,C.value,_),C!==null&&(o=h(C,o,p),b===null?S=C:b.sibling=C,b=C);return ue&&rr(l,p),S}for(L=s(l,L);!C.done;p++,C=c.next())C=x(L,l,p,C.value,_),C!==null&&(e&&C.alternate!==null&&L.delete(C.key===null?p:C.key),o=h(C,o,p),b===null?S=C:b.sibling=C,b=C);return e&&L.forEach(function(D){return t(l,D)}),ue&&rr(l,p),S}function a(l,o,c,_){if(typeof c=="object"&&c!==null&&c.type===xr&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case ii:e:{for(var S=c.key,b=o;b!==null;){if(b.key===S){if(S=c.type,S===xr){if(b.tag===7){r(l,b.sibling),o=i(b,c.props.children),o.return=l,l=o;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mt&&Wl(S)===b.type){r(l,b.sibling),o=i(b,c.props),o.ref=ls(l,b,c),o.return=l,l=o;break e}r(l,b);break}else t(l,b);b=b.sibling}c.type===xr?(o=lr(c.props.children,l.mode,_,c.key),o.return=l,l=o):(_=Ai(c.type,c.key,c.props,null,l.mode,_),_.ref=ls(l,o,c),_.return=l,l=_)}return m(l);case wr:e:{for(b=c.key;o!==null;){if(o.key===b)if(o.tag===4&&o.stateNode.containerInfo===c.containerInfo&&o.stateNode.implementation===c.implementation){r(l,o.sibling),o=i(o,c.children||[]),o.return=l,l=o;break e}else{r(l,o);break}else t(l,o);o=o.sibling}o=no(c,l.mode,_),o.return=l,l=o}return m(l);case Mt:return b=c._init,a(l,o,b(c._payload),_)}if(ps(c))return E(l,o,c,_);if(ss(c))return w(l,o,c,_);_i(l,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,o!==null&&o.tag===6?(r(l,o.sibling),o=i(o,c),o.return=l,l=o):(r(l,o),o=io(c,l.mode,_),o.return=l,l=o),m(l)):r(l,o)}return a}var Ur=Gu(!0),Xu=Gu(!1),qi=er(null),Gi=null,jr=null,Da=null;function ja(){Da=jr=Gi=null}function Ta(e){var t=qi.current;ce(qi),e._currentValue=t}function $o(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Ir(e,t){Gi=e,Da=jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ie=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(Da!==e)if(e={context:e,memoizedValue:t,next:null},jr===null){if(Gi===null)throw Error(G(308));jr=e,Gi.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var nr=null;function Pa(e){nr===null?nr=[e]:nr.push(e)}function Qu(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,Pa(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rt(e,s)}function Rt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ot=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kt(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,se&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Rt(e,r)}return i=s.interleaved,i===null?(t.next=t,Pa(s)):(t.next=i.next,i.next=t),s.interleaved=t,Rt(e,r)}function Li(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ga(e,r)}}function Vl(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?i=h=m:h=h.next=m,r=r.next}while(r!==null);h===null?i=h=t:h=h.next=t}else i=h=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Xi(e,t,r,s){var i=e.updateQueue;Ot=!1;var h=i.firstBaseUpdate,m=i.lastBaseUpdate,n=i.shared.pending;if(n!==null){i.shared.pending=null;var u=n,d=u.next;u.next=null,m===null?h=d:m.next=d,m=u;var y=e.alternate;y!==null&&(y=y.updateQueue,n=y.lastBaseUpdate,n!==m&&(n===null?y.firstBaseUpdate=d:n.next=d,y.lastBaseUpdate=u))}if(h!==null){var f=i.baseState;m=0,y=d=u=null,n=h;do{var g=n.lane,x=n.eventTime;if((s&g)===g){y!==null&&(y=y.next={eventTime:x,lane:0,tag:n.tag,payload:n.payload,callback:n.callback,next:null});e:{var E=e,w=n;switch(g=t,x=r,w.tag){case 1:if(E=w.payload,typeof E=="function"){f=E.call(x,f,g);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,g=typeof E=="function"?E.call(x,f,g):E,g==null)break e;f=pe({},f,g);break e;case 2:Ot=!0}}n.callback!==null&&n.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[n]:g.push(n))}else x={eventTime:x,lane:g,tag:n.tag,payload:n.payload,callback:n.callback,next:null},y===null?(d=y=x,u=f):y=y.next=x,m|=g;if(n=n.next,n===null){if(n=i.shared.pending,n===null)break;g=n,n=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(y===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=y,t=i.shared.interleaved,t!==null){i=t;do m|=i.lane,i=i.next;while(i!==t)}else h===null&&(i.shared.lanes=0);fr|=m,e.lanes=m,e.memoizedState=f}}function Kl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(G(191,i));i.call(s)}}}var Zs={},yt=er(Zs),Hs=er(Zs),Fs=er(Zs);function or(e){if(e===Zs)throw Error(G(174));return e}function Na(e,t){switch(ae(Fs,t),ae(Hs,e),ae(yt,Zs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wo(t,e)}ce(yt),ae(yt,t)}function Wr(){ce(yt),ce(Hs),ce(Fs)}function Ju(e){or(Fs.current);var t=or(yt.current),r=wo(t,e.type);t!==r&&(ae(Hs,e),ae(yt,r))}function Ma(e){Hs.current===e&&(ce(yt),ce(Hs))}var de=er(0);function Qi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jn=[];function Oa(){for(var e=0;e<Jn.length;e++)Jn[e]._workInProgressVersionPrimary=null;Jn.length=0}var Ri=jt.ReactCurrentDispatcher,Zn=jt.ReactCurrentBatchConfig,dr=0,fe=null,Se=null,Ce=null,Yi=!1,Cs=!1,$s=0,Lp=0;function De(){throw Error(G(321))}function Ba(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!dt(e[r],t[r]))return!1;return!0}function Ia(e,t,r,s,i,h){if(dr=h,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ri.current=e===null||e.memoizedState===null?Tp:Pp,e=r(s,i),Cs){h=0;do{if(Cs=!1,$s=0,25<=h)throw Error(G(301));h+=1,Ce=Se=null,t.updateQueue=null,Ri.current=Ap,e=r(s,i)}while(Cs)}if(Ri.current=Ji,t=Se!==null&&Se.next!==null,dr=0,Ce=Se=fe=null,Yi=!1,t)throw Error(G(300));return e}function Ha(){var e=$s!==0;return $s=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function it(){if(Se===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ce===null?fe.memoizedState:Ce.next;if(t!==null)Ce=t,Se=e;else{if(e===null)throw Error(G(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function zs(e,t){return typeof t=="function"?t(e):t}function eo(e){var t=it(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=Se,i=s.baseQueue,h=r.pending;if(h!==null){if(i!==null){var m=i.next;i.next=h.next,h.next=m}s.baseQueue=i=h,r.pending=null}if(i!==null){h=i.next,s=s.baseState;var n=m=null,u=null,d=h;do{var y=d.lane;if((dr&y)===y)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(n=u=f,m=s):u=u.next=f,fe.lanes|=y,fr|=y}d=d.next}while(d!==null&&d!==h);u===null?m=s:u.next=n,dt(s,t.memoizedState)||(Ie=!0),t.memoizedState=s,t.baseState=m,t.baseQueue=u,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do h=i.lane,fe.lanes|=h,fr|=h,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function to(e){var t=it(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,h=t.memoizedState;if(i!==null){r.pending=null;var m=i=i.next;do h=e(h,m.action),m=m.next;while(m!==i);dt(h,t.memoizedState)||(Ie=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,s]}function Zu(){}function eh(e,t){var r=fe,s=it(),i=t(),h=!dt(s.memoizedState,i);if(h&&(s.memoizedState=i,Ie=!0),s=s.queue,Fa(sh.bind(null,r,s,e),[e]),s.getSnapshot!==t||h||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,Us(9,rh.bind(null,r,s,i,t),void 0,null),ke===null)throw Error(G(349));dr&30||th(r,t,i)}return i}function th(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rh(e,t,r,s){t.value=r,t.getSnapshot=s,ih(t)&&nh(e)}function sh(e,t,r){return r(function(){ih(t)&&nh(e)})}function ih(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dt(e,r)}catch{return!0}}function nh(e){var t=Rt(e,1);t!==null&&ht(t,e,1,-1)}function ql(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:e},t.queue=e,e=e.dispatch=jp.bind(null,fe,e),[t.memoizedState,e]}function Us(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function oh(){return it().memoizedState}function Di(e,t,r,s){var i=_t();fe.flags|=e,i.memoizedState=Us(1|t,r,void 0,s===void 0?null:s)}function _n(e,t,r,s){var i=it();s=s===void 0?null:s;var h=void 0;if(Se!==null){var m=Se.memoizedState;if(h=m.destroy,s!==null&&Ba(s,m.deps)){i.memoizedState=Us(t,r,h,s);return}}fe.flags|=e,i.memoizedState=Us(1|t,r,h,s)}function Gl(e,t){return Di(8390656,8,e,t)}function Fa(e,t){return _n(2048,8,e,t)}function ah(e,t){return _n(4,2,e,t)}function lh(e,t){return _n(4,4,e,t)}function ch(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uh(e,t,r){return r=r!=null?r.concat([e]):null,_n(4,4,ch.bind(null,t,e),r)}function $a(){}function hh(e,t){var r=it();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ba(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function dh(e,t){var r=it();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ba(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function fh(e,t,r){return dr&21?(dt(r,t)||(r=gu(),fe.lanes|=r,fr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ie=!0),e.memoizedState=r)}function Rp(e,t){var r=ie;ie=r!==0&&4>r?r:4,e(!0);var s=Zn.transition;Zn.transition={};try{e(!1),t()}finally{ie=r,Zn.transition=s}}function ph(){return it().memoizedState}function Dp(e,t,r){var s=Gt(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},_h(e))mh(t,r);else if(r=Qu(e,t,r,s),r!==null){var i=Ne();ht(r,e,s,i),vh(r,t,s)}}function jp(e,t,r){var s=Gt(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(_h(e))mh(t,i);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,n=h(m,r);if(i.hasEagerState=!0,i.eagerState=n,dt(n,m)){var u=t.interleaved;u===null?(i.next=i,Pa(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}r=Qu(e,t,i,s),r!==null&&(i=Ne(),ht(r,e,s,i),vh(r,t,s))}}function _h(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function mh(e,t){Cs=Yi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vh(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ga(e,r)}}var Ji={readContext:st,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Tp={readContext:st,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Gl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Di(4194308,4,ch.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var r=_t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=_t();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Dp.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:ql,useDebugValue:$a,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=ql(!1),t=e[0];return e=Rp.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=fe,i=_t();if(ue){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),ke===null)throw Error(G(349));dr&30||th(s,t,r)}i.memoizedState=r;var h={value:r,getSnapshot:t};return i.queue=h,Gl(sh.bind(null,s,h,e),[e]),s.flags|=2048,Us(9,rh.bind(null,s,h,r,t),void 0,null),r},useId:function(){var e=_t(),t=ke.identifierPrefix;if(ue){var r=kt,s=Ct;r=(s&~(1<<32-ut(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=$s++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Lp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pp={readContext:st,useCallback:hh,useContext:st,useEffect:Fa,useImperativeHandle:uh,useInsertionEffect:ah,useLayoutEffect:lh,useMemo:dh,useReducer:eo,useRef:oh,useState:function(){return eo(zs)},useDebugValue:$a,useDeferredValue:function(e){var t=it();return fh(t,Se.memoizedState,e)},useTransition:function(){var e=eo(zs)[0],t=it().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:eh,useId:ph,unstable_isNewReconciler:!1},Ap={readContext:st,useCallback:hh,useContext:st,useEffect:Fa,useImperativeHandle:uh,useInsertionEffect:ah,useLayoutEffect:lh,useMemo:dh,useReducer:to,useRef:oh,useState:function(){return to(zs)},useDebugValue:$a,useDeferredValue:function(e){var t=it();return Se===null?t.memoizedState=e:fh(t,Se.memoizedState,e)},useTransition:function(){var e=to(zs)[0],t=it().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:eh,useId:ph,unstable_isNewReconciler:!1};function ot(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function zo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mn={isMounted:function(e){return(e=e._reactInternals)?gr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ne(),i=Gt(e),h=bt(s,i);h.payload=t,r!=null&&(h.callback=r),t=Kt(e,h,i),t!==null&&(ht(t,e,i,s),Li(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ne(),i=Gt(e),h=bt(s,i);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=Kt(e,h,i),t!==null&&(ht(t,e,i,s),Li(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ne(),s=Gt(e),i=bt(r,s);i.tag=2,t!=null&&(i.callback=t),t=Kt(e,i,s),t!==null&&(ht(t,e,s,r),Li(t,e,s))}};function Xl(e,t,r,s,i,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,m):t.prototype&&t.prototype.isPureReactComponent?!Ms(r,s)||!Ms(i,h):!0}function gh(e,t,r){var s=!1,i=Jt,h=t.contextType;return typeof h=="object"&&h!==null?h=st(h):(i=Fe(t)?ur:Pe.current,s=t.contextTypes,h=(s=s!=null)?$r(e,i):Jt),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mn,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),t}function Ql(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&mn.enqueueReplaceState(t,t.state,null)}function Uo(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Aa(e);var h=t.contextType;typeof h=="object"&&h!==null?i.context=st(h):(h=Fe(t)?ur:Pe.current,i.context=$r(e,h)),i.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(zo(e,t,h,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&mn.enqueueReplaceState(i,i.state,null),Xi(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vr(e,t){try{var r="",s=t;do r+=af(s),s=s.return;while(s);var i=r}catch(h){i=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:i,digest:null}}function ro(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Np=typeof WeakMap=="function"?WeakMap:Map;function yh(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){en||(en=!0,ea=s),Wo(e,t)},r}function Sh(e,t,r){r=bt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){Wo(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Wo(e,t),typeof s!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function Yl(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Np;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=Gp.bind(null,e,t,r),t.then(e,e))}function Jl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zl(e,t,r,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Kt(r,t,1))),r.lanes|=1),e)}var Mp=jt.ReactCurrentOwner,Ie=!1;function Ae(e,t,r,s){t.child=e===null?Xu(t,null,r,s):Ur(t,e.child,r,s)}function ec(e,t,r,s,i){r=r.render;var h=t.ref;return Ir(t,i),s=Ia(e,t,r,s,h,i),r=Ha(),e!==null&&!Ie?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Dt(e,t,i)):(ue&&r&&Ea(t),t.flags|=1,Ae(e,t,s,i),t.child)}function tc(e,t,r,s,i){if(e===null){var h=r.type;return typeof h=="function"&&!Xa(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,wh(e,t,h,s,i)):(e=Ai(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&i)){var m=h.memoizedProps;if(r=r.compare,r=r!==null?r:Ms,r(m,s)&&e.ref===t.ref)return Dt(e,t,i)}return t.flags|=1,e=Xt(h,s),e.ref=t.ref,e.return=t,t.child=e}function wh(e,t,r,s,i){if(e!==null){var h=e.memoizedProps;if(Ms(h,s)&&e.ref===t.ref)if(Ie=!1,t.pendingProps=s=h,(e.lanes&i)!==0)e.flags&131072&&(Ie=!0);else return t.lanes=e.lanes,Dt(e,t,i)}return Vo(e,t,r,s,i)}function xh(e,t,r){var s=t.pendingProps,i=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Pr,ze),ze|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(Pr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:r,ae(Pr,ze),ze|=s}else h!==null?(s=h.baseLanes|r,t.memoizedState=null):s=r,ae(Pr,ze),ze|=s;return Ae(e,t,i,r),t.child}function Ch(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vo(e,t,r,s,i){var h=Fe(r)?ur:Pe.current;return h=$r(t,h),Ir(t,i),r=Ia(e,t,r,s,h,i),s=Ha(),e!==null&&!Ie?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Dt(e,t,i)):(ue&&s&&Ea(t),t.flags|=1,Ae(e,t,r,i),t.child)}function rc(e,t,r,s,i){if(Fe(r)){var h=!0;Wi(t)}else h=!1;if(Ir(t,i),t.stateNode===null)ji(e,t),gh(t,r,s),Uo(t,r,s,i),s=!0;else if(e===null){var m=t.stateNode,n=t.memoizedProps;m.props=n;var u=m.context,d=r.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Fe(r)?ur:Pe.current,d=$r(t,d));var y=r.getDerivedStateFromProps,f=typeof y=="function"||typeof m.getSnapshotBeforeUpdate=="function";f||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(n!==s||u!==d)&&Ql(t,m,s,d),Ot=!1;var g=t.memoizedState;m.state=g,Xi(t,s,m,i),u=t.memoizedState,n!==s||g!==u||He.current||Ot?(typeof y=="function"&&(zo(t,r,y,s),u=t.memoizedState),(n=Ot||Xl(t,r,n,s,g,u,d))?(f||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),m.props=s,m.state=u,m.context=d,s=n):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{m=t.stateNode,Yu(e,t),n=t.memoizedProps,d=t.type===t.elementType?n:ot(t.type,n),m.props=d,f=t.pendingProps,g=m.context,u=r.contextType,typeof u=="object"&&u!==null?u=st(u):(u=Fe(r)?ur:Pe.current,u=$r(t,u));var x=r.getDerivedStateFromProps;(y=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(n!==f||g!==u)&&Ql(t,m,s,u),Ot=!1,g=t.memoizedState,m.state=g,Xi(t,s,m,i);var E=t.memoizedState;n!==f||g!==E||He.current||Ot?(typeof x=="function"&&(zo(t,r,x,s),E=t.memoizedState),(d=Ot||Xl(t,r,d,s,g,E,u)||!1)?(y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(s,E,u),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(s,E,u)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||n===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=E),m.props=s,m.state=E,m.context=u,s=d):(typeof m.componentDidUpdate!="function"||n===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),s=!1)}return Ko(e,t,r,s,h,i)}function Ko(e,t,r,s,i,h){Ch(e,t);var m=(t.flags&128)!==0;if(!s&&!m)return i&&$l(t,r,!1),Dt(e,t,h);s=t.stateNode,Mp.current=t;var n=m&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&m?(t.child=Ur(t,e.child,null,h),t.child=Ur(t,null,n,h)):Ae(e,t,n,h),t.memoizedState=s.state,i&&$l(t,r,!0),t.child}function kh(e){var t=e.stateNode;t.pendingContext?Fl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fl(e,t.context,!1),Na(e,t.containerInfo)}function sc(e,t,r,s,i){return zr(),Ra(i),t.flags|=256,Ae(e,t,r,s),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0};function Go(e){return{baseLanes:e,cachePool:null,transitions:null}}function bh(e,t,r){var s=t.pendingProps,i=de.current,h=!1,m=(t.flags&128)!==0,n;if((n=m)||(n=e!==null&&e.memoizedState===null?!1:(i&2)!==0),n?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ae(de,i&1),e===null)return Fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=s.children,e=s.fallback,h?(s=t.mode,h=t.child,m={mode:"hidden",children:m},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=m):h=yn(m,s,0,null),e=lr(e,s,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Go(r),t.memoizedState=qo,e):za(t,m));if(i=e.memoizedState,i!==null&&(n=i.dehydrated,n!==null))return Op(e,t,m,s,n,i,r);if(h){h=s.fallback,m=t.mode,i=e.child,n=i.sibling;var u={mode:"hidden",children:s.children};return!(m&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=u,t.deletions=null):(s=Xt(i,u),s.subtreeFlags=i.subtreeFlags&14680064),n!==null?h=Xt(n,h):(h=lr(h,m,r,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,m=e.child.memoizedState,m=m===null?Go(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~r,t.memoizedState=qo,s}return h=e.child,e=h.sibling,s=Xt(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function za(e,t){return t=yn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mi(e,t,r,s){return s!==null&&Ra(s),Ur(t,e.child,null,r),e=za(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Op(e,t,r,s,i,h,m){if(r)return t.flags&256?(t.flags&=-257,s=ro(Error(G(422))),mi(e,t,m,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,i=t.mode,s=yn({mode:"visible",children:s.children},i,0,null),h=lr(h,i,m,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&Ur(t,e.child,null,m),t.child.memoizedState=Go(m),t.memoizedState=qo,h);if(!(t.mode&1))return mi(e,t,m,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var n=s.dgst;return s=n,h=Error(G(419)),s=ro(h,s,void 0),mi(e,t,m,s)}if(n=(m&e.childLanes)!==0,Ie||n){if(s=ke,s!==null){switch(m&-m){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|m)?0:i,i!==0&&i!==h.retryLane&&(h.retryLane=i,Rt(e,i),ht(s,e,i,-1))}return Ga(),s=ro(Error(G(421))),mi(e,t,m,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Xp.bind(null,e),i._reactRetry=t,null):(e=h.treeContext,Ve=Vt(i.nextSibling),Ke=t,ue=!0,lt=null,e!==null&&(Ye[Je++]=Ct,Ye[Je++]=kt,Ye[Je++]=hr,Ct=e.id,kt=e.overflow,hr=t),t=za(t,s.children),t.flags|=4096,t)}function ic(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),$o(e.return,t,r)}function so(e,t,r,s,i){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=r,h.tailMode=i)}function Eh(e,t,r){var s=t.pendingProps,i=s.revealOrder,h=s.tail;if(Ae(e,t,s.children,r),s=de.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ic(e,r,t);else if(e.tag===19)ic(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ae(de,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Qi(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),so(t,!1,i,r,h);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qi(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}so(t,!0,r,null,h);break;case"together":so(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=Xt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Xt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Bp(e,t,r){switch(t.tag){case 3:kh(t),zr();break;case 5:Ju(t);break;case 1:Fe(t.type)&&Wi(t);break;case 4:Na(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;ae(qi,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ae(de,de.current&1),t.flags|=128,null):r&t.child.childLanes?bh(e,t,r):(ae(de,de.current&1),e=Dt(e,t,r),e!==null?e.sibling:null);ae(de,de.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Eh(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(de,de.current),s)break;return null;case 22:case 23:return t.lanes=0,xh(e,t,r)}return Dt(e,t,r)}var Lh,Xo,Rh,Dh;Lh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xo=function(){};Rh=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,or(yt.current);var h=null;switch(r){case"input":i=vo(e,i),s=vo(e,s),h=[];break;case"select":i=pe({},i,{value:void 0}),s=pe({},s,{value:void 0}),h=[];break;case"textarea":i=So(e,i),s=So(e,s),h=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=zi)}xo(r,s);var m;r=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var n=i[d];for(m in n)n.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rs.hasOwnProperty(d)?h||(h=[]):(h=h||[]).push(d,null));for(d in s){var u=s[d];if(n=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==n&&(u!=null||n!=null))if(d==="style")if(n){for(m in n)!n.hasOwnProperty(m)||u&&u.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in u)u.hasOwnProperty(m)&&n[m]!==u[m]&&(r||(r={}),r[m]=u[m])}else r||(h||(h=[]),h.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,n=n?n.__html:void 0,u!=null&&n!==u&&(h=h||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(h=h||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rs.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&le("scroll",e),h||n===u||(h=[])):(h=h||[]).push(d,u))}r&&(h=h||[]).push("style",r);var d=h;(t.updateQueue=d)&&(t.flags|=4)}};Dh=function(e,t,r,s){r!==s&&(t.flags|=4)};function cs(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Ip(e,t,r){var s=t.pendingProps;switch(La(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Fe(t.type)&&Ui(),je(t),null;case 3:return s=t.stateNode,Wr(),ce(He),ce(Pe),Oa(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(pi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lt!==null&&(sa(lt),lt=null))),Xo(e,t),je(t),null;case 5:Ma(t);var i=or(Fs.current);if(r=t.type,e!==null&&t.stateNode!=null)Rh(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(G(166));return je(t),null}if(e=or(yt.current),pi(t)){s=t.stateNode,r=t.type;var h=t.memoizedProps;switch(s[vt]=t,s[Is]=h,e=(t.mode&1)!==0,r){case"dialog":le("cancel",s),le("close",s);break;case"iframe":case"object":case"embed":le("load",s);break;case"video":case"audio":for(i=0;i<ms.length;i++)le(ms[i],s);break;case"source":le("error",s);break;case"img":case"image":case"link":le("error",s),le("load",s);break;case"details":le("toggle",s);break;case"input":fl(s,h),le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},le("invalid",s);break;case"textarea":_l(s,h),le("invalid",s)}xo(r,h),i=null;for(var m in h)if(h.hasOwnProperty(m)){var n=h[m];m==="children"?typeof n=="string"?s.textContent!==n&&(h.suppressHydrationWarning!==!0&&fi(s.textContent,n,e),i=["children",n]):typeof n=="number"&&s.textContent!==""+n&&(h.suppressHydrationWarning!==!0&&fi(s.textContent,n,e),i=["children",""+n]):Rs.hasOwnProperty(m)&&n!=null&&m==="onScroll"&&le("scroll",s)}switch(r){case"input":ni(s),pl(s,h,!0);break;case"textarea":ni(s),ml(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=zi)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{m=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=su(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=m.createElement(r,{is:s.is}):(e=m.createElement(r),r==="select"&&(m=e,s.multiple?m.multiple=!0:s.size&&(m.size=s.size))):e=m.createElementNS(e,r),e[vt]=t,e[Is]=s,Lh(e,t,!1,!1),t.stateNode=e;e:{switch(m=Co(r,s),r){case"dialog":le("cancel",e),le("close",e),i=s;break;case"iframe":case"object":case"embed":le("load",e),i=s;break;case"video":case"audio":for(i=0;i<ms.length;i++)le(ms[i],e);i=s;break;case"source":le("error",e),i=s;break;case"img":case"image":case"link":le("error",e),le("load",e),i=s;break;case"details":le("toggle",e),i=s;break;case"input":fl(e,s),i=vo(e,s),le("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=pe({},s,{value:void 0}),le("invalid",e);break;case"textarea":_l(e,s),i=So(e,s),le("invalid",e);break;default:i=s}xo(r,i),n=i;for(h in n)if(n.hasOwnProperty(h)){var u=n[h];h==="style"?ou(e,u):h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&iu(e,u)):h==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ds(e,u):typeof u=="number"&&Ds(e,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Rs.hasOwnProperty(h)?u!=null&&h==="onScroll"&&le("scroll",e):u!=null&&da(e,h,u,m))}switch(r){case"input":ni(e),pl(e,s,!1);break;case"textarea":ni(e),ml(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Yt(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?Nr(e,!!s.multiple,h,!1):s.defaultValue!=null&&Nr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zi)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Dh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(G(166));if(r=or(Fs.current),or(yt.current),pi(t)){if(s=t.stateNode,r=t.memoizedProps,s[vt]=t,(h=s.nodeValue!==r)&&(e=Ke,e!==null))switch(e.tag){case 3:fi(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fi(s.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[vt]=t,t.stateNode=s}return je(t),null;case 13:if(ce(de),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&Ve!==null&&t.mode&1&&!(t.flags&128))qu(),zr(),t.flags|=98560,h=!1;else if(h=pi(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(G(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(G(317));h[vt]=t}else zr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),h=!1}else lt!==null&&(sa(lt),lt=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?we===0&&(we=3):Ga())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return Wr(),Xo(e,t),e===null&&Os(t.stateNode.containerInfo),je(t),null;case 10:return Ta(t.type._context),je(t),null;case 17:return Fe(t.type)&&Ui(),je(t),null;case 19:if(ce(de),h=t.memoizedState,h===null)return je(t),null;if(s=(t.flags&128)!==0,m=h.rendering,m===null)if(s)cs(h,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=Qi(e),m!==null){for(t.flags|=128,cs(h,!1),s=m.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)h=r,e=s,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ae(de,de.current&1|2),t.child}e=e.sibling}h.tail!==null&&ve()>Kr&&(t.flags|=128,s=!0,cs(h,!1),t.lanes=4194304)}else{if(!s)if(e=Qi(m),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!ue)return je(t),null}else 2*ve()-h.renderingStartTime>Kr&&r!==1073741824&&(t.flags|=128,s=!0,cs(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(r=h.last,r!==null?r.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=ve(),t.sibling=null,r=de.current,ae(de,s?r&1|2:r&1),t):(je(t),null);case 22:case 23:return qa(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ze&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function Hp(e,t){switch(La(t),t.tag){case 1:return Fe(t.type)&&Ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wr(),ce(He),ce(Pe),Oa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ma(t),null;case 13:if(ce(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(de),null;case 4:return Wr(),null;case 10:return Ta(t.type._context),null;case 22:case 23:return qa(),null;case 24:return null;default:return null}}var vi=!1,Te=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Tr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){me(e,t,s)}else r.current=null}function Qo(e,t,r){try{r()}catch(s){me(e,t,s)}}var nc=!1;function $p(e,t){if(Ao=Hi,e=Nu(),ba(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var m=0,n=-1,u=-1,d=0,y=0,f=e,g=null;t:for(;;){for(var x;f!==r||i!==0&&f.nodeType!==3||(n=m+i),f!==h||s!==0&&f.nodeType!==3||(u=m+s),f.nodeType===3&&(m+=f.nodeValue.length),(x=f.firstChild)!==null;)g=f,f=x;for(;;){if(f===e)break t;if(g===r&&++d===i&&(n=m),g===h&&++y===s&&(u=m),(x=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=x}r=n===-1||u===-1?null:{start:n,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(No={focusedElem:e,selectionRange:r},Hi=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,a=E.memoizedState,l=t.stateNode,o=l.getSnapshotBeforeUpdate(t.elementType===t.type?w:ot(t.type,w),a);l.__reactInternalSnapshotBeforeUpdate=o}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(_){me(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return E=nc,nc=!1,E}function ks(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var h=i.destroy;i.destroy=void 0,h!==void 0&&Qo(t,r,h)}i=i.next}while(i!==s)}}function vn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Yo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jh(e){var t=e.alternate;t!==null&&(e.alternate=null,jh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vt],delete t[Is],delete t[Bo],delete t[Cp],delete t[kp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Th(e){return e.tag===5||e.tag===3||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=zi));else if(s!==4&&(e=e.child,e!==null))for(Jo(e,t,r),e=e.sibling;e!==null;)Jo(e,t,r),e=e.sibling}function Zo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Zo(e,t,r),e=e.sibling;e!==null;)Zo(e,t,r),e=e.sibling}var be=null,at=!1;function Nt(e,t,r){for(r=r.child;r!==null;)Ph(e,t,r),r=r.sibling}function Ph(e,t,r){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(cn,r)}catch{}switch(r.tag){case 5:Te||Tr(r,t);case 6:var s=be,i=at;be=null,Nt(e,t,r),be=s,at=i,be!==null&&(at?(e=be,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):be.removeChild(r.stateNode));break;case 18:be!==null&&(at?(e=be,r=r.stateNode,e.nodeType===8?Qn(e.parentNode,r):e.nodeType===1&&Qn(e,r),As(e)):Qn(be,r.stateNode));break;case 4:s=be,i=at,be=r.stateNode.containerInfo,at=!0,Nt(e,t,r),be=s,at=i;break;case 0:case 11:case 14:case 15:if(!Te&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var h=i,m=h.destroy;h=h.tag,m!==void 0&&(h&2||h&4)&&Qo(r,t,m),i=i.next}while(i!==s)}Nt(e,t,r);break;case 1:if(!Te&&(Tr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(n){me(r,t,n)}Nt(e,t,r);break;case 21:Nt(e,t,r);break;case 22:r.mode&1?(Te=(s=Te)||r.memoizedState!==null,Nt(e,t,r),Te=s):Nt(e,t,r);break;default:Nt(e,t,r)}}function ac(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Fp),t.forEach(function(s){var i=Qp.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function nt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var h=e,m=t,n=m;e:for(;n!==null;){switch(n.tag){case 5:be=n.stateNode,at=!1;break e;case 3:be=n.stateNode.containerInfo,at=!0;break e;case 4:be=n.stateNode.containerInfo,at=!0;break e}n=n.return}if(be===null)throw Error(G(160));Ph(h,m,i),be=null,at=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){me(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ah(t,e),t=t.sibling}function Ah(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nt(t,e),pt(e),s&4){try{ks(3,e,e.return),vn(3,e)}catch(w){me(e,e.return,w)}try{ks(5,e,e.return)}catch(w){me(e,e.return,w)}}break;case 1:nt(t,e),pt(e),s&512&&r!==null&&Tr(r,r.return);break;case 5:if(nt(t,e),pt(e),s&512&&r!==null&&Tr(r,r.return),e.flags&32){var i=e.stateNode;try{Ds(i,"")}catch(w){me(e,e.return,w)}}if(s&4&&(i=e.stateNode,i!=null)){var h=e.memoizedProps,m=r!==null?r.memoizedProps:h,n=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{n==="input"&&h.type==="radio"&&h.name!=null&&tu(i,h),Co(n,m);var d=Co(n,h);for(m=0;m<u.length;m+=2){var y=u[m],f=u[m+1];y==="style"?ou(i,f):y==="dangerouslySetInnerHTML"?iu(i,f):y==="children"?Ds(i,f):da(i,y,f,d)}switch(n){case"input":go(i,h);break;case"textarea":ru(i,h);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!h.multiple;var x=h.value;x!=null?Nr(i,!!h.multiple,x,!1):g!==!!h.multiple&&(h.defaultValue!=null?Nr(i,!!h.multiple,h.defaultValue,!0):Nr(i,!!h.multiple,h.multiple?[]:"",!1))}i[Is]=h}catch(w){me(e,e.return,w)}}break;case 6:if(nt(t,e),pt(e),s&4){if(e.stateNode===null)throw Error(G(162));i=e.stateNode,h=e.memoizedProps;try{i.nodeValue=h}catch(w){me(e,e.return,w)}}break;case 3:if(nt(t,e),pt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{As(t.containerInfo)}catch(w){me(e,e.return,w)}break;case 4:nt(t,e),pt(e);break;case 13:nt(t,e),pt(e),i=e.child,i.flags&8192&&(h=i.memoizedState!==null,i.stateNode.isHidden=h,!h||i.alternate!==null&&i.alternate.memoizedState!==null||(Va=ve())),s&4&&ac(e);break;case 22:if(y=r!==null&&r.memoizedState!==null,e.mode&1?(Te=(d=Te)||y,nt(t,e),Te=d):nt(t,e),pt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(Q=e,y=e.child;y!==null;){for(f=Q=y;Q!==null;){switch(g=Q,x=g.child,g.tag){case 0:case 11:case 14:case 15:ks(4,g,g.return);break;case 1:Tr(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){s=g,r=g.return;try{t=s,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(w){me(s,r,w)}}break;case 5:Tr(g,g.return);break;case 22:if(g.memoizedState!==null){cc(f);continue}}x!==null?(x.return=g,Q=x):cc(f)}y=y.sibling}e:for(y=null,f=e;;){if(f.tag===5){if(y===null){y=f;try{i=f.stateNode,d?(h=i.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(n=f.stateNode,u=f.memoizedProps.style,m=u!=null&&u.hasOwnProperty("display")?u.display:null,n.style.display=nu("display",m))}catch(w){me(e,e.return,w)}}}else if(f.tag===6){if(y===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(w){me(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nt(t,e),pt(e),s&4&&ac(e);break;case 21:break;default:nt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Th(r)){var s=r;break e}r=r.return}throw Error(G(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Ds(i,""),s.flags&=-33);var h=oc(e);Zo(e,h,i);break;case 3:case 4:var m=s.stateNode.containerInfo,n=oc(e);Jo(e,n,m);break;default:throw Error(G(161))}}catch(u){me(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zp(e,t,r){Q=e,Nh(e)}function Nh(e,t,r){for(var s=(e.mode&1)!==0;Q!==null;){var i=Q,h=i.child;if(i.tag===22&&s){var m=i.memoizedState!==null||vi;if(!m){var n=i.alternate,u=n!==null&&n.memoizedState!==null||Te;n=vi;var d=Te;if(vi=m,(Te=u)&&!d)for(Q=i;Q!==null;)m=Q,u=m.child,m.tag===22&&m.memoizedState!==null?uc(i):u!==null?(u.return=m,Q=u):uc(i);for(;h!==null;)Q=h,Nh(h),h=h.sibling;Q=i,vi=n,Te=d}lc(e)}else i.subtreeFlags&8772&&h!==null?(h.return=i,Q=h):lc(e)}}function lc(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Te||vn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Te)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ot(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Kl(t,h,s);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kl(t,m,r)}break;case 5:var n=t.stateNode;if(r===null&&t.flags&4){r=n;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var f=y.dehydrated;f!==null&&As(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Te||t.flags&512&&Yo(t)}catch(g){me(t,t.return,g)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function cc(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function uc(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vn(4,t)}catch(u){me(t,r,u)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(u){me(t,i,u)}}var h=t.return;try{Yo(t)}catch(u){me(t,h,u)}break;case 5:var m=t.return;try{Yo(t)}catch(u){me(t,m,u)}}}catch(u){me(t,t.return,u)}if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}var Up=Math.ceil,Zi=jt.ReactCurrentDispatcher,Ua=jt.ReactCurrentOwner,et=jt.ReactCurrentBatchConfig,se=0,ke=null,ge=null,Le=0,ze=0,Pr=er(0),we=0,Ws=null,fr=0,gn=0,Wa=0,bs=null,Be=null,Va=0,Kr=1/0,wt=null,en=!1,ea=null,qt=null,gi=!1,Ft=null,tn=0,Es=0,ta=null,Ti=-1,Pi=0;function Ne(){return se&6?ve():Ti!==-1?Ti:Ti=ve()}function Gt(e){return e.mode&1?se&2&&Le!==0?Le&-Le:Ep.transition!==null?(Pi===0&&(Pi=gu()),Pi):(e=ie,e!==0||(e=window.event,e=e===void 0?16:bu(e.type)),e):1}function ht(e,t,r,s){if(50<Es)throw Es=0,ta=null,Error(G(185));Qs(e,r,s),(!(se&2)||e!==ke)&&(e===ke&&(!(se&2)&&(gn|=r),we===4&&It(e,Le)),$e(e,s),r===1&&se===0&&!(t.mode&1)&&(Kr=ve()+500,pn&&tr()))}function $e(e,t){var r=e.callbackNode;Ef(e,t);var s=Ii(e,e===ke?Le:0);if(s===0)r!==null&&yl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&yl(r),t===1)e.tag===0?bp(hc.bind(null,e)):Wu(hc.bind(null,e)),wp(function(){!(se&6)&&tr()}),r=null;else{switch(yu(s)){case 1:r=va;break;case 4:r=mu;break;case 16:r=Bi;break;case 536870912:r=vu;break;default:r=Bi}r=zh(r,Mh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Mh(e,t){if(Ti=-1,Pi=0,se&6)throw Error(G(327));var r=e.callbackNode;if(Hr()&&e.callbackNode!==r)return null;var s=Ii(e,e===ke?Le:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=rn(e,s);else{t=s;var i=se;se|=2;var h=Bh();(ke!==e||Le!==t)&&(wt=null,Kr=ve()+500,ar(e,t));do try{Kp();break}catch(n){Oh(e,n)}while(!0);ja(),Zi.current=h,se=i,ge!==null?t=0:(ke=null,Le=0,t=we)}if(t!==0){if(t===2&&(i=Ro(e),i!==0&&(s=i,t=ra(e,i))),t===1)throw r=Ws,ar(e,0),It(e,s),$e(e,ve()),r;if(t===6)It(e,s);else{if(i=e.current.alternate,!(s&30)&&!Wp(i)&&(t=rn(e,s),t===2&&(h=Ro(e),h!==0&&(s=h,t=ra(e,h))),t===1))throw r=Ws,ar(e,0),It(e,s),$e(e,ve()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(G(345));case 2:sr(e,Be,wt);break;case 3:if(It(e,s),(s&130023424)===s&&(t=Va+500-ve(),10<t)){if(Ii(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){Ne(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Oo(sr.bind(null,e,Be,wt),t);break}sr(e,Be,wt);break;case 4:if(It(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var m=31-ut(s);h=1<<m,m=t[m],m>i&&(i=m),s&=~h}if(s=i,s=ve()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Up(s/1960))-s,10<s){e.timeoutHandle=Oo(sr.bind(null,e,Be,wt),s);break}sr(e,Be,wt);break;case 5:sr(e,Be,wt);break;default:throw Error(G(329))}}}return $e(e,ve()),e.callbackNode===r?Mh.bind(null,e):null}function ra(e,t){var r=bs;return e.current.memoizedState.isDehydrated&&(ar(e,t).flags|=256),e=rn(e,t),e!==2&&(t=Be,Be=r,t!==null&&sa(t)),e}function sa(e){Be===null?Be=e:Be.push.apply(Be,e)}function Wp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],h=i.getSnapshot;i=i.value;try{if(!dt(h(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function It(e,t){for(t&=~Wa,t&=~gn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ut(t),s=1<<r;e[r]=-1,t&=~s}}function hc(e){if(se&6)throw Error(G(327));Hr();var t=Ii(e,0);if(!(t&1))return $e(e,ve()),null;var r=rn(e,t);if(e.tag!==0&&r===2){var s=Ro(e);s!==0&&(t=s,r=ra(e,s))}if(r===1)throw r=Ws,ar(e,0),It(e,t),$e(e,ve()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Be,wt),$e(e,ve()),null}function Ka(e,t){var r=se;se|=1;try{return e(t)}finally{se=r,se===0&&(Kr=ve()+500,pn&&tr())}}function pr(e){Ft!==null&&Ft.tag===0&&!(se&6)&&Hr();var t=se;se|=1;var r=et.transition,s=ie;try{if(et.transition=null,ie=1,e)return e()}finally{ie=s,et.transition=r,se=t,!(se&6)&&tr()}}function qa(){ze=Pr.current,ce(Pr)}function ar(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Sp(r)),ge!==null)for(r=ge.return;r!==null;){var s=r;switch(La(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ui();break;case 3:Wr(),ce(He),ce(Pe),Oa();break;case 5:Ma(s);break;case 4:Wr();break;case 13:ce(de);break;case 19:ce(de);break;case 10:Ta(s.type._context);break;case 22:case 23:qa()}r=r.return}if(ke=e,ge=e=Xt(e.current,null),Le=ze=t,we=0,Ws=null,Wa=gn=fr=0,Be=bs=null,nr!==null){for(t=0;t<nr.length;t++)if(r=nr[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,h=r.pending;if(h!==null){var m=h.next;h.next=i,s.next=m}r.pending=s}nr=null}return e}function Oh(e,t){do{var r=ge;try{if(ja(),Ri.current=Ji,Yi){for(var s=fe.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Yi=!1}if(dr=0,Ce=Se=fe=null,Cs=!1,$s=0,Ua.current=null,r===null||r.return===null){we=1,Ws=t,ge=null;break}e:{var h=e,m=r.return,n=r,u=t;if(t=Le,n.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,y=n,f=y.tag;if(!(y.mode&1)&&(f===0||f===11||f===15)){var g=y.alternate;g?(y.updateQueue=g.updateQueue,y.memoizedState=g.memoizedState,y.lanes=g.lanes):(y.updateQueue=null,y.memoizedState=null)}var x=Jl(m);if(x!==null){x.flags&=-257,Zl(x,m,n,h,t),x.mode&1&&Yl(h,d,t),t=x,u=d;var E=t.updateQueue;if(E===null){var w=new Set;w.add(u),t.updateQueue=w}else E.add(u);break e}else{if(!(t&1)){Yl(h,d,t),Ga();break e}u=Error(G(426))}}else if(ue&&n.mode&1){var a=Jl(m);if(a!==null){!(a.flags&65536)&&(a.flags|=256),Zl(a,m,n,h,t),Ra(Vr(u,n));break e}}h=u=Vr(u,n),we!==4&&(we=2),bs===null?bs=[h]:bs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var l=yh(h,u,t);Vl(h,l);break e;case 1:n=u;var o=h.type,c=h.stateNode;if(!(h.flags&128)&&(typeof o.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(qt===null||!qt.has(c)))){h.flags|=65536,t&=-t,h.lanes|=t;var _=Sh(h,n,t);Vl(h,_);break e}}h=h.return}while(h!==null)}Hh(r)}catch(S){t=S,ge===r&&r!==null&&(ge=r=r.return);continue}break}while(!0)}function Bh(){var e=Zi.current;return Zi.current=Ji,e===null?Ji:e}function Ga(){(we===0||we===3||we===2)&&(we=4),ke===null||!(fr&268435455)&&!(gn&268435455)||It(ke,Le)}function rn(e,t){var r=se;se|=2;var s=Bh();(ke!==e||Le!==t)&&(wt=null,ar(e,t));do try{Vp();break}catch(i){Oh(e,i)}while(!0);if(ja(),se=r,Zi.current=s,ge!==null)throw Error(G(261));return ke=null,Le=0,we}function Vp(){for(;ge!==null;)Ih(ge)}function Kp(){for(;ge!==null&&!vf();)Ih(ge)}function Ih(e){var t=$h(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?Hh(e):ge=t,Ua.current=null}function Hh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Hp(r,t),r!==null){r.flags&=32767,ge=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,ge=null;return}}else if(r=Ip(r,t,ze),r!==null){ge=r;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);we===0&&(we=5)}function sr(e,t,r){var s=ie,i=et.transition;try{et.transition=null,ie=1,qp(e,t,r,s)}finally{et.transition=i,ie=s}return null}function qp(e,t,r,s){do Hr();while(Ft!==null);if(se&6)throw Error(G(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(Lf(e,h),e===ke&&(ge=ke=null,Le=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gi||(gi=!0,zh(Bi,function(){return Hr(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=et.transition,et.transition=null;var m=ie;ie=1;var n=se;se|=4,Ua.current=null,$p(e,r),Ah(r,e),fp(No),Hi=!!Ao,No=Ao=null,e.current=r,zp(r),gf(),se=n,ie=m,et.transition=h}else e.current=r;if(gi&&(gi=!1,Ft=e,tn=i),h=e.pendingLanes,h===0&&(qt=null),wf(r.stateNode),$e(e,ve()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(en)throw en=!1,e=ea,ea=null,e;return tn&1&&e.tag!==0&&Hr(),h=e.pendingLanes,h&1?e===ta?Es++:(Es=0,ta=e):Es=0,tr(),null}function Hr(){if(Ft!==null){var e=yu(tn),t=et.transition,r=ie;try{if(et.transition=null,ie=16>e?16:e,Ft===null)var s=!1;else{if(e=Ft,Ft=null,tn=0,se&6)throw Error(G(331));var i=se;for(se|=4,Q=e.current;Q!==null;){var h=Q,m=h.child;if(Q.flags&16){var n=h.deletions;if(n!==null){for(var u=0;u<n.length;u++){var d=n[u];for(Q=d;Q!==null;){var y=Q;switch(y.tag){case 0:case 11:case 15:ks(8,y,h)}var f=y.child;if(f!==null)f.return=y,Q=f;else for(;Q!==null;){y=Q;var g=y.sibling,x=y.return;if(jh(y),y===d){Q=null;break}if(g!==null){g.return=x,Q=g;break}Q=x}}}var E=h.alternate;if(E!==null){var w=E.child;if(w!==null){E.child=null;do{var a=w.sibling;w.sibling=null,w=a}while(w!==null)}}Q=h}}if(h.subtreeFlags&2064&&m!==null)m.return=h,Q=m;else e:for(;Q!==null;){if(h=Q,h.flags&2048)switch(h.tag){case 0:case 11:case 15:ks(9,h,h.return)}var l=h.sibling;if(l!==null){l.return=h.return,Q=l;break e}Q=h.return}}var o=e.current;for(Q=o;Q!==null;){m=Q;var c=m.child;if(m.subtreeFlags&2064&&c!==null)c.return=m,Q=c;else e:for(m=o;Q!==null;){if(n=Q,n.flags&2048)try{switch(n.tag){case 0:case 11:case 15:vn(9,n)}}catch(S){me(n,n.return,S)}if(n===m){Q=null;break e}var _=n.sibling;if(_!==null){_.return=n.return,Q=_;break e}Q=n.return}}if(se=i,tr(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(cn,e)}catch{}s=!0}return s}finally{ie=r,et.transition=t}}return!1}function dc(e,t,r){t=Vr(r,t),t=yh(e,t,1),e=Kt(e,t,1),t=Ne(),e!==null&&(Qs(e,1,t),$e(e,t))}function me(e,t,r){if(e.tag===3)dc(e,e,r);else for(;t!==null;){if(t.tag===3){dc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qt===null||!qt.has(s))){e=Vr(r,e),e=Sh(t,e,1),t=Kt(t,e,1),e=Ne(),t!==null&&(Qs(t,1,e),$e(t,e));break}}t=t.return}}function Gp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ne(),e.pingedLanes|=e.suspendedLanes&r,ke===e&&(Le&r)===r&&(we===4||we===3&&(Le&130023424)===Le&&500>ve()-Va?ar(e,0):Wa|=r),$e(e,t)}function Fh(e,t){t===0&&(e.mode&1?(t=li,li<<=1,!(li&130023424)&&(li=4194304)):t=1);var r=Ne();e=Rt(e,t),e!==null&&(Qs(e,t,r),$e(e,r))}function Xp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fh(e,r)}function Qp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(t),Fh(e,r)}var $h;$h=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||He.current)Ie=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ie=!1,Bp(e,t,r);Ie=!!(e.flags&131072)}else Ie=!1,ue&&t.flags&1048576&&Vu(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ji(e,t),e=t.pendingProps;var i=$r(t,Pe.current);Ir(t,r),i=Ia(null,t,s,e,i,r);var h=Ha();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fe(s)?(h=!0,Wi(t)):h=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Aa(t),i.updater=mn,t.stateNode=i,i._reactInternals=t,Uo(t,s,e,r),t=Ko(null,t,s,!0,h,r)):(t.tag=0,ue&&h&&Ea(t),Ae(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(ji(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=Jp(s),e=ot(s,e),i){case 0:t=Vo(null,t,s,e,r);break e;case 1:t=rc(null,t,s,e,r);break e;case 11:t=ec(null,t,s,e,r);break e;case 14:t=tc(null,t,s,ot(s.type,e),r);break e}throw Error(G(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:ot(s,i),Vo(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:ot(s,i),rc(e,t,s,i,r);case 3:e:{if(kh(t),e===null)throw Error(G(387));s=t.pendingProps,h=t.memoizedState,i=h.element,Yu(e,t),Xi(t,s,null,r);var m=t.memoizedState;if(s=m.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){i=Vr(Error(G(423)),t),t=sc(e,t,s,r,i);break e}else if(s!==i){i=Vr(Error(G(424)),t),t=sc(e,t,s,r,i);break e}else for(Ve=Vt(t.stateNode.containerInfo.firstChild),Ke=t,ue=!0,lt=null,r=Xu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zr(),s===i){t=Dt(e,t,r);break e}Ae(e,t,s,r)}t=t.child}return t;case 5:return Ju(t),e===null&&Fo(t),s=t.type,i=t.pendingProps,h=e!==null?e.memoizedProps:null,m=i.children,Mo(s,i)?m=null:h!==null&&Mo(s,h)&&(t.flags|=32),Ch(e,t),Ae(e,t,m,r),t.child;case 6:return e===null&&Fo(t),null;case 13:return bh(e,t,r);case 4:return Na(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ur(t,null,s,r):Ae(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:ot(s,i),ec(e,t,s,i,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,h=t.memoizedProps,m=i.value,ae(qi,s._currentValue),s._currentValue=m,h!==null)if(dt(h.value,m)){if(h.children===i.children&&!He.current){t=Dt(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var n=h.dependencies;if(n!==null){m=h.child;for(var u=n.firstContext;u!==null;){if(u.context===s){if(h.tag===1){u=bt(-1,r&-r),u.tag=2;var d=h.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?u.next=u:(u.next=y.next,y.next=u),d.pending=u}}h.lanes|=r,u=h.alternate,u!==null&&(u.lanes|=r),$o(h.return,r,t),n.lanes|=r;break}u=u.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(G(341));m.lanes|=r,n=m.alternate,n!==null&&(n.lanes|=r),$o(m,r,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Ae(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Ir(t,r),i=st(i),s=s(i),t.flags|=1,Ae(e,t,s,r),t.child;case 14:return s=t.type,i=ot(s,t.pendingProps),i=ot(s.type,i),tc(e,t,s,i,r);case 15:return wh(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:ot(s,i),ji(e,t),t.tag=1,Fe(s)?(e=!0,Wi(t)):e=!1,Ir(t,r),gh(t,s,i),Uo(t,s,i,r),Ko(null,t,s,!0,e,r);case 19:return Eh(e,t,r);case 22:return xh(e,t,r)}throw Error(G(156,t.tag))};function zh(e,t){return _u(e,t)}function Yp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ze(e,t,r,s){return new Yp(e,t,r,s)}function Xa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jp(e){if(typeof e=="function")return Xa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pa)return 11;if(e===_a)return 14}return 2}function Xt(e,t){var r=e.alternate;return r===null?(r=Ze(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ai(e,t,r,s,i,h){var m=2;if(s=e,typeof e=="function")Xa(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case xr:return lr(r.children,i,h,t);case fa:m=8,i|=8;break;case fo:return e=Ze(12,r,t,i|2),e.elementType=fo,e.lanes=h,e;case po:return e=Ze(13,r,t,i),e.elementType=po,e.lanes=h,e;case _o:return e=Ze(19,r,t,i),e.elementType=_o,e.lanes=h,e;case Jc:return yn(r,i,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qc:m=10;break e;case Yc:m=9;break e;case pa:m=11;break e;case _a:m=14;break e;case Mt:m=16,s=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Ze(m,r,t,i),t.elementType=e,t.type=s,t.lanes=h,t}function lr(e,t,r,s){return e=Ze(7,e,s,t),e.lanes=r,e}function yn(e,t,r,s){return e=Ze(22,e,s,t),e.elementType=Jc,e.lanes=r,e.stateNode={isHidden:!1},e}function io(e,t,r){return e=Ze(6,e,null,t),e.lanes=r,e}function no(e,t,r){return t=Ze(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zp(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hn(0),this.expirationTimes=Hn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qa(e,t,r,s,i,h,m,n,u){return e=new Zp(e,t,r,n,u),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Ze(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(h),e}function e_(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Uh(e){if(!e)return Jt;e=e._reactInternals;e:{if(gr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(Fe(r))return Uu(e,r,t)}return t}function Wh(e,t,r,s,i,h,m,n,u){return e=Qa(r,s,!0,e,i,h,m,n,u),e.context=Uh(null),r=e.current,s=Ne(),i=Gt(r),h=bt(s,i),h.callback=t??null,Kt(r,h,i),e.current.lanes=i,Qs(e,i,s),$e(e,s),e}function Sn(e,t,r,s){var i=t.current,h=Ne(),m=Gt(i);return r=Uh(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(h,m),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Kt(i,t,m),e!==null&&(ht(e,i,m,h),Li(e,i,m)),m}function sn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ya(e,t){fc(e,t),(e=e.alternate)&&fc(e,t)}function t_(){return null}var Vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ja(e){this._internalRoot=e}wn.prototype.render=Ja.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Sn(e,t,null,null)};wn.prototype.unmount=Ja.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){Sn(null,e,null,null)}),t[Lt]=null}};function wn(e){this._internalRoot=e}wn.prototype.unstable_scheduleHydration=function(e){if(e){var t=xu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&ku(e)}};function Za(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pc(){}function r_(e,t,r,s,i){if(i){if(typeof s=="function"){var h=s;s=function(){var d=sn(m);h.call(d)}}var m=Wh(t,s,e,0,null,!1,!1,"",pc);return e._reactRootContainer=m,e[Lt]=m.current,Os(e.nodeType===8?e.parentNode:e),pr(),m}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var n=s;s=function(){var d=sn(u);n.call(d)}}var u=Qa(e,0,!1,null,null,!1,!1,"",pc);return e._reactRootContainer=u,e[Lt]=u.current,Os(e.nodeType===8?e.parentNode:e),pr(function(){Sn(t,u,r,s)}),u}function Cn(e,t,r,s,i){var h=r._reactRootContainer;if(h){var m=h;if(typeof i=="function"){var n=i;i=function(){var u=sn(m);n.call(u)}}Sn(t,m,e,i)}else m=r_(r,t,e,i,s);return sn(m)}Su=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_s(t.pendingLanes);r!==0&&(ga(t,r|1),$e(t,ve()),!(se&6)&&(Kr=ve()+500,tr()))}break;case 13:pr(function(){var s=Rt(e,1);if(s!==null){var i=Ne();ht(s,e,1,i)}}),Ya(e,1)}};ya=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var r=Ne();ht(t,e,134217728,r)}Ya(e,134217728)}};wu=function(e){if(e.tag===13){var t=Gt(e),r=Rt(e,t);if(r!==null){var s=Ne();ht(r,e,t,s)}Ya(e,t)}};xu=function(){return ie};Cu=function(e,t){var r=ie;try{return ie=e,t()}finally{ie=r}};bo=function(e,t,r){switch(t){case"input":if(go(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=fn(s);if(!i)throw Error(G(90));eu(s),go(s,i)}}}break;case"textarea":ru(e,r);break;case"select":t=r.value,t!=null&&Nr(e,!!r.multiple,t,!1)}};cu=Ka;uu=pr;var s_={usingClientEntryPoint:!1,Events:[Js,Er,fn,au,lu,Ka]},us={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i_={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fu(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||t_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{cn=yi.inject(i_),gt=yi}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_;Ge.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Za(t))throw Error(G(200));return e_(e,t,null,r)};Ge.createRoot=function(e,t){if(!Za(e))throw Error(G(299));var r=!1,s="",i=Vh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Qa(e,1,!1,null,null,r,!1,s,i),e[Lt]=t.current,Os(e.nodeType===8?e.parentNode:e),new Ja(t)};Ge.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=fu(t),e=e===null?null:e.stateNode,e};Ge.flushSync=function(e){return pr(e)};Ge.hydrate=function(e,t,r){if(!xn(t))throw Error(G(200));return Cn(null,e,t,!0,r)};Ge.hydrateRoot=function(e,t,r){if(!Za(e))throw Error(G(405));var s=r!=null&&r.hydratedSources||null,i=!1,h="",m=Vh;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Wh(t,null,e,1,r??null,i,!1,h,m),e[Lt]=t.current,Os(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new wn(t)};Ge.render=function(e,t,r){if(!xn(t))throw Error(G(200));return Cn(null,e,t,!1,r)};Ge.unmountComponentAtNode=function(e){if(!xn(e))throw Error(G(40));return e._reactRootContainer?(pr(function(){Cn(null,null,e,!1,function(){e._reactRootContainer=null,e[Lt]=null})}),!0):!1};Ge.unstable_batchedUpdates=Ka;Ge.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!xn(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Cn(e,t,r,!1,s)};Ge.version="18.3.1-next-f1338f8080-20240426";function Kh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kh)}catch(e){console.error(e)}}Kh(),Kc.exports=Ge;var n_=Kc.exports,_c=n_;uo.createRoot=_c.createRoot,uo.hydrateRoot=_c.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vs.apply(this,arguments)}var $t;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($t||($t={}));const mc="popstate";function o_(e){e===void 0&&(e={});function t(s,i){let{pathname:h,search:m,hash:n}=s.location;return ia("",{pathname:h,search:m,hash:n},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Gh(i)}return l_(t,r,null,e)}function xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a_(){return Math.random().toString(36).substr(2,8)}function vc(e,t){return{usr:e.state,key:e.key,idx:t}}function ia(e,t,r,s){return r===void 0&&(r=null),Vs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Jr(t):t,{state:r,key:t&&t.key||s||a_()})}function Gh(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Jr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function l_(e,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:h=!1}=s,m=i.history,n=$t.Pop,u=null,d=y();d==null&&(d=0,m.replaceState(Vs({},m.state,{idx:d}),""));function y(){return(m.state||{idx:null}).idx}function f(){n=$t.Pop;let a=y(),l=a==null?null:a-d;d=a,u&&u({action:n,location:w.location,delta:l})}function g(a,l){n=$t.Push;let o=ia(w.location,a,l);d=y()+1;let c=vc(o,d),_=w.createHref(o);try{m.pushState(c,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(_)}h&&u&&u({action:n,location:w.location,delta:1})}function x(a,l){n=$t.Replace;let o=ia(w.location,a,l);d=y();let c=vc(o,d),_=w.createHref(o);m.replaceState(c,"",_),h&&u&&u({action:n,location:w.location,delta:0})}function E(a){let l=i.location.origin!=="null"?i.location.origin:i.location.href,o=typeof a=="string"?a:Gh(a);return o=o.replace(/ $/,"%20"),xe(l,"No window.location.(origin|href) available to create URL for href: "+o),new URL(o,l)}let w={get action(){return n},get location(){return e(i,m)},listen(a){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(mc,f),u=a,()=>{i.removeEventListener(mc,f),u=null}},createHref(a){return t(i,a)},createURL:E,encodeLocation(a){let l=E(a);return{pathname:l.pathname,search:l.search,hash:l.hash}},push:g,replace:x,go(a){return m.go(a)}};return w}var gc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gc||(gc={}));function c_(e,t,r){return r===void 0&&(r="/"),u_(e,t,r)}function u_(e,t,r,s){let i=typeof t=="string"?Jr(t):t,h=Yh(i.pathname||"/",r);if(h==null)return null;let m=Xh(e);h_(m);let n=null;for(let u=0;n==null&&u<m.length;++u){let d=C_(h);n=S_(m[u],d)}return n}function Xh(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(h,m,n)=>{let u={relativePath:n===void 0?h.path||"":n,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};u.relativePath.startsWith("/")&&(xe(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=cr([s,u.relativePath]),y=r.concat(u);h.children&&h.children.length>0&&(xe(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Xh(h.children,t,y,d)),!(h.path==null&&!h.index)&&t.push({path:d,score:g_(d,h.index),routesMeta:y})};return e.forEach((h,m)=>{var n;if(h.path===""||!((n=h.path)!=null&&n.includes("?")))i(h,m);else for(let u of Qh(h.path))i(h,m,u)}),t}function Qh(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),h=r.replace(/\?$/,"");if(s.length===0)return i?[h,""]:[h];let m=Qh(s.join("/")),n=[];return n.push(...m.map(u=>u===""?h:[h,u].join("/"))),i&&n.push(...m),n.map(u=>e.startsWith("/")&&u===""?"/":u)}function h_(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:y_(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const d_=/^:[\w-]+$/,f_=3,p_=2,__=1,m_=10,v_=-2,yc=e=>e==="*";function g_(e,t){let r=e.split("/"),s=r.length;return r.some(yc)&&(s+=v_),t&&(s+=p_),r.filter(i=>!yc(i)).reduce((i,h)=>i+(d_.test(h)?f_:h===""?__:m_),s)}function y_(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function S_(e,t,r){let{routesMeta:s}=e,i={},h="/",m=[];for(let n=0;n<s.length;++n){let u=s[n],d=n===s.length-1,y=h==="/"?t:t.slice(h.length)||"/",f=w_({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},y),g=u.route;if(!f)return null;Object.assign(i,f.params),m.push({params:i,pathname:cr([h,f.pathname]),pathnameBase:D_(cr([h,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(h=cr([h,f.pathnameBase]))}return m}function w_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=x_(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let h=i[0],m=h.replace(/(.)\/+$/,"$1"),n=i.slice(1);return{params:s.reduce((d,y,f)=>{let{paramName:g,isOptional:x}=y;if(g==="*"){let w=n[f]||"";m=h.slice(0,h.length-w.length).replace(/(.)\/+$/,"$1")}const E=n[f];return x&&!E?d[g]=void 0:d[g]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:h,pathnameBase:m,pattern:e}}function x_(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),qh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,n,u)=>(s.push({paramName:n,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function C_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function k_(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof e=="string"?Jr(e):e;return{pathname:r?r.startsWith("/")?r:b_(r,t):t,search:j_(s),hash:T_(i)}}function b_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function oo(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E_(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function L_(e,t){let r=E_(e);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function R_(e,t,r,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=Jr(e):(i=Vs({},e),xe(!i.pathname||!i.pathname.includes("?"),oo("?","pathname","search",i)),xe(!i.pathname||!i.pathname.includes("#"),oo("#","pathname","hash",i)),xe(!i.search||!i.search.includes("#"),oo("#","search","hash",i)));let h=e===""||i.pathname==="",m=h?"/":i.pathname,n;if(m==null)n=r;else{let f=t.length-1;if(!s&&m.startsWith("..")){let g=m.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}n=f>=0?t[f]:"/"}let u=k_(i,n),d=m&&m!=="/"&&m.endsWith("/"),y=(h||m===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||y)&&(u.pathname+="/"),u}const cr=e=>e.join("/").replace(/\/\/+/g,"/"),D_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,T_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function P_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jh=["post","put","patch","delete"];new Set(Jh);const A_=["get",...Jh];new Set(A_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ks.apply(this,arguments)}const el=O.createContext(null),N_=O.createContext(null),kn=O.createContext(null),bn=O.createContext(null),yr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Zh=O.createContext(null);function En(){return O.useContext(bn)!=null}function tl(){return En()||xe(!1),O.useContext(bn).location}function ed(e){O.useContext(kn).static||O.useLayoutEffect(e)}function M_(){let{isDataRoute:e}=O.useContext(yr);return e?G_():O_()}function O_(){En()||xe(!1);let e=O.useContext(el),{basename:t,future:r,navigator:s}=O.useContext(kn),{matches:i}=O.useContext(yr),{pathname:h}=tl(),m=JSON.stringify(L_(i,r.v7_relativeSplatPath)),n=O.useRef(!1);return ed(()=>{n.current=!0}),O.useCallback(function(d,y){if(y===void 0&&(y={}),!n.current)return;if(typeof d=="number"){s.go(d);return}let f=R_(d,JSON.parse(m),h,y.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:cr([t,f.pathname])),(y.replace?s.replace:s.push)(f,y.state,y)},[t,s,m,h,e])}function Sc(){let{matches:e}=O.useContext(yr),t=e[e.length-1];return t?t.params:{}}function B_(e,t){return I_(e,t)}function I_(e,t,r,s){En()||xe(!1);let{navigator:i}=O.useContext(kn),{matches:h}=O.useContext(yr),m=h[h.length-1],n=m?m.params:{};m&&m.pathname;let u=m?m.pathnameBase:"/";m&&m.route;let d=tl(),y;if(t){var f;let a=typeof t=="string"?Jr(t):t;u==="/"||(f=a.pathname)!=null&&f.startsWith(u)||xe(!1),y=a}else y=d;let g=y.pathname||"/",x=g;if(u!=="/"){let a=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(a.length).join("/")}let E=c_(e,{pathname:x}),w=U_(E&&E.map(a=>Object.assign({},a,{params:Object.assign({},n,a.params),pathname:cr([u,i.encodeLocation?i.encodeLocation(a.pathname).pathname:a.pathname]),pathnameBase:a.pathnameBase==="/"?u:cr([u,i.encodeLocation?i.encodeLocation(a.pathnameBase).pathname:a.pathnameBase])})),h,r,s);return t&&w?O.createElement(bn.Provider,{value:{location:Ks({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:$t.Pop}},w):w}function H_(){let e=q_(),t=P_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),r?O.createElement("pre",{style:i},r):null,null)}const F_=O.createElement(H_,null);class $_ extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?O.createElement(yr.Provider,{value:this.props.routeContext},O.createElement(Zh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z_(e){let{routeContext:t,match:r,children:s}=e,i=O.useContext(el);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(yr.Provider,{value:t},s)}function U_(e,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var h;if(!r)return null;if(r.errors)e=r.matches;else if((h=s)!=null&&h.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let m=e,n=(i=r)==null?void 0:i.errors;if(n!=null){let y=m.findIndex(f=>f.route.id&&(n==null?void 0:n[f.route.id])!==void 0);y>=0||xe(!1),m=m.slice(0,Math.min(m.length,y+1))}let u=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let y=0;y<m.length;y++){let f=m[y];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=y),f.route.id){let{loaderData:g,errors:x}=r,E=f.route.loader&&g[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||E){u=!0,d>=0?m=m.slice(0,d+1):m=[m[0]];break}}}return m.reduceRight((y,f,g)=>{let x,E=!1,w=null,a=null;r&&(x=n&&f.route.id?n[f.route.id]:void 0,w=f.route.errorElement||F_,u&&(d<0&&g===0?(X_("route-fallback"),E=!0,a=null):d===g&&(E=!0,a=f.route.hydrateFallbackElement||null)));let l=t.concat(m.slice(0,g+1)),o=()=>{let c;return x?c=w:E?c=a:f.route.Component?c=O.createElement(f.route.Component,null):f.route.element?c=f.route.element:c=y,O.createElement(z_,{match:f,routeContext:{outlet:y,matches:l,isDataRoute:r!=null},children:c})};return r&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?O.createElement($_,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:o(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):o()},null)}var td=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(td||{}),rd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rd||{});function W_(e){let t=O.useContext(el);return t||xe(!1),t}function V_(e){let t=O.useContext(N_);return t||xe(!1),t}function K_(e){let t=O.useContext(yr);return t||xe(!1),t}function sd(e){let t=K_(),r=t.matches[t.matches.length-1];return r.route.id||xe(!1),r.route.id}function q_(){var e;let t=O.useContext(Zh),r=V_(),s=sd();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function G_(){let{router:e}=W_(td.UseNavigateStable),t=sd(rd.UseNavigateStable),r=O.useRef(!1);return ed(()=>{r.current=!0}),O.useCallback(function(i,h){h===void 0&&(h={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ks({fromRouteId:t},h)))},[e,t])}const wc={};function X_(e,t,r){wc[e]||(wc[e]=!0)}function Q_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function St(e){xe(!1)}function Y_(e){let{basename:t="/",children:r=null,location:s,navigationType:i=$t.Pop,navigator:h,static:m=!1,future:n}=e;En()&&xe(!1);let u=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:h,static:m,future:Ks({v7_relativeSplatPath:!1},n)}),[u,n,h,m]);typeof s=="string"&&(s=Jr(s));let{pathname:y="/",search:f="",hash:g="",state:x=null,key:E="default"}=s,w=O.useMemo(()=>{let a=Yh(y,u);return a==null?null:{location:{pathname:a,search:f,hash:g,state:x,key:E},navigationType:i}},[u,y,f,g,x,E,i]);return w==null?null:O.createElement(kn.Provider,{value:d},O.createElement(bn.Provider,{children:r,value:w}))}function J_(e){let{children:t,location:r}=e;return B_(na(t),r)}new Promise(()=>{});function na(e,t){t===void 0&&(t=[]);let r=[];return O.Children.forEach(e,(s,i)=>{if(!O.isValidElement(s))return;let h=[...t,i];if(s.type===O.Fragment){r.push.apply(r,na(s.props.children,h));return}s.type!==St&&xe(!1),!s.props.index||!s.props.children||xe(!1);let m={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(m.children=na(s.props.children,h)),r.push(m)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Z_="6";try{window.__reactRouterVersion=Z_}catch{}const em="startTransition",xc=qd[em];function tm(e){let{basename:t,children:r,future:s,window:i}=e,h=O.useRef();h.current==null&&(h.current=o_({window:i,v5Compat:!0}));let m=h.current,[n,u]=O.useState({action:m.action,location:m.location}),{v7_startTransition:d}=s||{},y=O.useCallback(f=>{d&&xc?xc(()=>u(f)):u(f)},[u,d]);return O.useLayoutEffect(()=>m.listen(y),[m,y]),O.useEffect(()=>Q_(s),[s]),O.createElement(Y_,{basename:t,children:r,location:n.location,navigationType:n.action,navigator:m,future:s})}var Cc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cc||(Cc={}));var kc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kc||(kc={}));function Ee({className:e="",variant:t="default",children:r}){const s=t==="outline"?"border border-slate-700/60 text-slate-300":t==="destructive"?"bg-rose-900/40 border border-rose-700/40 text-rose-200":t==="success"?"bg-emerald-900/40 border border-emerald-700/40 text-emerald-200":"bg-slate-800 text-slate-200";return v.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-[11px] ${s} ${e}`,children:r})}function ee({className:e="",variant:t="default",size:r="md",...s}){const i="inline-flex items-center justify-center rounded-xl font-medium transition focus:outline-none focus-visible:ring-2 ring-offset-0",h=t==="outline"?"border border-slate-700 text-slate-200 bg-transparent hover:bg-slate-800":t==="ghost"?"bg-transparent hover:bg-slate-900":"bg-slate-800 hover:bg-slate-700 text-white",m=r==="sm"?"h-8 px-3 text-sm":r==="icon"?"h-10 w-10":"h-10 px-4";return v.jsx("button",{className:`${i} ${h} ${m} ${e}`,...s})}function rm({page:e,onGoHosts:t,onGoStacks:r,onGoImages:s,onGoNetworks:i,onGoVolumes:h}){const m=(n,u,d)=>v.jsx("button",{className:`w-full text-left px-3 py-2 rounded-lg text-sm transition border ${e===n?"bg-slate-800/60 border-slate-700 text-white":"hover:bg-slate-900/40 border-transparent text-slate-300"}`,onClick:d,children:u});return v.jsxs("div",{className:"hidden md:flex md:flex-col w-60 shrink-0 border-r border-slate-800 bg-slate-950/60",children:[v.jsx("div",{className:"px-4 py-4 border-b border-slate-800",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/DDUI-Logo.png",alt:"DDUI",className:"h-16 w-16 rounded-md"}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("div",{className:"font-black uppercase tracking-tight leading-none text-slate-200 select-none text-lg",children:v.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-brand to-sky-400",children:"DDUI"})}),v.jsx(Ee,{variant:"outline",className:"mt-1 w-fit",children:"Community"})]})]})}),v.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"Infrastructure"}),v.jsxs("nav",{className:"px-2 pb-4 space-y-1",children:[m("hosts","Hosts",t),m("stacks","Stacks",r)]}),v.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"Resources"}),v.jsxs("nav",{className:"px-2 pb-4 space-y-1",children:[m("images","Images",s),m("networks","Networks",i),m("volumes","Volumes",h)]}),v.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"System"}),v.jsxs("nav",{className:"px-2 space-y-1",children:[v.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"Settings"}),v.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"About"}),v.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"Help"}),v.jsx("form",{method:"post",action:"/logout",children:v.jsx(ee,{type:"submit",variant:"ghost",className:"px-3 text-slate-300 hover:bg-slate-900/60",children:"Logout"})})]})]})}const tt=ct.forwardRef(({className:e="",children:t},r)=>v.jsx("div",{ref:r,className:`rounded-2xl border border-slate-800 ${e}`,children:t}));function _r({className:e="",children:t}){return v.jsx("div",{className:`px-4 pt-4 ${e}`,children:t})}function mr({className:e="",children:t}){return v.jsx("div",{className:`text-lg font-semibold ${e}`,children:t})}function rt({className:e="",children:t}){return v.jsx("div",{className:`px-4 pb-4 ${e}`,children:t})}function sm(){return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:v.jsxs(tt,{className:"w-full max-w-sm bg-slate-900/60 border-slate-800",children:[v.jsx(_r,{children:v.jsxs(mr,{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-black uppercase tracking-tight leading-none text-slate-200 select-none",children:v.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-brand to-sky-400",children:"DDUI"})}),v.jsx(Ee,{variant:"outline",children:"Community"})]})}),v.jsxs(rt,{className:"space-y-4",children:[v.jsx("p",{className:"text-slate-300 text-sm",children:"You're signed out. Continue to your identity provider to sign in."}),v.jsx(ee,{className:"w-full bg-[#310937] hover:bg-[#2a0830] text-white",onClick:()=>{window.location.replace("/auth/login")},children:"Continue to Sign in"}),v.jsxs("p",{className:"text-xs text-slate-500",children:["If you get stuck, ensure your OIDC ",v.jsx("code",{children:"RedirectURL"})," points back to",v.jsx("code",{children:" /auth/callback"})," and that cookies aren't blocked."]})]})]})})}function Ln(e){return v.jsx("input",{...e,className:`h-10 w-full rounded-xl border border-slate-800 bg-slate-900/60 px-3 text-sm outline-none focus:ring-2 focus:ring-brand ${e.className||""}`})}function hs({title:e,value:t,icon:r,accent:s=!1}){return v.jsxs(tt,{className:`border-slate-800 ${s?"bg-slate-900/40 border-brand/40":"bg-slate-900/40"}`,children:[v.jsxs(_r,{className:"flex flex-row items-center justify-between pb-2",children:[v.jsx(mr,{className:"text-sm font-medium text-slate-300",children:e}),v.jsx(r,{className:"h-4 w-4 text-slate-400"})]}),v.jsx(rt,{children:v.jsx("div",{className:`text-2xl font-extrabold ${s?"text-brand":"text-white"}`,children:t})})]})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),id=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=O.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:h,iconNode:m,...n},u)=>O.createElement("svg",{ref:u,...nm,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:id("lucide",i),...n},[...m.map(([d,y])=>O.createElement(d,y)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(e,t)=>{const r=O.forwardRef(({className:s,...i},h)=>O.createElement(om,{ref:h,iconNode:t,className:id(`lucide-${im(e)}`,s),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ne("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=ne("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ne("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=ne("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ne("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ne("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ne("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ne("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function Lc({metrics:e,hosts:t,filteredHosts:r,loading:s,err:i,scanning:h,onScanAll:m,onFilter:n,onOpenHost:u,refreshMetricsForHosts:d}){const[y,f]=O.useState("");return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[v.jsx(hs,{title:"Hosts",value:e.hosts,icon:bc}),v.jsx(hs,{title:"Stacks",value:e.stacks,icon:bc}),v.jsx(hs,{title:"Containers",value:e.containers,icon:um}),v.jsx(hs,{title:"Drift",value:v.jsx("span",{className:"text-amber-400",children:e.drift}),icon:gm}),v.jsx(hs,{title:"Errors",value:v.jsx("span",{className:"text-rose-400",children:e.errors}),icon:cm})]}),v.jsx(tt,{className:"bg-slate-900/40 border-slate-800",children:v.jsx(rt,{className:"py-4",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs(ee,{onClick:m,disabled:h,className:"bg-[#310937] hover:bg-[#2a0830] text-white",children:[v.jsx(qr,{className:`h-4 w-4 mr-1 ${h?"animate-spin":""}`}),h?"Scanning":"Sync"]}),v.jsx("div",{className:"relative w-full md:w-96",children:v.jsx(Ln,{placeholder:"Filter by host, group, address",className:"pl-3 bg-slate-900/50 border-slate-800 text-slate-200 placeholder:text-slate-500",value:y,onChange:g=>{f(g.target.value),n(g.target.value)}})})]})})}),v.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-3 text-left",children:"Host"}),v.jsx("th",{className:"p-3 text-left",children:"Address"}),v.jsx("th",{className:"p-3 text-left",children:"Groups"}),v.jsx("th",{className:"p-3 text-left",children:"Scan"}),v.jsx("th",{className:"p-3 text-left",children:"Status"})]})}),v.jsxs("tbody",{children:[s&&v.jsx("tr",{children:v.jsx("td",{className:"p-4 text-slate-500",colSpan:5,children:"Loading hosts"})}),i&&!s&&v.jsx("tr",{children:v.jsx("td",{className:"p-4 text-rose-300",colSpan:5,children:i})}),!s&&r.map(g=>v.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-900/40",children:[v.jsx("td",{className:"p-3 font-medium text-slate-200",children:v.jsx("button",{className:"hover:underline",onClick:()=>u(g.name),children:g.name})}),v.jsx("td",{className:"p-3 text-slate-300",children:g.address||""}),v.jsx("td",{className:"p-3 text-slate-300",children:(g.groups||[]).length?(g.groups||[]).join(", "):""}),v.jsx("td",{className:"p-3",children:v.jsxs(ee,{size:"sm",variant:"outline",className:"border-slate-700 text-slate-200 hover:bg-slate-800",onClick:async()=>{await fetch(`/api/scan/host/${encodeURIComponent(g.name)}`,{method:"POST",credentials:"include"}),await d([g.name])},children:[v.jsx(qr,{className:"h-4 w-4 mr-1"}),"Scan"]})}),v.jsx("td",{className:"p-3"})]},g.name)),!s&&r.length===0&&v.jsx("tr",{children:v.jsx("td",{className:"p-6 text-center text-slate-500",colSpan:5,children:"No hosts."})})]})]})})]})}function il({checked:e,onCheckedChange:t,disabled:r=!1,id:s}){const i=()=>{r||t(!e)},h=m=>{r||(m.key===" "||m.key==="Enter")&&(m.preventDefault(),i())};return v.jsx("button",{id:s,type:"button",role:"switch","aria-checked":e,"aria-disabled":r,disabled:r,tabIndex:r?-1:0,onClick:i,onKeyDown:h,className:`h-6 w-10 rounded-full border border-slate-700 transition ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${e?"bg-brand/70":"bg-slate-800"}`,children:v.jsx("span",{className:`block h-5 w-5 rounded-full bg-white transition transform ${e?"translate-x-4":"translate-x-0.5"} mt-0.5 ml-0.5`})})}function nl({state:e,health:t}){const r=(e||"").toLowerCase(),s=(t||"").toLowerCase();let i="border-slate-700 bg-slate-900 text-slate-300",h=e||"unknown";return s==="healthy"?(i="border-emerald-700/60 bg-emerald-900/40 text-emerald-200",h="healthy"):r.includes("running")||r.includes("up")?i="border-emerald-700/60 bg-emerald-900/40 text-emerald-200":r.includes("restarting")?i="border-amber-700/60 bg-amber-900/40 text-amber-200":r.includes("paused")?i="border-sky-700/60 bg-sky-900/40 text-sky-200":(r.includes("exited")||r.includes("dead"))&&(i="border-rose-700/60 bg-rose-900/40 text-rose-200"),v.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${i}`,children:h})}function fd(e){return e==="in_sync"?v.jsx(Ee,{className:"bg-emerald-900/40 border-emerald-700/40 text-emerald-200",children:"In sync"}):e==="drift"?v.jsx(Ee,{variant:"destructive",children:"Drift"}):v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:"Unknown"})}function _e({title:e,onClick:t,icon:r,disabled:s=!1}){return v.jsx(ee,{size:"icon",variant:"ghost",className:"h-6 w-6 shrink-0",title:e,onClick:t,disabled:s,children:v.jsx(r,{className:"h-3.5 w-3.5 text-slate-200"})})}function pd({host:e,container:t,onClose:r}){const[s,i]=O.useState([]),[h,m]=O.useState(!1),[n,u]=O.useState(!0),d=O.useRef(null),y=O.useRef(null),f=O.useCallback(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[]);O.useEffect(()=>{const x=d.current;if(!x)return;const E=()=>{if(!x)return;const w=x.scrollTop+x.clientHeight>=x.scrollHeight-40;n!==w&&u(w)};return x.addEventListener("scroll",E,{passive:!0}),()=>x.removeEventListener("scroll",E)},[n]),O.useEffect(()=>{var a;if(h){try{(a=y.current)==null||a.close()}catch{}y.current=null;return}const x=`/api/hosts/${encodeURIComponent(e)}/containers/${encodeURIComponent(t)}/logs/stream?tail=200`,E=new EventSource(x,{withCredentials:!0});y.current=E;const w=l=>o=>{const _=(o.data??"").split(/\r?\n/);i(S=>{const b=S.concat(_.map(L=>({stream:l,text:L})));return b.length>2e3?b.slice(b.length-2e3):b}),n&&requestAnimationFrame(f)};return E.addEventListener("stdout",w("stdout")),E.addEventListener("stderr",w("stderr")),E.onerror=()=>{},()=>{try{E.close()}catch{}}},[e,t,h,n,f]);const g=async()=>{const x=s.map(E=>E.text).join(`
`);try{await navigator.clipboard.writeText(x)}catch{}};return v.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:r,children:v.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-5xl p-4",onClick:x=>x.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsxs("div",{className:"text-slate-200 font-semibold",children:["Live Logs: ",v.jsx("span",{className:"text-slate-400",children:e})," / ",v.jsx("span",{className:"text-slate-400",children:t}),v.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:h?"paused":"streaming"}),v.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:n?"auto-scroll":"free scroll"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>m(x=>!x),children:h?"Resume":"Pause"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>u(x=>!x),title:"Toggle following the newest lines",children:n?"Free scroll":"Follow newest"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:g,children:"Copy"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>i([]),children:"Clear"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:r,children:"Close"})]})]}),v.jsxs("div",{ref:d,className:"text-xs text-slate-200 bg-slate-900 border border-slate-800 rounded p-3 max-h-[70vh] h-[60vh] overflow-auto font-mono",children:[s.length===0&&v.jsx("div",{className:"text-slate-500",children:"Waiting for log events"}),s.map((x,E)=>v.jsx("div",{className:x.stream==="stderr"?"text-rose-300":"text-slate-200",children:x.text},E))]})]})})}var _d={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={4567:function(m,n,u){var d=this&&this.__decorate||function(c,_,S,b){var L,p=arguments.length,k=p<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,_,S,b);else for(var C=c.length-1;C>=0;C--)(L=c[C])&&(k=(p<3?L(k):p>3?L(_,S,k):L(_,S))||k);return p>3&&k&&Object.defineProperty(_,S,k),k},y=this&&this.__param||function(c,_){return function(S,b){_(S,b,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const f=u(9042),g=u(6114),x=u(9924),E=u(844),w=u(5596),a=u(4725),l=u(3656);let o=n.AccessibilityManager=class extends E.Disposable{constructor(c,_){super(),this._terminal=c,this._renderService=_,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new x.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new w.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,E.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let _=0;_<c;_++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),g.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,g.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(c)||this._charsToConsume.push(c)}_refreshRows(c,_){this._liveRegionDebouncer.refresh(c,_,this._terminal.rows)}_renderRows(c,_){const S=this._terminal.buffer,b=S.lines.length.toString();for(let L=c;L<=_;L++){const p=S.translateBufferLineToString(S.ydisp+L,!0),k=(S.ydisp+L+1).toString(),C=this._rowElements[L];C&&(p.length===0?C.innerText="":C.textContent=p,C.setAttribute("aria-posinset",k),C.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,_){const S=c.target,b=this._rowElements[_===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==b)return;let L,p;if(_===0?(L=S,p=this._rowElements.pop(),this._rowContainer.removeChild(p)):(L=this._rowElements.shift(),p=S,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),p.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};n.AccessibilityManager=o=d([y(1,a.IRenderService)],o)},3614:(m,n)=>{function u(g){return g.replace(/\r?\n/g,"\r")}function d(g,x){return x?"\x1B[200~"+g+"\x1B[201~":g}function y(g,x,E,w){g=d(g=u(g),E.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(g,!0),x.value=""}function f(g,x,E){const w=E.getBoundingClientRect(),a=g.clientX-w.left-10,l=g.clientY-w.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${a}px`,x.style.top=`${l}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=u,n.bracketTextForPaste=d,n.copyHandler=function(g,x){g.clipboardData&&g.clipboardData.setData("text/plain",x.selectionText),g.preventDefault()},n.handlePasteEvent=function(g,x,E,w){g.stopPropagation(),g.clipboardData&&y(g.clipboardData.getData("text/plain"),x,E,w)},n.paste=y,n.moveTextAreaUnderMouseCursor=f,n.rightClickHandler=function(g,x,E,w,a){f(g,x,E),a&&w.rightClickSelect(g),x.value=w.selectionText,x.select()}},7239:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const d=u(1505);n.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(y,f,g){this._css.set(y,f,g)}getCss(y,f){return this._css.get(y,f)}setColor(y,f,g){this._color.set(y,f,g)}getColor(y,f){return this._color.get(y,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(u,d,y,f){u.addEventListener(d,y,f);let g=!1;return{dispose:()=>{g||(g=!0,u.removeEventListener(d,y,f))}}}},6465:function(m,n,u){var d=this&&this.__decorate||function(a,l,o,c){var _,S=arguments.length,b=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,o,c);else for(var L=a.length-1;L>=0;L--)(_=a[L])&&(b=(S<3?_(b):S>3?_(l,o,b):_(l,o))||b);return S>3&&b&&Object.defineProperty(l,o,b),b},y=this&&this.__param||function(a,l){return function(o,c){l(o,c,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const f=u(3656),g=u(8460),x=u(844),E=u(2585);let w=n.Linkifier2=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{const l=this._linkProviders.indexOf(a);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(a,l,o){this._element=a,this._mouseService=l,this._renderService=o,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const o=a.composedPath();for(let c=0;c<o.length;c++){const _=o[c];if(_.classList.contains("xterm"))break;if(_.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,l){var o,c;this._activeProviderReplies&&l||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(S=>{S==null||S.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let _=!1;for(const[S,b]of this._linkProviders.entries())l?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(S)&&(_=this._checkLinkProviderResult(S,a,_)):b.provideLinks(a.y,L=>{var p,k;if(this._isMouseOut)return;const C=L==null?void 0:L.map(j=>({link:j}));(p=this._activeProviderReplies)===null||p===void 0||p.set(S,C),_=this._checkLinkProviderResult(S,a,_),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,l){const o=new Set;for(let c=0;c<l.size;c++){const _=l.get(c);if(_)for(let S=0;S<_.length;S++){const b=_[S],L=b.link.range.start.y<a?0:b.link.range.start.x,p=b.link.range.end.y>a?this._bufferService.cols:b.link.range.end.x;for(let k=L;k<=p;k++){if(o.has(k)){_.splice(S--,1);break}o.add(k)}}}}_checkLinkProviderResult(a,l,o){var c;if(!this._activeProviderReplies)return o;const _=this._activeProviderReplies.get(a);let S=!1;for(let b=0;b<a;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(S=!0);if(!S&&_){const b=_.find(L=>this._linkAtPosition(L.link,l));b&&(o=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let b=0;b<this._activeProviderReplies.size;b++){const L=(c=this._activeProviderReplies.get(b))===null||c===void 0?void 0:c.find(p=>this._linkAtPosition(p.link,l));if(L){o=!0,this._handleNewLink(L);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(a.link,l)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:o=>{var c,_;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((_=this._element)===null||_===void 0||_.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.underline},set:o=>{var c,_,S;!((c=this._currentLink)===null||c===void 0)&&c.state&&((S=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||S===void 0?void 0:S.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const c=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,_=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_&&(this._clearCurrentLink(c,_),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(a,l,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(o,l.text)}_fireUnderlineEvent(a,l){const o=a.range,c=this._bufferService.buffer.ydisp,_=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(_)}_linkLeave(a,l,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(o,l.text)}_linkAtPosition(a,l){const o=a.range.start.y*this._bufferService.cols+a.range.start.x,c=a.range.end.y*this._bufferService.cols+a.range.end.x,_=l.y*this._bufferService.cols+l.x;return o<=_&&_<=c}_positionFromMouseEvent(a,l,o){const c=o.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,l,o,c,_){return{x1:a,y1:l,x2:o,y2:c,cols:this._bufferService.cols,fg:_}}};n.Linkifier2=w=d([y(0,E.IBufferService)],w)},9042:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,n,u){var d=this&&this.__decorate||function(w,a,l,o){var c,_=arguments.length,S=_<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(w,a,l,o);else for(var b=w.length-1;b>=0;b--)(c=w[b])&&(S=(_<3?c(S):_>3?c(a,l,S):c(a,l))||S);return _>3&&S&&Object.defineProperty(a,l,S),S},y=this&&this.__param||function(w,a){return function(l,o){a(l,o,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const f=u(511),g=u(2585);let x=n.OscLinkProvider=class{constructor(w,a,l){this._bufferService=w,this._optionsService=a,this._oscLinkService=l}provideLinks(w,a){var l;const o=this._bufferService.buffer.lines.get(w-1);if(!o)return void a(void 0);const c=[],_=this._optionsService.rawOptions.linkHandler,S=new f.CellData,b=o.getTrimmedLength();let L=-1,p=-1,k=!1;for(let C=0;C<b;C++)if(p!==-1||o.hasContent(C)){if(o.loadCell(C,S),S.hasExtendedAttrs()&&S.extended.urlId){if(p===-1){p=C,L=S.extended.urlId;continue}k=S.extended.urlId!==L}else p!==-1&&(k=!0);if(k||p!==-1&&C===b-1){const j=(l=this._oscLinkService.getLinkData(L))===null||l===void 0?void 0:l.uri;if(j){const D={start:{x:p+1,y:w},end:{x:C+(k||C!==b-1?0:1),y:w}};let N=!1;if(!(_!=null&&_.allowNonHttpProtocols))try{const I=new URL(j);["http:","https:"].includes(I.protocol)||(N=!0)}catch{N=!0}N||c.push({text:j,range:D,activate:(I,B)=>_?_.activate(I,B,D):E(0,B),hover:(I,B)=>{var $;return($=_==null?void 0:_.hover)===null||$===void 0?void 0:$.call(_,I,B,D)},leave:(I,B)=>{var $;return($=_==null?void 0:_.leave)===null||$===void 0?void 0:$.call(_,I,B,D)}})}k=!1,S.hasExtendedAttrs()&&S.extended.urlId?(p=C,L=S.extended.urlId):(p=-1,L=-1)}}a(c)}};function E(w,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}n.OscLinkProvider=x=d([y(0,g.IBufferService),y(1,g.IOptionsService),y(2,g.IOscLinkService)],x)},6193:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(u,d){this._parentWindow=u,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(u,d,y){this._rowCount=y,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},5596:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const d=u(844);class y extends d.Disposable{constructor(g){super(),this._parentWindow=g,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(g){this._listener&&this.clearListener(),this._listener=g,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=y},3236:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const d=u(3614),y=u(3656),f=u(6465),g=u(9042),x=u(3730),E=u(1680),w=u(3107),a=u(5744),l=u(2950),o=u(1296),c=u(428),_=u(4269),S=u(5114),b=u(8934),L=u(3230),p=u(9312),k=u(4725),C=u(6731),j=u(8055),D=u(8969),N=u(8460),I=u(844),B=u(6114),$=u(8437),W=u(2584),R=u(7399),A=u(5941),P=u(9074),M=u(2585),H=u(5435),z=u(4567),X=typeof window<"u"?window.document:null;class K extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(T={}){super(T),this.browser=B,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new N.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new N.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new N.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new N.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new N.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new N.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new N.EventEmitter),this._onBlur=this.register(new N.EventEmitter),this._onA11yCharEmitter=this.register(new N.EventEmitter),this._onA11yTabEmitter=this.register(new N.EventEmitter),this._onWillOpen=this.register(new N.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((F,V)=>this.refresh(F,V))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(F=>this._reportWindowsOptions(F))),this.register(this._inputHandler.onColor(F=>this._handleColorEvent(F))),this.register((0,N.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,N.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,N.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,N.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(F=>this._afterResize(F.cols,F.rows))),this.register((0,I.toDisposable)(()=>{var F,V;this._customKeyEventHandler=void 0,(V=(F=this.element)===null||F===void 0?void 0:F.parentNode)===null||V===void 0||V.removeChild(this.element)}))}_handleColorEvent(T){if(this._themeService)for(const F of T){let V,U="";switch(F.index){case 256:V="foreground",U="10";break;case 257:V="background",U="11";break;case 258:V="cursor",U="12";break;default:V="ansi",U="4;"+F.index}switch(F.type){case 0:const Y=j.color.toColorRGB(V==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[V]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${U};${(0,A.toRgbString)(Y)}${W.C1_ESCAPED.ST}`);break;case 1:if(V==="ansi")this._themeService.modifyColors(q=>q.ansi[F.index]=j.rgba.toColor(...F.color));else{const q=V;this._themeService.modifyColors(Z=>Z[q]=j.rgba.toColor(...F.color))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(T){T?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(T){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(T),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var T;return(T=this.textarea)===null||T===void 0?void 0:T.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const T=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(T);if(!F)return;const V=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,Y=F.getWidth(V),q=this._renderService.dimensions.css.cell.width*Y,Z=this.buffer.y*this._renderService.dimensions.css.cell.height,oe=V*this._renderService.dimensions.css.cell.width;this.textarea.style.left=oe+"px",this.textarea.style.top=Z+"px",this.textarea.style.width=q+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,y.addDisposableDomListener)(this.element,"copy",F=>{this.hasSelection()&&(0,d.copyHandler)(F,this._selectionService)}));const T=F=>(0,d.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,y.addDisposableDomListener)(this.textarea,"paste",T)),this.register((0,y.addDisposableDomListener)(this.element,"paste",T)),B.isFirefox?this.register((0,y.addDisposableDomListener)(this.element,"mousedown",F=>{F.button===2&&(0,d.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,y.addDisposableDomListener)(this.element,"contextmenu",F=>{(0,d.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),B.isLinux&&this.register((0,y.addDisposableDomListener)(this.element,"auxclick",F=>{F.button===1&&(0,d.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,y.addDisposableDomListener)(this.textarea,"keyup",T=>this._keyUp(T),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keydown",T=>this._keyDown(T),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keypress",T=>this._keyPress(T),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionupdate",T=>this._compositionHelper.compositionupdate(T))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,y.addDisposableDomListener)(this.textarea,"input",T=>this._inputEvent(T),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(T){var F;if(!T)throw new Error("Terminal requires a parent element.");T.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=T.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),T.appendChild(this.element);const V=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),B.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(F=this._document.defaultView)!==null&&F!==void 0?F:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,y.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,y.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(C.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(V);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(p.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,y.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const T=this,F=this.element;function V(q){const Z=T._mouseService.getMouseReportCoords(q,T.screenElement);if(!Z)return!1;let oe,ye;switch(q.overrideType||q.type){case"mousemove":ye=32,q.buttons===void 0?(oe=3,q.button!==void 0&&(oe=q.button<3?q.button:3)):oe=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ye=0,oe=q.button<3?q.button:3;break;case"mousedown":ye=1,oe=q.button<3?q.button:3;break;case"wheel":if(T.viewport.getLinesScrolled(q)===0)return!1;ye=q.deltaY<0?0:1,oe=4;break;default:return!1}return!(ye===void 0||oe===void 0||oe>4)&&T.coreMouseService.triggerMouseEvent({col:Z.col,row:Z.row,x:Z.x,y:Z.y,button:oe,action:ye,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:q=>(V(q),q.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(q)),wheel:q=>(V(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&V(q)},mousemove:q=>{q.buttons||V(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?U.mousemove||(F.addEventListener("mousemove",Y.mousemove),U.mousemove=Y.mousemove):(F.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&q?U.wheel||(F.addEventListener("wheel",Y.wheel,{passive:!1}),U.wheel=Y.wheel):(F.removeEventListener("wheel",U.wheel),U.wheel=null),2&q?U.mouseup||(F.addEventListener("mouseup",Y.mouseup),U.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),F.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&q?U.mousedrag||(U.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,y.addDisposableDomListener)(F,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return V(q),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(q)})),this.register((0,y.addDisposableDomListener)(F,"wheel",q=>{if(!U.wheel){if(!this.buffer.hasScrollback){const Z=this.viewport.getLinesScrolled(q);if(Z===0)return;const oe=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let ye="";for(let Tt=0;Tt<Math.abs(Z);Tt++)ye+=oe;return this.coreService.triggerDataEvent(ye,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,y.addDisposableDomListener)(F,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,y.addDisposableDomListener)(F,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(T,F){var V;(V=this._renderService)===null||V===void 0||V.refreshRows(T,F)}updateCursorStyle(T){var F;!((F=this._selectionService)===null||F===void 0)&&F.shouldColumnSelect(T)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(T,F,V=0){var U;V===1?(super.scrollLines(T,F,V),this.refresh(0,this.rows-1)):(U=this.viewport)===null||U===void 0||U.scrollLines(T)}paste(T){(0,d.paste)(T,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(T){this._customKeyEventHandler=T}registerLinkProvider(T){return this.linkifier2.registerLinkProvider(T)}registerCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(T);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(T)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(T){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+T)}registerDecoration(T){return this._decorationService.registerDecoration(T)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(T,F,V){this._selectionService.setSelection(T,F,V)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var T;(T=this._selectionService)===null||T===void 0||T.clearSelection()}selectAll(){var T;(T=this._selectionService)===null||T===void 0||T.selectAll()}selectLines(T,F){var V;(V=this._selectionService)===null||V===void 0||V.selectLines(T,F)}_keyDown(T){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&T.altKey;if(!F&&!this._compositionHelper.keydown(T))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||T.key!=="Dead"&&T.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const V=(0,R.evaluateKeyboardEvent)(T,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(T),V.type===3||V.type===2){const U=this.rows-1;return this.scrollLines(V.type===2?-U:U),this.cancel(T,!0)}return V.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,T)||(V.cancel&&this.cancel(T,!0),!V.key||!!(T.key&&!T.ctrlKey&&!T.altKey&&!T.metaKey&&T.key.length===1&&T.key.charCodeAt(0)>=65&&T.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(V.key!==W.C0.ETX&&V.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:V.key,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(V.key,!0),!this.optionsService.rawOptions.screenReaderMode||T.altKey||T.ctrlKey?this.cancel(T,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(T,F){const V=T.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||T.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||T.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?V:V&&(!F.keyCode||F.keyCode>47)}_keyUp(T){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1||(function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18}(T)||this.focus(),this.updateCursorStyle(T),this._keyPressHandled=!1)}_keyPress(T){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;if(this.cancel(T),T.charCode)F=T.charCode;else if(T.which===null||T.which===void 0)F=T.keyCode;else{if(T.which===0||T.charCode===0)return!1;F=T.which}return!(!F||(T.altKey||T.ctrlKey||T.metaKey)&&!this._isThirdLevelShift(this.browser,T)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(T){if(T.data&&T.inputType==="insertText"&&(!T.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=T.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(T),!0}return!1}resize(T,F){T!==this.cols||F!==this.rows?super.resize(T,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(T,F){var V,U;(V=this._charSizeService)===null||V===void 0||V.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){var T;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(T=this.viewport)===null||T===void 0||T.reset(),this.refresh(0,this.rows-1)}}reset(){var T,F;this.options.rows=this.rows,this.options.cols=this.cols;const V=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)===null||T===void 0||T.reset(),this._decorationService.reset(),(F=this.viewport)===null||F===void 0||F.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1)}clearTextureAtlas(){var T;(T=this._renderService)===null||T===void 0||T.clearTextureAtlas()}_reportFocus(){var T;!((T=this.element)===null||T===void 0)&&T.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(T){if(this._renderService)switch(T){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),V=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${V};${F}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${Y};${U}t`)}}cancel(T,F){if(this.options.cancelEvents||F)return T.preventDefault(),T.stopPropagation(),!1}}n.Terminal=K},9924:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(u,d=1e3){this._renderCallback=u,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,d,y){this._rowCount=y,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=f-this._lastRefreshMs,x=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d)}}},1680:function(m,n,u){var d=this&&this.__decorate||function(l,o,c,_){var S,b=arguments.length,L=b<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,c,_);else for(var p=l.length-1;p>=0;p--)(S=l[p])&&(L=(b<3?S(L):b>3?S(o,c,L):S(o,c))||L);return b>3&&L&&Object.defineProperty(o,c,L),L},y=this&&this.__param||function(l,o){return function(c,_){o(c,_,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const f=u(3656),g=u(4725),x=u(8460),E=u(844),w=u(2585);let a=n.Viewport=class extends E.Disposable{constructor(l,o,c,_,S,b,L,p){super(),this._viewportElement=l,this._scrollArea=o,this._bufferService=c,this._optionsService=_,this._charSizeService=S,this._renderService=b,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(p.colors),this.register(p.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const o=this._getPixelsScrolled(l);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(l,o){var c;let _,S="";const b=[],L=o??this._bufferService.buffer.lines.length,p=this._bufferService.buffer.lines;for(let k=l;k<L;k++){const C=p.get(k);if(!C)continue;const j=(c=p.get(k+1))===null||c===void 0?void 0:c.isWrapped;if(S+=C.translateToString(!j),!j||k===p.length-1){const D=document.createElement("div");D.textContent=S,b.push(D),S.length>0&&(_=D),S=""}}return{bufferElements:b,cursorElement:_}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(l,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const o=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}};n.Viewport=a=d([y(2,w.IBufferService),y(3,w.IOptionsService),y(4,g.ICharSizeService),y(5,g.IRenderService),y(6,g.ICoreBrowserService),y(7,g.IThemeService)],a)},3107:function(m,n,u){var d=this&&this.__decorate||function(a,l,o,c){var _,S=arguments.length,b=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,o,c);else for(var L=a.length-1;L>=0;L--)(_=a[L])&&(b=(S<3?_(b):S>3?_(l,o,b):_(l,o))||b);return S>3&&b&&Object.defineProperty(l,o,b),b},y=this&&this.__param||function(a,l){return function(o,c){l(o,c,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const f=u(3656),g=u(4725),x=u(844),E=u(2585);let w=n.BufferDecorationRenderer=class extends x.Disposable{constructor(a,l,o,c){super(),this._screenElement=a,this._bufferService=l,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,x.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var l,o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((l=a==null?void 0:a.options)===null||l===void 0?void 0:l.layer)==="top"),c.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const _=(o=a.options.x)!==null&&o!==void 0?o:0;return _&&_>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(a,c),c}_refreshStyle(a){const l=a.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let o=this._decorationElements.get(a);o||(o=this._createElement(a),a.element=o,this._decorationElements.set(a,o),this._container.appendChild(o),a.onDispose(()=>{this._decorationElements.delete(a),o.remove()})),o.style.top=l*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(o)}}_refreshXPosition(a,l=a.element){var o;if(!l)return;const c=(o=a.options.x)!==null&&o!==void 0?o:0;(a.options.anchor||"left")==="right"?l.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var l;(l=this._decorationElements.get(a))===null||l===void 0||l.remove(),this._decorationElements.delete(a),a.dispose()}};n.BufferDecorationRenderer=w=d([y(1,E.IBufferService),y(2,E.IDecorationService),y(3,g.IRenderService)],w)},5871:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const d of this._zones)if(d.color===u.options.overviewRulerOptions.color&&d.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,u.marker.line))return;if(this._lineAdjacentToZone(d,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(d,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,d){return d>=u.startBufferLine&&d<=u.endBufferLine}_lineAdjacentToZone(u,d,y){return d>=u.startBufferLine-this._linePadding[y||"full"]&&d<=u.endBufferLine+this._linePadding[y||"full"]}_addLineToZone(u,d){u.startBufferLine=Math.min(u.startBufferLine,d),u.endBufferLine=Math.max(u.endBufferLine,d)}}},5744:function(m,n,u){var d=this&&this.__decorate||function(_,S,b,L){var p,k=arguments.length,C=k<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,S,b,L);else for(var j=_.length-1;j>=0;j--)(p=_[j])&&(C=(k<3?p(C):k>3?p(S,b,C):p(S,b))||C);return k>3&&C&&Object.defineProperty(S,b,C),C},y=this&&this.__param||function(_,S){return function(b,L){S(b,L,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const f=u(5871),g=u(3656),x=u(4725),E=u(844),w=u(2585),a={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let c=n.OverviewRulerRenderer=class extends E.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,S,b,L,p,k,C){var j;super(),this._viewportElement=_,this._screenElement=S,this._bufferService=b,this._decorationService=L,this._renderService=p,this._optionsService=k,this._coreBrowseService=C,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(j=this._viewportElement.parentElement)===null||j===void 0||j.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,E.toDisposable)(()=>{var N;(N=this._canvas)===null||N===void 0||N.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,g.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=_,l.center=S,l.right=_,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=l.left,o.right=l.left+l.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowseService.dpr);a.left=S,a.center=S,a.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const S of _)S.position!=="full"&&this._renderColorZone(S);for(const S of _)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(o[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-a[_.position||"full"]/2),l[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[_.position||"full"]))}_queueRefresh(_,S){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n.OverviewRulerRenderer=c=d([y(2,w.IBufferService),y(3,w.IDecorationService),y(4,x.IRenderService),y(5,w.IOptionsService),y(6,x.ICoreBrowserService)],c)},2950:function(m,n,u){var d=this&&this.__decorate||function(w,a,l,o){var c,_=arguments.length,S=_<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(w,a,l,o);else for(var b=w.length-1;b>=0;b--)(c=w[b])&&(S=(_<3?c(S):_>3?c(a,l,S):c(a,l))||S);return _>3&&S&&Object.defineProperty(a,l,S),S},y=this&&this.__param||function(w,a){return function(l,o){a(l,o,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const f=u(4725),g=u(2585),x=u(2584);let E=n.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,a,l,o,c,_){this._textarea=w,this._compositionView=a,this._bufferService=l,this._optionsService=o,this._coreService=c,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const a=this._textarea.value,l=a.replace(w,"");this._dataAlreadySent=l,a.length>w.length?this._coreService.triggerDataEvent(l,!0):a.length<w.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):a.length===w.length&&a!==w&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}w||setTimeout(()=>this.updateCompositionElements(!0),0)}}};n.CompositionHelper=E=d([y(2,g.IBufferService),y(3,g.IOptionsService),y(4,g.ICoreService),y(5,f.IRenderService)],E)},9806:(m,n)=>{function u(d,y,f){const g=f.getBoundingClientRect(),x=d.getComputedStyle(f),E=parseInt(x.getPropertyValue("padding-left")),w=parseInt(x.getPropertyValue("padding-top"));return[y.clientX-g.left-E,y.clientY-g.top-w]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=u,n.getCoords=function(d,y,f,g,x,E,w,a,l){if(!E)return;const o=u(d,y,f);return o?(o[0]=Math.ceil((o[0]+(l?w/2:0))/w),o[1]=Math.ceil(o[1]/a),o[0]=Math.min(Math.max(o[0],1),g+(l?1:0)),o[1]=Math.min(Math.max(o[1],1),x),o):void 0}},9504:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const d=u(2584);function y(a,l,o,c){const _=a-f(a,o),S=l-f(l,o),b=Math.abs(_-S)-function(L,p,k){let C=0;const j=L-f(L,k),D=p-f(p,k);for(let N=0;N<Math.abs(j-D);N++){const I=g(L,p)==="A"?-1:1,B=k.buffer.lines.get(j+I*N);B!=null&&B.isWrapped&&C++}return C}(a,l,o);return w(b,E(g(a,l),c))}function f(a,l){let o=0,c=l.buffer.lines.get(a),_=c==null?void 0:c.isWrapped;for(;_&&a>=0&&a<l.rows;)o++,c=l.buffer.lines.get(--a),_=c==null?void 0:c.isWrapped;return o}function g(a,l){return a>l?"A":"B"}function x(a,l,o,c,_,S){let b=a,L=l,p="";for(;b!==o||L!==c;)b+=_?1:-1,_&&b>S.cols-1?(p+=S.buffer.translateBufferLineToString(L,!1,a,b),b=0,a=0,L++):!_&&b<0&&(p+=S.buffer.translateBufferLineToString(L,!1,0,a+1),b=S.cols-1,a=b,L--);return p+S.buffer.translateBufferLineToString(L,!1,a,b)}function E(a,l){const o=l?"O":"[";return d.C0.ESC+o+a}function w(a,l){a=Math.floor(a);let o="";for(let c=0;c<a;c++)o+=l;return o}n.moveToCellSequence=function(a,l,o,c){const _=o.buffer.x,S=o.buffer.y;if(!o.buffer.hasScrollback)return function(p,k,C,j,D,N){return y(k,j,D,N).length===0?"":w(x(p,k,p,k-f(k,D),!1,D).length,E("D",N))}(_,S,0,l,o,c)+y(S,l,o,c)+function(p,k,C,j,D,N){let I;I=y(k,j,D,N).length>0?j-f(j,D):k;const B=j,$=function(W,R,A,P,M,H){let z;return z=y(A,P,M,H).length>0?P-f(P,M):R,W<A&&z<=P||W>=A&&z<P?"C":"D"}(p,k,C,j,D,N);return w(x(p,I,C,B,$==="C",D).length,E($,N))}(_,S,a,l,o,c);let b;if(S===l)return b=_>a?"D":"C",w(Math.abs(_-a),E(b,c));b=S>l?"D":"C";const L=Math.abs(S-l);return w(function(p,k){return k.cols-p}(S>l?a:_,o)+(L-1)*o.cols+1+((S>l?_:a)-1),E(b,c))}},1296:function(m,n,u){var d=this&&this.__decorate||function(D,N,I,B){var $,W=arguments.length,R=W<3?N:B===null?B=Object.getOwnPropertyDescriptor(N,I):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(D,N,I,B);else for(var A=D.length-1;A>=0;A--)($=D[A])&&(R=(W<3?$(R):W>3?$(N,I,R):$(N,I))||R);return W>3&&R&&Object.defineProperty(N,I,R),R},y=this&&this.__param||function(D,N){return function(I,B){N(I,B,D)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const f=u(3787),g=u(2550),x=u(2223),E=u(6171),w=u(4725),a=u(8055),l=u(8460),o=u(844),c=u(2585),_="xterm-dom-renderer-owner-",S="xterm-rows",b="xterm-fg-",L="xterm-bg-",p="xterm-focus",k="xterm-selection";let C=1,j=n.DomRenderer=class extends o.Disposable{constructor(D,N,I,B,$,W,R,A,P,M){super(),this._element=D,this._screenElement=N,this._viewportElement=I,this._linkifier2=B,this._charSizeService=W,this._optionsService=R,this._bufferService=A,this._coreBrowserService=P,this._themeService=M,this._terminalClass=C++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(_+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(_+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const I of this._rowElements)I.style.width=`${this.dimensions.css.canvas.width}px`,I.style.height=`${this.dimensions.css.cell.height}px`,I.style.lineHeight=`${this.dimensions.css.cell.height}px`,I.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const N=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=N,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let N=`${this._terminalSelector} .${S} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;N+=`${this._terminalSelector} .${S} .xterm-dim { color: ${a.color.multiplyOpacity(D.foreground,.5).css};}`,N+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,N+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",N+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,N+=`${this._terminalSelector} .${S}.${p} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${p} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,N+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[I,B]of D.ansi.entries())N+=`${this._terminalSelector} .${b}${I} { color: ${B.css}; }${this._terminalSelector} .${b}${I}.xterm-dim { color: ${a.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${L}${I} { background-color: ${B.css}; }`;N+=`${this._terminalSelector} .${b}${x.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(D.background).css}; }${this._terminalSelector} .${b}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${L}${x.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=N}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,N){for(let I=this._rowElements.length;I<=N;I++){const B=document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>N;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,N){this._refreshRowElements(D,N),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(p)}handleFocus(){this._rowContainer.classList.add(p),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,N,I){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,N,I),this.renderRows(0,this._bufferService.rows-1),!D||!N)return;const B=D[1]-this._bufferService.buffer.ydisp,$=N[1]-this._bufferService.buffer.ydisp,W=Math.max(B,0),R=Math.min($,this._bufferService.rows-1);if(W>=this._bufferService.rows||R<0)return;const A=document.createDocumentFragment();if(I){const P=D[0]>N[0];A.appendChild(this._createSelectionElement(W,P?N[0]:D[0],P?D[0]:N[0],R-W+1))}else{const P=B===W?D[0]:0,M=W===$?N[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(W,P,M));const H=R-W-1;if(A.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,H)),W!==R){const z=$===R?N[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(R,0,z))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,N,I,B=1){const $=document.createElement("div");return $.style.height=B*this.dimensions.css.cell.height+"px",$.style.top=D*this.dimensions.css.cell.height+"px",$.style.left=N*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(I-N)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,N){const I=this._bufferService.buffer,B=I.ybase+I.y,$=Math.min(I.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=D;P<=N;P++){const M=P+I.ydisp,H=this._rowElements[P],z=I.lines.get(M);if(!H||!z)break;H.replaceChildren(...this._rowFactory.createRow(z,M,M===B,R,A,$,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${_}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,N,I,B,$,W){I<0&&(D=0),B<0&&(N=0);const R=this._bufferService.rows-1;I=Math.max(Math.min(I,R),0),B=Math.max(Math.min(B,R),0),$=Math.min($,this._bufferService.cols);const A=this._bufferService.buffer,P=A.ybase+A.y,M=Math.min(A.x,$-1),H=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=I;K<=B;++K){const J=K+A.ydisp,T=this._rowElements[K],F=A.lines.get(J);if(!T||!F)break;T.replaceChildren(...this._rowFactory.createRow(F,J,J===P,z,X,M,H,this.dimensions.css.cell.width,this._widthCache,W?K===I?D:0:-1,W?(K===B?N:$)-1:-1))}}};n.DomRenderer=j=d([y(4,c.IInstantiationService),y(5,w.ICharSizeService),y(6,c.IOptionsService),y(7,c.IBufferService),y(8,w.ICoreBrowserService),y(9,w.IThemeService)],j)},3787:function(m,n,u){var d=this&&this.__decorate||function(b,L,p,k){var C,j=arguments.length,D=j<3?L:k===null?k=Object.getOwnPropertyDescriptor(L,p):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,L,p,k);else for(var N=b.length-1;N>=0;N--)(C=b[N])&&(D=(j<3?C(D):j>3?C(L,p,D):C(L,p))||D);return j>3&&D&&Object.defineProperty(L,p,D),D},y=this&&this.__param||function(b,L){return function(p,k){L(p,k,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=void 0;const f=u(2223),g=u(643),x=u(511),E=u(2585),w=u(8055),a=u(4725),l=u(4269),o=u(6171),c=u(3734);let _=n.DomRendererRowFactory=class{constructor(b,L,p,k,C,j,D){this._document=b,this._characterJoinerService=L,this._optionsService=p,this._coreBrowserService=k,this._coreService=C,this._decorationService=j,this._themeService=D,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,L,p){this._selectionStart=b,this._selectionEnd=L,this._columnSelectMode=p}createRow(b,L,p,k,C,j,D,N,I,B,$){const W=[],R=this._characterJoinerService.getJoinedCharacters(L),A=this._themeService.colors;let P,M=b.getNoBgTrimmedLength();p&&M<j+1&&(M=j+1);let H=0,z="",X=0,K=0,J=0,T=!1,F=0,V=!1,U=0;const Y=[],q=B!==-1&&$!==-1;for(let Z=0;Z<M;Z++){b.loadCell(Z,this._workCell);let oe=this._workCell.getWidth();if(oe===0)continue;let ye=!1,Tt=Z,te=this._workCell;if(R.length>0&&Z===R[0][0]){ye=!0;const he=R.shift();te=new l.JoinedCellData(this._workCell,b.translateToString(!0,he[0],he[1]),he[1]-he[0]),Tt=he[1]-1,oe=te.getWidth()}const Zr=this._isCellInSelection(Z,L),Dn=p&&Z===j,jn=q&&Z>=B&&Z<=$;let Tn=!1;this._decorationService.forEachDecorationAtCell(Z,L,void 0,he=>{Tn=!0});let ri=te.getChars()||g.WHITESPACE_CELL_CHAR;if(ri===" "&&(te.isUnderline()||te.isOverline())&&(ri=""),U=oe*N-I.get(ri,te.isBold(),te.isItalic()),P){if(H&&(Zr&&V||!Zr&&!V&&te.bg===X)&&(Zr&&V&&A.selectionForeground||te.fg===K)&&te.extended.ext===J&&jn===T&&U===F&&!Dn&&!ye&&!Tn){z+=ri,H++;continue}H&&(P.textContent=z),P=this._document.createElement("span"),H=0,z=""}else P=this._document.createElement("span");if(X=te.bg,K=te.fg,J=te.extended.ext,T=jn,F=U,V=Zr,ye&&j>=Z&&j<=Tt&&(j=Z),!this._coreService.isCursorHidden&&Dn){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&Y.push("xterm-cursor-blink"),Y.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(C)switch(C){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(te.isBold()&&Y.push("xterm-bold"),te.isItalic()&&Y.push("xterm-italic"),te.isDim()&&Y.push("xterm-dim"),z=te.isInvisible()?g.WHITESPACE_CELL_CHAR:te.getChars()||g.WHITESPACE_CELL_CHAR,te.isUnderline()&&(Y.push(`xterm-underline-${te.extended.underlineStyle}`),z===" "&&(z=""),!te.isUnderlineColorDefault()))if(te.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(te.getUnderlineColor()).join(",")})`;else{let he=te.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&te.isBold()&&he<8&&(he+=8),P.style.textDecorationColor=A.ansi[he].css}te.isOverline()&&(Y.push("xterm-overline"),z===" "&&(z="")),te.isStrikethrough()&&Y.push("xterm-strikethrough"),jn&&(P.style.textDecoration="underline");let Qe=te.getFgColor(),es=te.getFgColorMode(),ft=te.getBgColor(),ts=te.getBgColorMode();const Pn=!!te.isInverse();if(Pn){const he=Qe;Qe=ft,ft=he;const Dd=es;es=ts,ts=Dd}let Pt,An,At,rs=!1;switch(this._decorationService.forEachDecorationAtCell(Z,L,void 0,he=>{he.options.layer!=="top"&&rs||(he.backgroundColorRGB&&(ts=50331648,ft=he.backgroundColorRGB.rgba>>8&16777215,Pt=he.backgroundColorRGB),he.foregroundColorRGB&&(es=50331648,Qe=he.foregroundColorRGB.rgba>>8&16777215,An=he.foregroundColorRGB),rs=he.options.layer==="top")}),!rs&&Zr&&(Pt=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,ft=Pt.rgba>>8&16777215,ts=50331648,rs=!0,A.selectionForeground&&(es=50331648,Qe=A.selectionForeground.rgba>>8&16777215,An=A.selectionForeground)),rs&&Y.push("xterm-decoration-top"),ts){case 16777216:case 33554432:At=A.ansi[ft],Y.push(`xterm-bg-${ft}`);break;case 50331648:At=w.rgba.toColor(ft>>16,ft>>8&255,255&ft),this._addStyle(P,`background-color:#${S((ft>>>0).toString(16),"0",6)}`);break;default:Pn?(At=A.foreground,Y.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):At=A.background}switch(Pt||te.isDim()&&(Pt=w.color.multiplyOpacity(At,.5)),es){case 16777216:case 33554432:te.isBold()&&Qe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Qe+=8),this._applyMinimumContrast(P,At,A.ansi[Qe],te,Pt,void 0)||Y.push(`xterm-fg-${Qe}`);break;case 50331648:const he=w.rgba.toColor(Qe>>16&255,Qe>>8&255,255&Qe);this._applyMinimumContrast(P,At,he,te,Pt,An)||this._addStyle(P,`color:#${S(Qe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,At,A.foreground,te,Pt,void 0)||Pn&&Y.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}Y.length&&(P.className=Y.join(" "),Y.length=0),Dn||ye||Tn?P.textContent=z:H++,U!==this.defaultSpacing&&(P.style.letterSpacing=`${U}px`),W.push(P),Z=Tt}return P&&H&&(P.textContent=z),W}_applyMinimumContrast(b,L,p,k,C,j){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(k.getCode()))return!1;const D=this._getContrastCache(k);let N;if(C||j||(N=D.getColor(L.rgba,p.rgba)),N===void 0){const I=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);N=w.color.ensureContrastRatio(C||L,j||p,I),D.setColor((C||L).rgba,(j||p).rgba,N??null)}return!!N&&(this._addStyle(b,`color:${N.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,L){b.setAttribute("style",`${b.getAttribute("style")||""}${L};`)}_isCellInSelection(b,L){const p=this._selectionStart,k=this._selectionEnd;return!(!p||!k)&&(this._columnSelectMode?p[0]<=k[0]?b>=p[0]&&L>=p[1]&&b<k[0]&&L<=k[1]:b<p[0]&&L>=p[1]&&b>=k[0]&&L<=k[1]:L>p[1]&&L<k[1]||p[1]===k[1]&&L===p[1]&&b>=p[0]&&b<k[0]||p[1]<k[1]&&L===k[1]&&b<k[0]||p[1]<k[1]&&L===p[1]&&b>=p[0])}};function S(b,L,p){for(;b.length<p;)b=L+b;return b}n.DomRendererRowFactory=_=d([y(1,a.ICharacterJoinerService),y(2,E.IOptionsService),y(3,a.ICoreBrowserService),y(4,E.ICoreService),y(5,E.IDecorationService),y(6,a.IThemeService)],_)},2550:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WidthCache=void 0,n.WidthCache=class{constructor(u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=u.createElement("span"),y=u.createElement("span");y.style.fontWeight="bold";const f=u.createElement("span");f.style.fontStyle="italic";const g=u.createElement("span");g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[d,y,f,g],this._container.appendChild(d),this._container.appendChild(y),this._container.appendChild(f),this._container.appendChild(g),u.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,d,y,f){u===this._font&&d===this._fontSize&&y===this._weight&&f===this._weightBold||(this._font=u,this._fontSize=d,this._weight=y,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${y}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${y}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(u,d,y){let f=0;if(!d&&!y&&u.length===1&&(f=u.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(u,0);let g=u;d&&(g+="B"),y&&(g+="I");let x=this._holey.get(g);if(x===void 0){let E=0;d&&(E|=1),y&&(E|=2),x=this._measure(u,E),this._holey.set(g,x)}return x}_measure(u,d){const y=this._measureElements[d];return y.textContent=u.repeat(32),y.offsetWidth/32}}},2223:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const d=u(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(m,n)=>{function u(d){return 57508<=d&&d<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},n.isPowerlineGlyph=u,n.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},n.excludeFromContrastRatioDemands=function(d){return u(d)||function(y){return 9472<=y&&y<=9631}(d)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,d=this.selectionEnd;return!(!u||!d)&&(u[1]>d[1]||u[1]===d[1]&&u[0]>d[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,n,u){var d=this&&this.__decorate||function(a,l,o,c){var _,S=arguments.length,b=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,o,c);else for(var L=a.length-1;L>=0;L--)(_=a[L])&&(b=(S<3?_(b):S>3?_(l,o,b):_(l,o))||b);return S>3&&b&&Object.defineProperty(l,o,b),b},y=this&&this.__param||function(a,l){return function(o,c){l(o,c,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const f=u(2585),g=u(8460),x=u(844);let E=n.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,l,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new w(a,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};n.CharSizeService=E=d([y(2,f.IOptionsService)],E);class w{constructor(l,o,c){this._document=l,this._parentElement=o,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(m,n,u){var d=this&&this.__decorate||function(l,o,c,_){var S,b=arguments.length,L=b<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,c,_);else for(var p=l.length-1;p>=0;p--)(S=l[p])&&(L=(b<3?S(L):b>3?S(o,c,L):S(o,c))||L);return b>3&&L&&Object.defineProperty(o,c,L),L},y=this&&this.__param||function(l,o){return function(c,_){o(c,_,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const f=u(3734),g=u(643),x=u(511),E=u(2585);class w extends f.AttributeData{constructor(o,c,_){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=w;let a=n.CharacterJoinerService=class md{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const _=[],S=c.translateToString(!0);let b=0,L=0,p=0,k=c.getFg(0),C=c.getBg(0);for(let j=0;j<c.getTrimmedLength();j++)if(c.loadCell(j,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==C){if(j-b>1){const D=this._getJoinedRanges(S,p,L,c,b);for(let N=0;N<D.length;N++)_.push(D[N])}b=j,p=L,k=this._workCell.fg,C=this._workCell.bg}L+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const j=this._getJoinedRanges(S,p,L,c,b);for(let D=0;D<j.length;D++)_.push(j[D])}return _}_getJoinedRanges(o,c,_,S,b){const L=o.substring(c,_);let p=[];try{p=this._characterJoiners[0].handler(L)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const C=this._characterJoiners[k].handler(L);for(let j=0;j<C.length;j++)md._mergeRanges(p,C[j])}catch(C){console.error(C)}return this._stringRangesToCellRanges(p,S,b),p}_stringRangesToCellRanges(o,c,_){let S=0,b=!1,L=0,p=o[S];if(p){for(let k=_;k<this._bufferService.cols;k++){const C=c.getWidth(k),j=c.getString(k).length||g.WHITESPACE_CELL_CHAR.length;if(C!==0){if(!b&&p[0]<=L&&(p[0]=k,b=!0),p[1]<=L){if(p[1]=k,p=o[++S],!p)break;p[0]<=L?(p[0]=k,b=!0):b=!1}L+=j}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let _=!1;for(let S=0;S<o.length;S++){const b=o[S];if(_){if(c[1]<=b[0])return o[S-1][1]=c[1],o;if(c[1]<=b[1])return o[S-1][1]=Math.max(c[1],b[1]),o.splice(S,1),o;o.splice(S,1),S--}else{if(c[1]<=b[0])return o.splice(S,0,c),o;if(c[1]<=b[1])return b[0]=Math.min(c[0],b[0]),o;c[0]<b[1]&&(b[0]=Math.min(c[0],b[0]),_=!0)}}return _?o[o.length-1][1]=c[1]:o.push(c),o}};n.CharacterJoinerService=a=d([y(0,E.IBufferService)],a)},5114:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(u,d){this._textarea=u,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(m,n,u){var d=this&&this.__decorate||function(E,w,a,l){var o,c=arguments.length,_=c<3?w:l===null?l=Object.getOwnPropertyDescriptor(w,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(E,w,a,l);else for(var S=E.length-1;S>=0;S--)(o=E[S])&&(_=(c<3?o(_):c>3?o(w,a,_):o(w,a))||_);return c>3&&_&&Object.defineProperty(w,a,_),_},y=this&&this.__param||function(E,w){return function(a,l){w(a,l,E)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const f=u(4725),g=u(9806);let x=n.MouseService=class{constructor(E,w){this._renderService=E,this._charSizeService=w}getCoords(E,w,a,l,o){return(0,g.getCoords)(window,E,w,a,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(E,w){const a=(0,g.getCoordsRelativeToElement)(window,E,w);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};n.MouseService=x=d([y(0,f.IRenderService),y(1,f.ICharSizeService)],x)},3230:function(m,n,u){var d=this&&this.__decorate||function(_,S,b,L){var p,k=arguments.length,C=k<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,S,b,L);else for(var j=_.length-1;j>=0;j--)(p=_[j])&&(C=(k<3?p(C):k>3?p(S,b,C):p(S,b))||C);return k>3&&C&&Object.defineProperty(S,b,C),C},y=this&&this.__param||function(_,S){return function(b,L){S(b,L,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const f=u(3656),g=u(6193),x=u(5596),E=u(4725),w=u(8460),a=u(844),l=u(7226),o=u(2585);let c=n.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(_,S,b,L,p,k,C,j){if(super(),this._rowCount=_,this._charSizeService=L,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new g.RenderDebouncer(C.window,(D,N)=>this._renderRows(D,N)),this.register(this._renderDebouncer),this._screenDprMonitor=new x.ScreenDprMonitor(C.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(p.onDecorationRegistered(()=>this._fullRefresh())),this.register(p.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(C.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(j.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in C.window){const D=new C.window.IntersectionObserver(N=>this._handleIntersectionChange(N[N.length-1]),{threshold:0});D.observe(S),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(_){this._isPaused=_.isIntersecting===void 0?_.intersectionRatio===0:!_.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(_,S,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(_,S,this._rowCount))}_renderRows(_,S){this._renderer.value&&(_=Math.min(_,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(_,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:_,end:S}),this._onRender.fire({start:_,end:S}),this._isNextRenderRedrawOnly=!0)}resize(_,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(_){this._renderer.value=_,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(_){return this._renderDebouncer.addRefreshCallback(_)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var _,S;this._renderer.value&&((S=(_=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(_),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(_,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(_,S)):this._renderer.value.handleResize(_,S),this._fullRefresh())}handleCharSizeChanged(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCharSizeChanged()}handleBlur(){var _;(_=this._renderer.value)===null||_===void 0||_.handleBlur()}handleFocus(){var _;(_=this._renderer.value)===null||_===void 0||_.handleFocus()}handleSelectionChanged(_,S,b){var L;this._selectionState.start=_,this._selectionState.end=S,this._selectionState.columnSelectMode=b,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(_,S,b)}handleCursorMove(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCursorMove()}clear(){var _;(_=this._renderer.value)===null||_===void 0||_.clear()}};n.RenderService=c=d([y(2,o.IOptionsService),y(3,E.ICharSizeService),y(4,o.IDecorationService),y(5,o.IBufferService),y(6,E.ICoreBrowserService),y(7,E.IThemeService)],c)},9312:function(m,n,u){var d=this&&this.__decorate||function(p,k,C,j){var D,N=arguments.length,I=N<3?k:j===null?j=Object.getOwnPropertyDescriptor(k,C):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(p,k,C,j);else for(var B=p.length-1;B>=0;B--)(D=p[B])&&(I=(N<3?D(I):N>3?D(k,C,I):D(k,C))||I);return N>3&&I&&Object.defineProperty(k,C,I),I},y=this&&this.__param||function(p,k){return function(C,j){k(C,j,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const f=u(9806),g=u(9504),x=u(456),E=u(4725),w=u(8460),a=u(844),l=u(6114),o=u(4841),c=u(511),_=u(2585),S="",b=new RegExp(S,"g");let L=n.SelectionService=class extends a.Disposable{constructor(p,k,C,j,D,N,I,B,$){super(),this._element=p,this._screenElement=k,this._linkifier=C,this._bufferService=j,this._coreService=D,this._mouseService=N,this._optionsService=I,this._renderService=B,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const p=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!p||!k||p[0]===k[0]&&p[1]===k[1])}get selectionText(){const p=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!p||!k)return"";const C=this._bufferService.buffer,j=[];if(this._activeSelectionMode===3){if(p[0]===k[0])return"";const D=p[0]<k[0]?p[0]:k[0],N=p[0]<k[0]?k[0]:p[0];for(let I=p[1];I<=k[1];I++){const B=C.translateBufferLineToString(I,!0,D,N);j.push(B)}}else{const D=p[1]===k[1]?k[0]:void 0;j.push(C.translateBufferLineToString(p[1],!0,p[0],D));for(let N=p[1]+1;N<=k[1]-1;N++){const I=C.lines.get(N),B=C.translateBufferLineToString(N,!0);I!=null&&I.isWrapped?j[j.length-1]+=B:j.push(B)}if(p[1]!==k[1]){const N=C.lines.get(k[1]),I=C.translateBufferLineToString(k[1],!0,0,k[0]);N&&N.isWrapped?j[j.length-1]+=I:j.push(I)}}return j.map(D=>D.replace(b," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(p){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&p&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(p){const k=this._getMouseBufferCoords(p),C=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;return!!(C&&j&&k)&&this._areCoordsInSelection(k,C,j)}isCellInSelection(p,k){const C=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;return!(!C||!j)&&this._areCoordsInSelection([p,k],C,j)}_areCoordsInSelection(p,k,C){return p[1]>k[1]&&p[1]<C[1]||k[1]===C[1]&&p[1]===k[1]&&p[0]>=k[0]&&p[0]<C[0]||k[1]<C[1]&&p[1]===C[1]&&p[0]<C[0]||k[1]<C[1]&&p[1]===k[1]&&p[0]>=k[0]}_selectWordAtCursor(p,k){var C,j;const D=(j=(C=this._linkifier.currentLink)===null||C===void 0?void 0:C.link)===null||j===void 0?void 0:j.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const N=this._getMouseBufferCoords(p);return!!N&&(this._selectWordAt(N,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(p,k){this._model.clearSelection(),p=Math.max(p,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,p],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(p){this._model.handleTrim(p)&&this.refresh()}_getMouseBufferCoords(p){const k=this._mouseService.getCoords(p,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(p){let k=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,p,this._screenElement)[1];const C=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=C?0:(k>C&&(k-=C),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(p){return l.isMac?p.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:p.shiftKey}handleMouseDown(p){if(this._mouseDownTimeStamp=p.timeStamp,(p.button!==2||!this.hasSelection)&&p.button===0){if(!this._enabled){if(!this.shouldForceSelection(p))return;p.stopPropagation()}p.preventDefault(),this._dragScrollAmount=0,this._enabled&&p.shiftKey?this._handleIncrementalClick(p):p.detail===1?this._handleSingleClick(p):p.detail===2?this._handleDoubleClick(p):p.detail===3&&this._handleTripleClick(p),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(p){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(p))}_handleSingleClick(p){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(p)?3:0,this._model.selectionStart=this._getMouseBufferCoords(p),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(p){this._selectWordAtCursor(p,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(p){const k=this._getMouseBufferCoords(p);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(p){return p.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(p){if(p.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(p),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(p),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const C=this._bufferService.buffer;if(this._model.selectionEnd[1]<C.lines.length){const j=C.lines.get(this._model.selectionEnd[1]);j&&j.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const p=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(p.ydisp+this._bufferService.rows,p.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=p.ydisp),this.refresh()}}_handleMouseUp(p){const k=p.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&p.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const C=this._mouseService.getCoords(p,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(C&&C[0]!==void 0&&C[1]!==void 0){const j=(0,g.moveToCellSequence)(C[0]-1,C[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(j,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const p=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,C=!(!p||!k||p[0]===k[0]&&p[1]===k[1]);C?p&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&p[0]===this._oldSelectionStart[0]&&p[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(p,k,C)):this._oldHasSelection&&this._fireOnSelectionChange(p,k,C)}_fireOnSelectionChange(p,k,C){this._oldSelectionStart=p,this._oldSelectionEnd=k,this._oldHasSelection=C,this._onSelectionChange.fire()}_handleBufferActivate(p){this.clearSelection(),this._trimListener.dispose(),this._trimListener=p.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(p,k){let C=k;for(let j=0;k>=j;j++){const D=p.loadCell(j,this._workCell).getChars().length;this._workCell.getWidth()===0?C--:D>1&&k!==j&&(C+=D-1)}return C}setSelection(p,k,C){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[p,k],this._model.selectionStartLength=C,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(p){this._isClickInSelection(p)||(this._selectWordAtCursor(p,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(p,k,C=!0,j=!0){if(p[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,N=D.lines.get(p[1]);if(!N)return;const I=D.translateBufferLineToString(p[1],!1);let B=this._convertViewportColToCharacterIndex(N,p[0]),$=B;const W=p[0]-B;let R=0,A=0,P=0,M=0;if(I.charAt(B)===" "){for(;B>0&&I.charAt(B-1)===" ";)B--;for(;$<I.length&&I.charAt($+1)===" ";)$++}else{let X=p[0],K=p[0];N.getWidth(X)===0&&(R++,X--),N.getWidth(K)===2&&(A++,K++);const J=N.getString(K).length;for(J>1&&(M+=J-1,$+=J-1);X>0&&B>0&&!this._isCharWordSeparator(N.loadCell(X-1,this._workCell));){N.loadCell(X-1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===0?(R++,X--):T>1&&(P+=T-1,B-=T-1),B--,X--}for(;K<N.length&&$+1<I.length&&!this._isCharWordSeparator(N.loadCell(K+1,this._workCell));){N.loadCell(K+1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,K++):T>1&&(M+=T-1,$+=T-1),$++,K++}}$++;let H=B+W-R+P,z=Math.min(this._bufferService.cols,$-B+R+A-P-M);if(k||I.slice(B,$).trim()!==""){if(C&&H===0&&N.getCodePoint(0)!==32){const X=D.lines.get(p[1]-1);if(X&&N.isWrapped&&X.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,p[1]-1],!1,!0,!1);if(K){const J=this._bufferService.cols-K.start;H-=J,z+=J}}}if(j&&H+z===this._bufferService.cols&&N.getCodePoint(this._bufferService.cols-1)!==32){const X=D.lines.get(p[1]+1);if(X!=null&&X.isWrapped&&X.getCodePoint(0)!==32){const K=this._getWordAt([0,p[1]+1],!1,!1,!0);K&&(z+=K.length)}}return{start:H,length:z}}}_selectWordAt(p,k){const C=this._getWordAt(p,k);if(C){for(;C.start<0;)C.start+=this._bufferService.cols,p[1]--;this._model.selectionStart=[C.start,p[1]],this._model.selectionStartLength=C.length}}_selectToWordAt(p){const k=this._getWordAt(p,!0);if(k){let C=p[1];for(;k.start<0;)k.start+=this._bufferService.cols,C--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,C++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,C]}}_isCharWordSeparator(p){return p.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(p.getChars())>=0}_selectLineAt(p){const k=this._bufferService.buffer.getWrappedRangeForLine(p),C={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(C,this._bufferService.cols)}};n.SelectionService=L=d([y(3,_.IBufferService),y(4,_.ICoreService),y(5,E.IMouseService),y(6,_.IOptionsService),y(7,E.IRenderService),y(8,E.ICoreBrowserService)],L)},4725:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const d=u(8343);n.ICharSizeService=(0,d.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),n.IMouseService=(0,d.createDecorator)("MouseService"),n.IRenderService=(0,d.createDecorator)("RenderService"),n.ISelectionService=(0,d.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(m,n,u){var d=this&&this.__decorate||function(L,p,k,C){var j,D=arguments.length,N=D<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,k):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(L,p,k,C);else for(var I=L.length-1;I>=0;I--)(j=L[I])&&(N=(D<3?j(N):D>3?j(p,k,N):j(p,k))||N);return D>3&&N&&Object.defineProperty(p,k,N),N},y=this&&this.__param||function(L,p){return function(k,C){p(k,C,L)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const f=u(7239),g=u(8055),x=u(8460),E=u(844),w=u(2585),a=g.css.toColor("#ffffff"),l=g.css.toColor("#000000"),o=g.css.toColor("#ffffff"),c=g.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],p=[0,95,135,175,215,255];for(let k=0;k<216;k++){const C=p[k/36%6|0],j=p[k/6%6|0],D=p[k%6];L.push({css:g.channels.toCss(C,j,D),rgba:g.channels.toRgba(C,j,D)})}for(let k=0;k<24;k++){const C=8+10*k;L.push({css:g.channels.toCss(C,C,C),rgba:g.channels.toRgba(C,C,C)})}return L})());let S=n.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:l,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:g.color.blend(l,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:g.color.blend(l,_),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const p=this._colors;if(p.foreground=b(L.foreground,a),p.background=b(L.background,l),p.cursor=b(L.cursor,o),p.cursorAccent=b(L.cursorAccent,c),p.selectionBackgroundTransparent=b(L.selectionBackground,_),p.selectionBackgroundOpaque=g.color.blend(p.background,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundTransparent=b(L.selectionInactiveBackground,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundOpaque=g.color.blend(p.background,p.selectionInactiveBackgroundTransparent),p.selectionForeground=L.selectionForeground?b(L.selectionForeground,g.NULL_COLOR):void 0,p.selectionForeground===g.NULL_COLOR&&(p.selectionForeground=void 0),g.color.isOpaque(p.selectionBackgroundTransparent)&&(p.selectionBackgroundTransparent=g.color.opacity(p.selectionBackgroundTransparent,.3)),g.color.isOpaque(p.selectionInactiveBackgroundTransparent)&&(p.selectionInactiveBackgroundTransparent=g.color.opacity(p.selectionInactiveBackgroundTransparent,.3)),p.ansi=n.DEFAULT_ANSI_COLORS.slice(),p.ansi[0]=b(L.black,n.DEFAULT_ANSI_COLORS[0]),p.ansi[1]=b(L.red,n.DEFAULT_ANSI_COLORS[1]),p.ansi[2]=b(L.green,n.DEFAULT_ANSI_COLORS[2]),p.ansi[3]=b(L.yellow,n.DEFAULT_ANSI_COLORS[3]),p.ansi[4]=b(L.blue,n.DEFAULT_ANSI_COLORS[4]),p.ansi[5]=b(L.magenta,n.DEFAULT_ANSI_COLORS[5]),p.ansi[6]=b(L.cyan,n.DEFAULT_ANSI_COLORS[6]),p.ansi[7]=b(L.white,n.DEFAULT_ANSI_COLORS[7]),p.ansi[8]=b(L.brightBlack,n.DEFAULT_ANSI_COLORS[8]),p.ansi[9]=b(L.brightRed,n.DEFAULT_ANSI_COLORS[9]),p.ansi[10]=b(L.brightGreen,n.DEFAULT_ANSI_COLORS[10]),p.ansi[11]=b(L.brightYellow,n.DEFAULT_ANSI_COLORS[11]),p.ansi[12]=b(L.brightBlue,n.DEFAULT_ANSI_COLORS[12]),p.ansi[13]=b(L.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),p.ansi[14]=b(L.brightCyan,n.DEFAULT_ANSI_COLORS[14]),p.ansi[15]=b(L.brightWhite,n.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const k=Math.min(p.ansi.length-16,L.extendedAnsi.length);for(let C=0;C<k;C++)p.ansi[C+16]=b(L.extendedAnsi[C],n.DEFAULT_ANSI_COLORS[C+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let p=0;p<this._restoreColors.ansi.length;++p)this._colors.ansi[p]=this._restoreColors.ansi[p]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(L,p){if(L!==void 0)try{return g.css.toColor(L)}catch{}return p}n.ThemeService=S=d([y(0,w.IOptionsService)],S)},6349:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const d=u(8460),y=u(844);class f extends y.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const E=new Array(x);for(let w=0;w<Math.min(x,this.length);w++)E[w]=this._array[this._getCyclicIndex(w)];this._array=E,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let E=this._length;E<x;E++)this._array[E]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,E){this._array[this._getCyclicIndex(x)]=E}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,E,...w){if(E){for(let a=x;a<this._length-E;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+E)];this._length-=E,this.onDeleteEmitter.fire({index:x,amount:E})}for(let a=this._length-1;a>=x;a--)this._array[this._getCyclicIndex(a+w.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<w.length;a++)this._array[this._getCyclicIndex(x+a)]=w[a];if(w.length&&this.onInsertEmitter.fire({index:x,amount:w.length}),this._length+w.length>this._maxLength){const a=this._length+w.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=w.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,E,w){if(!(E<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let l=E-1;l>=0;l--)this.set(x+l+w,this.get(x+l));const a=x+E+w-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<E;a++)this.set(x+a+w,this.get(x+a))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}n.CircularList=f},1439:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function u(d,y=5){if(typeof d!="object")return d;const f=Array.isArray(d)?[]:{};for(const g in d)f[g]=y<=1?d[g]:d[g]&&u(d[g],y-1);return f}},8055:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const d=u(6114);let y=0,f=0,g=0,x=0;var E,w,a,l,o;function c(S){const b=S.toString(16);return b.length<2?"0"+b:b}function _(S,b){return S<b?(b+.05)/(S+.05):(S+.05)/(b+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(b,L,p,k){return k!==void 0?`#${c(b)}${c(L)}${c(p)}${c(k)}`:`#${c(b)}${c(L)}${c(p)}`},S.toRgba=function(b,L,p,k=255){return(b<<24|L<<16|p<<8|k)>>>0}}(E||(n.channels=E={})),function(S){function b(L,p){return x=Math.round(255*p),[y,f,g]=o.toChannels(L.rgba),{css:E.toCss(y,f,g,x),rgba:E.toRgba(y,f,g,x)}}S.blend=function(L,p){if(x=(255&p.rgba)/255,x===1)return{css:p.css,rgba:p.rgba};const k=p.rgba>>24&255,C=p.rgba>>16&255,j=p.rgba>>8&255,D=L.rgba>>24&255,N=L.rgba>>16&255,I=L.rgba>>8&255;return y=D+Math.round((k-D)*x),f=N+Math.round((C-N)*x),g=I+Math.round((j-I)*x),{css:E.toCss(y,f,g),rgba:E.toRgba(y,f,g)}},S.isOpaque=function(L){return(255&L.rgba)==255},S.ensureContrastRatio=function(L,p,k){const C=o.ensureContrastRatio(L.rgba,p.rgba,k);if(C)return o.toColor(C>>24&255,C>>16&255,C>>8&255)},S.opaque=function(L){const p=(255|L.rgba)>>>0;return[y,f,g]=o.toChannels(p),{css:E.toCss(y,f,g),rgba:p}},S.opacity=b,S.multiplyOpacity=function(L,p){return x=255&L.rgba,b(L,x*p/255)},S.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(n.color=w={})),function(S){let b,L;if(!d.isNode){const p=document.createElement("canvas");p.width=1,p.height=1;const k=p.getContext("2d",{willReadFrequently:!0});k&&(b=k,b.globalCompositeOperation="copy",L=b.createLinearGradient(0,0,1,1))}S.toColor=function(p){if(p.match(/#[\da-f]{3,8}/i))switch(p.length){case 4:return y=parseInt(p.slice(1,2).repeat(2),16),f=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),o.toColor(y,f,g);case 5:return y=parseInt(p.slice(1,2).repeat(2),16),f=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),x=parseInt(p.slice(4,5).repeat(2),16),o.toColor(y,f,g,x);case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}const k=p.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return y=parseInt(k[1]),f=parseInt(k[2]),g=parseInt(k[3]),x=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),o.toColor(y,f,g,x);if(!b||!L)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=L,b.fillStyle=p,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[y,f,g,x]=b.getImageData(0,0,1,1).data,x!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(y,f,g,x),css:p}}}(a||(n.css=a={})),function(S){function b(L,p,k){const C=L/255,j=p/255,D=k/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}S.relativeLuminance=function(L){return b(L>>16&255,L>>8&255,255&L)},S.relativeLuminance2=b}(l||(n.rgb=l={})),function(S){function b(p,k,C){const j=p>>24&255,D=p>>16&255,N=p>>8&255;let I=k>>24&255,B=k>>16&255,$=k>>8&255,W=_(l.relativeLuminance2(I,B,$),l.relativeLuminance2(j,D,N));for(;W<C&&(I>0||B>0||$>0);)I-=Math.max(0,Math.ceil(.1*I)),B-=Math.max(0,Math.ceil(.1*B)),$-=Math.max(0,Math.ceil(.1*$)),W=_(l.relativeLuminance2(I,B,$),l.relativeLuminance2(j,D,N));return(I<<24|B<<16|$<<8|255)>>>0}function L(p,k,C){const j=p>>24&255,D=p>>16&255,N=p>>8&255;let I=k>>24&255,B=k>>16&255,$=k>>8&255,W=_(l.relativeLuminance2(I,B,$),l.relativeLuminance2(j,D,N));for(;W<C&&(I<255||B<255||$<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),B=Math.min(255,B+Math.ceil(.1*(255-B))),$=Math.min(255,$+Math.ceil(.1*(255-$))),W=_(l.relativeLuminance2(I,B,$),l.relativeLuminance2(j,D,N));return(I<<24|B<<16|$<<8|255)>>>0}S.ensureContrastRatio=function(p,k,C){const j=l.relativeLuminance(p>>8),D=l.relativeLuminance(k>>8);if(_(j,D)<C){if(D<j){const B=b(p,k,C),$=_(j,l.relativeLuminance(B>>8));if($<C){const W=L(p,k,C);return $>_(j,l.relativeLuminance(W>>8))?B:W}return B}const N=L(p,k,C),I=_(j,l.relativeLuminance(N>>8));if(I<C){const B=b(p,k,C);return I>_(j,l.relativeLuminance(B>>8))?N:B}return N}},S.reduceLuminance=b,S.increaseLuminance=L,S.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},S.toColor=function(p,k,C,j){return{css:E.toCss(p,k,C,j),rgba:E.toRgba(p,k,C,j)}}}(o||(n.rgba=o={})),n.toPaddedHex=c,n.contrastRatio=_},8969:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const d=u(844),y=u(2585),f=u(4348),g=u(7866),x=u(744),E=u(7302),w=u(6975),a=u(8460),l=u(1753),o=u(1480),c=u(7994),_=u(9282),S=u(5435),b=u(5981),L=u(2660);let p=!1;class k extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event(j=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(j.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(j){for(const D in j)this.optionsService.options[D]=j[D]}constructor(j){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new E.OptionsService(j)),this._instantiationService.setService(y.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(y.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(y.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(y.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(y.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(y.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(y.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(y.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((D,N)=>this._inputHandler.parse(D,N))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(j,D){this._writeBuffer.write(j,D)}writeSync(j,D){this._logService.logLevel<=y.LogLevelEnum.WARN&&!p&&(this._logService.warn("writeSync is unreliable and will be removed soon."),p=!0),this._writeBuffer.writeSync(j,D)}resize(j,D){isNaN(j)||isNaN(D)||(j=Math.max(j,x.MINIMUM_COLS),D=Math.max(D,x.MINIMUM_ROWS),this._bufferService.resize(j,D))}scroll(j,D=!1){this._bufferService.scroll(j,D)}scrollLines(j,D,N){this._bufferService.scrollLines(j,D,N)}scrollPages(j){this.scrollLines(j*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(j){const D=j-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(j,D){return this._inputHandler.registerEscHandler(j,D)}registerDcsHandler(j,D){return this._inputHandler.registerDcsHandler(j,D)}registerCsiHandler(j,D){return this._inputHandler.registerCsiHandler(j,D)}registerOscHandler(j,D){return this._inputHandler.registerOscHandler(j,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let j=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?j=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(j=!0),j?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const j=[];j.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),j.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const D of j)D.dispose()})}}}n.CoreTerminal=k},8460:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===u)return void this._listeners.splice(d,1)}}})),this._event}fire(u,d){const y=[];for(let f=0;f<this._listeners.length;f++)y.push(this._listeners[f]);for(let f=0;f<y.length;f++)y[f].call(void 0,u,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(u,d){return u(y=>d.fire(y))}},5435:function(m,n,u){var d=this&&this.__decorate||function(W,R,A,P){var M,H=arguments.length,z=H<3?R:P===null?P=Object.getOwnPropertyDescriptor(R,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(W,R,A,P);else for(var X=W.length-1;X>=0;X--)(M=W[X])&&(z=(H<3?M(z):H>3?M(R,A,z):M(R,A))||z);return H>3&&z&&Object.defineProperty(R,A,z),z},y=this&&this.__param||function(W,R){return function(A,P){R(A,P,W)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const f=u(2584),g=u(7116),x=u(2015),E=u(844),w=u(482),a=u(8437),l=u(8460),o=u(643),c=u(511),_=u(3734),S=u(2585),b=u(6242),L=u(6351),p=u(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function j(W,R){if(W>24)return R.setWinLines||!1;switch(W){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var D;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(n.WindowsOptionsReportType=D={}));let N=0;class I extends E.Disposable{getAttrData(){return this._curAttrData}constructor(R,A,P,M,H,z,X,K,J=new x.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=A,this._coreService=P,this._logService=M,this._optionsService=H,this._oscLinkService=z,this._coreMouseService=X,this._unicodeService=K,this._parser=J,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,F)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:F.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,F,V)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:F,data:V})}),this._parser.setDcsHandlerFallback((T,F,V)=>{F==="HOOK"&&(V=V.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:F,payload:V})}),this._parser.setPrintHandler((T,F,V)=>this.print(T,F,V)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new b.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new b.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new b.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new b.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new b.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new b.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new b.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new b.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new b.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new b.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new b.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((T,F)=>this.requestStatusString(T,F)))}_preserveStack(R,A,P,M){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=P,this._parseStack.position=M}_logSlowResolvingAsync(R){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([R,new Promise((A,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,A){let P,M=this._activeBuffer.x,H=this._activeBuffer.y,z=0;const X=this._parseStack.paused;if(X){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(P),P;M=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>C&&(z=this._parseStack.position+C)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,K=>String.fromCharCode(K)).join("")}"`),typeof R=="string"?R.split("").map(K=>K.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(R.length,C))),X||this._dirtyRowTracker.clearRange(),R.length>C)for(let K=z;K<R.length;K+=C){const J=K+C<R.length?K+C:R.length,T=typeof R=="string"?this._stringDecoder.decode(R.substring(K,J),this._parseBuffer):this._utf8Decoder.decode(R.subarray(K,J),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,T))return this._preserveStack(M,H,T,K),this._logSlowResolvingAsync(P),P}else if(!X){const K=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,K))return this._preserveStack(M,H,K,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===M&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(R,A,P){let M,H;const z=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,J=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,F=this._curAttrData;let V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-A>0&&V.getWidth(this._activeBuffer.x-1)===2&&V.setCellFromCodePoint(this._activeBuffer.x-1,0,1,F.fg,F.bg,F.extended);for(let U=A;U<P;++U){if(M=R[U],H=this._unicodeService.wcwidth(M),M<127&&z){const Y=z[String.fromCharCode(M)];Y&&(M=Y.charCodeAt(0))}if(X&&this._onA11yChar.fire((0,w.stringFromCodePoint)(M)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=K){if(J){for(;this._activeBuffer.x<K;)V.setCellFromCodePoint(this._activeBuffer.x++,0,1,F.fg,F.bg,F.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,H===2)continue}if(T&&(V.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(F),F),V.getWidth(K-1)===2&&V.setCellFromCodePoint(K-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,F.fg,F.bg,F.extended)),V.setCellFromCodePoint(this._activeBuffer.x++,M,H,F.fg,F.bg,F.extended),H>0)for(;--H;)V.setCellFromCodePoint(this._activeBuffer.x++,0,0,F.fg,F.bg,F.extended)}else V.getWidth(this._activeBuffer.x-1)?V.addCodepointToCell(this._activeBuffer.x-1,M):V.addCodepointToCell(this._activeBuffer.x-2,M)}P-A>0&&(V.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&P-A>0&&V.getWidth(this._activeBuffer.x)===0&&!V.hasContent(this._activeBuffer.x)&&V.setCellFromCodePoint(this._activeBuffer.x,0,1,F.fg,F.bg,F.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,A){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,A):this._parser.registerCsiHandler(R,P=>!j(P.params[0],this._optionsService.rawOptions.windowOptions)||A(P))}registerDcsHandler(R,A){return this._parser.registerDcsHandler(R,new L.DcsHandler(A))}registerEscHandler(R,A){return this._parser.registerEscHandler(R,A)}registerOscHandler(R,A){return this._parser.registerOscHandler(R,new b.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||R===void 0)&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=R,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+A)}cursorUp(R){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const A=R.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=R.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=R.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const A=R.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,A,P,M=!1,H=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);z.replaceCells(A,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),M&&(z.isWrapped=!1)}_resetBufferLine(R,A=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),P.isWrapped=!1)}eraseInDisplay(R,A=!1){let P;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);P<this._bufferService.rows;P++)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 3:const M=this._activeBuffer.lines.length-this._bufferService.rows;M>0&&(this._activeBuffer.lines.trimStart(M),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-M,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-M,0),this._onScroll.fire(0))}return!0}eraseInLine(R,A=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let A=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-M+1;for(;A--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let A=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let M;for(M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,M=this._bufferService.rows-1+this._activeBuffer.ybase-M;A--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let A=R.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let A=R.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);M.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);M.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);M.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);M.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){if(!this._parser.precedingCodepoint)return!0;const A=R.params[0]||1,P=new Uint32Array(A);for(let M=0;M<A;++M)P[M]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,A){const P=this._coreService.decPrivateModes,{activeProtocol:M,activeEncoding:H}=this._coreMouseService,z=this._coreService,{buffers:X,cols:K}=this._bufferService,{active:J,alt:T}=X,F=this._optionsService.rawOptions,V=Z=>Z?1:2,U=R.params[0];return Y=U,q=A?U===2?4:U===4?V(z.modes.insertMode):U===12?3:U===20?V(F.convertEol):0:U===1?V(P.applicationCursorKeys):U===3?F.windowOptions.setWinLines?K===80?2:K===132?1:0:0:U===6?V(P.origin):U===7?V(P.wraparound):U===8?3:U===9?V(M==="X10"):U===12?V(F.cursorBlink):U===25?V(!z.isCursorHidden):U===45?V(P.reverseWraparound):U===66?V(P.applicationKeypad):U===67?4:U===1e3?V(M==="VT200"):U===1002?V(M==="DRAG"):U===1003?V(M==="ANY"):U===1004?V(P.sendFocus):U===1005?4:U===1006?V(H==="SGR"):U===1015?4:U===1016?V(H==="SGR_PIXELS"):U===1048?1:U===47||U===1047||U===1049?V(J===T):U===2004?V(P.bracketedPasteMode):0,z.triggerDataEvent(`${f.C0.ESC}[${A?"":"?"}${Y};${q}$y`),!0;var Y,q}_updateAttrColor(R,A,P,M,H){return A===2?(R|=50331648,R&=-16777216,R|=_.AttributeData.fromColorRGB([P,M,H])):A===5&&(R&=-50331904,R|=33554432|255&P),R}_extractColor(R,A,P){const M=[0,0,-1,0,0,0];let H=0,z=0;do{if(M[z+H]=R.params[A+z],R.hasSubParams(A+z)){const X=R.getSubParams(A+z);let K=0;do M[1]===5&&(H=1),M[z+K+1+H]=X[K];while(++K<X.length&&K+z+1+H<M.length);break}if(M[1]===5&&z+H>=2||M[1]===2&&z+H>=5)break;M[1]&&(H=1)}while(++z+A<R.length&&z+H<M.length);for(let X=2;X<M.length;++X)M[X]===-1&&(M[X]=0);switch(M[0]){case 38:P.fg=this._updateAttrColor(P.fg,M[1],M[3],M[4],M[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,M[1],M[3],M[4],M[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,M[1],M[3],M[4],M[5])}return z}_processUnderline(R,A){A.extended=A.extended.clone(),(!~R||R>5)&&(R=1),A.extended.underlineStyle=R,A.fg|=268435456,R===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(R){R.fg=a.DEFAULT_ATTR_DATA.fg,R.bg=a.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=R.length;let P;const M=this._curAttrData;for(let H=0;H<A;H++)P=R.params[H],P>=30&&P<=37?(M.fg&=-50331904,M.fg|=16777216|P-30):P>=40&&P<=47?(M.bg&=-50331904,M.bg|=16777216|P-40):P>=90&&P<=97?(M.fg&=-50331904,M.fg|=16777224|P-90):P>=100&&P<=107?(M.bg&=-50331904,M.bg|=16777224|P-100):P===0?this._processSGR0(M):P===1?M.fg|=134217728:P===3?M.bg|=67108864:P===4?(M.fg|=268435456,this._processUnderline(R.hasSubParams(H)?R.getSubParams(H)[0]:1,M)):P===5?M.fg|=536870912:P===7?M.fg|=67108864:P===8?M.fg|=1073741824:P===9?M.fg|=2147483648:P===2?M.bg|=134217728:P===21?this._processUnderline(2,M):P===22?(M.fg&=-134217729,M.bg&=-134217729):P===23?M.bg&=-67108865:P===24?(M.fg&=-268435457,this._processUnderline(0,M)):P===25?M.fg&=-536870913:P===27?M.fg&=-67108865:P===28?M.fg&=-1073741825:P===29?M.fg&=2147483647:P===39?(M.fg&=-67108864,M.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):P===49?(M.bg&=-67108864,M.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?H+=this._extractColor(R,H,M):P===53?M.bg|=1073741824:P===55?M.bg&=-1073741825:P===59?(M.extended=M.extended.clone(),M.extended.underlineColor=-1,M.updateExtended()):P===100?(M.fg&=-67108864,M.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,M.bg&=-67108864,M.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${A};${P}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${A};${P}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const A=R.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=A%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(R){const A=R.params[0]||1;let P;return(R.length<2||(P=R.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(R){if(!j(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const A=[],P=R.split(";");for(;P.length>1;){const M=P.shift(),H=P.shift();if(/^\d+$/.exec(M)){const z=parseInt(M);if($(z))if(H==="?")A.push({type:0,index:z});else{const X=(0,p.parseColor)(H);X&&A.push({type:1,index:z,color:X})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(R){const A=R.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(R,A){this._getCurrentLinkId()&&this._finishHyperlink();const P=R.split(":");let M;const H=P.findIndex(z=>z.startsWith("id="));return H!==-1&&(M=P[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:M,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,A){const P=R.split(";");for(let M=0;M<P.length&&!(A>=this._specialColors.length);++M,++A)if(P[M]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const H=(0,p.parseColor)(P[M]);H&&this._onColor.fire([{type:1,index:this._specialColors[A],color:H}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const A=[],P=R.split(";");for(let M=0;M<P.length;++M)if(/^\d+$/.exec(P[M])){const H=parseInt(P[M]);$(H)&&A.push({type:2,index:H})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(k[R[0]],g.CHARSETS[R[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new c.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const P=this._activeBuffer.ybase+this._activeBuffer.y+A,M=this._activeBuffer.lines.get(P);M&&(M.fill(R),M.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,A){const P=this._bufferService.buffer,M=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${H}${f.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[M.cursorStyle]-(M.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,A){this._dirtyRowTracker.markRangeDirty(R,A)}}n.InputHandler=I;let B=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,R){W>R&&(N=W,W=R,R=N),W<this.start&&(this.start=W),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(W){return 0<=W&&W<256}B=d([y(0,S.IBufferService)],B)},844:(m,n)=>{function u(d){for(const y of d)y.dispose();d.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const y=this._disposables.indexOf(d);y!==-1&&this._disposables.splice(y,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var y;this._isDisposed||d===this._value||((y=this._value)===null||y===void 0||y.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},n.toDisposable=function(d){return{dispose:d}},n.disposeArray=u,n.getDisposeArrayDisposable=function(d){return{dispose:()=>u(d)}}},1505:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(y,f,g){this._data[y]||(this._data[y]={}),this._data[y][f]=g}get(y,f){return this._data[y]?this._data[y][f]:void 0}clear(){this._data={}}}n.TwoKeyMap=u,n.FourKeyMap=class{constructor(){this._data=new u}set(d,y,f,g,x){this._data.get(d,y)||this._data.set(d,y,new u),this._data.get(d,y).set(f,g,x)}get(d,y,f,g){var x;return(x=this._data.get(d,y))===null||x===void 0?void 0:x.get(f,g)}clear(){this._data.clear()}}},6114:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const u=n.isNode?"node":navigator.userAgent,d=n.isNode?"node":navigator.platform;n.isFirefox=u.includes("Firefox"),n.isLegacyEdge=u.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(u),n.getSafariVersion=function(){if(!n.isSafari)return 0;const y=u.match(/Version\/(\d+)/);return y===null||y.length<2?0:parseInt(y[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),n.isIpad=d==="iPad",n.isIphone=d==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),n.isLinux=d.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(u)},6106:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let u=0;n.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(u=this._search(this._getKey(d)),this._array.splice(u,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const y=this._getKey(d);if(y===void 0||(u=this._search(y),u===-1)||this._getKey(this._array[u])!==y)return!1;do if(this._array[u]===d)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===y);return!1}*getKeyIterator(d){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===d)}forEachByKey(d,y){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do y(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===d)}values(){return[...this._array].values()}_search(d){let y=0,f=this._array.length-1;for(;f>=y;){let g=y+f>>1;const x=this._getKey(this._array[g]);if(x>d)f=g-1;else{if(!(x<d)){for(;g>0&&this._getKey(this._array[g-1])===d;)g--;return g}y=g+1}}return y}}},7226:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const d=u(6114);class y{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let E=0,w=0,a=x.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),w=Math.max(E,w),l=x.timeRemaining(),1.5*w>l)return a-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-E))}ms`),void this._start();a=l}this.clear()}}class f extends y{_requestCallback(x){return setTimeout(()=>x(this._createDeadline(16)))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const E=Date.now()+x;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}n.PriorityTaskQueue=f,n.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends y{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:f,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const d=u(643);n.updateWindowsModeWrappedState=function(y){const f=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),g=f==null?void 0:f.get(y.cols-1),x=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);x&&g&&(x.isWrapped=g[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&g[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new u;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=u;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,g=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=g}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=d},9092:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const d=u(6349),y=u(7226),f=u(3734),g=u(8437),x=u(4634),E=u(511),w=u(643),a=u(4863),l=u(7116);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(o,c,_){this._hasScrollback=o,this._optionsService=c,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new y.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new g.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=g.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const _=this.getNullCell(g.DEFAULT_ATTR_DATA);let S=0;const b=this._getCorrectBufferLength(c);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<o)for(let p=0;p<this.lines.length;p++)S+=+this.lines.get(p).resize(o,_);let L=0;if(this._rows<c)for(let p=this._rows;p<c;p++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(o,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(o,_)));else for(let p=this._rows;p>c;p--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const p=this.lines.length-b;p>0&&(this.lines.trimStart(p),this.ybase=Math.max(this.ybase-p,0),this.ydisp=Math.max(this.ydisp-p,0),this.savedY=Math.max(this.savedY-p,0)),this.lines.maxLength=b}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let L=0;L<this.lines.length;L++)S+=+this.lines.get(L).resize(o,_);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const _=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(_.length>0){const S=(0,x.reflowLargerCreateNewLayout)(this.lines,_);(0,x.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(o,c,S.countRemoved)}}_reflowLargerAdjustViewport(o,c,_){const S=this.getNullCell(g.DEFAULT_ATTR_DATA);let b=_;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new g.BufferLine(o,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(o,c){const _=this.getNullCell(g.DEFAULT_ATTR_DATA),S=[];let b=0;for(let L=this.lines.length-1;L>=0;L--){let p=this.lines.get(L);if(!p||!p.isWrapped&&p.getTrimmedLength()<=o)continue;const k=[p];for(;p.isWrapped&&L>0;)p=this.lines.get(--L),k.unshift(p);const C=this.ybase+this.y;if(C>=L&&C<L+k.length)continue;const j=k[k.length-1].getTrimmedLength(),D=(0,x.reflowSmallerGetNewLineLengths)(k,this._cols,o),N=D.length-k.length;let I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+N):Math.max(0,this.lines.length-this.lines.maxLength+N);const B=[];for(let M=0;M<N;M++){const H=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);B.push(H)}B.length>0&&(S.push({start:L+k.length+b,newLines:B}),b+=B.length),k.push(...B);let $=D.length-1,W=D[$];W===0&&($--,W=D[$]);let R=k.length-N-1,A=j;for(;R>=0;){const M=Math.min(A,W);if(k[$]===void 0)break;if(k[$].copyCellsFrom(k[R],A-M,W-M,M,!0),W-=M,W===0&&($--,W=D[$]),A-=M,A===0){R--;const H=Math.max(R,0);A=(0,x.getWrappedLineTrimmedLength)(k,H,this._cols)}}for(let M=0;M<k.length;M++)D[M]<o&&k[M].setCell(D[M],_);let P=N-I;for(;P-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+N,this.ybase+c-1)}if(S.length>0){const L=[],p=[];for(let $=0;$<this.lines.length;$++)p.push(this.lines.get($));const k=this.lines.length;let C=k-1,j=0,D=S[j];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let N=0;for(let $=Math.min(this.lines.maxLength-1,k+b-1);$>=0;$--)if(D&&D.start>C+N){for(let W=D.newLines.length-1;W>=0;W--)this.lines.set($--,D.newLines[W]);$++,L.push({index:C+1,amount:D.newLines.length}),N+=D.newLines.length,D=S[++j]}else this.lines.set($,p[C--]);let I=0;for(let $=L.length-1;$>=0;$--)L[$].index+=I,this.lines.onInsertEmitter.fire(L[$]),I+=L[$].amount;const B=Math.max(0,k+b-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}}translateBufferLineToString(o,c,_=0,S){const b=this.lines.get(o);return b?b.translateToString(c,_,S):""}getWrappedRangeForLine(o){let c=o,_=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:c,last:_}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new a.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim(_=>{c.line-=_,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(_=>{c.line>=_.index&&(c.line+=_.amount)})),c.register(this.lines.onDelete(_=>{c.line>=_.index&&c.line<_.index+_.amount&&c.dispose(),c.line>_.index&&(c.line-=_.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const d=u(3734),y=u(511),f=u(643),g=u(482);n.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let x=0;class E{constructor(a,l,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);const c=l||y.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let _=0;_<a;++_)this.setCell(_,c);this.length=a}get(a){const l=this._data[3*a+0],o=2097151&l;return[this._data[3*a+1],2097152&l?this._combined[a]:o?(0,g.stringFromCodePoint)(o):"",l>>22,2097152&l?this._combined[a].charCodeAt(this._combined[a].length-1):o]}set(a,l){this._data[3*a+1]=l[f.CHAR_DATA_ATTR_INDEX],l[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=l[1],this._data[3*a+0]=2097152|a|l[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=l[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){const l=this._data[3*a+0];return 2097152&l?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&l}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){const l=this._data[3*a+0];return 2097152&l?this._combined[a]:2097151&l?(0,g.stringFromCodePoint)(2097151&l):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,l){return x=3*a,l.content=this._data[x+0],l.fg=this._data[x+1],l.bg=this._data[x+2],2097152&l.content&&(l.combinedData=this._combined[a]),268435456&l.bg&&(l.extended=this._extendedAttrs[a]),l}setCell(a,l){2097152&l.content&&(this._combined[a]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[a]=l.extended),this._data[3*a+0]=l.content,this._data[3*a+1]=l.fg,this._data[3*a+2]=l.bg}setCellFromCodePoint(a,l,o,c,_,S){268435456&_&&(this._extendedAttrs[a]=S),this._data[3*a+0]=l|o<<22,this._data[3*a+1]=c,this._data[3*a+2]=_}addCodepointToCell(a,l){let o=this._data[3*a+0];2097152&o?this._combined[a]+=(0,g.stringFromCodePoint)(l):(2097151&o?(this._combined[a]=(0,g.stringFromCodePoint)(2097151&o)+(0,g.stringFromCodePoint)(l),o&=-2097152,o|=2097152):o=l|4194304,this._data[3*a+0]=o)}insertCells(a,l,o,c){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),l<this.length-a){const _=new y.CellData;for(let S=this.length-a-l-1;S>=0;--S)this.setCell(a+l+S,this.loadCell(a+S,_));for(let S=0;S<l;++S)this.setCell(a+S,o)}else for(let _=a;_<this.length;++_)this.setCell(_,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs)}deleteCells(a,l,o,c){if(a%=this.length,l<this.length-a){const _=new y.CellData;for(let S=0;S<this.length-a-l;++S)this.setCell(a+S,this.loadCell(a+l+S,_));for(let S=this.length-l;S<this.length;++S)this.setCell(S,o)}else for(let _=a;_<this.length;++_)this.setCell(_,o);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs)}replaceCells(a,l,o,c,_=!1){if(_)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs);a<l&&a<this.length;)this.isProtected(a)||this.setCell(a,o),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs);a<l&&a<this.length;)this.setCell(a++,o)}resize(a,l){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<a;++c)this.setCell(c,l)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let S=0;S<c.length;S++){const b=parseInt(c[S],10);b>=a&&delete this._combined[b]}const _=Object.keys(this._extendedAttrs);for(let S=0;S<_.length;S++){const b=parseInt(_[S],10);b>=a&&delete this._extendedAttrs[b]}}return this.length=a,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,l=!1){if(l)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,a);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(const l in a._combined)this._combined[l]=a._combined[l];this._extendedAttrs={};for(const l in a._extendedAttrs)this._extendedAttrs[l]=a._extendedAttrs[l];this.isWrapped=a.isWrapped}clone(){const a=new E(0);a._data=new Uint32Array(this._data),a.length=this.length;for(const l in this._combined)a._combined[l]=this._combined[l];for(const l in this._extendedAttrs)a._extendedAttrs[l]=this._extendedAttrs[l];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,l,o,c,_){const S=a._data;if(_)for(let L=c-1;L>=0;L--){for(let p=0;p<3;p++)this._data[3*(o+L)+p]=S[3*(l+L)+p];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=a._extendedAttrs[l+L])}else for(let L=0;L<c;L++){for(let p=0;p<3;p++)this._data[3*(o+L)+p]=S[3*(l+L)+p];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=a._extendedAttrs[l+L])}const b=Object.keys(a._combined);for(let L=0;L<b.length;L++){const p=parseInt(b[L],10);p>=l&&(this._combined[p-l+o]=a._combined[p])}}translateToString(a=!1,l=0,o=this.length){a&&(o=Math.min(o,this.getTrimmedLength()));let c="";for(;l<o;){const _=this._data[3*l+0],S=2097151&_;c+=2097152&_?this._combined[l]:S?(0,g.stringFromCodePoint)(S):f.WHITESPACE_CELL_CHAR,l+=_>>22||1}return c}}n.BufferLine=E},4841:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(u,d){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return d*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(m,n)=>{function u(d,y,f){if(y===d.length-1)return d[y].getTrimmedLength();const g=!d[y].hasContent(f-1)&&d[y].getWidth(f-1)===1,x=d[y+1].getWidth(0)===2;return g&&x?f-1:f}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(d,y,f,g,x){const E=[];for(let w=0;w<d.length-1;w++){let a=w,l=d.get(++a);if(!l.isWrapped)continue;const o=[d.get(w)];for(;a<d.length&&l.isWrapped;)o.push(l),l=d.get(++a);if(g>=w&&g<a){w+=o.length-1;continue}let c=0,_=u(o,c,y),S=1,b=0;for(;S<o.length;){const p=u(o,S,y),k=p-b,C=f-_,j=Math.min(k,C);o[c].copyCellsFrom(o[S],b,_,j,!1),_+=j,_===f&&(c++,_=0),b+=j,b===p&&(S++,b=0),_===0&&c!==0&&o[c-1].getWidth(f-1)===2&&(o[c].copyCellsFrom(o[c-1],f-1,_++,1,!1),o[c-1].setCell(f-1,x))}o[c].replaceCells(_,f,x);let L=0;for(let p=o.length-1;p>0&&(p>c||o[p].getTrimmedLength()===0);p--)L++;L>0&&(E.push(w+o.length-L),E.push(L)),w+=o.length-1}return E},n.reflowLargerCreateNewLayout=function(d,y){const f=[];let g=0,x=y[g],E=0;for(let w=0;w<d.length;w++)if(x===w){const a=y[++g];d.onDeleteEmitter.fire({index:w-E,amount:a}),w+=a-1,E+=a,x=y[++g]}else f.push(w);return{layout:f,countRemoved:E}},n.reflowLargerApplyNewLayout=function(d,y){const f=[];for(let g=0;g<y.length;g++)f.push(d.get(y[g]));for(let g=0;g<f.length;g++)d.set(g,f[g]);d.length=y.length},n.reflowSmallerGetNewLineLengths=function(d,y,f){const g=[],x=d.map((l,o)=>u(d,o,y)).reduce((l,o)=>l+o);let E=0,w=0,a=0;for(;a<x;){if(x-a<f){g.push(x-a);break}E+=f;const l=u(d,w,y);E>l&&(E-=l,w++);const o=d[w].getWidth(E-1)===2;o&&E--;const c=o?f-1:f;g.push(c),a+=c}return g},n.getWrappedLineTrimmedLength=u},5295:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const d=u(8460),y=u(844),f=u(9092);class g extends y.Disposable{constructor(E,w){super(),this._optionsService=E,this._bufferService=w,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,w){this._normal.resize(E,w),this._alt.resize(E,w),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}n.BufferSet=g},511:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const d=u(482),y=u(643),f=u(3734);class g extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const w=new g;return w.setFromCharData(E),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[y.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(E[y.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(E[y.CHAR_DATA_CHAR_INDEX].length===2){const a=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){const l=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(a-55296)+l-56320+65536|E[y.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[y.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=E[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[y.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=g},643:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const d=u(8460),y=u(844);class f{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,y.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}n.Marker=f,f._nextId=1},7116:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},n.CHARSETS.A={"#":""},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},n.CHARSETS.C=n.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.E=n.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},n.CHARSETS.H=n.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(m,n)=>{var u,d,y;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(u||(n.C0=u={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(d||(n.C1=d={})),function(f){f.ST=`${u.ESC}\\`}(y||(n.C1_ESCAPED=y={}))},7399:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const d=u(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(f,g,x,E){const w={type:0,cancel:!1,key:void 0},a=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?w.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?w.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?w.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(w.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(f.altKey){w.key=d.C0.ESC+d.C0.DEL;break}w.key=d.C0.DEL;break;case 9:if(f.shiftKey){w.key=d.C0.ESC+"[Z";break}w.key=d.C0.HT,w.cancel=!0;break;case 13:w.key=f.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,w.cancel=!0;break;case 27:w.key=d.C0.ESC,f.altKey&&(w.key=d.C0.ESC+d.C0.ESC),w.cancel=!0;break;case 37:if(f.metaKey)break;a?(w.key=d.C0.ESC+"[1;"+(a+1)+"D",w.key===d.C0.ESC+"[1;3D"&&(w.key=d.C0.ESC+(x?"b":"[1;5D"))):w.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(f.metaKey)break;a?(w.key=d.C0.ESC+"[1;"+(a+1)+"C",w.key===d.C0.ESC+"[1;3C"&&(w.key=d.C0.ESC+(x?"f":"[1;5C"))):w.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(f.metaKey)break;a?(w.key=d.C0.ESC+"[1;"+(a+1)+"A",x||w.key!==d.C0.ESC+"[1;3A"||(w.key=d.C0.ESC+"[1;5A")):w.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(f.metaKey)break;a?(w.key=d.C0.ESC+"[1;"+(a+1)+"B",x||w.key!==d.C0.ESC+"[1;3B"||(w.key=d.C0.ESC+"[1;5B")):w.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(w.key=d.C0.ESC+"[2~");break;case 46:w.key=a?d.C0.ESC+"[3;"+(a+1)+"~":d.C0.ESC+"[3~";break;case 36:w.key=a?d.C0.ESC+"[1;"+(a+1)+"H":g?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:w.key=a?d.C0.ESC+"[1;"+(a+1)+"F":g?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:f.shiftKey?w.type=2:f.ctrlKey?w.key=d.C0.ESC+"[5;"+(a+1)+"~":w.key=d.C0.ESC+"[5~";break;case 34:f.shiftKey?w.type=3:f.ctrlKey?w.key=d.C0.ESC+"[6;"+(a+1)+"~":w.key=d.C0.ESC+"[6~";break;case 112:w.key=a?d.C0.ESC+"[1;"+(a+1)+"P":d.C0.ESC+"OP";break;case 113:w.key=a?d.C0.ESC+"[1;"+(a+1)+"Q":d.C0.ESC+"OQ";break;case 114:w.key=a?d.C0.ESC+"[1;"+(a+1)+"R":d.C0.ESC+"OR";break;case 115:w.key=a?d.C0.ESC+"[1;"+(a+1)+"S":d.C0.ESC+"OS";break;case 116:w.key=a?d.C0.ESC+"[15;"+(a+1)+"~":d.C0.ESC+"[15~";break;case 117:w.key=a?d.C0.ESC+"[17;"+(a+1)+"~":d.C0.ESC+"[17~";break;case 118:w.key=a?d.C0.ESC+"[18;"+(a+1)+"~":d.C0.ESC+"[18~";break;case 119:w.key=a?d.C0.ESC+"[19;"+(a+1)+"~":d.C0.ESC+"[19~";break;case 120:w.key=a?d.C0.ESC+"[20;"+(a+1)+"~":d.C0.ESC+"[20~";break;case 121:w.key=a?d.C0.ESC+"[21;"+(a+1)+"~":d.C0.ESC+"[21~";break;case 122:w.key=a?d.C0.ESC+"[23;"+(a+1)+"~":d.C0.ESC+"[23~";break;case 123:w.key=a?d.C0.ESC+"[24;"+(a+1)+"~":d.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(x&&!E||!f.altKey||f.metaKey)!x||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?w.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(w.key=d.C0.US),f.key==="@"&&(w.key=d.C0.NUL)):f.keyCode===65&&(w.type=1);else{const l=y[f.keyCode],o=l==null?void 0:l[f.shiftKey?1:0];if(o)w.key=d.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){const c=f.ctrlKey?f.keyCode-64:f.keyCode+32;let _=String.fromCharCode(c);f.shiftKey&&(_=_.toUpperCase()),w.key=d.C0.ESC+_}else if(f.keyCode===32)w.key=d.C0.ESC+(f.ctrlKey?d.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let c=f.code.slice(3,4);f.shiftKey||(c=c.toLowerCase()),w.key=d.C0.ESC+c,w.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?w.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?w.key=d.C0.NUL:f.keyCode>=51&&f.keyCode<=55?w.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?w.key=d.C0.DEL:f.keyCode===219?w.key=d.C0.ESC:f.keyCode===220?w.key=d.C0.FS:f.keyCode===221&&(w.key=d.C0.GS)}return w}},482:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},n.utf32ToString=function(u,d=0,y=u.length){let f="";for(let g=d;g<y;++g){let x=u[g];x>65535?(x-=65536,f+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):f+=String.fromCharCode(x)}return f},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,d){const y=u.length;if(!y)return 0;let f=0,g=0;if(this._interim){const x=u.charCodeAt(g++);56320<=x&&x<=57343?d[f++]=1024*(this._interim-55296)+x-56320+65536:(d[f++]=this._interim,d[f++]=x),this._interim=0}for(let x=g;x<y;++x){const E=u.charCodeAt(x);if(55296<=E&&E<=56319){if(++x>=y)return this._interim=E,f;const w=u.charCodeAt(x);56320<=w&&w<=57343?d[f++]=1024*(E-55296)+w-56320+65536:(d[f++]=E,d[f++]=w)}else E!==65279&&(d[f++]=E)}return f}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,d){const y=u.length;if(!y)return 0;let f,g,x,E,w=0,a=0,l=0;if(this.interim[0]){let _=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let b,L=0;for(;(b=63&this.interim[++L])&&L<4;)S<<=6,S|=b;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=p-L;for(;l<k;){if(l>=y)return 0;if(b=u[l++],(192&b)!=128){l--,_=!0;break}this.interim[L++]=b,S<<=6,S|=63&b}_||(p===2?S<128?l--:d[w++]=S:p===3?S<2048||S>=55296&&S<=57343||S===65279||(d[w++]=S):S<65536||S>1114111||(d[w++]=S)),this.interim.fill(0)}const o=y-4;let c=l;for(;c<y;){for(;!(!(c<o)||128&(f=u[c])||128&(g=u[c+1])||128&(x=u[c+2])||128&(E=u[c+3]));)d[w++]=f,d[w++]=g,d[w++]=x,d[w++]=E,c+=4;if(f=u[c++],f<128)d[w++]=f;else if((224&f)==192){if(c>=y)return this.interim[0]=f,w;if(g=u[c++],(192&g)!=128){c--;continue}if(a=(31&f)<<6|63&g,a<128){c--;continue}d[w++]=a}else if((240&f)==224){if(c>=y)return this.interim[0]=f,w;if(g=u[c++],(192&g)!=128){c--;continue}if(c>=y)return this.interim[0]=f,this.interim[1]=g,w;if(x=u[c++],(192&x)!=128){c--;continue}if(a=(15&f)<<12|(63&g)<<6|63&x,a<2048||a>=55296&&a<=57343||a===65279)continue;d[w++]=a}else if((248&f)==240){if(c>=y)return this.interim[0]=f,w;if(g=u[c++],(192&g)!=128){c--;continue}if(c>=y)return this.interim[0]=f,this.interim[1]=g,w;if(x=u[c++],(192&x)!=128){c--;continue}if(c>=y)return this.interim[0]=f,this.interim[1]=g,this.interim[2]=x,w;if(E=u[c++],(192&E)!=128){c--;continue}if(a=(7&f)<<18|(63&g)<<12|(63&x)<<6|63&E,a<65536||a>1114111)continue;d[w++]=a}}return w}}},225:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let y;n.UnicodeV6=class{constructor(){if(this.version="6",!y){y=new Uint8Array(65536),y.fill(1),y[0]=0,y.fill(0,1,32),y.fill(0,127,160),y.fill(2,4352,4448),y[9001]=2,y[9002]=2,y.fill(2,11904,42192),y[12351]=1,y.fill(2,44032,55204),y.fill(2,63744,64256),y.fill(2,65040,65050),y.fill(2,65072,65136),y.fill(2,65280,65377),y.fill(2,65504,65511);for(let f=0;f<u.length;++f)y.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?y[f]:function(g,x){let E,w=0,a=x.length-1;if(g<x[0][0]||g>x[a][1])return!1;for(;a>=w;)if(E=w+a>>1,g>x[E][1])w=E+1;else{if(!(g<x[E][0]))return!0;a=E-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const d=u(8460),y=u(844);class f extends y.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(E),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(E)}_innerWrite(x=0,E=!0){const w=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const a=this._writeBuffer[this._bufferOffset],l=this._action(a,E);if(l){const c=_=>Date.now()-w>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(w,_);return void l.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=f},5941:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function y(f,g){const x=f.toString(16),E=x.length<2?"0"+x:x;switch(g){case 4:return x[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}n.parseColor=function(f){if(!f)return;let g=f.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const x=u.exec(g);if(x){const E=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/E*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/E*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/E*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),d.exec(g)&&[3,6,9,12].includes(g.length))){const x=g.length/3,E=[0,0,0];for(let w=0;w<3;++w){const a=parseInt(g.slice(x*w,x*w+x),16);E[w]=x===1?a<<4:x===2?a:x===3?a>>4:a>>8}return E}},n.toRgbString=function(f,g=16){const[x,E,w]=f;return`rgb:${y(x,g)}/${y(E,g)}/${y(w,g)}`}},5770:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const d=u(482),y=u(8742),f=u(5770),g=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(E,w){this._handlers[E]===void 0&&(this._handlers[E]=[]);const a=this._handlers[E];return a.push(w),{dispose:()=>{const l=a.indexOf(w);l!==-1&&a.splice(l,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(E,w){if(this.reset(),this._ident=E,this._active=this._handlers[E]||g,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(E,w,a){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(E,w,a);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(E,w,a))}unhook(E,w=!0){if(this._active.length){let a=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,a=w,o=this._stack.fallThrough,this._stack.paused=!1),!o&&a===!1){for(;l>=0&&(a=this._active[l].unhook(E),a!==!0);l--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,a;l--}for(;l>=0;l--)if(a=this._active[l].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",E);this._active=g,this._ident=0}};const x=new y.Params;x.addParam(0),n.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=x,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():x,this._data="",this._hitLimit=!1}put(E,w,a){this._hitLimit||(this._data+=(0,d.utf32ToString)(E,w,a),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let w=!1;if(this._hitLimit)w=!1;else if(E&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then(a=>(this._params=x,this._data="",this._hitLimit=!1,a));return this._params=x,this._data="",this._hitLimit=!1,w}}},2015:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const d=u(844),y=u(8742),f=u(6242),g=u(6351);class x{constructor(l){this.table=new Uint8Array(l)}setDefault(l,o){this.table.fill(l<<4|o)}add(l,o,c,_){this.table[o<<8|l]=c<<4|_}addMany(l,o,c,_){for(let S=0;S<l.length;S++)this.table[o<<8|l[S]]=c<<4|_}}n.TransitionTable=x;const E=160;n.VT500_TRANSITION_TABLE=function(){const a=new x(4095),l=Array.apply(null,Array(256)).map((L,p)=>p),o=(L,p)=>l.slice(L,p),c=o(32,127),_=o(0,24);_.push(25),_.push.apply(_,o(28,32));const S=o(0,14);let b;for(b in a.setDefault(1,0),a.addMany(c,0,2,0),S)a.addMany([24,26,153,154],b,3,0),a.addMany(o(128,144),b,3,0),a.addMany(o(144,152),b,3,0),a.add(156,b,0,0),a.add(27,b,11,1),a.add(157,b,4,8),a.addMany([152,158,159],b,0,7),a.add(155,b,11,3),a.add(144,b,11,9);return a.addMany(_,0,3,0),a.addMany(_,1,3,1),a.add(127,1,0,1),a.addMany(_,8,0,8),a.addMany(_,3,3,3),a.add(127,3,0,3),a.addMany(_,4,3,4),a.add(127,4,0,4),a.addMany(_,6,3,6),a.addMany(_,5,3,5),a.add(127,5,0,5),a.addMany(_,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(c,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(o(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(c,7,0,7),a.addMany(_,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(o(64,127),3,7,0),a.addMany(o(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(o(48,60),4,8,4),a.addMany(o(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(o(32,64),6,0,6),a.add(127,6,0,6),a.addMany(o(64,127),6,0,0),a.addMany(o(32,48),3,9,5),a.addMany(o(32,48),5,9,5),a.addMany(o(48,64),5,0,6),a.addMany(o(64,127),5,7,0),a.addMany(o(32,48),4,9,5),a.addMany(o(32,48),1,9,2),a.addMany(o(32,48),2,9,2),a.addMany(o(48,127),2,10,0),a.addMany(o(48,80),1,10,0),a.addMany(o(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(o(96,127),1,10,0),a.add(80,1,11,9),a.addMany(_,9,0,9),a.add(127,9,0,9),a.addMany(o(28,32),9,0,9),a.addMany(o(32,48),9,9,12),a.addMany(o(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(_,11,0,11),a.addMany(o(32,128),11,0,11),a.addMany(o(28,32),11,0,11),a.addMany(_,10,0,10),a.add(127,10,0,10),a.addMany(o(28,32),10,0,10),a.addMany(o(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(o(32,48),10,9,12),a.addMany(_,12,0,12),a.add(127,12,0,12),a.addMany(o(28,32),12,0,12),a.addMany(o(32,48),12,9,12),a.addMany(o(48,64),12,0,11),a.addMany(o(64,127),12,12,13),a.addMany(o(64,127),10,12,13),a.addMany(o(64,127),9,12,13),a.addMany(_,13,13,13),a.addMany(c,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(E,0,2,0),a.add(E,8,5,8),a.add(E,6,0,6),a.add(E,11,0,11),a.add(E,13,13,13),a}();class w extends d.Disposable{constructor(l=n.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new y.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,c,_)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,o=[64,126]){let c=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=l.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<l.intermediates.length;++S){const b=l.intermediates.charCodeAt(S);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=b}}if(l.final.length!==1)throw new Error("final must be a single byte");const _=l.final.charCodeAt(0);if(o[0]>_||_>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=_,c}identToString(l){const o=[];for(;l;)o.push(String.fromCharCode(255&l)),l>>=8;return o.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,o){const c=this._identifier(l,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const _=this._escHandlers[c];return _.push(o),{dispose:()=>{const S=_.indexOf(o);S!==-1&&_.splice(S,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,o){this._executeHandlers[l.charCodeAt(0)]=o}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,o){const c=this._identifier(l);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const _=this._csiHandlers[c];return _.push(o),{dispose:()=>{const S=_.indexOf(o);S!==-1&&_.splice(S,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,o){return this._dcsParser.registerHandler(this._identifier(l),o)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,o){return this._oscParser.registerHandler(l,o)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,o,c,_,S){this._parseStack.state=l,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=_,this._parseStack.chunkPos=S}parse(l,o,c){let _,S=0,b=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const p=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&k>-1){for(;k>=0&&(_=p[k](this._params),_!==!0);k--)if(_ instanceof Promise)return this._parseStack.handlerPos=k,_}this._parseStack.handlers=[];break;case 4:if(c===!1&&k>-1){for(;k>=0&&(_=p[k](),_!==!0);k--)if(_ instanceof Promise)return this._parseStack.handlerPos=k,_}this._parseStack.handlers=[];break;case 6:if(S=l[this._parseStack.chunkPos],_=this._dcsParser.unhook(S!==24&&S!==26,c),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=l[this._parseStack.chunkPos],_=this._oscParser.end(S!==24&&S!==26,c),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let p=L;p<o;++p){switch(S=l[p],b=this._transitions.table[this.currentState<<8|(S<160?S:E)],b>>4){case 2:for(let N=p+1;;++N){if(N>=o||(S=l[N])<32||S>126&&S<E){this._printHandler(l,p,N),p=N-1;break}if(++N>=o||(S=l[N])<32||S>126&&S<E){this._printHandler(l,p,N),p=N-1;break}if(++N>=o||(S=l[N])<32||S>126&&S<E){this._printHandler(l,p,N),p=N-1;break}if(++N>=o||(S=l[N])<32||S>126&&S<E){this._printHandler(l,p,N),p=N-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|S];let C=k?k.length-1:-1;for(;C>=0&&(_=k[C](this._params),_!==!0);C--)if(_ instanceof Promise)return this._preserveStack(3,k,C,b,p),_;C<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++p<o&&(S=l[p])>47&&S<60);p--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const j=this._escHandlers[this._collect<<8|S];let D=j?j.length-1:-1;for(;D>=0&&(_=j[D](),_!==!0);D--)if(_ instanceof Promise)return this._preserveStack(4,j,D,b,p),_;D<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let N=p+1;;++N)if(N>=o||(S=l[N])===24||S===26||S===27||S>127&&S<E){this._dcsParser.put(l,p,N),p=N-1;break}break;case 14:if(_=this._dcsParser.unhook(S!==24&&S!==26),_)return this._preserveStack(6,[],0,b,p),_;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let N=p+1;;N++)if(N>=o||(S=l[N])<32||S>127&&S<E){this._oscParser.put(l,p,N),p=N-1;break}break;case 6:if(_=this._oscParser.end(S!==24&&S!==26),_)return this._preserveStack(5,[],0,b,p),_;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}n.EscapeSequenceParser=w},6242:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const d=u(5770),y=u(482),f=[];n.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,x){this._handlers[g]===void 0&&(this._handlers[g]=[]);const E=this._handlers[g];return E.push(x),{dispose:()=>{const w=E.indexOf(x);w!==-1&&E.splice(w,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,x,E){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(g,x,E);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(g,x,E))}start(){this.reset(),this._state=1}put(g,x,E){if(this._state!==3){if(this._state===1)for(;x<E;){const w=g[x++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&E-x>0&&this._put(g,x,E)}}end(g,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,w=this._active.length-1,a=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,E=x,a=this._stack.fallThrough,this._stack.paused=!1),!a&&E===!1){for(;w>=0&&(E=this._active[w].end(g),E!==!0);w--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,E;w--}for(;w>=0;w--)if(E=this._active[w].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",g);this._active=f,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,x,E){this._hitLimit||(this._data+=(0,y.utf32ToString)(g,x,E),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let x=!1;if(this._hitLimit)x=!1;else if(g&&(x=this._handler(this._data),x instanceof Promise))return x.then(E=>(this._data="",this._hitLimit=!1,E));return this._data="",this._hitLimit=!1,x}}},8742:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const u=2147483647;class d{static fromArray(f){const g=new d;if(!f.length)return g;for(let x=Array.isArray(f[0])?1:0;x<f.length;++x){const E=f[x];if(Array.isArray(E))for(let w=0;w<E.length;++w)g.addSubParam(E[w]);else g.addParam(E)}return g}constructor(f=32,g=32){if(this.maxLength=f,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new d(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let g=0;g<this.length;++g){f.push(this.params[g]);const x=this._subParamsIdx[g]>>8,E=255&this._subParamsIdx[g];E-x>0&&f.push(Array.prototype.slice.call(this._subParams,x,E))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>u?u:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>u?u:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const g=this._subParamsIdx[f]>>8,x=255&this._subParamsIdx[f];return x-g>0?this._subParams.subarray(g,x):null}getSubParamsAll(){const f={};for(let g=0;g<this.length;++g){const x=this._subParamsIdx[g]>>8,E=255&this._subParamsIdx[g];E-x>0&&(f[g]=this._subParams.slice(x,E))}return f}addDigit(f){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,E=x[g-1];x[g-1]=~E?Math.min(10*E+f,u):f}}n.Params=d},5741:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,d){const y={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(y),d.dispose=()=>this._wrappedAddonDispose(y),d.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let d=-1;for(let y=0;y<this._addons.length;y++)if(this._addons[y]===u){d=y;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(d,1)}}},8771:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const d=u(3785),y=u(511);n.BufferApiView=class{constructor(f,g){this._buffer=f,this.type=g}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const g=this._buffer.lines.get(f);if(g)return new d.BufferLineApiView(g)}getNullCell(){return new y.CellData}}},3785:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const d=u(511);n.BufferLineApiView=class{constructor(y){this._line=y}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(y,f){if(!(y<0||y>=this._line.length))return f?(this._line.loadCell(y,f),f):this._line.loadCell(y,new d.CellData)}translateToString(y,f,g){return this._line.translateToString(y,f,g)}}},8285:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const d=u(8771),y=u(8460),f=u(844);class g extends f.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new y.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}n.BufferNamespaceApi=g},7975:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,d){return this._core.registerCsiHandler(u,y=>d(y.toArray()))}addCsiHandler(u,d){return this.registerCsiHandler(u,d)}registerDcsHandler(u,d){return this._core.registerDcsHandler(u,(y,f)=>d(y,f.toArray()))}addDcsHandler(u,d){return this.registerDcsHandler(u,d)}registerEscHandler(u,d){return this._core.registerEscHandler(u,d)}addEscHandler(u,d){return this.registerEscHandler(u,d)}registerOscHandler(u,d){return this._core.registerOscHandler(u,d)}addOscHandler(u,d){return this.registerOscHandler(u,d)}}},7090:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(m,n,u){var d=this&&this.__decorate||function(a,l,o,c){var _,S=arguments.length,b=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,o,c);else for(var L=a.length-1;L>=0;L--)(_=a[L])&&(b=(S<3?_(b):S>3?_(l,o,b):_(l,o))||b);return S>3&&b&&Object.defineProperty(l,o,b),b},y=this&&this.__param||function(a,l){return function(o,c){l(o,c,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const f=u(8460),g=u(844),x=u(5295),E=u(2585);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let w=n.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(a,this))}resize(a,l){this.cols=a,this.rows=l,this.buffers.resize(a,l),this._onResize.fire({cols:a,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,l=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===a.fg&&c.getBg(0)===a.bg||(c=o.getBlankLine(a,l),this._cachedBlankLine=c),c.isWrapped=l;const _=o.ybase+o.scrollTop,S=o.ybase+o.scrollBottom;if(o.scrollTop===0){const b=o.lines.isFull;S===o.lines.length-1?b?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(S+1,0,c.clone()),b?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const b=S-_+1;o.lines.shiftElements(_+1,b-1,-1),o.lines.set(S,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(a,l,o){const c=this.buffer;if(a<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else a+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const _=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+a,c.ybase),0),_!==c.ydisp&&(l||this._onScroll.fire(c.ydisp))}};n.BufferService=w=d([y(0,E.IOptionsService)],w)},7994:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,d){this._charsets[u]=d,this.glevel===u&&(this.charset=d)}}},1753:function(m,n,u){var d=this&&this.__decorate||function(c,_,S,b){var L,p=arguments.length,k=p<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,_,S,b);else for(var C=c.length-1;C>=0;C--)(L=c[C])&&(k=(p<3?L(k):p>3?L(_,S,k):L(_,S))||k);return p>3&&k&&Object.defineProperty(_,S,k),k},y=this&&this.__param||function(c,_){return function(S,b){_(S,b,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const f=u(2585),g=u(8460),x=u(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function w(c,_){let S=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(S|=64,S|=c.action):(S|=3&c.button,4&c.button&&(S|=64),8&c.button&&(S|=128),c.action===32?S|=32:c.action!==0||_||(S|=3)),S}const a=String.fromCharCode,l={DEFAULT:c=>{const _=[w(c,!1)+32,c.col+32,c.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${a(_[0])}${a(_[1])}${a(_[2])}`},SGR:c=>{const _=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${w(c,!0)};${c.col};${c.row}${_}`},SGR_PIXELS:c=>{const _=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${w(c,!0)};${c.x};${c.y}${_}`}};let o=n.CoreMouseService=class extends x.Disposable{constructor(c,_){super(),this._bufferService=c,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(E))this.addProtocol(S,E[S]);for(const S of Object.keys(l))this.addEncoding(S,l[S]);this.reset()}addProtocol(c,_){this._protocols[c]=_}addEncoding(c,_){this._encodings[c]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const _=this._encodings[this._activeEncoding](c);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,_,S){if(S){if(c.x!==_.x||c.y!==_.y)return!1}else if(c.col!==_.col||c.row!==_.row)return!1;return c.button===_.button&&c.action===_.action&&c.ctrl===_.ctrl&&c.alt===_.alt&&c.shift===_.shift}};n.CoreMouseService=o=d([y(0,f.IBufferService),y(1,f.ICoreService)],o)},6975:function(m,n,u){var d=this&&this.__decorate||function(o,c,_,S){var b,L=arguments.length,p=L<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,c,_,S);else for(var k=o.length-1;k>=0;k--)(b=o[k])&&(p=(L<3?b(p):L>3?b(c,_,p):b(c,_))||p);return L>3&&p&&Object.defineProperty(c,_,p),p},y=this&&this.__param||function(o,c){return function(_,S){c(_,S,o)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const f=u(1439),g=u(8460),x=u(844),E=u(2585),w=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=n.CoreService=class extends x.Disposable{constructor(o,c,_){super(),this._bufferService=o,this._logService=c,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(a)}reset(){this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(a)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(S=>S.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(o))}};n.CoreService=l=d([y(0,E.IBufferService),y(1,E.ILogService),y(2,E.IOptionsService)],l)},9074:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const d=u(8055),y=u(8460),f=u(844),g=u(6106);let x=0,E=0;class w extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new y.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new y.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new a(o);if(c){const _=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),_.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,_){var S,b,L;let p=0,k=0;for(const C of this._decorations.getKeyIterator(c))p=(S=C.options.x)!==null&&S!==void 0?S:0,k=p+((b=C.options.width)!==null&&b!==void 0?b:1),o>=p&&o<k&&(!_||((L=C.options.layer)!==null&&L!==void 0?L:"bottom")===_)&&(yield C)}forEachDecorationAtCell(o,c,_,S){this._decorations.forEachByKey(c,b=>{var L,p,k;x=(L=b.options.x)!==null&&L!==void 0?L:0,E=x+((p=b.options.width)!==null&&p!==void 0?p:1),o>=x&&o<E&&(!_||((k=b.options.layer)!==null&&k!==void 0?k:"bottom")===_)&&S(b)})}}n.DecorationService=w;class a extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new y.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const d=u(2585),y=u(8343);class f{constructor(...x){this._entries=new Map;for(const[E,w]of x)this.set(E,w)}set(x,E){const w=this._entries.get(x);return this._entries.set(x,E),w}forEach(x){for(const[E,w]of this._entries.entries())x(E,w)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}n.ServiceCollection=f,n.InstantiationService=class{constructor(){this._services=new f,this._services.set(d.IInstantiationService,this)}setService(g,x){this._services.set(g,x)}getService(g){return this._services.get(g)}createInstance(g,...x){const E=(0,y.getServiceDependencies)(g).sort((l,o)=>l.index-o.index),w=[];for(const l of E){const o=this._services.get(l.id);if(!o)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${l.id}.`);w.push(o)}const a=E.length>0?E[0].index:x.length;if(x.length!==a)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${a+1} conflicts with ${x.length} static arguments`);return new g(...x,...w)}}},7866:function(m,n,u){var d=this&&this.__decorate||function(a,l,o,c){var _,S=arguments.length,b=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,l,o,c);else for(var L=a.length-1;L>=0;L--)(_=a[L])&&(b=(S<3?_(b):S>3?_(l,o,b):_(l,o))||b);return S>3&&b&&Object.defineProperty(l,o,b),b},y=this&&this.__param||function(a,l){return function(o,c){l(o,c,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const f=u(844),g=u(2585),x={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let E,w=n.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),E=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let l=0;l<a.length;l++)typeof a[l]=="function"&&(a[l]=a[l]())}_log(a,l,o){this._evalLazyOptionalParams(o),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...o)}trace(a,...l){var o,c;this._logLevel<=g.LogLevelEnum.TRACE&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,l)}debug(a,...l){var o,c;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,l)}info(a,...l){var o,c;this._logLevel<=g.LogLevelEnum.INFO&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,a,l)}warn(a,...l){var o,c;this._logLevel<=g.LogLevelEnum.WARN&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,a,l)}error(a,...l){var o,c;this._logLevel<=g.LogLevelEnum.ERROR&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,a,l)}};n.LogService=w=d([y(0,g.IOptionsService)],w),n.setTraceLogger=function(a){E=a},n.traceCall=function(a,l,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(..._){if(E.logLevel!==g.LogLevelEnum.TRACE)return c.apply(this,_);E.trace(`GlyphRenderer#${c.name}(${_.map(b=>JSON.stringify(b)).join(", ")})`);const S=c.apply(this,_);return E.trace(`GlyphRenderer#${c.name} return`,S),S}}},7302:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const d=u(8460),y=u(844),f=u(6114);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends y.Disposable{constructor(w){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const a=Object.assign({},n.DEFAULT_OPTIONS);for(const l in w)if(l in a)try{const o=w[l];a[l]=this._sanitizeAndValidateOption(l,o)}catch(o){console.error(o)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(w,a){return this.onOptionChange(l=>{l===w&&a(this.rawOptions[w])})}onMultipleOptionChange(w,a){return this.onOptionChange(l=>{w.indexOf(l)!==-1&&a()})}_setupOptions(){const w=l=>{if(!(l in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},a=(l,o)=>{if(!(l in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);o=this._sanitizeAndValidateOption(l,o),this.rawOptions[l]!==o&&(this.rawOptions[l]=o,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const o={get:w.bind(this,l),set:a.bind(this,l)};Object.defineProperty(this.options,l,o)}}_sanitizeAndValidateOption(w,a){switch(w){case"cursorStyle":if(a||(a=n.DEFAULT_OPTIONS[w]),!function(l){return l==="block"||l==="underline"||l==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${w}`);break;case"wordSeparator":a||(a=n.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=g.includes(a)?a:n.DEFAULT_OPTIONS[w];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${w} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${w} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}n.OptionsService=x},2660:function(m,n,u){var d=this&&this.__decorate||function(x,E,w,a){var l,o=arguments.length,c=o<3?E:a===null?a=Object.getOwnPropertyDescriptor(E,w):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(x,E,w,a);else for(var _=x.length-1;_>=0;_--)(l=x[_])&&(c=(o<3?l(c):o>3?l(E,w,c):l(E,w))||c);return o>3&&c&&Object.defineProperty(E,w,c),c},y=this&&this.__param||function(x,E){return function(w,a){E(w,a,x)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const f=u(2585);let g=n.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const E=this._bufferService.buffer;if(x.id===void 0){const _=E.addMarker(E.ybase+E.y),S={data:x,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(S,_)),this._dataByLinkId.set(S.id,S),S.id}const w=x,a=this._getEntryIdKey(w),l=this._entriesWithId.get(a);if(l)return this.addLineToLink(l.id,E.ybase+E.y),l.id;const o=E.addMarker(E.ybase+E.y),c={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(x,E){const w=this._dataByLinkId.get(x);if(w&&w.lines.every(a=>a.line!==E)){const a=this._bufferService.buffer.addMarker(E);w.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(w,a))}}getLinkData(x){var E;return(E=this._dataByLinkId.get(x))===null||E===void 0?void 0:E.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,E){const w=x.lines.indexOf(E);w!==-1&&(x.lines.splice(w,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};n.OscLinkService=g=d([y(0,f.IBufferService)],g)},8343:(m,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const u="di$target",d="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(y){return y[d]||[]},n.createDecorator=function(y){if(n.serviceRegistry.has(y))return n.serviceRegistry.get(y);const f=function(g,x,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,a,l){a[u]===a?a[d].push({id:w,index:l}):(a[d]=[{id:w,index:l}],a[u]=a)})(f,g,E)};return f.toString=()=>y,n.serviceRegistry.set(y,f),f}},2585:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const d=u(8343);var y;n.IBufferService=(0,d.createDecorator)("BufferService"),n.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),n.ICoreService=(0,d.createDecorator)("CoreService"),n.ICharsetService=(0,d.createDecorator)("CharsetService"),n.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(y||(n.LogLevelEnum=y={})),n.ILogService=(0,d.createDecorator)("LogService"),n.IOptionsService=(0,d.createDecorator)("OptionsService"),n.IOscLinkService=(0,d.createDecorator)("OscLinkService"),n.IUnicodeService=(0,d.createDecorator)("UnicodeService"),n.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(m,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const d=u(8460),y=u(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const f=new y.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let g=0;const x=f.length;for(let E=0;E<x;++E){let w=f.charCodeAt(E);if(55296<=w&&w<=56319){if(++E>=x)return g+this.wcwidth(w);const a=f.charCodeAt(E);56320<=a&&a<=57343?w=1024*(w-55296)+a-56320+65536:g+=this.wcwidth(a)}g+=this.wcwidth(w)}return g}}}},s={};function i(m){var n=s[m];if(n!==void 0)return n.exports;var u=s[m]={exports:{}};return r[m].call(u.exports,u,u.exports,i),u.exports}var h={};return(()=>{var m=h;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const n=i(9042),u=i(3236),d=i(844),y=i(5741),f=i(8285),g=i(7975),x=i(7090),E=["cols","rows"];class w extends d.Disposable{constructor(l){super(),this._core=this.register(new u.Terminal(l)),this._addonManager=this.register(new y.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=_=>this._core.options[_],c=(_,S)=>{this._checkReadonlyOptions(_),this._core.options[_]=S};for(const _ in this._core.options){const S={get:o.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this._publicOptions,_,S)}}_checkReadonlyOptions(l){if(E.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const o in l)this._publicOptions[o]=l[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,o){this._verifyIntegers(l,o),this._core.resize(l,o)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var o,c,_;return this._checkProposedApi(),this._verifyPositiveIntegers((o=l.x)!==null&&o!==void 0?o:0,(c=l.width)!==null&&c!==void 0?c:0,(_=l.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,o,c){this._verifyIntegers(l,o,c),this._core.select(l,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,o){this._verifyIntegers(l,o),this._core.selectLines(l,o)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,o){this._core.write(l,o)}writeln(l,o){this._core.write(l),this._core.write(`\r
`,o)}paste(l){this._core.paste(l)}refresh(l,o){this._verifyIntegers(l,o),this._core.refresh(l,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return n}_verifyIntegers(...l){for(const o of l)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const o of l)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}m.Terminal=w})(),h})())})(_d);var Rc=_d.exports,vd={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,function(){return(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const h=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(h._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,h=i._renderService.dimensions;if(h.css.cell.width===0||h.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(n.getPropertyValue("height")),d=Math.max(0,parseInt(n.getPropertyValue("width"))),y=window.getComputedStyle(this._terminal.element),f=u-(parseInt(y.getPropertyValue("padding-top"))+parseInt(y.getPropertyValue("padding-bottom"))),g=d-(parseInt(y.getPropertyValue("padding-right"))+parseInt(y.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(g/h.css.cell.width)),rows:Math.max(1,Math.floor(f/h.css.cell.height))}}}})(),r})()})})(vd);var ym=vd.exports;function gd({host:e,container:t,onClose:r,defaultShell:s="auto"}){const i=O.useRef(null),h=O.useRef(null),m=O.useRef(null),n=O.useRef(null),[u,d]=O.useState("connecting"),[y,f]=O.useState(s),[g,x]=O.useState(0),E=O.useCallback(()=>{var p;d("connecting");const w=location.protocol==="https:"?"wss":"ws",a=new URLSearchParams;a.set("shell",y);const l=`${w}://${location.host}/api/ws/hosts/${encodeURIComponent(e)}/containers/${encodeURIComponent(t)}/exec?${a.toString()}`,o=h.current||(h.current=new Rc.Terminal({fontFamily:'Menlo, Monaco, "Courier New", monospace',fontSize:13,convertEol:!0,cursorBlink:!0,theme:{background:"#0b1220"},allowProposedApi:!0,scrollback:4e3}));let c=m.current;c||(c=new ym.FitAddon,o.loadAddon(c),m.current=c),i.current&&((p=o._core)==null?void 0:p.screenElement)==null&&(o.open(i.current),setTimeout(()=>c.fit(),10));const _=new WebSocket(l);_.binaryType="arraybuffer",n.current=_,_.onopen=()=>{d("open");try{c.fit(),_.send(JSON.stringify({type:"resize",cols:o.cols,rows:o.rows}))}catch{}o.focus(),o.writeln(`\x1B[38;5;67m[connected]\x1B[0m  shell=${y}`)},_.onclose=()=>{d("closed"),o.writeln(`\r
\x1B[38;5;203m[disconnected]\x1B[0m`)},_.onerror=()=>{d("closed"),o.writeln(`\r
\x1B[38;5;203m[error]\x1B[0m`)},_.onmessage=k=>{if(k.data instanceof ArrayBuffer){const C=new TextDecoder;o.write(C.decode(new Uint8Array(k.data)))}else o.write(String(k.data))};const S=o.onData(k=>{try{_.send(k)}catch{}}),b=()=>{try{c.fit(),_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"resize",cols:o.cols,rows:o.rows}))}catch{}};window.addEventListener("resize",b);const L=new ResizeObserver(b);return i.current&&L.observe(i.current),()=>{S.dispose(),window.removeEventListener("resize",b),L.disconnect();try{_.close()}catch{}}},[e,t,y,g]);return O.useEffect(()=>E(),[E]),O.useEffect(()=>{const w=h.current||(h.current=new Rc.Terminal);return()=>{try{w.dispose()}catch{}h.current=null,m.current=null,n.current=null}},[]),v.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:v.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-5xl h-[70vh] p-3 flex flex-col",onClick:w=>w.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsxs("div",{className:"text-slate-200 font-semibold",children:["Console: ",v.jsx("span",{className:"text-slate-400",children:e})," /"," ",v.jsx("span",{className:"text-slate-400",children:t}),v.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:u})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-xs text-slate-300",children:"Shell"}),v.jsxs("select",{className:"text-xs bg-slate-900 border border-slate-700 rounded px-2 py-1 text-slate-200",value:y,onChange:w=>f(w.target.value),title:"Pick a shell; Auto tries bash  ash  dash  sh",children:[v.jsx("option",{value:"auto",children:"Auto"}),v.jsx("option",{value:"bash",children:"bash"}),v.jsx("option",{value:"ash",children:"ash"}),v.jsx("option",{value:"dash",children:"dash"}),v.jsx("option",{value:"sh",children:"sh"})]}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>x(w=>w+1),title:"Reconnect with current shell",children:"Reconnect"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>{var w;try{(w=n.current)==null||w.send("")}catch{}},children:"Ctrl-C"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>{var w;try{(w=n.current)==null||w.send("")}catch{}},children:"Ctrl-D"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:r,children:"Close"})]})]}),v.jsx("div",{className:"flex-1 rounded-md border border-slate-800 bg-[#0b1220] overflow-hidden",children:v.jsx("div",{ref:i,className:"w-full h-full"})}),v.jsxs("div",{className:"pt-2 text-xs text-slate-400",children:["Tip: Auto tries ",v.jsx("code",{children:"bash"}),"  ",v.jsx("code",{children:"ash"}),"  ",v.jsx("code",{children:"dash"}),"  ",v.jsx("code",{children:"sh"}),". Resize is wired so the terminal fits your window."]})]})})}function qs(e){if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleString()}function yd(e){const t=Array.isArray(e)?e:e&&Array.isArray(e.ports)?e.ports:[],r=[];for(const s of t){const i=s.IP||s.Ip||s.ip||"",h=s.PublicPort??s.publicPort,m=s.PrivatePort??s.privatePort,n=(s.Type??s.type??"").toString().toLowerCase()||"tcp";if(m){const u=h?`${i?i+":":""}${h}`:"";r.push(`${u?u+"  ":""}${m}/${n}`)}}return r}function Sm({hosts:e,onOpenStack:t}){const[r,s]=O.useState(null),[i,h]=O.useState(!1),[m,n]=O.useState(null),[u,d]=O.useState([]),[y,f]=O.useState(""),[g,x]=O.useState(null),[E,w]=O.useState(null),[a,l]=O.useState(null);O.useEffect(()=>{e.length>0&&!r&&s(e[0])},[e,r]);function o(C,j){return j?[C.name,C.state,C.stack,C.imageRun,C.imageIac,C.ip,C.portsText,C.owner].filter(Boolean).join(" ").toLowerCase().includes(j.toLowerCase()):!0}async function c(C,j){if(r)try{await fetch(`/api/hosts/${encodeURIComponent(r.name)}/containers/${encodeURIComponent(C)}/action`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:j})}),S(r.name),d(D=>D.map(N=>({...N,rows:N.rows.map(I=>I.name===C?{...I,state:j==="pause"?"paused":j==="unpause"?"running":j==="stop"?"exited":j==="kill"?"dead":j==="remove"?"removed":j==="start"?"running":j==="restart"?"restarting":I.state}:I)})))}catch{alert("Action failed")}}function _(C){x({ctr:C})}const S=async C=>{h(!0),n(null);try{const[j,D]=await Promise.all([fetch(`/api/hosts/${encodeURIComponent(C)}/containers`,{credentials:"include"}),fetch(`/api/hosts/${encodeURIComponent(C)}/iac`,{credentials:"include"})]);if(j.status===401||D.status===401){window.location.replace("/auth/login");return}const N=await j.json(),I=await D.json(),B=N.items||[],$=I.stacks||[],W={};await Promise.all(($||[]).filter(H=>typeof(H==null?void 0:H.id)=="number").map(async H=>{var z;try{const X=await fetch(`/api/iac/stacks/${H.id}`,{credentials:"include"});if(!X.ok)return;const K=await X.json();(z=K==null?void 0:K.stack)!=null&&z.id&&(W[K.stack.id]=!!K.stack.effective_auto_devops)}catch{}}));const R=new Map;for(const H of B){const z=(H.compose_project||H.stack||"(none)").trim()||"(none)";R.has(z)||R.set(z,[]),R.get(z).push(H)}const A=new Map;for(const H of $)A.set(H.name,H);const P=new Set([...R.keys(),...A.keys()]),M=[];for(const H of Array.from(P).sort()){let z=function(q){if(!K||J.length===0)return;const Z=J.find(oe=>q.compose_service&&oe.service_name===q.compose_service||oe.container_name&&oe.container_name===q.name);return(Z==null?void 0:Z.image)||void 0};const X=R.get(H)||[],K=A.get(H),J=Array.isArray(K==null?void 0:K.services)?K.services:[],T=!!K&&(J.length>0||!!K.compose),F=!!K&&(!!K.compose||J.length>0),V=[];for(const q of X){const oe=yd(q.ports).join(`
`),ye=z(q),Tt=!!(ye&&ye.trim()&&ye.trim()!==(q.image||"").trim());V.push({name:q.name,state:q.state,stack:H,imageRun:q.image,imageIac:ye,created:qs(q.created_ts),ip:q.ip_addr,portsText:oe,owner:q.owner||"",drift:Tt})}if(K)for(const q of J)V.some(oe=>oe.name===(q.container_name||q.service_name))||V.push({name:q.container_name||q.service_name,state:"missing",stack:H,imageRun:void 0,imageIac:q.image,created:"",ip:"",portsText:"",owner:"",drift:!0});let U="unknown";T&&(U=V.some(q=>q.drift)?"drift":"in_sync");const Y=!!(K&&typeof K.id=="number"&&W[K.id]);M.push({name:H,drift:U,iacEnabled:Y,pullPolicy:T?K==null?void 0:K.pull_policy:void 0,sops:T?(K==null?void 0:K.sops_status)==="all":!1,deployKind:T?(K==null?void 0:K.deploy_kind)||"compose":"unmanaged",rows:V,iacId:K==null?void 0:K.id,hasIac:T,hasContent:F})}d(M)}catch(j){n((j==null?void 0:j.message)||"Failed to load host stacks")}finally{h(!1)}};O.useEffect(()=>{r&&S(r.name)},[r]);async function b(){if(!r)return;const C=new Set(u.map(D=>D.name));let j=prompt("New stack name:");if(j&&(j=j.trim(),!!j)){if(C.has(j)){alert("A stack with that name already exists.");return}try{const D=await fetch("/api/iac/stacks",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope_kind:"host",scope_name:r.name,stack_name:j,iac_enabled:!1})});if(!D.ok)throw new Error(`${D.status} ${D.statusText}`);const N=await D.json();t(r,j,N.id)}catch(D){alert((D==null?void 0:D.message)||"Failed to create stack")}}}async function L(C,j){const D=await fetch(`/api/iac/stacks/${C}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_devops:j})});if(!D.ok)throw new Error(`${D.status} ${D.statusText}`)}function p(C,j){const D=u[C];if(!D.iacId||!D.hasContent){j&&alert("This stack needs compose files or services before Auto DevOps can be enabled. Add content first.");return}d(N=>N.map((I,B)=>B===C?{...I,iacEnabled:j}:I)),L(D.iacId,j).catch(N=>{alert(`Failed to update Auto DevOps: ${(N==null?void 0:N.message)||N}`),d(I=>I.map((B,$)=>$===C?{...B,iacEnabled:!j}:B))})}async function k(C){const j=u[C];if(!j.iacId||!confirm(`Delete IaC for stack "${j.name}"? This removes IaC files/metadata but not runtime containers.`))return;const D=await fetch(`/api/iac/stacks/${j.iacId}`,{method:"DELETE",credentials:"include"});if(!D.ok){alert(`Failed to delete: ${D.status} ${D.statusText}`);return}d(N=>N.map((I,B)=>B===C?{...I,iacId:void 0,hasIac:!1,iacEnabled:!1,pullPolicy:void 0,sops:!1,drift:"unknown",hasContent:!1}:I))}return O.useEffect(()=>{if(!a)return;const C=j=>{j.key==="Escape"&&l(null)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[a]),v.jsxs("div",{className:"space-y-4",children:[g&&r&&v.jsx(pd,{host:r.name,container:g.ctr,onClose:()=>x(null)}),E&&r&&v.jsx(gd,{host:r.name,container:E.ctr,onClose:()=>w(null)}),a&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"info-title",onClick:()=>l(null),children:v.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-3xl p-4",onClick:C=>C.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-slate-200 font-semibold",id:"info-title",children:a.title}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>l(null),children:"Close"})]}),v.jsx("pre",{className:"text-xs text-slate-300 bg-slate-900 border border-slate-800 rounded p-3 max-h-[60vh] overflow-auto whitespace-pre-wrap",children:a.text})]})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"text-lg font-semibold text-white",children:"Stacks on:"}),v.jsxs("select",{value:(r==null?void 0:r.name)||"",onChange:C=>{const j=e.find(D=>D.name===C.target.value);j&&s(j)},className:"px-3 py-2 bg-slate-900/50 border border-slate-800 text-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#310937]",children:[v.jsx("option",{value:"",children:"Select a host"}),e.map(C=>v.jsxs("option",{value:C.name,children:[C.name," ",C.address&&`(${C.address})`]},C.name))]}),r&&v.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[v.jsxs(ee,{onClick:()=>S(r.name),className:"bg-[#310937] hover:bg-[#2a0830] text-white",children:[v.jsx(qr,{className:"h-4 w-4 mr-1"})," Sync"]}),v.jsxs(ee,{onClick:b,variant:"outline",className:"border-slate-700 text-slate-200",children:[v.jsx(ei,{className:"hidden"})," ","New Stack"]}),v.jsx("div",{className:"relative w-72",children:v.jsx(Ln,{value:y,onChange:C=>f(C.target.value),placeholder:`Search ${r.name}`,className:"pl-3 bg-slate-900/50 border-slate-800 text-slate-200 placeholder:text-slate-500"})})]})]}),r?v.jsxs(v.Fragment,{children:[i&&v.jsx("div",{className:"text-sm px-3 py-2 rounded-lg border border-slate-800 bg-slate-900/60 text-slate-300",children:"Loading stacks"}),m&&v.jsxs("div",{className:"text-sm px-3 py-2 rounded-lg border border-rose-800/50 bg-rose-950/50 text-rose-200",children:["Error: ",m]}),u.map((C,j)=>v.jsxs(tt,{className:"bg-slate-900/50 border-slate-800 rounded-xl",children:[v.jsxs(_r,{className:"pb-2 flex flex-row items-center justify-between",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx(mr,{className:"text-xl text-white",children:v.jsx("button",{className:"hover:underline",onClick:()=>t(r,C.name,C.iacId),children:C.name})}),v.jsxs("div",{className:"flex items-center gap-2",children:[fd(C.drift),v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:C.deployKind||"unknown"}),v.jsxs(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:["pull: ",C.hasIac&&C.pullPolicy||""]}),C.hasIac?C.sops?v.jsx(Ee,{className:"bg-indigo-900/40 border-indigo-700/40 text-indigo-200",children:"SOPS"}):v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:"no SOPS"}):v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:"No IaC"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{htmlFor:`auto-${j}`,className:"text-sm text-slate-300",children:"Auto DevOps"}),v.jsx(il,{id:`auto-${j}`,checked:!!C.iacEnabled,onCheckedChange:D=>p(j,!!D),disabled:!C.iacId||!C.hasContent}),C.iacId&&v.jsx(ee,{size:"icon",variant:"ghost",title:"Delete IaC for this stack",onClick:()=>k(j),children:v.jsx(Gr,{className:"h-4 w-4 text-rose-300"})})]})]}),v.jsxs(rt,{className:"pt-0",children:[v.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:v.jsxs("table",{className:"w-full text-xs table-fixed",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{className:"whitespace-nowrap",children:[v.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Name"}),v.jsx("th",{className:"px-2 py-2 text-left w-36",children:"State"}),v.jsx("th",{className:"px-2 py-2 text-left w-[24rem]",children:"Image"}),v.jsx("th",{className:"px-2 py-2 text-left w-40",children:"Created"}),v.jsx("th",{className:"px-2 py-2 text-left w-36",children:"IP"}),v.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Published Ports"}),v.jsx("th",{className:"px-2 py-2 text-left w-32",children:"Owner"}),v.jsx("th",{className:"px-2 py-2 text-left w-[18rem]",children:"Actions"})]})}),v.jsxs("tbody",{children:[C.rows.filter(D=>o(D,y)).map(D=>{const N=(D.state||"").toLowerCase(),I=N.includes("running")||N.includes("up")||N.includes("healthy")||N.includes("restarting"),B=N.includes("paused");return v.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-900/40 align-top",children:[v.jsx("td",{className:"px-2 py-1.5 font-medium text-slate-200 truncate",children:D.name}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:v.jsx(nl,{state:D.state})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"max-w-[24rem] truncate",title:D.imageRun||"",children:D.imageRun||""}),D.imageIac&&v.jsxs(v.Fragment,{children:[v.jsx(rl,{className:"h-4 w-4 text-slate-500"}),v.jsx("div",{className:`max-w-[24rem] truncate ${D.drift?"text-amber-300":"text-slate-300"}`,title:D.imageIac,children:D.imageIac})]})]})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.created||""}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.ip||""}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300 align-top",children:v.jsx("div",{className:"max-w-56 whitespace-pre-line leading-tight",children:D.portsText||""})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.owner||""}),v.jsx("td",{className:"px-2 py-1",children:v.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto whitespace-nowrap py-0.5",children:[!I&&!B&&v.jsx(_e,{title:"Start",icon:cd,onClick:()=>c(D.name,"start")}),I&&v.jsx(_e,{title:"Stop",icon:nn,onClick:()=>c(D.name,"stop")}),(I||B)&&v.jsx(_e,{title:"Restart",icon:ud,onClick:()=>c(D.name,"restart")}),I&&!B&&v.jsx(_e,{title:"Pause",icon:nn,onClick:()=>c(D.name,"pause")}),B&&v.jsx(_e,{title:"Resume",icon:ad,onClick:()=>c(D.name,"unpause")}),v.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),v.jsx(_e,{title:"Live logs",icon:ld,onClick:()=>_(D.name)}),v.jsx(_e,{title:"Inspect",icon:od,onClick:()=>t(r,C.name,C.iacId)}),v.jsx(_e,{title:"Stats",icon:nd,onClick:async()=>{try{const W=await(await fetch(`/api/hosts/${encodeURIComponent(r.name)}/containers/${encodeURIComponent(D.name)}/stats`,{credentials:"include"})).text();l({title:`${D.name} (stats)`,text:W||"(no data)"})}catch{l({title:`${D.name} (stats)`,text:"(failed to load stats)"})}}}),v.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),v.jsx(_e,{title:"Kill",icon:dd,onClick:()=>c(D.name,"kill")}),v.jsx(_e,{title:"Remove",icon:Gr,onClick:()=>c(D.name,"remove")}),v.jsx(_e,{title:"Console",icon:hd,onClick:()=>w({ctr:D.name}),disabled:!I})]})})]},D.name)}),(!C.rows||C.rows.filter(D=>o(D,y)).length===0)&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:8,children:"No containers or services."})})]})]})}),v.jsx("div",{className:"pt-2 text-xs text-slate-400",children:"Tip: click the stack title to open the full compare & editor view."})]})]},`${r.name}:${C.name}`)),v.jsx(tt,{className:"bg-slate-900/40 border-slate-800",children:v.jsxs(rt,{className:"py-4 flex flex-wrap items-center gap-3 text-sm text-slate-300",children:["Security by default:",v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"AGE key never persisted"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Decrypt to tmpfs only"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Redacted logs"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Obscured paths"})]})})]}):v.jsx(tt,{className:"bg-slate-900/40 border-slate-800",children:v.jsx(rt,{className:"py-8 text-center",children:v.jsx("p",{className:"text-slate-400",children:"Select a host to view stacks"})})})]})}function wm({host:e,onSync:t,onOpenStack:r}){const[s,i]=O.useState(!0),[h,m]=O.useState(null),[n,u]=O.useState([]),[d,y]=O.useState(""),[f,g]=O.useState(null),[x,E]=O.useState(null),[w,a]=O.useState(null);function l(p,k){return k?[p.name,p.state,p.stack,p.imageRun,p.imageIac,p.ip,p.portsText,p.owner].filter(Boolean).join(" ").toLowerCase().includes(k.toLowerCase()):!0}async function o(p,k){try{await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers/${encodeURIComponent(p)}/action`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:k})}),t(),u(C=>C.map(j=>({...j,rows:j.rows.map(D=>D.name===p?{...D,state:k==="pause"?"paused":k==="unpause"?"running":k==="stop"?"exited":k==="kill"?"dead":k==="remove"?"removed":k==="start"?"running":k==="restart"?"restarting":D.state}:D)})))}catch{alert("Action failed")}}function c(p){g({ctr:p})}O.useEffect(()=>{let p=!1;return(async()=>{i(!0),m(null);try{const[k,C]=await Promise.all([fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers`,{credentials:"include"}),fetch(`/api/hosts/${encodeURIComponent(e.name)}/iac`,{credentials:"include"})]);if(k.status===401||C.status===401){window.location.replace("/auth/login");return}const j=await k.json(),D=await C.json(),N=j.items||[],I=D.stacks||[],B={};await Promise.all((I||[]).filter(P=>typeof(P==null?void 0:P.id)=="number").map(async P=>{var M;try{const H=await fetch(`/api/iac/stacks/${P.id}`,{credentials:"include"});if(!H.ok)return;const z=await H.json();(M=z==null?void 0:z.stack)!=null&&M.id&&(B[z.stack.id]=!!z.stack.effective_auto_devops)}catch{}}));const $=new Map;for(const P of N){const M=(P.compose_project||P.stack||"(none)").trim()||"(none)";$.has(M)||$.set(M,[]),$.get(M).push(P)}const W=new Map;for(const P of I)W.set(P.name,P);const R=new Set([...$.keys(),...W.keys()]),A=[];for(const P of Array.from(R).sort()){let M=function(U){if(!z||X.length===0)return;const Y=X.find(q=>U.compose_service&&q.service_name===U.compose_service||q.container_name&&q.container_name===U.name);return(Y==null?void 0:Y.image)||void 0};const H=$.get(P)||[],z=W.get(P),X=Array.isArray(z==null?void 0:z.services)?z.services:[],K=!!z&&(X.length>0||!!z.compose),J=!!z&&(!!z.compose||X.length>0),T=[];for(const U of H){const q=yd(U.ports).join(`
`),Z=M(U),oe=!!(Z&&Z.trim()&&Z.trim()!==(U.image||"").trim());T.push({name:U.name,state:U.state,stack:P,imageRun:U.image,imageIac:Z,created:qs(U.created_ts),ip:U.ip_addr,portsText:q,owner:U.owner||"",drift:oe})}if(z)for(const U of X)T.some(q=>q.name===(U.container_name||U.service_name))||T.push({name:U.container_name||U.service_name,state:"missing",stack:P,imageRun:void 0,imageIac:U.image,created:"",ip:"",portsText:"",owner:"",drift:!0});let F="unknown";K&&(F=T.some(U=>U.drift)?"drift":"in_sync");const V=!!(z&&typeof z.id=="number"&&B[z.id]);A.push({name:P,drift:F,iacEnabled:V,pullPolicy:K?z==null?void 0:z.pull_policy:void 0,sops:K?(z==null?void 0:z.sops_status)==="all":!1,deployKind:K?(z==null?void 0:z.deploy_kind)||"compose":"unmanaged",rows:T,iacId:z==null?void 0:z.id,hasIac:K,hasContent:J})}p||u(A)}catch(k){p||m((k==null?void 0:k.message)||"Failed to load host stacks")}finally{p||i(!1)}})(),()=>{p=!0}},[e.name,t]);async function _(){const p=new Set(n.map(C=>C.name));let k=prompt("New stack name:");if(k&&(k=k.trim(),!!k)){if(p.has(k)){alert("A stack with that name already exists.");return}try{const C=await fetch("/api/iac/stacks",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope_kind:"host",scope_name:e.name,stack_name:k,iac_enabled:!1})});if(!C.ok)throw new Error(`${C.status} ${C.statusText}`);const j=await C.json();r(k,j.id)}catch(C){alert((C==null?void 0:C.message)||"Failed to create stack")}}}async function S(p,k){const C=await fetch(`/api/iac/stacks/${p}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_devops:k})});if(!C.ok)throw new Error(`${C.status} ${C.statusText}`)}function b(p,k){const C=n[p];if(!C.iacId||!C.hasContent){k&&alert("This stack needs compose files or services before Auto DevOps can be enabled. Add content first.");return}u(j=>j.map((D,N)=>N===p?{...D,iacEnabled:k}:D)),S(C.iacId,k).catch(j=>{alert(`Failed to update Auto DevOps: ${(j==null?void 0:j.message)||j}`),u(D=>D.map((N,I)=>I===p?{...N,iacEnabled:!k}:N))})}async function L(p){const k=n[p];if(!k.iacId||!confirm(`Delete IaC for stack "${k.name}"? This removes IaC files/metadata but not runtime containers.`))return;const C=await fetch(`/api/iac/stacks/${k.iacId}`,{method:"DELETE",credentials:"include"});if(!C.ok){alert(`Failed to delete: ${C.status} ${C.statusText}`);return}u(j=>j.map((D,N)=>N===p?{...D,iacId:void 0,hasIac:!1,iacEnabled:!1,pullPolicy:void 0,sops:!1,drift:"unknown",hasContent:!1}:D))}return O.useEffect(()=>{if(!w)return;const p=k=>{k.key==="Escape"&&a(null)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[w]),v.jsxs("div",{className:"space-y-4",children:[f&&v.jsx(pd,{host:e.name,container:f.ctr,onClose:()=>g(null)}),x&&v.jsx(gd,{host:e.name,container:x.ctr,onClose:()=>E(null)}),w&&v.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"info-title",onClick:()=>a(null),children:v.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-3xl p-4",onClick:p=>p.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-slate-200 font-semibold",id:"info-title",children:w.title}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>a(null),children:"Close"})]}),v.jsx("pre",{className:"text-xs text-slate-300 bg-slate-900 border border-slate-800 rounded p-3 max-h-[60vh] overflow-auto whitespace-pre-wrap",children:w.text})]})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"text-lg font-semibold text-white",children:[e.name," ",v.jsx("span",{className:"text-slate-400 text-sm",children:e.address||""})]}),v.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[v.jsxs(ee,{onClick:t,className:"bg-[#310937] hover:bg-[#2a0830] text-white",children:[v.jsx(qr,{className:"h-4 w-4 mr-1"})," Sync"]}),v.jsxs(ee,{onClick:_,variant:"outline",className:"border-slate-700 text-slate-200",children:[v.jsx(ei,{className:"hidden"})," ","New Stack"]}),v.jsx("div",{className:"relative w-72",children:v.jsx(Ln,{value:d,onChange:p=>y(p.target.value),placeholder:`Search ${e.name}`,className:"pl-3 bg-slate-900/50 border-slate-800 text-slate-200 placeholder:text-slate-500"})})]})]}),s&&v.jsx("div",{className:"text-sm px-3 py-2 rounded-lg border border-slate-800 bg-slate-900/60 text-slate-300",children:"Loading stacks"}),h&&v.jsxs("div",{className:"text-sm px-3 py-2 rounded-lg border border-rose-800/50 bg-rose-950/50 text-rose-200",children:["Error: ",h]}),n.map((p,k)=>v.jsxs(tt,{className:"bg-slate-900/50 border-slate-800 rounded-xl",children:[v.jsxs(_r,{className:"pb-2 flex flex-row items-center justify-between",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx(mr,{className:"text-xl text-white",children:v.jsx("button",{className:"hover:underline",onClick:()=>r(p.name,p.iacId),children:p.name})}),v.jsxs("div",{className:"flex items-center gap-2",children:[fd(p.drift),v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:p.deployKind||"unknown"}),v.jsxs(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:["pull: ",p.hasIac&&p.pullPolicy||""]}),p.hasIac?p.sops?v.jsx(Ee,{className:"bg-indigo-900/40 border-indigo-700/40 text-indigo-200",children:"SOPS"}):v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:"no SOPS"}):v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:"No IaC"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{htmlFor:`auto-${k}`,className:"text-sm text-slate-300",children:"Auto DevOps"}),v.jsx(il,{id:`auto-${k}`,checked:!!p.iacEnabled,onCheckedChange:C=>b(k,!!C),disabled:!p.iacId||!p.hasContent}),p.iacId&&v.jsx(ee,{size:"icon",variant:"ghost",title:"Delete IaC for this stack",onClick:()=>L(k),children:v.jsx(Gr,{className:"h-4 w-4 text-rose-300"})})]})]}),v.jsxs(rt,{className:"pt-0",children:[v.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:v.jsxs("table",{className:"w-full text-xs table-fixed",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{className:"whitespace-nowrap",children:[v.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Name"}),v.jsx("th",{className:"px-2 py-2 text-left w-36",children:"State"}),v.jsx("th",{className:"px-2 py-2 text-left w-[24rem]",children:"Image"}),v.jsx("th",{className:"px-2 py-2 text-left w-40",children:"Created"}),v.jsx("th",{className:"px-2 py-2 text-left w-36",children:"IP"}),v.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Published Ports"}),v.jsx("th",{className:"px-2 py-2 text-left w-32",children:"Owner"}),v.jsx("th",{className:"px-2 py-2 text-left w-[18rem]",children:"Actions"})]})}),v.jsxs("tbody",{children:[p.rows.filter(C=>l(C,d)).map(C=>{const j=(C.state||"").toLowerCase(),D=j.includes("running")||j.includes("up")||j.includes("healthy")||j.includes("restarting"),N=j.includes("paused");return v.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-900/40 align-top",children:[v.jsx("td",{className:"px-2 py-1.5 font-medium text-slate-200 truncate",children:C.name}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:v.jsx(nl,{state:C.state})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"max-w-[24rem] truncate",title:C.imageRun||"",children:C.imageRun||""}),C.imageIac&&v.jsxs(v.Fragment,{children:[v.jsx(rl,{className:"h-4 w-4 text-slate-500"}),v.jsx("div",{className:`max-w-[24rem] truncate ${C.drift?"text-amber-300":"text-slate-300"}`,title:C.imageIac,children:C.imageIac})]})]})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:C.created||""}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:C.ip||""}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300 align-top",children:v.jsx("div",{className:"max-w-56 whitespace-pre-line leading-tight",children:C.portsText||""})}),v.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:C.owner||""}),v.jsx("td",{className:"px-2 py-1",children:v.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto whitespace-nowrap py-0.5",children:[!D&&!N&&v.jsx(_e,{title:"Start",icon:cd,onClick:()=>o(C.name,"start")}),D&&v.jsx(_e,{title:"Stop",icon:nn,onClick:()=>o(C.name,"stop")}),(D||N)&&v.jsx(_e,{title:"Restart",icon:ud,onClick:()=>o(C.name,"restart")}),D&&!N&&v.jsx(_e,{title:"Pause",icon:nn,onClick:()=>o(C.name,"pause")}),N&&v.jsx(_e,{title:"Resume",icon:ad,onClick:()=>o(C.name,"unpause")}),v.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),v.jsx(_e,{title:"Live logs",icon:ld,onClick:()=>c(C.name)}),v.jsx(_e,{title:"Inspect",icon:od,onClick:()=>r(p.name,p.iacId)}),v.jsx(_e,{title:"Stats",icon:nd,onClick:async()=>{try{const B=await(await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers/${encodeURIComponent(C.name)}/stats`,{credentials:"include"})).text();a({title:`${C.name} (stats)`,text:B||"(no data)"})}catch{a({title:`${C.name} (stats)`,text:"(failed to load stats)"})}}}),v.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),v.jsx(_e,{title:"Kill",icon:dd,onClick:()=>o(C.name,"kill")}),v.jsx(_e,{title:"Remove",icon:Gr,onClick:()=>o(C.name,"remove")}),v.jsx(_e,{title:"Console",icon:hd,onClick:()=>E({ctr:C.name}),disabled:!D})]})})]},C.name)}),(!p.rows||p.rows.filter(C=>l(C,d)).length===0)&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:8,children:"No containers or services."})})]})]})}),v.jsx("div",{className:"pt-2 text-xs text-slate-400",children:"Tip: click the stack title to open the full compare & editor view."})]})]},`${e.name}:${p.name}`)),v.jsx(tt,{className:"bg-slate-900/40 border-slate-800",children:v.jsxs(rt,{className:"py-4 flex flex-wrap items-center gap-3 text-sm text-slate-300",children:["Security by default:",v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"AGE key never persisted"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Decrypt to tmpfs only"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Redacted logs"}),v.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Obscured paths"})]})})]})}function xm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function jc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dc(Object(r),!0).forEach(function(s){xm(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dc(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Cm(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,h;for(h=0;h<s.length;h++)i=s[h],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function km(e,t){if(e==null)return{};var r=Cm(e,t),s,i;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(i=0;i<h.length;i++)s=h[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function bm(e,t){return Em(e)||Lm(e,t)||Rm(e,t)||Dm()}function Em(e){if(Array.isArray(e))return e}function Lm(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,i=!1,h=void 0;try{for(var m=e[Symbol.iterator](),n;!(s=(n=m.next()).done)&&(r.push(n.value),!(t&&r.length===t));s=!0);}catch(u){i=!0,h=u}finally{try{!s&&m.return!=null&&m.return()}finally{if(i)throw h}}return r}}function Rm(e,t){if(e){if(typeof e=="string")return Tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tc(e,t)}}function Tc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Dm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pc(Object(r),!0).forEach(function(s){jm(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pc(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Tm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(i,h){return h(i)},s)}}function vs(e){return function t(){for(var r=this,s=arguments.length,i=new Array(s),h=0;h<s;h++)i[h]=arguments[h];return i.length>=e.length?e.apply(this,i):function(){for(var m=arguments.length,n=new Array(m),u=0;u<m;u++)n[u]=arguments[u];return t.apply(r,[].concat(i,n))}}}function on(e){return{}.toString.call(e).includes("Object")}function Pm(e){return!Object.keys(e).length}function Gs(e){return typeof e=="function"}function Am(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Nm(e,t){return on(t)||Qt("changeType"),Object.keys(t).some(function(r){return!Am(e,r)})&&Qt("changeField"),t}function Mm(e){Gs(e)||Qt("selectorType")}function Om(e){Gs(e)||on(e)||Qt("handlerType"),on(e)&&Object.values(e).some(function(t){return!Gs(t)})&&Qt("handlersType")}function Bm(e){e||Qt("initialIsRequired"),on(e)||Qt("initialType"),Pm(e)&&Qt("initialContent")}function Im(e,t){throw new Error(e[t]||e.default)}var Hm={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Qt=vs(Im)(Hm),Si={changes:Nm,selector:Mm,handler:Om,initial:Bm};function Fm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Si.initial(e),Si.handler(t);var r={current:e},s=vs(Um)(r,t),i=vs(zm)(r),h=vs(Si.changes)(e),m=vs($m)(r);function n(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(y){return y};return Si.selector(d),d(r.current)}function u(d){Tm(s,i,h,m)(d)}return[n,u]}function $m(e,t){return Gs(t)?t(e.current):t}function zm(e,t){return e.current=Ac(Ac({},e.current),t),t}function Um(e,t,r){return Gs(t)?t(e.current):Object.keys(r).forEach(function(s){var i;return(i=t[s])===null||i===void 0?void 0:i.call(t,e.current[s])}),r}var Wm={create:Fm},Vm={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Km(e){return function t(){for(var r=this,s=arguments.length,i=new Array(s),h=0;h<s;h++)i[h]=arguments[h];return i.length>=e.length?e.apply(this,i):function(){for(var m=arguments.length,n=new Array(m),u=0;u<m;u++)n[u]=arguments[u];return t.apply(r,[].concat(i,n))}}}function qm(e){return{}.toString.call(e).includes("Object")}function Gm(e){return e||Nc("configIsRequired"),qm(e)||Nc("configType"),e.urls?(Xm(),{paths:{vs:e.urls.monacoBase}}):e}function Xm(){console.warn(Sd.deprecation)}function Qm(e,t){throw new Error(e[t]||e.default)}var Sd={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Nc=Km(Qm)(Sd),Ym={config:Gm},Jm=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return function(i){return r.reduceRight(function(h,m){return m(h)},i)}};function wd(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],wd(e[r],t[r]))}),jc(jc({},e),t)}var Zm={type:"cancelation",msg:"operation is manually canceled"};function ao(e){var t=!1,r=new Promise(function(s,i){e.then(function(h){return t?i(Zm):s(h)}),e.catch(i)});return r.cancel=function(){return t=!0},r}var ev=Wm.create({config:Vm,isInitialized:!1,resolve:null,reject:null,monaco:null}),xd=bm(ev,2),ti=xd[0],Rn=xd[1];function tv(e){var t=Ym.config(e),r=t.monaco,s=km(t,["monaco"]);Rn(function(i){return{config:wd(i.config,s),monaco:r}})}function rv(){var e=ti(function(t){var r=t.monaco,s=t.isInitialized,i=t.resolve;return{monaco:r,isInitialized:s,resolve:i}});if(!e.isInitialized){if(Rn({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ao(lo);if(window.monaco&&window.monaco.editor)return Cd(window.monaco),e.resolve(window.monaco),ao(lo);Jm(sv,nv)(ov)}return ao(lo)}function sv(e){return document.body.appendChild(e)}function iv(e){var t=document.createElement("script");return e&&(t.src=e),t}function nv(e){var t=ti(function(s){var i=s.config,h=s.reject;return{config:i,reject:h}}),r=iv("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function ov(){var e=ti(function(r){var s=r.config,i=r.resolve,h=r.reject;return{config:s,resolve:i,reject:h}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){Cd(r),e.resolve(r)},function(r){e.reject(r)})}function Cd(e){ti().monaco||Rn({monaco:e})}function av(){return ti(function(e){var t=e.monaco;return t})}var lo=new Promise(function(e,t){return Rn({resolve:e,reject:t})}),kd={config:tv,init:rv,__getMonacoInstance:av},lv={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},co=lv,cv={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},uv=cv;function hv({children:e}){return ct.createElement("div",{style:uv.container},e)}var dv=hv,fv=dv;function pv({width:e,height:t,isEditorReady:r,loading:s,_ref:i,className:h,wrapperProps:m}){return ct.createElement("section",{style:{...co.wrapper,width:e,height:t},...m},!r&&ct.createElement(fv,null,s),ct.createElement("div",{ref:i,style:{...co.fullWidth,...!r&&co.hide},className:h}))}var _v=pv,bd=O.memo(_v);function mv(e){O.useEffect(e,[])}var Ed=mv;function vv(e,t,r=!0){let s=O.useRef(!0);O.useEffect(s.current||!r?()=>{s.current=!1}:e,t)}var Ue=vv;function Ls(){}function Ar(e,t,r,s){return gv(e,s)||yv(e,t,r,s)}function gv(e,t){return e.editor.getModel(Ld(e,t))}function yv(e,t,r,s){return e.editor.createModel(t,r,s?Ld(e,s):void 0)}function Ld(e,t){return e.Uri.parse(t)}function Sv({original:e,modified:t,language:r,originalLanguage:s,modifiedLanguage:i,originalModelPath:h,modifiedModelPath:m,keepCurrentOriginalModel:n=!1,keepCurrentModifiedModel:u=!1,theme:d="light",loading:y="Loading...",options:f={},height:g="100%",width:x="100%",className:E,wrapperProps:w={},beforeMount:a=Ls,onMount:l=Ls}){let[o,c]=O.useState(!1),[_,S]=O.useState(!0),b=O.useRef(null),L=O.useRef(null),p=O.useRef(null),k=O.useRef(l),C=O.useRef(a),j=O.useRef(!1);Ed(()=>{let B=kd.init();return B.then($=>(L.current=$)&&S(!1)).catch($=>($==null?void 0:$.type)!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>b.current?I():B.cancel()}),Ue(()=>{if(b.current&&L.current){let B=b.current.getOriginalEditor(),$=Ar(L.current,e||"",s||r||"text",h||"");$!==B.getModel()&&B.setModel($)}},[h],o),Ue(()=>{if(b.current&&L.current){let B=b.current.getModifiedEditor(),$=Ar(L.current,t||"",i||r||"text",m||"");$!==B.getModel()&&B.setModel($)}},[m],o),Ue(()=>{let B=b.current.getModifiedEditor();B.getOption(L.current.editor.EditorOption.readOnly)?B.setValue(t||""):t!==B.getValue()&&(B.executeEdits("",[{range:B.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),B.pushUndoStop())},[t],o),Ue(()=>{var B,$;($=(B=b.current)==null?void 0:B.getModel())==null||$.original.setValue(e||"")},[e],o),Ue(()=>{let{original:B,modified:$}=b.current.getModel();L.current.editor.setModelLanguage(B,s||r||"text"),L.current.editor.setModelLanguage($,i||r||"text")},[r,s,i],o),Ue(()=>{var B;(B=L.current)==null||B.editor.setTheme(d)},[d],o),Ue(()=>{var B;(B=b.current)==null||B.updateOptions(f)},[f],o);let D=O.useCallback(()=>{var W;if(!L.current)return;C.current(L.current);let B=Ar(L.current,e||"",s||r||"text",h||""),$=Ar(L.current,t||"",i||r||"text",m||"");(W=b.current)==null||W.setModel({original:B,modified:$})},[r,t,i,e,s,h,m]),N=O.useCallback(()=>{var B;!j.current&&p.current&&(b.current=L.current.editor.createDiffEditor(p.current,{automaticLayout:!0,...f}),D(),(B=L.current)==null||B.editor.setTheme(d),c(!0),j.current=!0)},[f,d,D]);O.useEffect(()=>{o&&k.current(b.current,L.current)},[o]),O.useEffect(()=>{!_&&!o&&N()},[_,o,N]);function I(){var $,W,R,A;let B=($=b.current)==null?void 0:$.getModel();n||((W=B==null?void 0:B.original)==null||W.dispose()),u||((R=B==null?void 0:B.modified)==null||R.dispose()),(A=b.current)==null||A.dispose()}return ct.createElement(bd,{width:x,height:g,isEditorReady:o,loading:y,_ref:p,className:E,wrapperProps:w})}var wv=Sv;O.memo(wv);function xv(e){let t=O.useRef();return O.useEffect(()=>{t.current=e},[e]),t.current}var Cv=xv,wi=new Map;function kv({defaultValue:e,defaultLanguage:t,defaultPath:r,value:s,language:i,path:h,theme:m="light",line:n,loading:u="Loading...",options:d={},overrideServices:y={},saveViewState:f=!0,keepCurrentModel:g=!1,width:x="100%",height:E="100%",className:w,wrapperProps:a={},beforeMount:l=Ls,onMount:o=Ls,onChange:c,onValidate:_=Ls}){let[S,b]=O.useState(!1),[L,p]=O.useState(!0),k=O.useRef(null),C=O.useRef(null),j=O.useRef(null),D=O.useRef(o),N=O.useRef(l),I=O.useRef(),B=O.useRef(s),$=Cv(h),W=O.useRef(!1),R=O.useRef(!1);Ed(()=>{let M=kd.init();return M.then(H=>(k.current=H)&&p(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>C.current?P():M.cancel()}),Ue(()=>{var H,z,X,K;let M=Ar(k.current,e||s||"",t||i||"",h||r||"");M!==((H=C.current)==null?void 0:H.getModel())&&(f&&wi.set($,(z=C.current)==null?void 0:z.saveViewState()),(X=C.current)==null||X.setModel(M),f&&((K=C.current)==null||K.restoreViewState(wi.get(h))))},[h],S),Ue(()=>{var M;(M=C.current)==null||M.updateOptions(d)},[d],S),Ue(()=>{!C.current||s===void 0||(C.current.getOption(k.current.editor.EditorOption.readOnly)?C.current.setValue(s):s!==C.current.getValue()&&(R.current=!0,C.current.executeEdits("",[{range:C.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),C.current.pushUndoStop(),R.current=!1))},[s],S),Ue(()=>{var H,z;let M=(H=C.current)==null?void 0:H.getModel();M&&i&&((z=k.current)==null||z.editor.setModelLanguage(M,i))},[i],S),Ue(()=>{var M;n!==void 0&&((M=C.current)==null||M.revealLine(n))},[n],S),Ue(()=>{var M;(M=k.current)==null||M.editor.setTheme(m)},[m],S);let A=O.useCallback(()=>{var M;if(!(!j.current||!k.current)&&!W.current){N.current(k.current);let H=h||r,z=Ar(k.current,s||e||"",t||i||"",H||"");C.current=(M=k.current)==null?void 0:M.editor.create(j.current,{model:z,automaticLayout:!0,...d},y),f&&C.current.restoreViewState(wi.get(H)),k.current.editor.setTheme(m),n!==void 0&&C.current.revealLine(n),b(!0),W.current=!0}},[e,t,r,s,i,h,d,y,f,m,n]);O.useEffect(()=>{S&&D.current(C.current,k.current)},[S]),O.useEffect(()=>{!L&&!S&&A()},[L,S,A]),B.current=s,O.useEffect(()=>{var M,H;S&&c&&((M=I.current)==null||M.dispose(),I.current=(H=C.current)==null?void 0:H.onDidChangeModelContent(z=>{R.current||c(C.current.getValue(),z)}))},[S,c]),O.useEffect(()=>{if(S){let M=k.current.editor.onDidChangeMarkers(H=>{var X;let z=(X=C.current.getModel())==null?void 0:X.uri;if(z&&H.find(K=>K.path===z.path)){let K=k.current.editor.getModelMarkers({resource:z});_==null||_(K)}});return()=>{M==null||M.dispose()}}return()=>{}},[S,_]);function P(){var M,H;(M=I.current)==null||M.dispose(),g?f&&wi.set(h,C.current.saveViewState()):(H=C.current.getModel())==null||H.dispose(),C.current.dispose()}return ct.createElement(bd,{width:x,height:E,isEditorReady:S,loading:u,_ref:j,className:w,wrapperProps:a})}var bv=kv,Ev=O.memo(bv);function Lv({id:e,initialPath:t,stackId:r,ensureStack:s,refresh:i,fileMeta:h}){const[m,n]=O.useState(t),[u,d]=O.useState(""),[y,f]=O.useState(!1),[g,x]=O.useState(!!(h!=null&&h.sops)),[E,w]=O.useState(()=>{if(h!=null&&h.sops)return!0;const j=t.toLowerCase();return j.endsWith("_private.env")||j.endsWith("_secret.env")}),[a,l]=O.useState(!1),[o,c]=O.useState(!1),_=O.useRef(null);O.useEffect(()=>{if(n(t),d(""),l(!1),x(!!(h!=null&&h.sops)),h!=null&&h.sops)w(!0);else{const j=t.toLowerCase();w(j.endsWith("_private.env")||j.endsWith("_secret.env"))}},[t,h]);const S=O.useMemo(()=>{const j=m.toLowerCase();return j.endsWith(".yml")||j.endsWith(".yaml")?"yaml":j.endsWith(".json")?"json":j.endsWith("dockerfile")||j.endsWith("/dockerfile")?"dockerfile":j.endsWith(".sh")?"shell":j.endsWith(".env")||j.includes(".env")?"ini":"plaintext"},[m]);async function b(j){if(!r){d("");return}f(!0);try{const D=new URLSearchParams({path:m});j!=null&&j.decrypt&&D.set("decrypt","1");const N=await fetch(`/api/iac/stacks/${r}/file?${D.toString()}`,{credentials:"include",headers:j!=null&&j.decrypt?{"X-Confirm-Reveal":"yes"}:void 0});if(N.status===404){d("");return}const I=await N.text();if(!N.ok)throw new Error(I||`${N.status} ${N.statusText}`);d(I)}catch(D){d(N=>N),console.error("Editor load failed:",D)}finally{f(!1)}}O.useEffect(()=>{b({decrypt:a&&(g||E)})},[r,m,a]);async function L(){f(!0);try{const j=r??await s();let D=u;if(!E&&g&&!a)try{const B=new URLSearchParams({path:m,decrypt:"1"}),$=await fetch(`/api/iac/stacks/${j}/file?${B.toString()}`,{credentials:"include",headers:{"X-Confirm-Reveal":"yes"}}),W=await $.text();if(!$.ok)throw new Error(W||`${$.status} ${$.statusText}`);D=W}catch{alert("Couldn't load decrypted content; saving the current editor text instead.")}const N=await fetch(`/api/iac/stacks/${j}/file`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:m,content:D,sops:E})}),I=await N.text();if(!N.ok)throw new Error(I||`${N.status} ${N.statusText}`);try{const B=JSON.parse(I);typeof(B==null?void 0:B.sops)=="boolean"&&(x(B.sops),!B.sops&&a&&l(!1))}catch{}i()}catch(j){alert((j==null?void 0:j.message)||"Failed to save")}finally{f(!1)}}function p(){(g||E)&&l(j=>!j)}function k(){w(j=>!j)}function C(){c(j=>!j)}return v.jsxs(tt,{ref:_,className:(o?"fixed inset-0 z-50 m-0 rounded-none":"h-full")+" bg-slate-900/40 border-slate-800 flex flex-col",children:[v.jsx(_r,{className:"pb-2 shrink-0",children:v.jsxs("div",{className:"flex items-center justify-between gap-2",children:[v.jsx(mr,{className:"text-sm text-slate-200",children:"Editor"}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs(ee,{size:"sm",variant:"ghost",className:"h-8 px-2",onClick:k,title:E?"SOPS: On (save encrypted)":"SOPS: Off (save plaintext)",children:[E?v.jsx(mm,{className:"h-4 w-4 mr-1"}):v.jsx(_m,{className:"h-4 w-4 mr-1"}),E?"SOPS On":"SOPS Off"]}),(g||E)&&v.jsxs(ee,{size:"sm",variant:"outline",className:"h-8 px-2 border-indigo-700 text-indigo-200",onClick:p,disabled:y||!r,title:a?"Hide decrypted view":"Show decrypted view",children:[a?v.jsx(sl,{className:"h-4 w-4 mr-1"}):v.jsx(ei,{className:"h-4 w-4 mr-1"}),a?"Hide":"Show"]}),v.jsx(ee,{size:"sm",variant:"ghost",className:"h-8 px-2",onClick:C,title:o?"Exit full screen":"Full screen",children:o?v.jsx(dm,{className:"h-4 w-4"}):v.jsx(hm,{className:"h-4 w-4"})})]})]})}),v.jsxs(rt,{className:"flex-1 min-h-0 flex flex-col gap-3",children:[v.jsx("div",{className:"flex gap-2 shrink-0",children:v.jsx(Ln,{value:m,onChange:j=>n(j.target.value),placeholder:"docker-compose/host/stack/docker-compose.yaml",className:"flex-1"})}),v.jsx("div",{className:"flex-1 min-h-0 rounded border border-slate-800 overflow-hidden",children:v.jsx(Ev,{value:u,onChange:j=>d(j??""),language:S,theme:"vs-dark",options:{lineNumbers:"on",wordWrap:"on",minimap:{enabled:!1},fontSize:13,scrollBeyondLastLine:!1,tabSize:2,renderWhitespace:"selection",readOnly:y},height:"100%"},`${e}:${m}`)}),v.jsx("div",{className:"flex items-center justify-end gap-2 shrink-0",children:v.jsxs(ee,{onClick:L,disabled:y,children:[v.jsx(pm,{className:"h-4 w-4 mr-1"})," Save"]})})]})]})}function mt({children:e,index:t}){const r=t%2===0?"bg-slate-900/30":"bg-slate-900/10";return v.jsx("div",{className:`grid grid-cols-12 items-center gap-2 px-2 py-1.5 rounded ${r}`,children:e})}function an({value:e,title:t}){return v.jsx("input",{readOnly:!0,value:e,title:t??e,onFocus:r=>r.currentTarget.select(),className:"w-full max-w-full bg-slate-900/40 border border-slate-700 text-slate-300 font-mono text-sm px-2 py-1 rounded outline-none focus:ring-1 focus:ring-slate-600 overflow-auto"})}function ds({title:e,count:t,rightAction:r,children:s,defaultOpen:i=!1}){const[h,m]=O.useState(i);return v.jsxs("div",{className:"border border-slate-800 rounded-lg",children:[v.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-3 py-2 hover:bg-slate-900/40",onClick:()=>m(n=>!n),"aria-expanded":h,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(rl,{className:`h-4 w-4 text-slate-400 transition-transform ${h?"rotate-90":""}`}),v.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:e})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[r,typeof t=="number"&&v.jsx(Ee,{variant:"outline",className:"border-slate-700 text-slate-300",children:t})]})]}),h&&v.jsx("div",{className:"px-3 pb-3 pt-1",children:s})]})}function Rv({k:e,v:t,forceShow:r,index:s}){const[i,h]=O.useState(!1),m=!!r||i,n=t?"".repeat(Math.min(t.length,24)):"",u=m?t||"":n;return v.jsxs(mt,{index:s,children:[v.jsx("div",{className:"col-span-4 text-slate-300 text-sm font-medium break-words",children:e}),v.jsx("div",{className:"col-span-7",children:v.jsx(an,{value:u,title:m?t:void 0})}),v.jsx("div",{className:"col-span-1 flex justify-end",children:v.jsx(ee,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>h(d=>!d),title:m?"Hide":"Reveal",children:m?v.jsx(sl,{className:"h-4 w-4"}):v.jsx(ei,{className:"h-4 w-4"})})})]})}function Dv({k:e,v:t,index:r}){return v.jsxs(mt,{index:r,children:[v.jsx("div",{className:"col-span-4 text-slate-300 text-sm font-medium break-words",children:e}),v.jsx("div",{className:"col-span-8",children:v.jsx(an,{value:t})})]})}function jv({ports:e}){const t=e||[];return t.length?v.jsx("div",{className:"space-y-1 text-sm",children:t.map((r,s)=>v.jsxs("div",{className:"text-slate-300",children:[r.published?r.published+"  ":"",r.target,r.protocol?"/"+r.protocol:""]},s))}):v.jsx("div",{className:"text-sm text-slate-500",children:"No port bindings."})}function Tv({vols:e}){const t=e||[];return t.length?v.jsx("div",{className:"space-y-1",children:t.map((r,s)=>{const i=s%2===0?"bg-slate-900/30":"bg-slate-900/10";return v.jsxs("div",{className:`grid grid-cols-3 gap-3 items-center px-2 py-1.5 rounded ${i}`,children:[v.jsx("div",{className:"text-slate-300 text-sm font-mono truncate",title:r.source,children:r.source}),v.jsx("div",{className:"text-slate-400 text-sm text-center",children:"mapped "}),v.jsxs("div",{className:"text-slate-300 text-sm font-mono truncate",title:r.target,children:[r.target,r.mode?` (${r.mode}${r.rw===!1?", ro":""})`:r.rw===!1?" (ro)":""]})]},s)})}):v.jsx("div",{className:"text-sm text-slate-500",children:"No mounts."})}function Rd(e){const t=e;return Array.isArray(t.networks_detail)?t.networks_detail.map(r=>({name:r.name??"",ip:r.ip??r.ip_address??r.ipv4??"",gateway:r.gateway??"",mac:r.mac??r.mac_address??""})):t.networks_map&&typeof t.networks_map=="object"?Object.entries(t.networks_map).map(([r,s])=>({name:r,ip:(s==null?void 0:s.ip)??(s==null?void 0:s.ip_address)??(s==null?void 0:s.IPAddress)??"",gateway:(s==null?void 0:s.gateway)??(s==null?void 0:s.Gateway)??"",mac:(s==null?void 0:s.mac)??(s==null?void 0:s.mac_address)??(s==null?void 0:s.MacAddress)??""})):Array.isArray(e.networks)?e.networks.map(r=>({name:r})):[]}function Pv({c:e}){const t=Rd(e);return t.length?v.jsxs("div",{className:"space-y-1",children:[v.jsxs("div",{className:"grid grid-cols-4 gap-3 px-2 py-1.5",children:[v.jsx("div",{className:"text-xs text-slate-400",children:"Name"}),v.jsx("div",{className:"text-xs text-slate-400",children:"IP Address"}),v.jsx("div",{className:"text-xs text-slate-400",children:"Gateway"}),v.jsx("div",{className:"text-xs text-slate-400",children:"MAC Address"})]}),t.map((r,s)=>{const i=s%2===0?"bg-slate-900/30":"bg-slate-900/10";return v.jsxs("div",{className:`grid grid-cols-4 gap-3 px-2 py-1.5 rounded ${i}`,children:[v.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.name,children:r.name||""}),v.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.ip,children:r.ip||""}),v.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.gateway,children:r.gateway||""}),v.jsx("div",{className:"text-slate-300 text-sm truncate font-mono",title:r.mac,children:r.mac||""})]},`${r.name}-${s}`)})]}):v.jsx("div",{className:"text-sm text-slate-500",children:"No networks."})}function Av({c:e}){const[t,r]=O.useState(!1),s=Object.entries(e.env||{}),i=Object.entries(e.labels||{}).sort(([y],[f])=>y.localeCompare(f)),h=s.length,m=i.length,n=(e.volumes||[]).length,u=Rd(e).length,d=e.state||e.status||"unknown";return v.jsxs("div",{className:"rounded-lg border border-slate-800 p-3 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"font-medium text-slate-200 text-sm",children:e.name}),v.jsx("div",{children:v.jsx(nl,{state:d})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsxs(mt,{index:0,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Image"}),v.jsx("div",{className:"col-span-9 text-slate-300 text-sm font-mono truncate",title:e.image||"",children:e.image||""})]}),v.jsxs(mt,{index:1,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Ports"}),v.jsx("div",{className:"col-span-9",children:v.jsx(jv,{ports:e.ports})})]})]}),v.jsx(ds,{title:"General",defaultOpen:!1,children:v.jsxs("div",{className:"space-y-1",children:[v.jsxs(mt,{index:0,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Created"}),v.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.created||e.created_at?qs(e.created||e.created_at):""})]}),v.jsxs(mt,{index:1,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Start time"}),v.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.started||e.started_at||e.start_time?qs(e.started||e.started_at||e.start_time):""})]}),v.jsxs(mt,{index:3,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Restart policy"}),v.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.restart_policy||""})]}),v.jsxs(mt,{index:4,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"CMD"}),v.jsx("div",{className:"col-span-9",children:v.jsx(an,{value:(e.cmd||[]).join(" ")||""})})]}),v.jsxs(mt,{index:5,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"ENTRYPOINT"}),v.jsx("div",{className:"col-span-9",children:v.jsx(an,{value:(e.entrypoint||[]).join(" ")||""})})]}),v.jsxs(mt,{index:6,children:[v.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"ID"}),v.jsx("div",{className:"col-span-9 text-slate-300 text-sm font-mono truncate",title:e.id||e.container_id||"",children:e.id||e.container_id||""})]})]})}),v.jsx(ds,{title:"Environment Variables",count:h,rightAction:h>0?v.jsx(ee,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:y=>{y.stopPropagation(),r(f=>!f)},title:t?"Hide all":"Reveal all",children:t?v.jsx(sl,{className:"h-4 w-4"}):v.jsx(ei,{className:"h-4 w-4"})}):null,children:h===0?v.jsx("div",{className:"text-sm text-slate-500",children:"No environment variables."}):v.jsx("div",{className:"space-y-1",children:s.map(([y,f],g)=>v.jsx(Rv,{k:y,v:f,forceShow:t,index:g},y))})}),v.jsx(ds,{title:"Labels",count:m,children:m===0?v.jsx("div",{className:"text-sm text-slate-500",children:"No labels."}):v.jsx("div",{className:"space-y-1",children:i.map(([y,f],g)=>v.jsx(Dv,{k:y,v:f,index:g},y))})}),v.jsx(ds,{title:"Networks",count:u,children:v.jsx(Pv,{c:e})}),v.jsx(ds,{title:"Volumes",count:n,children:v.jsx(Tv,{vols:e.volumes})})]})}function Nv({host:e,stackName:t,iacId:r,onBack:s}){const[i,h]=O.useState([]),[m,n]=O.useState([]),[u,d]=O.useState([]),[y,f]=O.useState(!0),[g,x]=O.useState(null),[E,w]=O.useState(null),[a,l]=O.useState(r),[o,c]=O.useState(!1),[_,S]=O.useState(!1),[b,L]=O.useState(!1),p=O.useRef(null),k=O.useRef(0);O.useEffect(()=>{c(!1)},[t]);async function C(){if(!a)return;const P=await fetch(`/api/iac/stacks/${a}/files`,{credentials:"include"});if(!P.ok)return;const M=await P.json();d(M.files||[])}async function j(){try{const P=await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers`,{credentials:"include"});if(P.status===401){window.location.replace("/auth/login");return}const z=((await P.json()).items||[]).filter(K=>(K.compose_project||K.stack||"(none)")===t);h(z);const X=[];for(const K of z){const J=await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers/${encodeURIComponent(K.name)}/inspect`,{credentials:"include"});J.ok&&X.push(await J.json())}n(X)}catch(P){console.warn("refreshRuntime failed",P)}}O.useEffect(()=>{let P=!1;return(async()=>{f(!0),x(null);try{await j(),a&&await C()}catch(M){P||x((M==null?void 0:M.message)||"Failed to load stack")}finally{P||f(!1)}})(),()=>{P=!0}},[e.name,t,a]),O.useEffect(()=>{let P=!1;return(async()=>{var M;if(!a){c(!1);return}try{const H=await fetch(`/api/iac/stacks/${a}`,{credentials:"include"});if(!H.ok)return;const z=await H.json();P||c(!!((M=z==null?void 0:z.stack)!=null&&M.effective_auto_devops))}catch{}})(),()=>{P=!0}},[a]);async function D(){if(a)return a;const P=await fetch("/api/iac/stacks",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope_kind:"host",scope_name:e.name,stack_name:t,iac_enabled:!1})});if(!P.ok)throw new Error(`${P.status} ${P.statusText}`);const M=await P.json();return M.id&&l(M.id),M.id}async function N(){if(!a||!confirm(`Delete IaC stack "${t}"? This only deletes IaC metadata/files, not runtime containers.`))return;const P=await fetch(`/api/iac/stacks/${a}`,{method:"DELETE",credentials:"include"});if(!P.ok){alert(`Failed to delete: ${P.status} ${P.statusText}`);return}l(void 0),d([]),w(null)}async function I(P){let M=a;if(!M)try{M=await D(),l(M)}catch(H){alert((H==null?void 0:H.message)||"Unable to create stack for Auto DevOps");return}if(P&&u.length===0){alert("This stack needs compose files or services before Auto DevOps can be enabled. Add content first.");return}c(P),await fetch(`/api/iac/stacks/${M}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_devops:P})})}function B(P=12e4,M=3e3){p.current&&(window.clearTimeout(p.current),p.current=null),L(!0),k.current=Date.now()+P;const H=async()=>{await j(),Date.now()<k.current?p.current=window.setTimeout(H,M):(L(!1),p.current=null)};H()}function $(){p.current&&(window.clearTimeout(p.current),p.current=null),L(!1)}O.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=null)},[]);async function W(){if(!a){alert("Create the stack (save a file) before deploying.");return}if(u.length===0){alert("This stack has no files to deploy. Add a compose file or scripts first.");return}S(!0);try{const P=await fetch(`/api/iac/stacks/${a}/deploy`,{method:"POST",credentials:"include"}),M=await P.text();if(!P.ok){alert(`Deploy failed: ${P.status} ${M}`);return}B(12e4,3e3)}catch(P){alert(`Deploy failed: ${(P==null?void 0:P.message)||P}`)}finally{S(!1)}}const R=u.some(P=>P.role==="compose")||u.length>0;function A(P,M){const z=`${`docker-compose/${e.name}/${t}/`}${M}`,X=u.some(K=>K.rel_path===z);w(X?P:z)}return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs(ee,{variant:"outline",className:"border-slate-700 text-slate-200 hover:bg-slate-800",onClick:s,children:[v.jsx(am,{className:"h-4 w-4 mr-1"})," Back to ",e.name]}),v.jsxs("div",{className:"ml-2 text-lg font-semibold text-white",children:["Stack: ",t]}),v.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[v.jsx("span",{className:"text-sm text-slate-300",children:"Auto DevOps"}),v.jsx(il,{checked:o,onCheckedChange:P=>I(!!P)}),a?v.jsxs(ee,{onClick:async()=>{await j(),await C()},variant:"outline",className:"border-slate-700",title:"Refresh files and active containers",children:[v.jsx(qr,{className:"h-4 w-4 mr-1"})," Refresh"]}):null,b&&v.jsxs("span",{className:"ml-1 inline-flex items-center gap-2 text-xs text-emerald-300",children:[v.jsx(qr,{className:"h-3 w-3 animate-spin"}),"Watching updates",v.jsxs(ee,{size:"sm",variant:"ghost",className:"h-6 px-2 text-emerald-200",onClick:$,title:"Stop watching",children:[v.jsx(vm,{className:"h-3 w-3 mr-1"})," Stop"]})]})]})]}),y&&v.jsx("div",{className:"text-sm px-3 py-2 rounded-lg border border-slate-800 bg-slate-900/60 text-slate-300",children:"Loading"}),g&&v.jsxs("div",{className:"text-sm px-3 py-2 rounded-lg border border-rose-800/50 bg-rose-950/50 text-rose-200",children:["Error: ",g]}),v.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[v.jsx("div",{className:"space-y-4",children:v.jsxs(tt,{className:"bg-slate-900/50 border-slate-800",children:[v.jsx(_r,{className:"pb-2 flex items-center justify-between",children:v.jsx(mr,{className:"text-slate-200 text-lg",children:"Active Containers"})}),v.jsxs(rt,{className:"space-y-3",children:[m.length===0&&v.jsxs("div",{className:"text-sm text-slate-500",children:["No containers are currently running for this stack on ",e.name,"."]}),m.map((P,M)=>v.jsx(Av,{c:P},M))]})]})}),v.jsx("div",{className:"space-y-4 lg:sticky lg:top-4 lg:h-[calc(100vh-140px)] lg:z-10",children:v.jsxs(tt,{className:"bg-slate-900/50 border-slate-800 h-full flex flex-col",children:[v.jsx(_r,{className:"pb-2 shrink-0 flex flex-row items-center justify-between",children:v.jsx(mr,{className:"text-slate-200 text-lg",children:"IaC Files"})}),v.jsxs(rt,{className:"flex-1 min-h-0 flex flex-col gap-3",children:[!a&&v.jsxs("div",{className:"text-sm text-amber-300 shrink-0",children:["No IaC yet. Use the buttons below  the ",v.jsx("b",{children:"first Save"})," will create the IaC stack automatically."]}),v.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[v.jsxs("div",{className:"text-slate-300 text-sm",children:[u.length," file(s)"]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(ee,{size:"sm",onClick:()=>A(`docker-compose/${e.name}/${t}/`,"docker-compose.yaml"),children:"New compose"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>A(`docker-compose/${e.name}/${t}/`,".env"),children:"New env"}),v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>A(`docker-compose/${e.name}/${t}/`,"deploy.sh"),children:"New script"}),a?v.jsxs(ee,{onClick:N,variant:"outline",className:"border-rose-700 text-rose-200",children:[v.jsx(Gr,{className:"h-4 w-4 mr-1"})," Delete IaC"]}):null,R&&v.jsxs(ee,{onClick:W,disabled:_,size:"sm",className:"bg-emerald-800 hover:bg-emerald-900 text-white",title:"Deploy this stack",children:[v.jsx(fm,{className:`h-4 w-4 mr-1 ${_?"animate-spin":""}`}),_?"Deploying...":"Deploy"]})]})]}),v.jsx("div",{className:"rounded-lg border border-slate-800 overflow-hidden shrink-0",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-left",children:"Path"}),v.jsx("th",{className:"p-2 text-left",children:"Role"}),v.jsx("th",{className:"p-2 text-left",children:"SOPS"}),v.jsx("th",{className:"p-2 text-left",children:"Size"}),v.jsx("th",{className:"p-2 text-left",children:"Updated"}),v.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),v.jsxs("tbody",{children:[u.map((P,M)=>v.jsxs("tr",{className:"border-t border-slate-800",children:[v.jsx("td",{className:"p-2 text-slate-200 font-mono",children:P.rel_path}),v.jsx("td",{className:"p-2 text-slate-300",children:P.role}),v.jsx("td",{className:"p-2",children:P.sops?v.jsx(Ee,{className:"bg-indigo-900/40 border-indigo-700/40 text-indigo-200",children:"SOPS"}):""}),v.jsx("td",{className:"p-2 text-slate-300",children:P.size_bytes}),v.jsx("td",{className:"p-2 text-slate-300",children:qs(P.updated_at)}),v.jsx("td",{className:"p-2",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(ee,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>w(P.rel_path),children:"Edit"}),v.jsx(ee,{size:"icon",variant:"ghost",onClick:async()=>{if(!a)return;(await fetch(`/api/iac/stacks/${a}/file?path=${encodeURIComponent(P.rel_path)}`,{method:"DELETE",credentials:"include"})).ok&&C()},title:"Delete",children:v.jsx(Gr,{className:"h-4 w-4 text-rose-300"})})]})})]},M)),u.length===0&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"No files yet. Add compose/env/script above."})})]})]})}),E&&v.jsx("div",{className:"flex-1 min-h-0",children:v.jsx(Lv,{id:"stack-editor",initialPath:E,stackId:a,ensureStack:D,refresh:()=>{w(null),C()},fileMeta:u.find(P=>P.rel_path===E)},E)})]})]})})]}),!y&&m.length===0&&!a&&v.jsx(tt,{className:"bg-slate-900/40 border-slate-800",children:v.jsxs(rt,{className:"py-4 text-sm text-slate-300",children:["This stack has no running containers on ",v.jsx("b",{children:e.name})," and is not declared in IaC yet. Save a file to create the IaC entry, or just navigate away to leave nothing behind."]})})]})}function ol({hosts:e,activeHost:t,setActiveHost:r}){return v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-sm text-slate-300",children:"Host"}),v.jsx("select",{className:"bg-slate-950 border border-slate-800 text-slate-200 text-sm rounded px-2 py-1",value:t,onChange:s=>r(s.target.value),children:e.map(s=>v.jsx("option",{value:s.name,children:s.name},s.name))})]})}function We({children:e,sortKey:t,currentSort:r,onSort:s}){const i=r.key===t,h=i?r.direction:"asc";return v.jsx("th",{className:"p-2 text-left",children:v.jsxs("button",{className:"flex items-center gap-1 hover:text-white transition",onClick:()=>s(t),children:[e,i?h==="asc"?v.jsx(Ec,{className:"h-3 w-3"}):v.jsx(lm,{className:"h-3 w-3"}):v.jsx(Ec,{className:"h-3 w-3 opacity-30"})]})})}function Mv({hosts:e}){var L;const[t,r]=O.useState(((L=e[0])==null?void 0:L.name)||""),[s,i]=O.useState([]),[h,m]=O.useState(!1),[n,u]=O.useState({key:"repo",direction:"asc"}),[d,y]=O.useState([]),[f,g]=O.useState(null),[x,E]=O.useState(!0);O.useEffect(()=>{t&&(async()=>{m(!0);try{const k=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/images`,{credentials:"include"})).json();i(k.items||[]),y([]),g(null)}finally{m(!1)}})()},[t]);const w=O.useMemo(()=>{const p=[...s];return p.sort((k,C)=>{const j=k[n.key]||"",D=C[n.key]||"",N=j.localeCompare(D);return n.direction==="asc"?N:-N}),p},[s,n]),a=p=>{u(k=>({key:p,direction:k.key===p&&k.direction==="asc"?"desc":"asc"}))},l=p=>d.includes(p),o=p=>y(k=>k.includes(p)?k.filter(C=>C!==p):[...k,p]),c=(p,k,C)=>{if(p.shiftKey&&f!==null){const[j,D]=k<f?[k,f]:[f,k],N=w.slice(j,D+1).map(I=>I.id);y(I=>Array.from(new Set([...I,...N])))}else p.metaKey||p.ctrlKey?(o(C),g(k)):(y([C]),g(k))},_=w.length>0&&d.length===w.length,S=()=>{y(_?[]:w.map(p=>p.id))};async function b(){if(!d.length)return;const p=JSON.stringify({ids:d,force:x}),k=await fetch(`/api/hosts/${encodeURIComponent(t)}/images/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:p}),C=await k.json().catch(()=>({}));k.ok||alert(typeof C=="string"?C:"Delete failed");const D=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/images`,{credentials:"include"})).json();i(D.items||[]),y([]),g(null)}return v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between gap-3",children:[v.jsx("div",{className:"text-lg font-semibold text-white",children:"Images"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[v.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:x,onChange:p=>E(p.target.checked)}),"Force"]}),v.jsxs("button",{onClick:b,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),v.jsx(ol,{hosts:e,activeHost:t,setActiveHost:r})]})]}),v.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"w-10 p-2 text-center",children:v.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:_,onChange:S})}),v.jsx(We,{sortKey:"repo",currentSort:n,onSort:p=>a(p),children:"Repository"}),v.jsx(We,{sortKey:"tag",currentSort:n,onSort:p=>a(p),children:"Tag"}),v.jsx(We,{sortKey:"id",currentSort:n,onSort:p=>a(p),children:"ID"}),v.jsx(We,{sortKey:"size",currentSort:n,onSort:p=>a(p),children:"Size"}),v.jsx(We,{sortKey:"created",currentSort:n,onSort:p=>a(p),children:"Created"})]})}),v.jsxs("tbody",{children:[h&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"Loading"})}),!h&&w.length===0&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"No images."})}),w.map((p,k)=>{var j;const C=l(p.id);return v.jsxs("tr",{onClick:D=>c(D,k,p.id),className:`border-t border-slate-800 cursor-default ${C?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[v.jsx("td",{className:"p-2 text-center",onClick:D=>D.stopPropagation(),children:v.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:C,onChange:()=>o(p.id)})}),v.jsx("td",{className:"p-2 text-slate-300",children:p.repo||""}),v.jsx("td",{className:"p-2 text-slate-300",children:p.tag||""}),v.jsx("td",{className:"p-2 text-slate-300 font-mono",children:((j=p.id)==null?void 0:j.slice(7,19))||""}),v.jsx("td",{className:"p-2 text-slate-300",children:p.size||""}),v.jsx("td",{className:"p-2 text-slate-300",children:p.created||""})]},p.id)})]})]})}),v.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}function Ov({hosts:e}){var S;const[t,r]=O.useState(((S=e[0])==null?void 0:S.name)||""),[s,i]=O.useState([]),[h,m]=O.useState(!1),[n,u]=O.useState({key:"name",direction:"asc"}),[d,y]=O.useState([]),[f,g]=O.useState(null);O.useEffect(()=>{t&&(async()=>{m(!0);try{const L=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/networks`,{credentials:"include"})).json();i(L.items||[]),y([]),g(null)}finally{m(!1)}})()},[t]);const x=O.useMemo(()=>{const b=[...s];return b.sort((L,p)=>{const k=L[n.key]||"",C=p[n.key]||"",j=k.localeCompare(C);return n.direction==="asc"?j:-j}),b},[s,n]),E=b=>{u(L=>({key:b,direction:L.key===b&&L.direction==="asc"?"desc":"asc"}))},w=b=>d.includes(b),a=b=>y(L=>L.includes(b)?L.filter(p=>p!==b):[...L,b]),l=(b,L,p)=>{if(b.shiftKey&&f!==null){const[k,C]=L<f?[L,f]:[f,L],j=x.slice(k,C+1).map(D=>D.name);y(D=>Array.from(new Set([...D,...j])))}else b.metaKey||b.ctrlKey?(a(p),g(L)):(y([p]),g(L))},o=x.length>0&&d.length===x.length,c=()=>{y(o?[]:x.map(b=>b.name))};async function _(){if(!d.length)return;const b=JSON.stringify({names:d}),L=await fetch(`/api/hosts/${encodeURIComponent(t)}/networks/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:b}),p=await L.json().catch(()=>({}));L.ok||alert(typeof p=="string"?p:"Delete failed");const C=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/networks`,{credentials:"include"})).json();i(C.items||[]),y([]),g(null)}return v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between gap-3",children:[v.jsx("div",{className:"text-lg font-semibold text-white",children:"Networks"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("button",{onClick:_,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),v.jsx(ol,{hosts:e,activeHost:t,setActiveHost:r})]})]}),v.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"w-10 p-2 text-center",children:v.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:o,onChange:c})}),v.jsx(We,{sortKey:"name",currentSort:n,onSort:b=>E(b),children:"Name"}),v.jsx(We,{sortKey:"driver",currentSort:n,onSort:b=>E(b),children:"Driver"}),v.jsx(We,{sortKey:"scope",currentSort:n,onSort:b=>E(b),children:"Scope"}),v.jsx(We,{sortKey:"id",currentSort:n,onSort:b=>E(b),children:"ID"})]})}),v.jsxs("tbody",{children:[h&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"Loading"})}),!h&&x.length===0&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"No networks."})}),x.map((b,L)=>{var k;const p=w(b.name);return v.jsxs("tr",{onClick:C=>l(C,L,b.name),className:`border-t border-slate-800 cursor-default ${p?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[v.jsx("td",{className:"p-2 text-center",onClick:C=>C.stopPropagation(),children:v.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p,onChange:()=>a(b.name)})}),v.jsx("td",{className:"p-2 text-slate-300",children:b.name}),v.jsx("td",{className:"p-2 text-slate-300",children:b.driver}),v.jsx("td",{className:"p-2 text-slate-300",children:b.scope}),v.jsx("td",{className:"p-2 text-slate-300 font-mono",children:(k=b.id)==null?void 0:k.slice(0,12)})]},b.name)})]})]})}),v.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}function Bv({hosts:e}){var L;const[t,r]=O.useState(((L=e[0])==null?void 0:L.name)||""),[s,i]=O.useState([]),[h,m]=O.useState(!1),[n,u]=O.useState({key:"name",direction:"asc"}),[d,y]=O.useState([]),[f,g]=O.useState(null),[x,E]=O.useState(!0);O.useEffect(()=>{t&&(async()=>{m(!0);try{const k=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes`,{credentials:"include"})).json();i(k.items||[]),y([]),g(null)}finally{m(!1)}})()},[t]);const w=O.useMemo(()=>{const p=[...s];return p.sort((k,C)=>{const j=k[n.key]||"",D=C[n.key]||"",N=j.localeCompare(D);return n.direction==="asc"?N:-N}),p},[s,n]),a=p=>{u(k=>({key:p,direction:k.key===p&&k.direction==="asc"?"desc":"asc"}))},l=p=>d.includes(p),o=p=>y(k=>k.includes(p)?k.filter(C=>C!==p):[...k,p]),c=(p,k,C)=>{if(p.shiftKey&&f!==null){const[j,D]=k<f?[k,f]:[f,k],N=w.slice(j,D+1).map(I=>I.name);y(I=>Array.from(new Set([...I,...N])))}else p.metaKey||p.ctrlKey?(o(C),g(k)):(y([C]),g(k))},_=w.length>0&&d.length===w.length,S=()=>{y(_?[]:w.map(p=>p.name))};async function b(){if(!d.length)return;const p=JSON.stringify({names:d,force:x}),k=await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:p}),C=await k.json().catch(()=>({}));k.ok||alert(typeof C=="string"?C:"Delete failed");const D=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes`,{credentials:"include"})).json();i(D.items||[]),y([]),g(null)}return v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between gap-3",children:[v.jsx("div",{className:"text-lg font-semibold text-white",children:"Volumes"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[v.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:x,onChange:p=>E(p.target.checked)}),"Force"]}),v.jsxs("button",{onClick:b,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),v.jsx(ol,{hosts:e,activeHost:t,setActiveHost:r})]})]}),v.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"w-10 p-2 text-center",children:v.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:_,onChange:S})}),v.jsx(We,{sortKey:"name",currentSort:n,onSort:p=>a(p),children:"Name"}),v.jsx(We,{sortKey:"driver",currentSort:n,onSort:p=>a(p),children:"Driver"}),v.jsx(We,{sortKey:"mountpoint",currentSort:n,onSort:p=>a(p),children:"Mountpoint"}),v.jsx(We,{sortKey:"created",currentSort:n,onSort:p=>a(p),children:"Created"})]})}),v.jsxs("tbody",{children:[h&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"Loading"})}),!h&&w.length===0&&v.jsx("tr",{children:v.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"No volumes."})}),w.map((p,k)=>{const C=l(p.name);return v.jsxs("tr",{onClick:j=>c(j,k,p.name),className:`border-t border-slate-800 cursor-default ${C?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[v.jsx("td",{className:"p-2 text-center",onClick:j=>j.stopPropagation(),children:v.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:C,onChange:()=>o(p.name)})}),v.jsx("td",{className:"p-2 text-slate-300",children:p.name}),v.jsx("td",{className:"p-2 text-slate-300",children:p.driver}),v.jsx("td",{className:"p-2 text-slate-300 font-mono text-xs",children:p.mountpoint}),v.jsx("td",{className:"p-2 text-slate-300",children:p.created||""})]},p.name)})]})]})}),v.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}const Iv=new Set(["running","created","restarting","healthy","up"]);function Hv(e){const t=(e||"").toLowerCase();if(!t)return!1;for(const r of Iv)if(t.includes(r))return!1;return!0}function Fv(e,t){const r=new Map;for(const d of e){const y=(d.compose_project||d.stack||"(none)").trim()||"(none)";r.has(y)||r.set(y,[]),r.get(y).push(d)}const s=new Map;for(const d of t)s.set(d.name,d);const i=new Set([...r.keys(),...s.keys()]);let h=0,m=e.length,n=0,u=0;for(const d of e)Hv(d.state)&&u++;for(const d of i){h++;const y=r.get(d)||[],f=s.get(d),g=Array.isArray(f==null?void 0:f.services)?f.services:[],x=!!f&&(g.length>0||!!f.compose);let E=!1;const w=a=>{if(!f||g.length===0)return;const l=g.find(o=>a.compose_service&&o.service_name===a.compose_service||o.container_name&&o.container_name===a.name);return(l==null?void 0:l.image)||void 0};for(const a of y){const l=w(a);if(l&&l.trim()&&l.trim()!==(a.image||"").trim()){E=!0;break}}if(!E&&f&&g.length>0){for(const a of g)if(!y.some(o=>o.compose_service&&a.service_name===o.compose_service||a.container_name&&o.name===a.container_name)){E=!0;break}}!y.length&&x&&g.length>0&&(E=!0),E&&n++}return{stacks:h,containers:m,drift:n,errors:u}}function $v(){const[e,t]=O.useState([]),[r,s]=O.useState(!0),[i,h]=O.useState(null),[m,n]=O.useState(!1),[u,d]=O.useState({}),[y,f]=O.useState(!1),[g,x]=O.useState(!1),[E,w]=O.useState(""),a=M_(),l=tl(),o=()=>{const C=l.pathname;return C.startsWith("/hosts")?"hosts":C.startsWith("/stacks")?"stacks":C.startsWith("/images")?"images":C.startsWith("/networks")?"networks":C.startsWith("/volumes")?"volumes":"hosts"};O.useEffect(()=>{let C=!1;return(async()=>{try{const j=await fetch("/api/session",{credentials:"include"});if(!j.ok)throw new Error(`HTTP ${j.status}`);const D=await j.json();C||x(!!D.user)}catch{window.location.replace("/auth/login");return}finally{C||f(!0)}})(),()=>{C=!0}},[]),O.useEffect(()=>{g&&(async()=>{s(!0),h(null);try{const C=await fetch("/api/hosts",{credentials:"include"});if(C.status===401){window.location.replace("/auth/login");return}if(!C.ok)throw new Error(`HTTP ${C.status}`);const j=await C.json(),N=(Array.isArray(j.items)?j.items:[]).map(I=>({name:I.name,address:I.addr??I.address??"",groups:I.groups??[]}));t(N)}catch(C){h((C==null?void 0:C.message)||"Failed to load hosts")}finally{s(!1)}})()},[g]);const c=O.useMemo(()=>{const C=E.trim().toLowerCase();return C?e.filter(j=>[j.name,j.address||"",...j.groups||[]].join(" ").toLowerCase().includes(C)):e},[e,E]),_=O.useMemo(()=>e.map(C=>C.name).sort().join("|"),[e]);O.useEffect(()=>{d({})},[_]);async function S(C){if(!C.length)return;const j=4;let D=0;const N=Array.from({length:Math.min(j,C.length)},()=>(async()=>{for(;;){const I=D++;if(I>=C.length)break;const B=C[I];try{const[$,W]=await Promise.all([fetch(`/api/hosts/${encodeURIComponent(B)}/containers`,{credentials:"include"}),fetch(`/api/hosts/${encodeURIComponent(B)}/iac`,{credentials:"include"})]);if($.status===401||W.status===401){window.location.replace("/auth/login");return}const R=await $.json(),A=await W.json(),P=R.items||[],M=A.stacks||[],H=Fv(P,M);d(z=>({...z,[B]:H}))}catch{}}})());await Promise.all(N)}O.useEffect(()=>{!g||!e.length||S(e.map(C=>C.name))},[g,e]);const b=O.useMemo(()=>{let C=0,j=0,D=0,N=0;for(const I of c){const B=u[I.name];B&&(C+=B.stacks,j+=B.containers,D+=B.drift,N+=B.errors)}return{hosts:c.length,stacks:C,containers:j,drift:D,errors:N}},[c,u]);async function L(){if(!m){n(!0);try{await fetch("/api/iac/scan",{method:"POST",credentials:"include"}).catch(()=>{}),await fetch("/api/scan/all",{method:"POST",credentials:"include"}),await S(e.map(C=>C.name))}finally{n(!1)}}}if(y&&!g)return v.jsx(sm,{});if(!y)return v.jsx("div",{className:"min-h-screen bg-slate-950"});const p=()=>{const{hostName:C}=Sc(),j=e.find(D=>D.name===C);return j?v.jsx(wm,{host:j,onSync:()=>S([j.name]),onOpenStack:(D,N)=>a(`/stacks/${D}${N?`?host=${C}&iacId=${N}`:`?host=${C}`}`)}):(a("/hosts"),null)},k=()=>{const{stackName:C}=Sc(),j=new URLSearchParams(l.search),D=j.get("host"),N=j.get("iacId")?parseInt(j.get("iacId")):void 0,I=e.find(B=>B.name===D);return!I||!C?(a("/stacks"),null):v.jsx(Nv,{host:I,stackName:C,iacId:N,onBack:()=>a("/stacks")})};return v.jsxs("div",{className:"min-h-screen flex",children:[v.jsx(rm,{page:o(),onGoHosts:()=>a("/hosts"),onGoStacks:()=>a("/stacks"),onGoImages:()=>a("/images"),onGoNetworks:()=>a("/networks"),onGoVolumes:()=>a("/volumes")}),v.jsx("div",{className:"flex-1 min-w-0",children:v.jsxs(J_,{children:[v.jsx(St,{path:"/",element:v.jsx(Lc,{metrics:b,hosts:e,filteredHosts:c,loading:r,err:i,scanning:m,onScanAll:L,onFilter:w,onOpenHost:C=>a(`/hosts/${C}`),refreshMetricsForHosts:()=>S(e.map(C=>C.name))})}),v.jsx(St,{path:"/hosts",element:v.jsx(Lc,{metrics:b,hosts:e,filteredHosts:c,loading:r,err:i,scanning:m,onScanAll:L,onFilter:w,onOpenHost:C=>a(`/hosts/${C}`),refreshMetricsForHosts:()=>S(e.map(C=>C.name))})}),v.jsx(St,{path:"/hosts/:hostName",element:v.jsx(p,{})}),v.jsx(St,{path:"/stacks",element:v.jsx(Sm,{hosts:e,onOpenStack:(C,j,D)=>a(`/stacks/${j}?host=${C.name}${D?`&iacId=${D}`:""}`)})}),v.jsx(St,{path:"/stacks/:stackName",element:v.jsx(k,{})}),v.jsx(St,{path:"/images",element:v.jsx(Mv,{hosts:e})}),v.jsx(St,{path:"/networks",element:v.jsx(Ov,{hosts:e})}),v.jsx(St,{path:"/volumes",element:v.jsx(Bv,{hosts:e})})]})})]})}function zv(){const[e,t]=ct.useState({user:null,loading:!0});return ct.useEffect(()=>{let r=!0;return fetch("/api/session",{credentials:"include"}).then(async s=>{if(s.status===401){r&&t({user:null,loading:!1});return}const i=await s.json();r&&t({user:i.user??null,loading:!1})}).catch(()=>r&&t({user:null,loading:!1})),()=>{r=!1}},[]),e}function Uv({children:e}){const{user:t,loading:r}=zv();return r?v.jsx("div",{className:"min-h-screen grid place-items-center bg-slate-950 text-slate-200",children:v.jsx("div",{className:"animate-pulse text-slate-400",children:"Loading"})}):t?v.jsx(v.Fragment,{children:e}):v.jsx(Wv,{})}function Wv(){return v.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex items-center justify-center p-6",children:v.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-center",children:[v.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-2xl bg-slate-900 border border-slate-800 grid place-items-center shadow-[0_0_0_4px_rgba(116,236,190,0.12)]",children:v.jsxs("span",{className:"font-black text-lg",children:["DD",v.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-[#74ecbe] to-[#60a5fa]",children:"UI"})]})}),v.jsx("div",{className:"text-xl font-bold mb-2",children:"Designated Driver UI"}),v.jsx("div",{className:"text-sm text-slate-400 mb-6",children:"Sign in with your identity provider to continue."}),v.jsx("a",{href:"/auth/login",className:"inline-flex items-center justify-center rounded-md px-4 py-2 font-medium bg-[#74ecbe] text-slate-900 hover:bg-[#63d9ad]",children:"Sign in with SSO"}),v.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Community Edition  Security-first by default"})]})})}uo.createRoot(document.getElementById("root")).render(v.jsx(ct.StrictMode,{children:v.jsx(tm,{children:v.jsx(Uv,{children:v.jsx($v,{})})})}));

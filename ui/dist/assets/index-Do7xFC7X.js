function md(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const h=Object.getOwnPropertyDescriptor(s,i);h&&Object.defineProperty(e,i,h.get?h:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const v of h.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function r(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(i){if(i.ep)return;i.ep=!0;const h=r(i);fetch(i.href,h)}})();function gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pc={exports:{}},ln={},jc={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),yd=Symbol.for("react.portal"),Sd=Symbol.for("react.fragment"),wd=Symbol.for("react.strict_mode"),Cd=Symbol.for("react.profiler"),xd=Symbol.for("react.provider"),kd=Symbol.for("react.context"),bd=Symbol.for("react.forward_ref"),Ed=Symbol.for("react.suspense"),Ld=Symbol.for("react.memo"),Rd=Symbol.for("react.lazy"),ia=Symbol.iterator;function Dd(e){return e===null||typeof e!="object"?null:(e=ia&&e[ia]||e["@@iterator"],typeof e=="function"?e:null)}var Ac={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mc=Object.assign,Oc={};function qr(e,t,r){this.props=e,this.context=t,this.refs=Oc,this.updater=r||Ac}qr.prototype.isReactComponent={};qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nc(){}Nc.prototype=qr.prototype;function nl(e,t,r){this.props=e,this.context=t,this.refs=Oc,this.updater=r||Ac}var ol=nl.prototype=new Nc;ol.constructor=nl;Mc(ol,qr.prototype);ol.isPureReactComponent=!0;var na=Array.isArray,Bc=Object.prototype.hasOwnProperty,ll={current:null},Ic={key:!0,ref:!0,__self:!0,__source:!0};function Hc(e,t,r){var s,i={},h=null,v=null;if(t!=null)for(s in t.ref!==void 0&&(v=t.ref),t.key!==void 0&&(h=""+t.key),t)Bc.call(t,s)&&!Ic.hasOwnProperty(s)&&(i[s]=t[s]);var n=arguments.length-2;if(n===1)i.children=r;else if(1<n){for(var u=Array(n),d=0;d<n;d++)u[d]=arguments[d+2];i.children=u}if(e&&e.defaultProps)for(s in n=e.defaultProps,n)i[s]===void 0&&(i[s]=n[s]);return{$$typeof:Gs,type:e,key:h,ref:v,props:i,_owner:ll.current}}function Td(e,t){return{$$typeof:Gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function al(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gs}function Pd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oa=/\/+/g;function An(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pd(""+e.key):t.toString(36)}function Si(e,t,r,s,i){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var v=!1;if(e===null)v=!0;else switch(h){case"string":case"number":v=!0;break;case"object":switch(e.$$typeof){case Gs:case yd:v=!0}}if(v)return v=e,i=i(v),e=s===""?"."+An(v,0):s,na(i)?(r="",e!=null&&(r=e.replace(oa,"$&/")+"/"),Si(i,t,r,"",function(d){return d})):i!=null&&(al(i)&&(i=Td(i,r+(!i.key||v&&v.key===i.key?"":(""+i.key).replace(oa,"$&/")+"/")+e)),t.push(i)),1;if(v=0,s=s===""?".":s+":",na(e))for(var n=0;n<e.length;n++){h=e[n];var u=s+An(h,n);v+=Si(h,t,r,u,i)}else if(u=Dd(e),typeof u=="function")for(e=u.call(e),n=0;!(h=e.next()).done;)h=h.value,u=s+An(h,n++),v+=Si(h,t,r,u,i);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return v}function ti(e,t,r){if(e==null)return e;var s=[],i=0;return Si(e,s,"","",function(h){return t.call(r,h,i++)}),s}function jd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ae={current:null},wi={transition:null},Ad={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:wi,ReactCurrentOwner:ll};function Fc(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:ti,forEach:function(e,t,r){ti(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ti(e,function(){t++}),t},toArray:function(e){return ti(e,function(t){return t})||[]},only:function(e){if(!al(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=qr;ee.Fragment=Sd;ee.Profiler=Cd;ee.PureComponent=nl;ee.StrictMode=wd;ee.Suspense=Ed;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ad;ee.act=Fc;ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Mc({},e.props),i=e.key,h=e.ref,v=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,v=ll.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var n=e.type.defaultProps;for(u in t)Bc.call(t,u)&&!Ic.hasOwnProperty(u)&&(s[u]=t[u]===void 0&&n!==void 0?n[u]:t[u])}var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){n=Array(u);for(var d=0;d<u;d++)n[d]=arguments[d+2];s.children=n}return{$$typeof:Gs,type:e.type,key:i,ref:h,props:s,_owner:v}};ee.createContext=function(e){return e={$$typeof:kd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xd,_context:e},e.Consumer=e};ee.createElement=Hc;ee.createFactory=function(e){var t=Hc.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:bd,render:e}};ee.isValidElement=al;ee.lazy=function(e){return{$$typeof:Rd,_payload:{_status:-1,_result:e},_init:jd}};ee.memo=function(e,t){return{$$typeof:Ld,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=wi.transition;wi.transition={};try{e()}finally{wi.transition=t}};ee.unstable_act=Fc;ee.useCallback=function(e,t){return Ae.current.useCallback(e,t)};ee.useContext=function(e){return Ae.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Ae.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Ae.current.useEffect(e,t)};ee.useId=function(){return Ae.current.useId()};ee.useImperativeHandle=function(e,t,r){return Ae.current.useImperativeHandle(e,t,r)};ee.useInsertionEffect=function(e,t){return Ae.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Ae.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Ae.current.useMemo(e,t)};ee.useReducer=function(e,t,r){return Ae.current.useReducer(e,t,r)};ee.useRef=function(e){return Ae.current.useRef(e)};ee.useState=function(e){return Ae.current.useState(e)};ee.useSyncExternalStore=function(e,t,r){return Ae.current.useSyncExternalStore(e,t,r)};ee.useTransition=function(){return Ae.current.useTransition()};ee.version="18.3.1";jc.exports=ee;var I=jc.exports;const lt=gd(I),Md=md({__proto__:null,default:lt},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=I,Nd=Symbol.for("react.element"),Bd=Symbol.for("react.fragment"),Id=Object.prototype.hasOwnProperty,Hd=Od.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fd={key:!0,ref:!0,__self:!0,__source:!0};function $c(e,t,r){var s,i={},h=null,v=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(v=t.ref);for(s in t)Id.call(t,s)&&!Fd.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:Nd,type:e,key:h,ref:v,props:i,_owner:Hd.current}}ln.Fragment=Bd;ln.jsx=$c;ln.jsxs=$c;Pc.exports=ln;var w=Pc.exports,co={},zc={exports:{}},Ke={},Uc={exports:{}},Wc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,A){var j=L.length;L.push(A);e:for(;0<j;){var M=j-1>>>1,H=L[M];if(0<i(H,A))L[M]=A,L[j]=H,j=M;else break e}}function r(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var A=L[0],j=L.pop();if(j!==A){L[0]=j;e:for(var M=0,H=L.length,V=H>>>1;M<V;){var X=2*(M+1)-1,K=L[X],J=X+1,T=L[J];if(0>i(K,j))J<H&&0>i(T,K)?(L[M]=T,L[J]=j,M=J):(L[M]=K,L[X]=j,M=X);else if(J<H&&0>i(T,j))L[M]=T,L[J]=j,M=J;else break e}}return A}function i(L,A){var j=L.sortIndex-A.sortIndex;return j!==0?j:L.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var v=Date,n=v.now();e.unstable_now=function(){return v.now()-n}}var u=[],d=[],g=1,f=null,m=3,C=!1,k=!1,S=!1,l=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,o=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(L){for(var A=r(d);A!==null;){if(A.callback===null)s(d);else if(A.startTime<=L)s(d),A.sortIndex=A.expirationTime,t(u,A);else break;A=r(d)}}function _(L){if(S=!1,c(L),!k)if(r(u)!==null)k=!0,$(y);else{var A=r(d);A!==null&&z(_,A.startTime-L)}}function y(L,A){k=!1,S&&(S=!1,a(p),p=-1),C=!0;var j=m;try{for(c(A),f=r(u);f!==null&&(!(f.expirationTime>A)||L&&!P());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var H=M(f.expirationTime<=A);A=e.unstable_now(),typeof H=="function"?f.callback=H:f===r(u)&&s(u),c(A)}else s(u);f=r(u)}if(f!==null)var V=!0;else{var X=r(d);X!==null&&z(_,X.startTime-A),V=!1}return V}finally{f=null,m=j,C=!1}}var x=!1,E=null,p=-1,b=5,R=-1;function P(){return!(e.unstable_now()-R<b)}function D(){if(E!==null){var L=e.unstable_now();R=L;var A=!0;try{A=E(!0,L)}finally{A?O():(x=!1,E=null)}}else x=!1}var O;if(typeof o=="function")O=function(){o(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,B=N.port2;N.port1.onmessage=D,O=function(){B.postMessage(null)}}else O=function(){l(D,0)};function $(L){E=L,x||(x=!0,O())}function z(L,A){p=l(function(){L(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){k||C||(k=!0,$(y))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var j=m;m=A;try{return L()}finally{m=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,A){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=m;m=L;try{return A()}finally{m=j}},e.unstable_scheduleCallback=function(L,A,j){var M=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?M+j:M):j=M,L){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=j+H,L={id:g++,callback:A,priorityLevel:L,startTime:j,expirationTime:H,sortIndex:-1},j>M?(L.sortIndex=j,t(d,L),r(u)===null&&L===r(d)&&(S?(a(p),p=-1):S=!0,z(_,j-M))):(L.sortIndex=H,t(u,L),k||C||(k=!0,$(y))),L},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(L){var A=m;return function(){var j=m;m=A;try{return L.apply(this,arguments)}finally{m=j}}}})(Wc);Uc.exports=Wc;var $d=Uc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=I,Ve=$d;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vc=new Set,Ls={};function _r(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(Ls[e]=t,e=0;e<t.length;e++)Vc.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=Object.prototype.hasOwnProperty,Ud=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},aa={};function Wd(e){return uo.call(aa,e)?!0:uo.call(la,e)?!1:Ud.test(e)?aa[e]=!0:(la[e]=!0,!1)}function Vd(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kd(e,t,r,s){if(t===null||typeof t>"u"||Vd(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,r,s,i,h,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=v}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var cl=/[\-:]([a-z])/g;function ul(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cl,ul);Ee[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cl,ul);Ee[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cl,ul);Ee[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function hl(e,t,r,s){var i=Ee.hasOwnProperty(t)?Ee[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kd(t,r,i,s)&&(r=null),s||i===null?Wd(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Dt=zd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ri=Symbol.for("react.element"),yr=Symbol.for("react.portal"),Sr=Symbol.for("react.fragment"),dl=Symbol.for("react.strict_mode"),ho=Symbol.for("react.profiler"),Kc=Symbol.for("react.provider"),qc=Symbol.for("react.context"),fl=Symbol.for("react.forward_ref"),fo=Symbol.for("react.suspense"),po=Symbol.for("react.suspense_list"),pl=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),Gc=Symbol.for("react.offscreen"),ca=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=ca&&e[ca]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,Mn;function ds(e){if(Mn===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mn=t&&t[1]||""}return`
`+Mn+e}var On=!1;function Nn(e,t){if(!e||On)return"";On=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),h=s.stack.split(`
`),v=i.length-1,n=h.length-1;1<=v&&0<=n&&i[v]!==h[n];)n--;for(;1<=v&&0<=n;v--,n--)if(i[v]!==h[n]){if(v!==1||n!==1)do if(v--,n--,0>n||i[v]!==h[n]){var u=`
`+i[v].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=v&&0<=n);break}}}finally{On=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ds(e):""}function qd(e){switch(e.tag){case 5:return ds(e.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return e=Nn(e.type,!1),e;case 11:return e=Nn(e.type.render,!1),e;case 1:return e=Nn(e.type,!0),e;default:return""}}function _o(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Sr:return"Fragment";case yr:return"Portal";case ho:return"Profiler";case dl:return"StrictMode";case fo:return"Suspense";case po:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qc:return(e.displayName||"Context")+".Consumer";case Kc:return(e._context.displayName||"Context")+".Provider";case fl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pl:return t=e.displayName||null,t!==null?t:_o(e.type)||"Memo";case Mt:t=e._payload,e=e._init;try{return _o(e(t))}catch{}}return null}function Gd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _o(t);case 8:return t===dl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xd(e){var t=Xc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(v){s=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function si(e){e._valueTracker||(e._valueTracker=Xd(e))}function Qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Xc(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vo(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ua(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Qt(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yc(e,t){t=t.checked,t!=null&&hl(e,"checked",t,!1)}function mo(e,t){Yc(e,t);var r=Qt(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?go(e,t.type,r):t.hasOwnProperty("defaultValue")&&go(e,t.type,Qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ha(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function go(e,t,r){(t!=="number"||ji(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fs=Array.isArray;function jr(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Qt(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function yo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function da(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(fs(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Qt(r)}}function Jc(e,t){var r=Qt(t.value),s=Qt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function fa(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function So(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ii,eu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ii.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qd=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(e){Qd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ms[t]=ms[e]})});function tu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ms.hasOwnProperty(e)&&ms[e]?(""+t).trim():t+"px"}function ru(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=tu(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var Yd=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wo(e,t){if(t){if(Yd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=null;function _l(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ko=null,Ar=null,Mr=null;function pa(e){if(e=Ys(e)){if(typeof ko!="function")throw Error(q(280));var t=e.stateNode;t&&(t=dn(t),ko(e.stateNode,e.type,t))}}function su(e){Ar?Mr?Mr.push(e):Mr=[e]:Ar=e}function iu(){if(Ar){var e=Ar,t=Mr;if(Mr=Ar=null,pa(e),t)for(e=0;e<t.length;e++)pa(t[e])}}function nu(e,t){return e(t)}function ou(){}var Bn=!1;function lu(e,t,r){if(Bn)return e(t,r);Bn=!0;try{return nu(e,t,r)}finally{Bn=!1,(Ar!==null||Mr!==null)&&(ou(),iu())}}function Ds(e,t){var r=e.stateNode;if(r===null)return null;var s=dn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var bo=!1;if(bt)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){bo=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{bo=!1}function Jd(e,t,r,s,i,h,v,n,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(g){this.onError(g)}}var gs=!1,Ai=null,Mi=!1,Eo=null,Zd={onError:function(e){gs=!0,Ai=e}};function ef(e,t,r,s,i,h,v,n,u){gs=!1,Ai=null,Jd.apply(Zd,arguments)}function tf(e,t,r,s,i,h,v,n,u){if(ef.apply(this,arguments),gs){if(gs){var d=Ai;gs=!1,Ai=null}else throw Error(q(198));Mi||(Mi=!0,Eo=d)}}function vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function au(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _a(e){if(vr(e)!==e)throw Error(q(188))}function rf(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var h=i.alternate;if(h===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===h.child){for(h=i.child;h;){if(h===r)return _a(i),e;if(h===s)return _a(i),t;h=h.sibling}throw Error(q(188))}if(r.return!==s.return)r=i,s=h;else{for(var v=!1,n=i.child;n;){if(n===r){v=!0,r=i,s=h;break}if(n===s){v=!0,s=i,r=h;break}n=n.sibling}if(!v){for(n=h.child;n;){if(n===r){v=!0,r=h,s=i;break}if(n===s){v=!0,s=h,r=i;break}n=n.sibling}if(!v)throw Error(q(189))}}if(r.alternate!==s)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function cu(e){return e=rf(e),e!==null?uu(e):null}function uu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uu(e);if(t!==null)return t;e=e.sibling}return null}var hu=Ve.unstable_scheduleCallback,va=Ve.unstable_cancelCallback,sf=Ve.unstable_shouldYield,nf=Ve.unstable_requestPaint,ve=Ve.unstable_now,of=Ve.unstable_getCurrentPriorityLevel,vl=Ve.unstable_ImmediatePriority,du=Ve.unstable_UserBlockingPriority,Oi=Ve.unstable_NormalPriority,lf=Ve.unstable_LowPriority,fu=Ve.unstable_IdlePriority,an=null,vt=null;function af(e){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(an,e,void 0,(e.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:hf,cf=Math.log,uf=Math.LN2;function hf(e){return e>>>=0,e===0?32:31-(cf(e)/uf|0)|0}var ni=64,oi=4194304;function ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ni(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,h=e.pingedLanes,v=r&268435455;if(v!==0){var n=v&~i;n!==0?s=ps(n):(h&=v,h!==0&&(s=ps(h)))}else v=r&~i,v!==0?s=ps(v):h!==0&&(s=ps(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,h=t&-t,i>=h||i===16&&(h&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-at(t),i=1<<r,s|=e[r],t&=~i;return s}function df(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ff(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,h=e.pendingLanes;0<h;){var v=31-at(h),n=1<<v,u=i[v];u===-1?(!(n&r)||n&s)&&(i[v]=df(n,t)):u<=t&&(e.expiredLanes|=n),h&=~n}}function Lo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pu(){var e=ni;return ni<<=1,!(ni&4194240)&&(ni=64),e}function In(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-at(t),e[t]=r}function pf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),h=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~h}}function ml(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-at(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var ie=0;function _u(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vu,gl,mu,gu,yu,Ro=!1,li=[],$t=null,zt=null,Ut=null,Ts=new Map,Ps=new Map,Nt=[],_f="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ma(e,t){switch(e){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(t.pointerId)}}function ss(e,t,r,s,i,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:h,targetContainers:[i]},t!==null&&(t=Ys(t),t!==null&&gl(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function vf(e,t,r,s,i){switch(t){case"focusin":return $t=ss($t,e,t,r,s,i),!0;case"dragenter":return zt=ss(zt,e,t,r,s,i),!0;case"mouseover":return Ut=ss(Ut,e,t,r,s,i),!0;case"pointerover":var h=i.pointerId;return Ts.set(h,ss(Ts.get(h)||null,e,t,r,s,i)),!0;case"gotpointercapture":return h=i.pointerId,Ps.set(h,ss(Ps.get(h)||null,e,t,r,s,i)),!0}return!1}function Su(e){var t=ir(e.target);if(t!==null){var r=vr(t);if(r!==null){if(t=r.tag,t===13){if(t=au(r),t!==null){e.blockedOn=t,yu(e.priority,function(){mu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ci(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Do(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);xo=s,r.target.dispatchEvent(s),xo=null}else return t=Ys(r),t!==null&&gl(t),e.blockedOn=r,!1;t.shift()}return!0}function ga(e,t,r){Ci(e)&&r.delete(t)}function mf(){Ro=!1,$t!==null&&Ci($t)&&($t=null),zt!==null&&Ci(zt)&&(zt=null),Ut!==null&&Ci(Ut)&&(Ut=null),Ts.forEach(ga),Ps.forEach(ga)}function is(e,t){e.blockedOn===t&&(e.blockedOn=null,Ro||(Ro=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,mf)))}function js(e){function t(i){return is(i,e)}if(0<li.length){is(li[0],e);for(var r=1;r<li.length;r++){var s=li[r];s.blockedOn===e&&(s.blockedOn=null)}}for($t!==null&&is($t,e),zt!==null&&is(zt,e),Ut!==null&&is(Ut,e),Ts.forEach(t),Ps.forEach(t),r=0;r<Nt.length;r++)s=Nt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Nt.length&&(r=Nt[0],r.blockedOn===null);)Su(r),r.blockedOn===null&&Nt.shift()}var Or=Dt.ReactCurrentBatchConfig,Bi=!0;function gf(e,t,r,s){var i=ie,h=Or.transition;Or.transition=null;try{ie=1,yl(e,t,r,s)}finally{ie=i,Or.transition=h}}function yf(e,t,r,s){var i=ie,h=Or.transition;Or.transition=null;try{ie=4,yl(e,t,r,s)}finally{ie=i,Or.transition=h}}function yl(e,t,r,s){if(Bi){var i=Do(e,t,r,s);if(i===null)Gn(e,t,s,Ii,r),ma(e,s);else if(vf(i,e,t,r,s))s.stopPropagation();else if(ma(e,s),t&4&&-1<_f.indexOf(e)){for(;i!==null;){var h=Ys(i);if(h!==null&&vu(h),h=Do(e,t,r,s),h===null&&Gn(e,t,s,Ii,r),h===i)break;i=h}i!==null&&s.stopPropagation()}else Gn(e,t,s,null,r)}}var Ii=null;function Do(e,t,r,s){if(Ii=null,e=_l(s),e=ir(e),e!==null)if(t=vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=au(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ii=e,null}function wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(of()){case vl:return 1;case du:return 4;case Oi:case lf:return 16;case fu:return 536870912;default:return 16}default:return 16}}var It=null,Sl=null,xi=null;function Cu(){if(xi)return xi;var e,t=Sl,r=t.length,s,i="value"in It?It.value:It.textContent,h=i.length;for(e=0;e<r&&t[e]===i[e];e++);var v=r-e;for(s=1;s<=v&&t[r-s]===i[h-s];s++);return xi=i.slice(e,1<s?1-s:void 0)}function ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function ya(){return!1}function qe(e){function t(r,s,i,h,v){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var n in e)e.hasOwnProperty(n)&&(r=e[n],this[n]=r?r(h):h[n]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ai:ya,this.isPropagationStopped=ya,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=qe(Gr),Qs=pe({},Gr,{view:0,detail:0}),Sf=qe(Qs),Hn,Fn,ns,cn=pe({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(Hn=e.screenX-ns.screenX,Fn=e.screenY-ns.screenY):Fn=Hn=0,ns=e),Hn)},movementY:function(e){return"movementY"in e?e.movementY:Fn}}),Sa=qe(cn),wf=pe({},cn,{dataTransfer:0}),Cf=qe(wf),xf=pe({},Qs,{relatedTarget:0}),$n=qe(xf),kf=pe({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),bf=qe(kf),Ef=pe({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lf=qe(Ef),Rf=pe({},Gr,{data:0}),wa=qe(Rf),Df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pf[e])?!!t[e]:!1}function Cl(){return jf}var Af=pe({},Qs,{key:function(e){if(e.key){var t=Df[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(e){return e.type==="keypress"?ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mf=qe(Af),Of=pe({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=qe(Of),Nf=pe({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),Bf=qe(Nf),If=pe({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hf=qe(If),Ff=pe({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$f=qe(Ff),zf=[9,13,27,32],xl=bt&&"CompositionEvent"in window,ys=null;bt&&"documentMode"in document&&(ys=document.documentMode);var Uf=bt&&"TextEvent"in window&&!ys,xu=bt&&(!xl||ys&&8<ys&&11>=ys),xa=" ",ka=!1;function ku(e,t){switch(e){case"keyup":return zf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wr=!1;function Wf(e,t){switch(e){case"compositionend":return bu(t);case"keypress":return t.which!==32?null:(ka=!0,xa);case"textInput":return e=t.data,e===xa&&ka?null:e;default:return null}}function Vf(e,t){if(wr)return e==="compositionend"||!xl&&ku(e,t)?(e=Cu(),xi=Sl=It=null,wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xu&&t.locale!=="ko"?null:t.data;default:return null}}var Kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kf[e.type]:t==="textarea"}function Eu(e,t,r,s){su(s),t=Hi(t,"onChange"),0<t.length&&(r=new wl("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ss=null,As=null;function qf(e){Bu(e,0)}function un(e){var t=kr(e);if(Qc(t))return e}function Gf(e,t){if(e==="change")return t}var Lu=!1;if(bt){var zn;if(bt){var Un="oninput"in document;if(!Un){var Ea=document.createElement("div");Ea.setAttribute("oninput","return;"),Un=typeof Ea.oninput=="function"}zn=Un}else zn=!1;Lu=zn&&(!document.documentMode||9<document.documentMode)}function La(){Ss&&(Ss.detachEvent("onpropertychange",Ru),As=Ss=null)}function Ru(e){if(e.propertyName==="value"&&un(As)){var t=[];Eu(t,As,e,_l(e)),lu(qf,t)}}function Xf(e,t,r){e==="focusin"?(La(),Ss=t,As=r,Ss.attachEvent("onpropertychange",Ru)):e==="focusout"&&La()}function Qf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return un(As)}function Yf(e,t){if(e==="click")return un(t)}function Jf(e,t){if(e==="input"||e==="change")return un(t)}function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ut=typeof Object.is=="function"?Object.is:Zf;function Ms(e,t){if(ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!uo.call(t,i)||!ut(e[i],t[i]))return!1}return!0}function Ra(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Da(e,t){var r=Ra(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ra(r)}}function Du(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Du(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tu(){for(var e=window,t=ji();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ji(e.document)}return t}function kl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ep(e){var t=Tu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Du(r.ownerDocument.documentElement,r)){if(s!==null&&kl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,h=Math.min(s.start,i);s=s.end===void 0?h:Math.min(s.end,i),!e.extend&&h>s&&(i=s,s=h,h=i),i=Da(r,h);var v=Da(r,s);i&&v&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tp=bt&&"documentMode"in document&&11>=document.documentMode,Cr=null,To=null,ws=null,Po=!1;function Ta(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Po||Cr==null||Cr!==ji(s)||(s=Cr,"selectionStart"in s&&kl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ws&&Ms(ws,s)||(ws=s,s=Hi(To,"onSelect"),0<s.length&&(t=new wl("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Cr)))}function ci(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xr={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionend:ci("Transition","TransitionEnd")},Wn={},Pu={};bt&&(Pu=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function hn(e){if(Wn[e])return Wn[e];if(!xr[e])return e;var t=xr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Pu)return Wn[e]=t[r];return e}var ju=hn("animationend"),Au=hn("animationiteration"),Mu=hn("animationstart"),Ou=hn("transitionend"),Nu=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(e,t){Nu.set(e,t),_r(t,[e])}for(var Vn=0;Vn<Pa.length;Vn++){var Kn=Pa[Vn],rp=Kn.toLowerCase(),sp=Kn[0].toUpperCase()+Kn.slice(1);Jt(rp,"on"+sp)}Jt(ju,"onAnimationEnd");Jt(Au,"onAnimationIteration");Jt(Mu,"onAnimationStart");Jt("dblclick","onDoubleClick");Jt("focusin","onFocus");Jt("focusout","onBlur");Jt(Ou,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_r("onBeforeInput",["compositionend","keypress","textInput","paste"]);_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ip=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function ja(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,tf(s,t,void 0,e),e.currentTarget=null}function Bu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var v=s.length-1;0<=v;v--){var n=s[v],u=n.instance,d=n.currentTarget;if(n=n.listener,u!==h&&i.isPropagationStopped())break e;ja(i,n,d),h=u}else for(v=0;v<s.length;v++){if(n=s[v],u=n.instance,d=n.currentTarget,n=n.listener,u!==h&&i.isPropagationStopped())break e;ja(i,n,d),h=u}}}if(Mi)throw e=Eo,Mi=!1,Eo=null,e}function ae(e,t){var r=t[No];r===void 0&&(r=t[No]=new Set);var s=e+"__bubble";r.has(s)||(Iu(t,e,2,!1),r.add(s))}function qn(e,t,r){var s=0;t&&(s|=4),Iu(r,e,s,t)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Os(e){if(!e[ui]){e[ui]=!0,Vc.forEach(function(r){r!=="selectionchange"&&(ip.has(r)||qn(r,!1,e),qn(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ui]||(t[ui]=!0,qn("selectionchange",!1,t))}}function Iu(e,t,r,s){switch(wu(t)){case 1:var i=gf;break;case 4:i=yf;break;default:i=yl}r=i.bind(null,t,r,e),i=void 0,!bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Gn(e,t,r,s,i){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var v=s.tag;if(v===3||v===4){var n=s.stateNode.containerInfo;if(n===i||n.nodeType===8&&n.parentNode===i)break;if(v===4)for(v=s.return;v!==null;){var u=v.tag;if((u===3||u===4)&&(u=v.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;v=v.return}for(;n!==null;){if(v=ir(n),v===null)return;if(u=v.tag,u===5||u===6){s=h=v;continue e}n=n.parentNode}}s=s.return}lu(function(){var d=h,g=_l(r),f=[];e:{var m=Nu.get(e);if(m!==void 0){var C=wl,k=e;switch(e){case"keypress":if(ki(r)===0)break e;case"keydown":case"keyup":C=Mf;break;case"focusin":k="focus",C=$n;break;case"focusout":k="blur",C=$n;break;case"beforeblur":case"afterblur":C=$n;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Bf;break;case ju:case Au:case Mu:C=bf;break;case Ou:C=Hf;break;case"scroll":C=Sf;break;case"wheel":C=$f;break;case"copy":case"cut":case"paste":C=Lf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Ca}var S=(t&4)!==0,l=!S&&e==="scroll",a=S?m!==null?m+"Capture":null:m;S=[];for(var o=d,c;o!==null;){c=o;var _=c.stateNode;if(c.tag===5&&_!==null&&(c=_,a!==null&&(_=Ds(o,a),_!=null&&S.push(Ns(o,_,c)))),l)break;o=o.return}0<S.length&&(m=new C(m,k,null,r,g),f.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",m&&r!==xo&&(k=r.relatedTarget||r.fromElement)&&(ir(k)||k[Et]))break e;if((C||m)&&(m=g.window===g?g:(m=g.ownerDocument)?m.defaultView||m.parentWindow:window,C?(k=r.relatedTarget||r.toElement,C=d,k=k?ir(k):null,k!==null&&(l=vr(k),k!==l||k.tag!==5&&k.tag!==6)&&(k=null)):(C=null,k=d),C!==k)){if(S=Sa,_="onMouseLeave",a="onMouseEnter",o="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ca,_="onPointerLeave",a="onPointerEnter",o="pointer"),l=C==null?m:kr(C),c=k==null?m:kr(k),m=new S(_,o+"leave",C,r,g),m.target=l,m.relatedTarget=c,_=null,ir(g)===d&&(S=new S(a,o+"enter",k,r,g),S.target=c,S.relatedTarget=l,_=S),l=_,C&&k)t:{for(S=C,a=k,o=0,c=S;c;c=gr(c))o++;for(c=0,_=a;_;_=gr(_))c++;for(;0<o-c;)S=gr(S),o--;for(;0<c-o;)a=gr(a),c--;for(;o--;){if(S===a||a!==null&&S===a.alternate)break t;S=gr(S),a=gr(a)}S=null}else S=null;C!==null&&Aa(f,m,C,S,!1),k!==null&&l!==null&&Aa(f,l,k,S,!0)}}e:{if(m=d?kr(d):window,C=m.nodeName&&m.nodeName.toLowerCase(),C==="select"||C==="input"&&m.type==="file")var y=Gf;else if(ba(m))if(Lu)y=Jf;else{y=Qf;var x=Xf}else(C=m.nodeName)&&C.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(y=Yf);if(y&&(y=y(e,d))){Eu(f,y,r,g);break e}x&&x(e,m,d),e==="focusout"&&(x=m._wrapperState)&&x.controlled&&m.type==="number"&&go(m,"number",m.value)}switch(x=d?kr(d):window,e){case"focusin":(ba(x)||x.contentEditable==="true")&&(Cr=x,To=d,ws=null);break;case"focusout":ws=To=Cr=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Ta(f,r,g);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":Ta(f,r,g)}var E;if(xl)e:{switch(e){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else wr?ku(e,r)&&(p="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(p="onCompositionStart");p&&(xu&&r.locale!=="ko"&&(wr||p!=="onCompositionStart"?p==="onCompositionEnd"&&wr&&(E=Cu()):(It=g,Sl="value"in It?It.value:It.textContent,wr=!0)),x=Hi(d,p),0<x.length&&(p=new wa(p,e,null,r,g),f.push({event:p,listeners:x}),E?p.data=E:(E=bu(r),E!==null&&(p.data=E)))),(E=Uf?Wf(e,r):Vf(e,r))&&(d=Hi(d,"onBeforeInput"),0<d.length&&(g=new wa("onBeforeInput","beforeinput",null,r,g),f.push({event:g,listeners:d}),g.data=E))}Bu(f,t)})}function Ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hi(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,h=i.stateNode;i.tag===5&&h!==null&&(i=h,h=Ds(e,r),h!=null&&s.unshift(Ns(e,h,i)),h=Ds(e,t),h!=null&&s.push(Ns(e,h,i))),e=e.return}return s}function gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Aa(e,t,r,s,i){for(var h=t._reactName,v=[];r!==null&&r!==s;){var n=r,u=n.alternate,d=n.stateNode;if(u!==null&&u===s)break;n.tag===5&&d!==null&&(n=d,i?(u=Ds(r,h),u!=null&&v.unshift(Ns(r,u,n))):i||(u=Ds(r,h),u!=null&&v.push(Ns(r,u,n)))),r=r.return}v.length!==0&&e.push({event:t,listeners:v})}var np=/\r\n?/g,op=/\u0000|\uFFFD/g;function Ma(e){return(typeof e=="string"?e:""+e).replace(np,`
`).replace(op,"")}function hi(e,t,r){if(t=Ma(t),Ma(e)!==t&&r)throw Error(q(425))}function Fi(){}var jo=null,Ao=null;function Mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oo=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,Oa=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof Oa<"u"?function(e){return Oa.resolve(null).then(e).catch(cp)}:Oo;function cp(e){setTimeout(function(){throw e})}function Xn(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),js(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);js(t)}function Wt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Na(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Xr=Math.random().toString(36).slice(2),_t="__reactFiber$"+Xr,Bs="__reactProps$"+Xr,Et="__reactContainer$"+Xr,No="__reactEvents$"+Xr,up="__reactListeners$"+Xr,hp="__reactHandles$"+Xr;function ir(e){var t=e[_t];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Et]||r[_t]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Na(e);e!==null;){if(r=e[_t])return r;e=Na(e)}return t}e=r,r=e.parentNode}return null}function Ys(e){return e=e[_t]||e[Et],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function dn(e){return e[Bs]||null}var Bo=[],br=-1;function Zt(e){return{current:e}}function ce(e){0>br||(e.current=Bo[br],Bo[br]=null,br--)}function oe(e,t){br++,Bo[br]=e.current,e.current=t}var Yt={},Te=Zt(Yt),Be=Zt(!1),ur=Yt;function Hr(e,t){var r=e.type.contextTypes;if(!r)return Yt;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},h;for(h in r)i[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ie(e){return e=e.childContextTypes,e!=null}function $i(){ce(Be),ce(Te)}function Ba(e,t,r){if(Te.current!==Yt)throw Error(q(168));oe(Te,t),oe(Be,r)}function Hu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(q(108,Gd(e)||"Unknown",i));return pe({},r,s)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,ur=Te.current,oe(Te,e),oe(Be,Be.current),!0}function Ia(e,t,r){var s=e.stateNode;if(!s)throw Error(q(169));r?(e=Hu(e,t,ur),s.__reactInternalMemoizedMergedChildContext=e,ce(Be),ce(Te),oe(Te,e)):ce(Be),oe(Be,r)}var wt=null,fn=!1,Qn=!1;function Fu(e){wt===null?wt=[e]:wt.push(e)}function dp(e){fn=!0,Fu(e)}function er(){if(!Qn&&wt!==null){Qn=!0;var e=0,t=ie;try{var r=wt;for(ie=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}wt=null,fn=!1}catch(i){throw wt!==null&&(wt=wt.slice(e+1)),hu(vl,er),i}finally{ie=t,Qn=!1}}return null}var Er=[],Lr=0,Ui=null,Wi=0,Xe=[],Qe=0,hr=null,Ct=1,xt="";function tr(e,t){Er[Lr++]=Wi,Er[Lr++]=Ui,Ui=e,Wi=t}function $u(e,t,r){Xe[Qe++]=Ct,Xe[Qe++]=xt,Xe[Qe++]=hr,hr=e;var s=Ct;e=xt;var i=32-at(s)-1;s&=~(1<<i),r+=1;var h=32-at(t)+i;if(30<h){var v=i-i%5;h=(s&(1<<v)-1).toString(32),s>>=v,i-=v,Ct=1<<32-at(t)+i|r<<i|s,xt=h+e}else Ct=1<<h|r<<i|s,xt=e}function bl(e){e.return!==null&&(tr(e,1),$u(e,1,0))}function El(e){for(;e===Ui;)Ui=Er[--Lr],Er[Lr]=null,Wi=Er[--Lr],Er[Lr]=null;for(;e===hr;)hr=Xe[--Qe],Xe[Qe]=null,xt=Xe[--Qe],Xe[Qe]=null,Ct=Xe[--Qe],Xe[Qe]=null}var We=null,Ue=null,ue=!1,ot=null;function zu(e,t){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ha(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,We=e,Ue=Wt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,We=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:Ct,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,We=e,Ue=null,!0):!1;default:return!1}}function Io(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ho(e){if(ue){var t=Ue;if(t){var r=t;if(!Ha(e,t)){if(Io(e))throw Error(q(418));t=Wt(r.nextSibling);var s=We;t&&Ha(e,t)?zu(s,r):(e.flags=e.flags&-4097|2,ue=!1,We=e)}}else{if(Io(e))throw Error(q(418));e.flags=e.flags&-4097|2,ue=!1,We=e}}}function Fa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;We=e}function di(e){if(e!==We)return!1;if(!ue)return Fa(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mo(e.type,e.memoizedProps)),t&&(t=Ue)){if(Io(e))throw Uu(),Error(q(418));for(;t;)zu(e,t),t=Wt(t.nextSibling)}if(Fa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Wt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=We?Wt(e.stateNode.nextSibling):null;return!0}function Uu(){for(var e=Ue;e;)e=Wt(e.nextSibling)}function Fr(){Ue=We=null,ue=!1}function Ll(e){ot===null?ot=[e]:ot.push(e)}var fp=Dt.ReactCurrentBatchConfig;function os(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var s=r.stateNode}if(!s)throw Error(q(147,e));var i=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(v){var n=i.refs;v===null?delete n[h]:n[h]=v},t._stringRef=h,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function fi(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $a(e){var t=e._init;return t(e._payload)}function Wu(e){function t(a,o){if(e){var c=a.deletions;c===null?(a.deletions=[o],a.flags|=16):c.push(o)}}function r(a,o){if(!e)return null;for(;o!==null;)t(a,o),o=o.sibling;return null}function s(a,o){for(a=new Map;o!==null;)o.key!==null?a.set(o.key,o):a.set(o.index,o),o=o.sibling;return a}function i(a,o){return a=Gt(a,o),a.index=0,a.sibling=null,a}function h(a,o,c){return a.index=c,e?(c=a.alternate,c!==null?(c=c.index,c<o?(a.flags|=2,o):c):(a.flags|=2,o)):(a.flags|=1048576,o)}function v(a){return e&&a.alternate===null&&(a.flags|=2),a}function n(a,o,c,_){return o===null||o.tag!==6?(o=so(c,a.mode,_),o.return=a,o):(o=i(o,c),o.return=a,o)}function u(a,o,c,_){var y=c.type;return y===Sr?g(a,o,c.props.children,_,c.key):o!==null&&(o.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Mt&&$a(y)===o.type)?(_=i(o,c.props),_.ref=os(a,o,c),_.return=a,_):(_=Pi(c.type,c.key,c.props,null,a.mode,_),_.ref=os(a,o,c),_.return=a,_)}function d(a,o,c,_){return o===null||o.tag!==4||o.stateNode.containerInfo!==c.containerInfo||o.stateNode.implementation!==c.implementation?(o=io(c,a.mode,_),o.return=a,o):(o=i(o,c.children||[]),o.return=a,o)}function g(a,o,c,_,y){return o===null||o.tag!==7?(o=ar(c,a.mode,_,y),o.return=a,o):(o=i(o,c),o.return=a,o)}function f(a,o,c){if(typeof o=="string"&&o!==""||typeof o=="number")return o=so(""+o,a.mode,c),o.return=a,o;if(typeof o=="object"&&o!==null){switch(o.$$typeof){case ri:return c=Pi(o.type,o.key,o.props,null,a.mode,c),c.ref=os(a,null,o),c.return=a,c;case yr:return o=io(o,a.mode,c),o.return=a,o;case Mt:var _=o._init;return f(a,_(o._payload),c)}if(fs(o)||ts(o))return o=ar(o,a.mode,c,null),o.return=a,o;fi(a,o)}return null}function m(a,o,c,_){var y=o!==null?o.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return y!==null?null:n(a,o,""+c,_);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ri:return c.key===y?u(a,o,c,_):null;case yr:return c.key===y?d(a,o,c,_):null;case Mt:return y=c._init,m(a,o,y(c._payload),_)}if(fs(c)||ts(c))return y!==null?null:g(a,o,c,_,null);fi(a,c)}return null}function C(a,o,c,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return a=a.get(c)||null,n(o,a,""+_,y);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ri:return a=a.get(_.key===null?c:_.key)||null,u(o,a,_,y);case yr:return a=a.get(_.key===null?c:_.key)||null,d(o,a,_,y);case Mt:var x=_._init;return C(a,o,c,x(_._payload),y)}if(fs(_)||ts(_))return a=a.get(c)||null,g(o,a,_,y,null);fi(o,_)}return null}function k(a,o,c,_){for(var y=null,x=null,E=o,p=o=0,b=null;E!==null&&p<c.length;p++){E.index>p?(b=E,E=null):b=E.sibling;var R=m(a,E,c[p],_);if(R===null){E===null&&(E=b);break}e&&E&&R.alternate===null&&t(a,E),o=h(R,o,p),x===null?y=R:x.sibling=R,x=R,E=b}if(p===c.length)return r(a,E),ue&&tr(a,p),y;if(E===null){for(;p<c.length;p++)E=f(a,c[p],_),E!==null&&(o=h(E,o,p),x===null?y=E:x.sibling=E,x=E);return ue&&tr(a,p),y}for(E=s(a,E);p<c.length;p++)b=C(E,a,p,c[p],_),b!==null&&(e&&b.alternate!==null&&E.delete(b.key===null?p:b.key),o=h(b,o,p),x===null?y=b:x.sibling=b,x=b);return e&&E.forEach(function(P){return t(a,P)}),ue&&tr(a,p),y}function S(a,o,c,_){var y=ts(c);if(typeof y!="function")throw Error(q(150));if(c=y.call(c),c==null)throw Error(q(151));for(var x=y=null,E=o,p=o=0,b=null,R=c.next();E!==null&&!R.done;p++,R=c.next()){E.index>p?(b=E,E=null):b=E.sibling;var P=m(a,E,R.value,_);if(P===null){E===null&&(E=b);break}e&&E&&P.alternate===null&&t(a,E),o=h(P,o,p),x===null?y=P:x.sibling=P,x=P,E=b}if(R.done)return r(a,E),ue&&tr(a,p),y;if(E===null){for(;!R.done;p++,R=c.next())R=f(a,R.value,_),R!==null&&(o=h(R,o,p),x===null?y=R:x.sibling=R,x=R);return ue&&tr(a,p),y}for(E=s(a,E);!R.done;p++,R=c.next())R=C(E,a,p,R.value,_),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?p:R.key),o=h(R,o,p),x===null?y=R:x.sibling=R,x=R);return e&&E.forEach(function(D){return t(a,D)}),ue&&tr(a,p),y}function l(a,o,c,_){if(typeof c=="object"&&c!==null&&c.type===Sr&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case ri:e:{for(var y=c.key,x=o;x!==null;){if(x.key===y){if(y=c.type,y===Sr){if(x.tag===7){r(a,x.sibling),o=i(x,c.props.children),o.return=a,a=o;break e}}else if(x.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Mt&&$a(y)===x.type){r(a,x.sibling),o=i(x,c.props),o.ref=os(a,x,c),o.return=a,a=o;break e}r(a,x);break}else t(a,x);x=x.sibling}c.type===Sr?(o=ar(c.props.children,a.mode,_,c.key),o.return=a,a=o):(_=Pi(c.type,c.key,c.props,null,a.mode,_),_.ref=os(a,o,c),_.return=a,a=_)}return v(a);case yr:e:{for(x=c.key;o!==null;){if(o.key===x)if(o.tag===4&&o.stateNode.containerInfo===c.containerInfo&&o.stateNode.implementation===c.implementation){r(a,o.sibling),o=i(o,c.children||[]),o.return=a,a=o;break e}else{r(a,o);break}else t(a,o);o=o.sibling}o=io(c,a.mode,_),o.return=a,a=o}return v(a);case Mt:return x=c._init,l(a,o,x(c._payload),_)}if(fs(c))return k(a,o,c,_);if(ts(c))return S(a,o,c,_);fi(a,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,o!==null&&o.tag===6?(r(a,o.sibling),o=i(o,c),o.return=a,a=o):(r(a,o),o=so(c,a.mode,_),o.return=a,a=o),v(a)):r(a,o)}return l}var $r=Wu(!0),Vu=Wu(!1),Vi=Zt(null),Ki=null,Rr=null,Rl=null;function Dl(){Rl=Rr=Ki=null}function Tl(e){var t=Vi.current;ce(Vi),e._currentValue=t}function Fo(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Nr(e,t){Ki=e,Rl=Rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ne=!0),e.firstContext=null)}function et(e){var t=e._currentValue;if(Rl!==e)if(e={context:e,memoizedValue:t,next:null},Rr===null){if(Ki===null)throw Error(q(308));Rr=e,Ki.dependencies={lanes:0,firstContext:e}}else Rr=Rr.next=e;return t}var nr=null;function Pl(e){nr===null?nr=[e]:nr.push(e)}function Ku(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,Pl(t)):(r.next=i.next,i.next=r),t.interleaved=r,Lt(e,s)}function Lt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ot=!1;function jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,se&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Lt(e,r)}return i=s.interleaved,i===null?(t.next=t,Pl(s)):(t.next=i.next,i.next=t),s.interleaved=t,Lt(e,r)}function bi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ml(e,r)}}function za(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?i=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?i=h=t:h=h.next=t}else i=h=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qi(e,t,r,s){var i=e.updateQueue;Ot=!1;var h=i.firstBaseUpdate,v=i.lastBaseUpdate,n=i.shared.pending;if(n!==null){i.shared.pending=null;var u=n,d=u.next;u.next=null,v===null?h=d:v.next=d,v=u;var g=e.alternate;g!==null&&(g=g.updateQueue,n=g.lastBaseUpdate,n!==v&&(n===null?g.firstBaseUpdate=d:n.next=d,g.lastBaseUpdate=u))}if(h!==null){var f=i.baseState;v=0,g=d=u=null,n=h;do{var m=n.lane,C=n.eventTime;if((s&m)===m){g!==null&&(g=g.next={eventTime:C,lane:0,tag:n.tag,payload:n.payload,callback:n.callback,next:null});e:{var k=e,S=n;switch(m=t,C=r,S.tag){case 1:if(k=S.payload,typeof k=="function"){f=k.call(C,f,m);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,m=typeof k=="function"?k.call(C,f,m):k,m==null)break e;f=pe({},f,m);break e;case 2:Ot=!0}}n.callback!==null&&n.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[n]:m.push(n))}else C={eventTime:C,lane:m,tag:n.tag,payload:n.payload,callback:n.callback,next:null},g===null?(d=g=C,u=f):g=g.next=C,v|=m;if(n=n.next,n===null){if(n=i.shared.pending,n===null)break;m=n,n=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(g===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do v|=i.lane,i=i.next;while(i!==t)}else h===null&&(i.shared.lanes=0);fr|=v,e.lanes=v,e.memoizedState=f}}function Ua(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(q(191,i));i.call(s)}}}var Js={},mt=Zt(Js),Is=Zt(Js),Hs=Zt(Js);function or(e){if(e===Js)throw Error(q(174));return e}function Al(e,t){switch(oe(Hs,t),oe(Is,e),oe(mt,Js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:So(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=So(t,e)}ce(mt),oe(mt,t)}function zr(){ce(mt),ce(Is),ce(Hs)}function Gu(e){or(Hs.current);var t=or(mt.current),r=So(t,e.type);t!==r&&(oe(Is,e),oe(mt,r))}function Ml(e){Is.current===e&&(ce(mt),ce(Is))}var de=Zt(0);function Gi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yn=[];function Ol(){for(var e=0;e<Yn.length;e++)Yn[e]._workInProgressVersionPrimary=null;Yn.length=0}var Ei=Dt.ReactCurrentDispatcher,Jn=Dt.ReactCurrentBatchConfig,dr=0,fe=null,ye=null,Ce=null,Xi=!1,Cs=!1,Fs=0,pp=0;function Le(){throw Error(q(321))}function Nl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ut(e[r],t[r]))return!1;return!0}function Bl(e,t,r,s,i,h){if(dr=h,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ei.current=e===null||e.memoizedState===null?gp:yp,e=r(s,i),Cs){h=0;do{if(Cs=!1,Fs=0,25<=h)throw Error(q(301));h+=1,Ce=ye=null,t.updateQueue=null,Ei.current=Sp,e=r(s,i)}while(Cs)}if(Ei.current=Qi,t=ye!==null&&ye.next!==null,dr=0,Ce=ye=fe=null,Xi=!1,t)throw Error(q(300));return e}function Il(){var e=Fs!==0;return Fs=0,e}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function tt(){if(ye===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=Ce===null?fe.memoizedState:Ce.next;if(t!==null)Ce=t,ye=e;else{if(e===null)throw Error(q(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function $s(e,t){return typeof t=="function"?t(e):t}function Zn(e){var t=tt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=ye,i=s.baseQueue,h=r.pending;if(h!==null){if(i!==null){var v=i.next;i.next=h.next,h.next=v}s.baseQueue=i=h,r.pending=null}if(i!==null){h=i.next,s=s.baseState;var n=v=null,u=null,d=h;do{var g=d.lane;if((dr&g)===g)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(n=u=f,v=s):u=u.next=f,fe.lanes|=g,fr|=g}d=d.next}while(d!==null&&d!==h);u===null?v=s:u.next=n,ut(s,t.memoizedState)||(Ne=!0),t.memoizedState=s,t.baseState=v,t.baseQueue=u,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do h=i.lane,fe.lanes|=h,fr|=h,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function eo(e){var t=tt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,h=t.memoizedState;if(i!==null){r.pending=null;var v=i=i.next;do h=e(h,v.action),v=v.next;while(v!==i);ut(h,t.memoizedState)||(Ne=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,s]}function Xu(){}function Qu(e,t){var r=fe,s=tt(),i=t(),h=!ut(s.memoizedState,i);if(h&&(s.memoizedState=i,Ne=!0),s=s.queue,Hl(Zu.bind(null,r,s,e),[e]),s.getSnapshot!==t||h||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,zs(9,Ju.bind(null,r,s,i,t),void 0,null),xe===null)throw Error(q(349));dr&30||Yu(r,t,i)}return i}function Yu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ju(e,t,r,s){t.value=r,t.getSnapshot=s,eh(t)&&th(e)}function Zu(e,t,r){return r(function(){eh(t)&&th(e)})}function eh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ut(e,r)}catch{return!0}}function th(e){var t=Lt(e,1);t!==null&&ct(t,e,1,-1)}function Wa(e){var t=ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=mp.bind(null,fe,e),[t.memoizedState,e]}function zs(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function rh(){return tt().memoizedState}function Li(e,t,r,s){var i=ft();fe.flags|=e,i.memoizedState=zs(1|t,r,void 0,s===void 0?null:s)}function pn(e,t,r,s){var i=tt();s=s===void 0?null:s;var h=void 0;if(ye!==null){var v=ye.memoizedState;if(h=v.destroy,s!==null&&Nl(s,v.deps)){i.memoizedState=zs(t,r,h,s);return}}fe.flags|=e,i.memoizedState=zs(1|t,r,h,s)}function Va(e,t){return Li(8390656,8,e,t)}function Hl(e,t){return pn(2048,8,e,t)}function sh(e,t){return pn(4,2,e,t)}function ih(e,t){return pn(4,4,e,t)}function nh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oh(e,t,r){return r=r!=null?r.concat([e]):null,pn(4,4,nh.bind(null,t,e),r)}function Fl(){}function lh(e,t){var r=tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Nl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function ah(e,t){var r=tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Nl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function ch(e,t,r){return dr&21?(ut(r,t)||(r=pu(),fe.lanes|=r,fr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ne=!0),e.memoizedState=r)}function _p(e,t){var r=ie;ie=r!==0&&4>r?r:4,e(!0);var s=Jn.transition;Jn.transition={};try{e(!1),t()}finally{ie=r,Jn.transition=s}}function uh(){return tt().memoizedState}function vp(e,t,r){var s=qt(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},hh(e))dh(t,r);else if(r=Ku(e,t,r,s),r!==null){var i=je();ct(r,e,s,i),fh(r,t,s)}}function mp(e,t,r){var s=qt(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(hh(e))dh(t,i);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,n=h(v,r);if(i.hasEagerState=!0,i.eagerState=n,ut(n,v)){var u=t.interleaved;u===null?(i.next=i,Pl(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}r=Ku(e,t,i,s),r!==null&&(i=je(),ct(r,e,s,i),fh(r,t,s))}}function hh(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function dh(e,t){Cs=Xi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function fh(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ml(e,r)}}var Qi={readContext:et,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},gp={readContext:et,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:et,useEffect:Va,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Li(4194308,4,nh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var r=ft();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ft();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=vp.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:Wa,useDebugValue:Fl,useDeferredValue:function(e){return ft().memoizedState=e},useTransition:function(){var e=Wa(!1),t=e[0];return e=_p.bind(null,e[1]),ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=fe,i=ft();if(ue){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),xe===null)throw Error(q(349));dr&30||Yu(s,t,r)}i.memoizedState=r;var h={value:r,getSnapshot:t};return i.queue=h,Va(Zu.bind(null,s,h,e),[e]),s.flags|=2048,zs(9,Ju.bind(null,s,h,r,t),void 0,null),r},useId:function(){var e=ft(),t=xe.identifierPrefix;if(ue){var r=xt,s=Ct;r=(s&~(1<<32-at(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yp={readContext:et,useCallback:lh,useContext:et,useEffect:Hl,useImperativeHandle:oh,useInsertionEffect:sh,useLayoutEffect:ih,useMemo:ah,useReducer:Zn,useRef:rh,useState:function(){return Zn($s)},useDebugValue:Fl,useDeferredValue:function(e){var t=tt();return ch(t,ye.memoizedState,e)},useTransition:function(){var e=Zn($s)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Qu,useId:uh,unstable_isNewReconciler:!1},Sp={readContext:et,useCallback:lh,useContext:et,useEffect:Hl,useImperativeHandle:oh,useInsertionEffect:sh,useLayoutEffect:ih,useMemo:ah,useReducer:eo,useRef:rh,useState:function(){return eo($s)},useDebugValue:Fl,useDeferredValue:function(e){var t=tt();return ye===null?t.memoizedState=e:ch(t,ye.memoizedState,e)},useTransition:function(){var e=eo($s)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Qu,useId:uh,unstable_isNewReconciler:!1};function it(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $o(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _n={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=je(),i=qt(e),h=kt(s,i);h.payload=t,r!=null&&(h.callback=r),t=Vt(e,h,i),t!==null&&(ct(t,e,i,s),bi(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=je(),i=qt(e),h=kt(s,i);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=Vt(e,h,i),t!==null&&(ct(t,e,i,s),bi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=je(),s=qt(e),i=kt(r,s);i.tag=2,t!=null&&(i.callback=t),t=Vt(e,i,s),t!==null&&(ct(t,e,s,r),bi(t,e,s))}};function Ka(e,t,r,s,i,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,v):t.prototype&&t.prototype.isPureReactComponent?!Ms(r,s)||!Ms(i,h):!0}function ph(e,t,r){var s=!1,i=Yt,h=t.contextType;return typeof h=="object"&&h!==null?h=et(h):(i=Ie(t)?ur:Te.current,s=t.contextTypes,h=(s=s!=null)?Hr(e,i):Yt),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_n,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),t}function qa(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&_n.enqueueReplaceState(t,t.state,null)}function zo(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},jl(e);var h=t.contextType;typeof h=="object"&&h!==null?i.context=et(h):(h=Ie(t)?ur:Te.current,i.context=Hr(e,h)),i.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&($o(e,t,h,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_n.enqueueReplaceState(i,i.state,null),qi(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var r="",s=t;do r+=qd(s),s=s.return;while(s);var i=r}catch(h){i=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:i,digest:null}}function to(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wp=typeof WeakMap=="function"?WeakMap:Map;function _h(e,t,r){r=kt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ji||(Ji=!0,Zo=s),Uo(e,t)},r}function vh(e,t,r){r=kt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){Uo(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Uo(e,t),typeof s!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),r}function Ga(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new wp;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=Op.bind(null,e,t,r),t.then(e,e))}function Xa(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qa(e,t,r,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kt(-1,1),t.tag=2,Vt(r,t,1))),r.lanes|=1),e)}var Cp=Dt.ReactCurrentOwner,Ne=!1;function Pe(e,t,r,s){t.child=e===null?Vu(t,null,r,s):$r(t,e.child,r,s)}function Ya(e,t,r,s,i){r=r.render;var h=t.ref;return Nr(t,i),s=Bl(e,t,r,s,h,i),r=Il(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rt(e,t,i)):(ue&&r&&bl(t),t.flags|=1,Pe(e,t,s,i),t.child)}function Ja(e,t,r,s,i){if(e===null){var h=r.type;return typeof h=="function"&&!Gl(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,mh(e,t,h,s,i)):(e=Pi(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&i)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:Ms,r(v,s)&&e.ref===t.ref)return Rt(e,t,i)}return t.flags|=1,e=Gt(h,s),e.ref=t.ref,e.return=t,t.child=e}function mh(e,t,r,s,i){if(e!==null){var h=e.memoizedProps;if(Ms(h,s)&&e.ref===t.ref)if(Ne=!1,t.pendingProps=s=h,(e.lanes&i)!==0)e.flags&131072&&(Ne=!0);else return t.lanes=e.lanes,Rt(e,t,i)}return Wo(e,t,r,s,i)}function gh(e,t,r){var s=t.pendingProps,i=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Tr,Fe),Fe|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(Tr,Fe),Fe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:r,oe(Tr,Fe),Fe|=s}else h!==null?(s=h.baseLanes|r,t.memoizedState=null):s=r,oe(Tr,Fe),Fe|=s;return Pe(e,t,i,r),t.child}function yh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Wo(e,t,r,s,i){var h=Ie(r)?ur:Te.current;return h=Hr(t,h),Nr(t,i),r=Bl(e,t,r,s,h,i),s=Il(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rt(e,t,i)):(ue&&s&&bl(t),t.flags|=1,Pe(e,t,r,i),t.child)}function Za(e,t,r,s,i){if(Ie(r)){var h=!0;zi(t)}else h=!1;if(Nr(t,i),t.stateNode===null)Ri(e,t),ph(t,r,s),zo(t,r,s,i),s=!0;else if(e===null){var v=t.stateNode,n=t.memoizedProps;v.props=n;var u=v.context,d=r.contextType;typeof d=="object"&&d!==null?d=et(d):(d=Ie(r)?ur:Te.current,d=Hr(t,d));var g=r.getDerivedStateFromProps,f=typeof g=="function"||typeof v.getSnapshotBeforeUpdate=="function";f||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(n!==s||u!==d)&&qa(t,v,s,d),Ot=!1;var m=t.memoizedState;v.state=m,qi(t,s,v,i),u=t.memoizedState,n!==s||m!==u||Be.current||Ot?(typeof g=="function"&&($o(t,r,g,s),u=t.memoizedState),(n=Ot||Ka(t,r,n,s,m,u,d))?(f||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),v.props=s,v.state=u,v.context=d,s=n):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{v=t.stateNode,qu(e,t),n=t.memoizedProps,d=t.type===t.elementType?n:it(t.type,n),v.props=d,f=t.pendingProps,m=v.context,u=r.contextType,typeof u=="object"&&u!==null?u=et(u):(u=Ie(r)?ur:Te.current,u=Hr(t,u));var C=r.getDerivedStateFromProps;(g=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(n!==f||m!==u)&&qa(t,v,s,u),Ot=!1,m=t.memoizedState,v.state=m,qi(t,s,v,i);var k=t.memoizedState;n!==f||m!==k||Be.current||Ot?(typeof C=="function"&&($o(t,r,C,s),k=t.memoizedState),(d=Ot||Ka(t,r,d,s,m,k,u)||!1)?(g||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(s,k,u),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(s,k,u)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||n===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),v.props=s,v.state=k,v.context=u,s=d):(typeof v.componentDidUpdate!="function"||n===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Vo(e,t,r,s,h,i)}function Vo(e,t,r,s,i,h){yh(e,t);var v=(t.flags&128)!==0;if(!s&&!v)return i&&Ia(t,r,!1),Rt(e,t,h);s=t.stateNode,Cp.current=t;var n=v&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&v?(t.child=$r(t,e.child,null,h),t.child=$r(t,null,n,h)):Pe(e,t,n,h),t.memoizedState=s.state,i&&Ia(t,r,!0),t.child}function Sh(e){var t=e.stateNode;t.pendingContext?Ba(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ba(e,t.context,!1),Al(e,t.containerInfo)}function ec(e,t,r,s,i){return Fr(),Ll(i),t.flags|=256,Pe(e,t,r,s),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0};function qo(e){return{baseLanes:e,cachePool:null,transitions:null}}function wh(e,t,r){var s=t.pendingProps,i=de.current,h=!1,v=(t.flags&128)!==0,n;if((n=v)||(n=e!==null&&e.memoizedState===null?!1:(i&2)!==0),n?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),oe(de,i&1),e===null)return Ho(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(v=s.children,e=s.fallback,h?(s=t.mode,h=t.child,v={mode:"hidden",children:v},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=v):h=gn(v,s,0,null),e=ar(e,s,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=qo(r),t.memoizedState=Ko,e):$l(t,v));if(i=e.memoizedState,i!==null&&(n=i.dehydrated,n!==null))return xp(e,t,v,s,n,i,r);if(h){h=s.fallback,v=t.mode,i=e.child,n=i.sibling;var u={mode:"hidden",children:s.children};return!(v&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=u,t.deletions=null):(s=Gt(i,u),s.subtreeFlags=i.subtreeFlags&14680064),n!==null?h=Gt(n,h):(h=ar(h,v,r,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,v=e.child.memoizedState,v=v===null?qo(r):{baseLanes:v.baseLanes|r,cachePool:null,transitions:v.transitions},h.memoizedState=v,h.childLanes=e.childLanes&~r,t.memoizedState=Ko,s}return h=e.child,e=h.sibling,s=Gt(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function $l(e,t){return t=gn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pi(e,t,r,s){return s!==null&&Ll(s),$r(t,e.child,null,r),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xp(e,t,r,s,i,h,v){if(r)return t.flags&256?(t.flags&=-257,s=to(Error(q(422))),pi(e,t,v,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,i=t.mode,s=gn({mode:"visible",children:s.children},i,0,null),h=ar(h,i,v,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&$r(t,e.child,null,v),t.child.memoizedState=qo(v),t.memoizedState=Ko,h);if(!(t.mode&1))return pi(e,t,v,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var n=s.dgst;return s=n,h=Error(q(419)),s=to(h,s,void 0),pi(e,t,v,s)}if(n=(v&e.childLanes)!==0,Ne||n){if(s=xe,s!==null){switch(v&-v){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|v)?0:i,i!==0&&i!==h.retryLane&&(h.retryLane=i,Lt(e,i),ct(s,e,i,-1))}return ql(),s=to(Error(q(421))),pi(e,t,v,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Np.bind(null,e),i._reactRetry=t,null):(e=h.treeContext,Ue=Wt(i.nextSibling),We=t,ue=!0,ot=null,e!==null&&(Xe[Qe++]=Ct,Xe[Qe++]=xt,Xe[Qe++]=hr,Ct=e.id,xt=e.overflow,hr=t),t=$l(t,s.children),t.flags|=4096,t)}function tc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fo(e.return,t,r)}function ro(e,t,r,s,i){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=r,h.tailMode=i)}function Ch(e,t,r){var s=t.pendingProps,i=s.revealOrder,h=s.tail;if(Pe(e,t,s.children,r),s=de.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tc(e,r,t);else if(e.tag===19)tc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(oe(de,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Gi(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ro(t,!1,i,r,h);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gi(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ro(t,!0,r,null,h);break;case"together":ro(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ri(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=Gt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kp(e,t,r){switch(t.tag){case 3:Sh(t),Fr();break;case 5:Gu(t);break;case 1:Ie(t.type)&&zi(t);break;case 4:Al(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;oe(Vi,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(oe(de,de.current&1),t.flags|=128,null):r&t.child.childLanes?wh(e,t,r):(oe(de,de.current&1),e=Rt(e,t,r),e!==null?e.sibling:null);oe(de,de.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Ch(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(de,de.current),s)break;return null;case 22:case 23:return t.lanes=0,gh(e,t,r)}return Rt(e,t,r)}var xh,Go,kh,bh;xh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Go=function(){};kh=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,or(mt.current);var h=null;switch(r){case"input":i=vo(e,i),s=vo(e,s),h=[];break;case"select":i=pe({},i,{value:void 0}),s=pe({},s,{value:void 0}),h=[];break;case"textarea":i=yo(e,i),s=yo(e,s),h=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Fi)}wo(r,s);var v;r=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var n=i[d];for(v in n)n.hasOwnProperty(v)&&(r||(r={}),r[v]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ls.hasOwnProperty(d)?h||(h=[]):(h=h||[]).push(d,null));for(d in s){var u=s[d];if(n=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==n&&(u!=null||n!=null))if(d==="style")if(n){for(v in n)!n.hasOwnProperty(v)||u&&u.hasOwnProperty(v)||(r||(r={}),r[v]="");for(v in u)u.hasOwnProperty(v)&&n[v]!==u[v]&&(r||(r={}),r[v]=u[v])}else r||(h||(h=[]),h.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,n=n?n.__html:void 0,u!=null&&n!==u&&(h=h||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(h=h||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ae("scroll",e),h||n===u||(h=[])):(h=h||[]).push(d,u))}r&&(h=h||[]).push("style",r);var d=h;(t.updateQueue=d)&&(t.flags|=4)}};bh=function(e,t,r,s){r!==s&&(t.flags|=4)};function ls(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function bp(e,t,r){var s=t.pendingProps;switch(El(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Ie(t.type)&&$i(),Re(t),null;case 3:return s=t.stateNode,zr(),ce(Be),ce(Te),Ol(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(di(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ot!==null&&(rl(ot),ot=null))),Go(e,t),Re(t),null;case 5:Ml(t);var i=or(Hs.current);if(r=t.type,e!==null&&t.stateNode!=null)kh(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(q(166));return Re(t),null}if(e=or(mt.current),di(t)){s=t.stateNode,r=t.type;var h=t.memoizedProps;switch(s[_t]=t,s[Bs]=h,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",s),ae("close",s);break;case"iframe":case"object":case"embed":ae("load",s);break;case"video":case"audio":for(i=0;i<_s.length;i++)ae(_s[i],s);break;case"source":ae("error",s);break;case"img":case"image":case"link":ae("error",s),ae("load",s);break;case"details":ae("toggle",s);break;case"input":ua(s,h),ae("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},ae("invalid",s);break;case"textarea":da(s,h),ae("invalid",s)}wo(r,h),i=null;for(var v in h)if(h.hasOwnProperty(v)){var n=h[v];v==="children"?typeof n=="string"?s.textContent!==n&&(h.suppressHydrationWarning!==!0&&hi(s.textContent,n,e),i=["children",n]):typeof n=="number"&&s.textContent!==""+n&&(h.suppressHydrationWarning!==!0&&hi(s.textContent,n,e),i=["children",""+n]):Ls.hasOwnProperty(v)&&n!=null&&v==="onScroll"&&ae("scroll",s)}switch(r){case"input":si(s),ha(s,h,!0);break;case"textarea":si(s),fa(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=Fi)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{v=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=v.createElement(r,{is:s.is}):(e=v.createElement(r),r==="select"&&(v=e,s.multiple?v.multiple=!0:s.size&&(v.size=s.size))):e=v.createElementNS(e,r),e[_t]=t,e[Bs]=s,xh(e,t,!1,!1),t.stateNode=e;e:{switch(v=Co(r,s),r){case"dialog":ae("cancel",e),ae("close",e),i=s;break;case"iframe":case"object":case"embed":ae("load",e),i=s;break;case"video":case"audio":for(i=0;i<_s.length;i++)ae(_s[i],e);i=s;break;case"source":ae("error",e),i=s;break;case"img":case"image":case"link":ae("error",e),ae("load",e),i=s;break;case"details":ae("toggle",e),i=s;break;case"input":ua(e,s),i=vo(e,s),ae("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=pe({},s,{value:void 0}),ae("invalid",e);break;case"textarea":da(e,s),i=yo(e,s),ae("invalid",e);break;default:i=s}wo(r,i),n=i;for(h in n)if(n.hasOwnProperty(h)){var u=n[h];h==="style"?ru(e,u):h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&eu(e,u)):h==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Rs(e,u):typeof u=="number"&&Rs(e,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ls.hasOwnProperty(h)?u!=null&&h==="onScroll"&&ae("scroll",e):u!=null&&hl(e,h,u,v))}switch(r){case"input":si(e),ha(e,s,!1);break;case"textarea":si(e),fa(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Qt(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?jr(e,!!s.multiple,h,!1):s.defaultValue!=null&&jr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fi)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)bh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(q(166));if(r=or(Hs.current),or(mt.current),di(t)){if(s=t.stateNode,r=t.memoizedProps,s[_t]=t,(h=s.nodeValue!==r)&&(e=We,e!==null))switch(e.tag){case 3:hi(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hi(s.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[_t]=t,t.stateNode=s}return Re(t),null;case 13:if(ce(de),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&Ue!==null&&t.mode&1&&!(t.flags&128))Uu(),Fr(),t.flags|=98560,h=!1;else if(h=di(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(q(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(q(317));h[_t]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),h=!1}else ot!==null&&(rl(ot),ot=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?Se===0&&(Se=3):ql())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return zr(),Go(e,t),e===null&&Os(t.stateNode.containerInfo),Re(t),null;case 10:return Tl(t.type._context),Re(t),null;case 17:return Ie(t.type)&&$i(),Re(t),null;case 19:if(ce(de),h=t.memoizedState,h===null)return Re(t),null;if(s=(t.flags&128)!==0,v=h.rendering,v===null)if(s)ls(h,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(v=Gi(e),v!==null){for(t.flags|=128,ls(h,!1),s=v.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)h=r,e=s,h.flags&=14680066,v=h.alternate,v===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,e=v.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return oe(de,de.current&1|2),t.child}e=e.sibling}h.tail!==null&&ve()>Wr&&(t.flags|=128,s=!0,ls(h,!1),t.lanes=4194304)}else{if(!s)if(e=Gi(v),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ls(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!ue)return Re(t),null}else 2*ve()-h.renderingStartTime>Wr&&r!==1073741824&&(t.flags|=128,s=!0,ls(h,!1),t.lanes=4194304);h.isBackwards?(v.sibling=t.child,t.child=v):(r=h.last,r!==null?r.sibling=v:t.child=v,h.last=v)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=ve(),t.sibling=null,r=de.current,oe(de,s?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return Kl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Fe&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function Ep(e,t){switch(El(t),t.tag){case 1:return Ie(t.type)&&$i(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),ce(Be),ce(Te),Ol(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ml(t),null;case 13:if(ce(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(de),null;case 4:return zr(),null;case 10:return Tl(t.type._context),null;case 22:case 23:return Kl(),null;case 24:return null;default:return null}}var _i=!1,De=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Dr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){_e(e,t,s)}else r.current=null}function Xo(e,t,r){try{r()}catch(s){_e(e,t,s)}}var rc=!1;function Rp(e,t){if(jo=Bi,e=Tu(),kl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,n=-1,u=-1,d=0,g=0,f=e,m=null;t:for(;;){for(var C;f!==r||i!==0&&f.nodeType!==3||(n=v+i),f!==h||s!==0&&f.nodeType!==3||(u=v+s),f.nodeType===3&&(v+=f.nodeValue.length),(C=f.firstChild)!==null;)m=f,f=C;for(;;){if(f===e)break t;if(m===r&&++d===i&&(n=v),m===h&&++g===s&&(u=v),(C=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=C}r=n===-1||u===-1?null:{start:n,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ao={focusedElem:e,selectionRange:r},Bi=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,l=k.memoizedState,a=t.stateNode,o=a.getSnapshotBeforeUpdate(t.elementType===t.type?S:it(t.type,S),l);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(_){_e(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return k=rc,rc=!1,k}function xs(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var h=i.destroy;i.destroy=void 0,h!==void 0&&Xo(t,r,h)}i=i.next}while(i!==s)}}function vn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Qo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Eh(e){var t=e.alternate;t!==null&&(e.alternate=null,Eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_t],delete t[Bs],delete t[No],delete t[up],delete t[hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lh(e){return e.tag===5||e.tag===3||e.tag===4}function sc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fi));else if(s!==4&&(e=e.child,e!==null))for(Yo(e,t,r),e=e.sibling;e!==null;)Yo(e,t,r),e=e.sibling}function Jo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Jo(e,t,r),e=e.sibling;e!==null;)Jo(e,t,r),e=e.sibling}var ke=null,nt=!1;function At(e,t,r){for(r=r.child;r!==null;)Rh(e,t,r),r=r.sibling}function Rh(e,t,r){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(an,r)}catch{}switch(r.tag){case 5:De||Dr(r,t);case 6:var s=ke,i=nt;ke=null,At(e,t,r),ke=s,nt=i,ke!==null&&(nt?(e=ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(nt?(e=ke,r=r.stateNode,e.nodeType===8?Xn(e.parentNode,r):e.nodeType===1&&Xn(e,r),js(e)):Xn(ke,r.stateNode));break;case 4:s=ke,i=nt,ke=r.stateNode.containerInfo,nt=!0,At(e,t,r),ke=s,nt=i;break;case 0:case 11:case 14:case 15:if(!De&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var h=i,v=h.destroy;h=h.tag,v!==void 0&&(h&2||h&4)&&Xo(r,t,v),i=i.next}while(i!==s)}At(e,t,r);break;case 1:if(!De&&(Dr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(n){_e(r,t,n)}At(e,t,r);break;case 21:At(e,t,r);break;case 22:r.mode&1?(De=(s=De)||r.memoizedState!==null,At(e,t,r),De=s):At(e,t,r);break;default:At(e,t,r)}}function ic(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Lp),t.forEach(function(s){var i=Bp.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function rt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var h=e,v=t,n=v;e:for(;n!==null;){switch(n.tag){case 5:ke=n.stateNode,nt=!1;break e;case 3:ke=n.stateNode.containerInfo,nt=!0;break e;case 4:ke=n.stateNode.containerInfo,nt=!0;break e}n=n.return}if(ke===null)throw Error(q(160));Rh(h,v,i),ke=null,nt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){_e(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dh(t,e),t=t.sibling}function Dh(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),dt(e),s&4){try{xs(3,e,e.return),vn(3,e)}catch(S){_e(e,e.return,S)}try{xs(5,e,e.return)}catch(S){_e(e,e.return,S)}}break;case 1:rt(t,e),dt(e),s&512&&r!==null&&Dr(r,r.return);break;case 5:if(rt(t,e),dt(e),s&512&&r!==null&&Dr(r,r.return),e.flags&32){var i=e.stateNode;try{Rs(i,"")}catch(S){_e(e,e.return,S)}}if(s&4&&(i=e.stateNode,i!=null)){var h=e.memoizedProps,v=r!==null?r.memoizedProps:h,n=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{n==="input"&&h.type==="radio"&&h.name!=null&&Yc(i,h),Co(n,v);var d=Co(n,h);for(v=0;v<u.length;v+=2){var g=u[v],f=u[v+1];g==="style"?ru(i,f):g==="dangerouslySetInnerHTML"?eu(i,f):g==="children"?Rs(i,f):hl(i,g,f,d)}switch(n){case"input":mo(i,h);break;case"textarea":Jc(i,h);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!h.multiple;var C=h.value;C!=null?jr(i,!!h.multiple,C,!1):m!==!!h.multiple&&(h.defaultValue!=null?jr(i,!!h.multiple,h.defaultValue,!0):jr(i,!!h.multiple,h.multiple?[]:"",!1))}i[Bs]=h}catch(S){_e(e,e.return,S)}}break;case 6:if(rt(t,e),dt(e),s&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,h=e.memoizedProps;try{i.nodeValue=h}catch(S){_e(e,e.return,S)}}break;case 3:if(rt(t,e),dt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(S){_e(e,e.return,S)}break;case 4:rt(t,e),dt(e);break;case 13:rt(t,e),dt(e),i=e.child,i.flags&8192&&(h=i.memoizedState!==null,i.stateNode.isHidden=h,!h||i.alternate!==null&&i.alternate.memoizedState!==null||(Wl=ve())),s&4&&ic(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(De=(d=De)||g,rt(t,e),De=d):rt(t,e),dt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!g&&e.mode&1)for(Q=e,g=e.child;g!==null;){for(f=Q=g;Q!==null;){switch(m=Q,C=m.child,m.tag){case 0:case 11:case 14:case 15:xs(4,m,m.return);break;case 1:Dr(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(S){_e(s,r,S)}}break;case 5:Dr(m,m.return);break;case 22:if(m.memoizedState!==null){oc(f);continue}}C!==null?(C.return=m,Q=C):oc(f)}g=g.sibling}e:for(g=null,f=e;;){if(f.tag===5){if(g===null){g=f;try{i=f.stateNode,d?(h=i.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(n=f.stateNode,u=f.memoizedProps.style,v=u!=null&&u.hasOwnProperty("display")?u.display:null,n.style.display=tu("display",v))}catch(S){_e(e,e.return,S)}}}else if(f.tag===6){if(g===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(S){_e(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rt(t,e),dt(e),s&4&&ic(e);break;case 21:break;default:rt(t,e),dt(e)}}function dt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lh(r)){var s=r;break e}r=r.return}throw Error(q(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Rs(i,""),s.flags&=-33);var h=sc(e);Jo(e,h,i);break;case 3:case 4:var v=s.stateNode.containerInfo,n=sc(e);Yo(e,n,v);break;default:throw Error(q(161))}}catch(u){_e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dp(e,t,r){Q=e,Th(e)}function Th(e,t,r){for(var s=(e.mode&1)!==0;Q!==null;){var i=Q,h=i.child;if(i.tag===22&&s){var v=i.memoizedState!==null||_i;if(!v){var n=i.alternate,u=n!==null&&n.memoizedState!==null||De;n=_i;var d=De;if(_i=v,(De=u)&&!d)for(Q=i;Q!==null;)v=Q,u=v.child,v.tag===22&&v.memoizedState!==null?lc(i):u!==null?(u.return=v,Q=u):lc(i);for(;h!==null;)Q=h,Th(h),h=h.sibling;Q=i,_i=n,De=d}nc(e)}else i.subtreeFlags&8772&&h!==null?(h.return=i,Q=h):nc(e)}}function nc(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||vn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!De)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:it(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Ua(t,h,s);break;case 3:var v=t.updateQueue;if(v!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ua(t,v,r)}break;case 5:var n=t.stateNode;if(r===null&&t.flags&4){r=n;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var f=g.dehydrated;f!==null&&js(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}De||t.flags&512&&Qo(t)}catch(m){_e(t,t.return,m)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function oc(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function lc(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vn(4,t)}catch(u){_e(t,r,u)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(u){_e(t,i,u)}}var h=t.return;try{Qo(t)}catch(u){_e(t,h,u)}break;case 5:var v=t.return;try{Qo(t)}catch(u){_e(t,v,u)}}}catch(u){_e(t,t.return,u)}if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}var Tp=Math.ceil,Yi=Dt.ReactCurrentDispatcher,zl=Dt.ReactCurrentOwner,Ze=Dt.ReactCurrentBatchConfig,se=0,xe=null,me=null,be=0,Fe=0,Tr=Zt(0),Se=0,Us=null,fr=0,mn=0,Ul=0,ks=null,Oe=null,Wl=0,Wr=1/0,St=null,Ji=!1,Zo=null,Kt=null,vi=!1,Ht=null,Zi=0,bs=0,el=null,Di=-1,Ti=0;function je(){return se&6?ve():Di!==-1?Di:Di=ve()}function qt(e){return e.mode&1?se&2&&be!==0?be&-be:fp.transition!==null?(Ti===0&&(Ti=pu()),Ti):(e=ie,e!==0||(e=window.event,e=e===void 0?16:wu(e.type)),e):1}function ct(e,t,r,s){if(50<bs)throw bs=0,el=null,Error(q(185));Xs(e,r,s),(!(se&2)||e!==xe)&&(e===xe&&(!(se&2)&&(mn|=r),Se===4&&Bt(e,be)),He(e,s),r===1&&se===0&&!(t.mode&1)&&(Wr=ve()+500,fn&&er()))}function He(e,t){var r=e.callbackNode;ff(e,t);var s=Ni(e,e===xe?be:0);if(s===0)r!==null&&va(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&va(r),t===1)e.tag===0?dp(ac.bind(null,e)):Fu(ac.bind(null,e)),ap(function(){!(se&6)&&er()}),r=null;else{switch(_u(s)){case 1:r=vl;break;case 4:r=du;break;case 16:r=Oi;break;case 536870912:r=fu;break;default:r=Oi}r=Ih(r,Ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ph(e,t){if(Di=-1,Ti=0,se&6)throw Error(q(327));var r=e.callbackNode;if(Br()&&e.callbackNode!==r)return null;var s=Ni(e,e===xe?be:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=en(e,s);else{t=s;var i=se;se|=2;var h=Ah();(xe!==e||be!==t)&&(St=null,Wr=ve()+500,lr(e,t));do try{Ap();break}catch(n){jh(e,n)}while(!0);Dl(),Yi.current=h,se=i,me!==null?t=0:(xe=null,be=0,t=Se)}if(t!==0){if(t===2&&(i=Lo(e),i!==0&&(s=i,t=tl(e,i))),t===1)throw r=Us,lr(e,0),Bt(e,s),He(e,ve()),r;if(t===6)Bt(e,s);else{if(i=e.current.alternate,!(s&30)&&!Pp(i)&&(t=en(e,s),t===2&&(h=Lo(e),h!==0&&(s=h,t=tl(e,h))),t===1))throw r=Us,lr(e,0),Bt(e,s),He(e,ve()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(q(345));case 2:rr(e,Oe,St);break;case 3:if(Bt(e,s),(s&130023424)===s&&(t=Wl+500-ve(),10<t)){if(Ni(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){je(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Oo(rr.bind(null,e,Oe,St),t);break}rr(e,Oe,St);break;case 4:if(Bt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var v=31-at(s);h=1<<v,v=t[v],v>i&&(i=v),s&=~h}if(s=i,s=ve()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Tp(s/1960))-s,10<s){e.timeoutHandle=Oo(rr.bind(null,e,Oe,St),s);break}rr(e,Oe,St);break;case 5:rr(e,Oe,St);break;default:throw Error(q(329))}}}return He(e,ve()),e.callbackNode===r?Ph.bind(null,e):null}function tl(e,t){var r=ks;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=en(e,t),e!==2&&(t=Oe,Oe=r,t!==null&&rl(t)),e}function rl(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function Pp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],h=i.getSnapshot;i=i.value;try{if(!ut(h(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bt(e,t){for(t&=~Ul,t&=~mn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),s=1<<r;e[r]=-1,t&=~s}}function ac(e){if(se&6)throw Error(q(327));Br();var t=Ni(e,0);if(!(t&1))return He(e,ve()),null;var r=en(e,t);if(e.tag!==0&&r===2){var s=Lo(e);s!==0&&(t=s,r=tl(e,s))}if(r===1)throw r=Us,lr(e,0),Bt(e,t),He(e,ve()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rr(e,Oe,St),He(e,ve()),null}function Vl(e,t){var r=se;se|=1;try{return e(t)}finally{se=r,se===0&&(Wr=ve()+500,fn&&er())}}function pr(e){Ht!==null&&Ht.tag===0&&!(se&6)&&Br();var t=se;se|=1;var r=Ze.transition,s=ie;try{if(Ze.transition=null,ie=1,e)return e()}finally{ie=s,Ze.transition=r,se=t,!(se&6)&&er()}}function Kl(){Fe=Tr.current,ce(Tr)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lp(r)),me!==null)for(r=me.return;r!==null;){var s=r;switch(El(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&$i();break;case 3:zr(),ce(Be),ce(Te),Ol();break;case 5:Ml(s);break;case 4:zr();break;case 13:ce(de);break;case 19:ce(de);break;case 10:Tl(s.type._context);break;case 22:case 23:Kl()}r=r.return}if(xe=e,me=e=Gt(e.current,null),be=Fe=t,Se=0,Us=null,Ul=mn=fr=0,Oe=ks=null,nr!==null){for(t=0;t<nr.length;t++)if(r=nr[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,h=r.pending;if(h!==null){var v=h.next;h.next=i,s.next=v}r.pending=s}nr=null}return e}function jh(e,t){do{var r=me;try{if(Dl(),Ei.current=Qi,Xi){for(var s=fe.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Xi=!1}if(dr=0,Ce=ye=fe=null,Cs=!1,Fs=0,zl.current=null,r===null||r.return===null){Se=1,Us=t,me=null;break}e:{var h=e,v=r.return,n=r,u=t;if(t=be,n.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,g=n,f=g.tag;if(!(g.mode&1)&&(f===0||f===11||f===15)){var m=g.alternate;m?(g.updateQueue=m.updateQueue,g.memoizedState=m.memoizedState,g.lanes=m.lanes):(g.updateQueue=null,g.memoizedState=null)}var C=Xa(v);if(C!==null){C.flags&=-257,Qa(C,v,n,h,t),C.mode&1&&Ga(h,d,t),t=C,u=d;var k=t.updateQueue;if(k===null){var S=new Set;S.add(u),t.updateQueue=S}else k.add(u);break e}else{if(!(t&1)){Ga(h,d,t),ql();break e}u=Error(q(426))}}else if(ue&&n.mode&1){var l=Xa(v);if(l!==null){!(l.flags&65536)&&(l.flags|=256),Qa(l,v,n,h,t),Ll(Ur(u,n));break e}}h=u=Ur(u,n),Se!==4&&(Se=2),ks===null?ks=[h]:ks.push(h),h=v;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var a=_h(h,u,t);za(h,a);break e;case 1:n=u;var o=h.type,c=h.stateNode;if(!(h.flags&128)&&(typeof o.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Kt===null||!Kt.has(c)))){h.flags|=65536,t&=-t,h.lanes|=t;var _=vh(h,n,t);za(h,_);break e}}h=h.return}while(h!==null)}Oh(r)}catch(y){t=y,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function Ah(){var e=Yi.current;return Yi.current=Qi,e===null?Qi:e}function ql(){(Se===0||Se===3||Se===2)&&(Se=4),xe===null||!(fr&268435455)&&!(mn&268435455)||Bt(xe,be)}function en(e,t){var r=se;se|=2;var s=Ah();(xe!==e||be!==t)&&(St=null,lr(e,t));do try{jp();break}catch(i){jh(e,i)}while(!0);if(Dl(),se=r,Yi.current=s,me!==null)throw Error(q(261));return xe=null,be=0,Se}function jp(){for(;me!==null;)Mh(me)}function Ap(){for(;me!==null&&!sf();)Mh(me)}function Mh(e){var t=Bh(e.alternate,e,Fe);e.memoizedProps=e.pendingProps,t===null?Oh(e):me=t,zl.current=null}function Oh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ep(r,t),r!==null){r.flags&=32767,me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,me=null;return}}else if(r=bp(r,t,Fe),r!==null){me=r;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);Se===0&&(Se=5)}function rr(e,t,r){var s=ie,i=Ze.transition;try{Ze.transition=null,ie=1,Mp(e,t,r,s)}finally{Ze.transition=i,ie=s}return null}function Mp(e,t,r,s){do Br();while(Ht!==null);if(se&6)throw Error(q(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(pf(e,h),e===xe&&(me=xe=null,be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vi||(vi=!0,Ih(Oi,function(){return Br(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=Ze.transition,Ze.transition=null;var v=ie;ie=1;var n=se;se|=4,zl.current=null,Rp(e,r),Dh(r,e),ep(Ao),Bi=!!jo,Ao=jo=null,e.current=r,Dp(r),nf(),se=n,ie=v,Ze.transition=h}else e.current=r;if(vi&&(vi=!1,Ht=e,Zi=i),h=e.pendingLanes,h===0&&(Kt=null),af(r.stateNode),He(e,ve()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(Ji)throw Ji=!1,e=Zo,Zo=null,e;return Zi&1&&e.tag!==0&&Br(),h=e.pendingLanes,h&1?e===el?bs++:(bs=0,el=e):bs=0,er(),null}function Br(){if(Ht!==null){var e=_u(Zi),t=Ze.transition,r=ie;try{if(Ze.transition=null,ie=16>e?16:e,Ht===null)var s=!1;else{if(e=Ht,Ht=null,Zi=0,se&6)throw Error(q(331));var i=se;for(se|=4,Q=e.current;Q!==null;){var h=Q,v=h.child;if(Q.flags&16){var n=h.deletions;if(n!==null){for(var u=0;u<n.length;u++){var d=n[u];for(Q=d;Q!==null;){var g=Q;switch(g.tag){case 0:case 11:case 15:xs(8,g,h)}var f=g.child;if(f!==null)f.return=g,Q=f;else for(;Q!==null;){g=Q;var m=g.sibling,C=g.return;if(Eh(g),g===d){Q=null;break}if(m!==null){m.return=C,Q=m;break}Q=C}}}var k=h.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var l=S.sibling;S.sibling=null,S=l}while(S!==null)}}Q=h}}if(h.subtreeFlags&2064&&v!==null)v.return=h,Q=v;else e:for(;Q!==null;){if(h=Q,h.flags&2048)switch(h.tag){case 0:case 11:case 15:xs(9,h,h.return)}var a=h.sibling;if(a!==null){a.return=h.return,Q=a;break e}Q=h.return}}var o=e.current;for(Q=o;Q!==null;){v=Q;var c=v.child;if(v.subtreeFlags&2064&&c!==null)c.return=v,Q=c;else e:for(v=o;Q!==null;){if(n=Q,n.flags&2048)try{switch(n.tag){case 0:case 11:case 15:vn(9,n)}}catch(y){_e(n,n.return,y)}if(n===v){Q=null;break e}var _=n.sibling;if(_!==null){_.return=n.return,Q=_;break e}Q=n.return}}if(se=i,er(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(an,e)}catch{}s=!0}return s}finally{ie=r,Ze.transition=t}}return!1}function cc(e,t,r){t=Ur(r,t),t=_h(e,t,1),e=Vt(e,t,1),t=je(),e!==null&&(Xs(e,1,t),He(e,t))}function _e(e,t,r){if(e.tag===3)cc(e,e,r);else for(;t!==null;){if(t.tag===3){cc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kt===null||!Kt.has(s))){e=Ur(r,e),e=vh(t,e,1),t=Vt(t,e,1),e=je(),t!==null&&(Xs(t,1,e),He(t,e));break}}t=t.return}}function Op(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&r,xe===e&&(be&r)===r&&(Se===4||Se===3&&(be&130023424)===be&&500>ve()-Wl?lr(e,0):Ul|=r),He(e,t)}function Nh(e,t){t===0&&(e.mode&1?(t=oi,oi<<=1,!(oi&130023424)&&(oi=4194304)):t=1);var r=je();e=Lt(e,t),e!==null&&(Xs(e,t,r),He(e,r))}function Np(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Nh(e,r)}function Bp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(q(314))}s!==null&&s.delete(t),Nh(e,r)}var Bh;Bh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Be.current)Ne=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ne=!1,kp(e,t,r);Ne=!!(e.flags&131072)}else Ne=!1,ue&&t.flags&1048576&&$u(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ri(e,t),e=t.pendingProps;var i=Hr(t,Te.current);Nr(t,r),i=Bl(null,t,s,e,i,r);var h=Il();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(s)?(h=!0,zi(t)):h=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jl(t),i.updater=_n,t.stateNode=i,i._reactInternals=t,zo(t,s,e,r),t=Vo(null,t,s,!0,h,r)):(t.tag=0,ue&&h&&bl(t),Pe(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ri(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=Hp(s),e=it(s,e),i){case 0:t=Wo(null,t,s,e,r);break e;case 1:t=Za(null,t,s,e,r);break e;case 11:t=Ya(null,t,s,e,r);break e;case 14:t=Ja(null,t,s,it(s.type,e),r);break e}throw Error(q(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:it(s,i),Wo(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:it(s,i),Za(e,t,s,i,r);case 3:e:{if(Sh(t),e===null)throw Error(q(387));s=t.pendingProps,h=t.memoizedState,i=h.element,qu(e,t),qi(t,s,null,r);var v=t.memoizedState;if(s=v.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){i=Ur(Error(q(423)),t),t=ec(e,t,s,r,i);break e}else if(s!==i){i=Ur(Error(q(424)),t),t=ec(e,t,s,r,i);break e}else for(Ue=Wt(t.stateNode.containerInfo.firstChild),We=t,ue=!0,ot=null,r=Vu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fr(),s===i){t=Rt(e,t,r);break e}Pe(e,t,s,r)}t=t.child}return t;case 5:return Gu(t),e===null&&Ho(t),s=t.type,i=t.pendingProps,h=e!==null?e.memoizedProps:null,v=i.children,Mo(s,i)?v=null:h!==null&&Mo(s,h)&&(t.flags|=32),yh(e,t),Pe(e,t,v,r),t.child;case 6:return e===null&&Ho(t),null;case 13:return wh(e,t,r);case 4:return Al(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=$r(t,null,s,r):Pe(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:it(s,i),Ya(e,t,s,i,r);case 7:return Pe(e,t,t.pendingProps,r),t.child;case 8:return Pe(e,t,t.pendingProps.children,r),t.child;case 12:return Pe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,h=t.memoizedProps,v=i.value,oe(Vi,s._currentValue),s._currentValue=v,h!==null)if(ut(h.value,v)){if(h.children===i.children&&!Be.current){t=Rt(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var n=h.dependencies;if(n!==null){v=h.child;for(var u=n.firstContext;u!==null;){if(u.context===s){if(h.tag===1){u=kt(-1,r&-r),u.tag=2;var d=h.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?u.next=u:(u.next=g.next,g.next=u),d.pending=u}}h.lanes|=r,u=h.alternate,u!==null&&(u.lanes|=r),Fo(h.return,r,t),n.lanes|=r;break}u=u.next}}else if(h.tag===10)v=h.type===t.type?null:h.child;else if(h.tag===18){if(v=h.return,v===null)throw Error(q(341));v.lanes|=r,n=v.alternate,n!==null&&(n.lanes|=r),Fo(v,r,t),v=h.sibling}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}Pe(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Nr(t,r),i=et(i),s=s(i),t.flags|=1,Pe(e,t,s,r),t.child;case 14:return s=t.type,i=it(s,t.pendingProps),i=it(s.type,i),Ja(e,t,s,i,r);case 15:return mh(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:it(s,i),Ri(e,t),t.tag=1,Ie(s)?(e=!0,zi(t)):e=!1,Nr(t,r),ph(t,s,i),zo(t,s,i,r),Vo(null,t,s,!0,e,r);case 19:return Ch(e,t,r);case 22:return gh(e,t,r)}throw Error(q(156,t.tag))};function Ih(e,t){return hu(e,t)}function Ip(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,r,s){return new Ip(e,t,r,s)}function Gl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hp(e){if(typeof e=="function")return Gl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fl)return 11;if(e===pl)return 14}return 2}function Gt(e,t){var r=e.alternate;return r===null?(r=Je(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pi(e,t,r,s,i,h){var v=2;if(s=e,typeof e=="function")Gl(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case Sr:return ar(r.children,i,h,t);case dl:v=8,i|=8;break;case ho:return e=Je(12,r,t,i|2),e.elementType=ho,e.lanes=h,e;case fo:return e=Je(13,r,t,i),e.elementType=fo,e.lanes=h,e;case po:return e=Je(19,r,t,i),e.elementType=po,e.lanes=h,e;case Gc:return gn(r,i,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kc:v=10;break e;case qc:v=9;break e;case fl:v=11;break e;case pl:v=14;break e;case Mt:v=16,s=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=Je(v,r,t,i),t.elementType=e,t.type=s,t.lanes=h,t}function ar(e,t,r,s){return e=Je(7,e,s,t),e.lanes=r,e}function gn(e,t,r,s){return e=Je(22,e,s,t),e.elementType=Gc,e.lanes=r,e.stateNode={isHidden:!1},e}function so(e,t,r){return e=Je(6,e,null,t),e.lanes=r,e}function io(e,t,r){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fp(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=In(0),this.expirationTimes=In(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xl(e,t,r,s,i,h,v,n,u){return e=new Fp(e,t,r,n,u),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Je(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jl(h),e}function $p(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Hh(e){if(!e)return Yt;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(Ie(r))return Hu(e,r,t)}return t}function Fh(e,t,r,s,i,h,v,n,u){return e=Xl(r,s,!0,e,i,h,v,n,u),e.context=Hh(null),r=e.current,s=je(),i=qt(r),h=kt(s,i),h.callback=t??null,Vt(r,h,i),e.current.lanes=i,Xs(e,i,s),He(e,s),e}function yn(e,t,r,s){var i=t.current,h=je(),v=qt(i);return r=Hh(r),t.context===null?t.context=r:t.pendingContext=r,t=kt(h,v),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Vt(i,t,v),e!==null&&(ct(e,i,v,h),bi(e,i,v)),v}function tn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ql(e,t){uc(e,t),(e=e.alternate)&&uc(e,t)}function zp(){return null}var $h=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}Sn.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));yn(e,t,null,null)};Sn.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){yn(null,e,null,null)}),t[Et]=null}};function Sn(e){this._internalRoot=e}Sn.prototype.unstable_scheduleHydration=function(e){if(e){var t=gu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nt.length&&t!==0&&t<Nt[r].priority;r++);Nt.splice(r,0,e),r===0&&Su(e)}};function Jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hc(){}function Up(e,t,r,s,i){if(i){if(typeof s=="function"){var h=s;s=function(){var d=tn(v);h.call(d)}}var v=Fh(t,s,e,0,null,!1,!1,"",hc);return e._reactRootContainer=v,e[Et]=v.current,Os(e.nodeType===8?e.parentNode:e),pr(),v}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var n=s;s=function(){var d=tn(u);n.call(d)}}var u=Xl(e,0,!1,null,null,!1,!1,"",hc);return e._reactRootContainer=u,e[Et]=u.current,Os(e.nodeType===8?e.parentNode:e),pr(function(){yn(t,u,r,s)}),u}function Cn(e,t,r,s,i){var h=r._reactRootContainer;if(h){var v=h;if(typeof i=="function"){var n=i;i=function(){var u=tn(v);n.call(u)}}yn(t,v,e,i)}else v=Up(r,t,e,i,s);return tn(v)}vu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ps(t.pendingLanes);r!==0&&(ml(t,r|1),He(t,ve()),!(se&6)&&(Wr=ve()+500,er()))}break;case 13:pr(function(){var s=Lt(e,1);if(s!==null){var i=je();ct(s,e,1,i)}}),Ql(e,1)}};gl=function(e){if(e.tag===13){var t=Lt(e,134217728);if(t!==null){var r=je();ct(t,e,134217728,r)}Ql(e,134217728)}};mu=function(e){if(e.tag===13){var t=qt(e),r=Lt(e,t);if(r!==null){var s=je();ct(r,e,t,s)}Ql(e,t)}};gu=function(){return ie};yu=function(e,t){var r=ie;try{return ie=e,t()}finally{ie=r}};ko=function(e,t,r){switch(t){case"input":if(mo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=dn(s);if(!i)throw Error(q(90));Qc(s),mo(s,i)}}}break;case"textarea":Jc(e,r);break;case"select":t=r.value,t!=null&&jr(e,!!r.multiple,t,!1)}};nu=Vl;ou=pr;var Wp={usingClientEntryPoint:!1,Events:[Ys,kr,dn,su,iu,Vl]},as={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vp={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cu(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{an=mi.inject(Vp),vt=mi}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wp;Ke.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jl(t))throw Error(q(200));return $p(e,t,null,r)};Ke.createRoot=function(e,t){if(!Jl(e))throw Error(q(299));var r=!1,s="",i=$h;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Xl(e,1,!1,null,null,r,!1,s,i),e[Et]=t.current,Os(e.nodeType===8?e.parentNode:e),new Yl(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=cu(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return pr(e)};Ke.hydrate=function(e,t,r){if(!wn(t))throw Error(q(200));return Cn(null,e,t,!0,r)};Ke.hydrateRoot=function(e,t,r){if(!Jl(e))throw Error(q(405));var s=r!=null&&r.hydratedSources||null,i=!1,h="",v=$h;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),t=Fh(t,null,e,1,r??null,i,!1,h,v),e[Et]=t.current,Os(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Sn(t)};Ke.render=function(e,t,r){if(!wn(t))throw Error(q(200));return Cn(null,e,t,!1,r)};Ke.unmountComponentAtNode=function(e){if(!wn(e))throw Error(q(40));return e._reactRootContainer?(pr(function(){Cn(null,null,e,!1,function(){e._reactRootContainer=null,e[Et]=null})}),!0):!1};Ke.unstable_batchedUpdates=Vl;Ke.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!wn(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Cn(e,t,r,!1,s)};Ke.version="18.3.1-next-f1338f8080-20240426";function zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zh)}catch(e){console.error(e)}}zh(),zc.exports=Ke;var Kp=zc.exports,dc=Kp;co.createRoot=dc.createRoot,co.hydrateRoot=dc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ws.apply(this,arguments)}var Ft;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ft||(Ft={}));const fc="popstate";function qp(e){e===void 0&&(e={});function t(s,i){let{pathname:h,search:v,hash:n}=s.location;return sl("",{pathname:h,search:v,hash:n},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Wh(i)}return Xp(t,r,null,e)}function we(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gp(){return Math.random().toString(36).substr(2,8)}function pc(e,t){return{usr:e.state,key:e.key,idx:t}}function sl(e,t,r,s){return r===void 0&&(r=null),Ws({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Qr(t):t,{state:r,key:t&&t.key||s||Gp()})}function Wh(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Qr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Xp(e,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:h=!1}=s,v=i.history,n=Ft.Pop,u=null,d=g();d==null&&(d=0,v.replaceState(Ws({},v.state,{idx:d}),""));function g(){return(v.state||{idx:null}).idx}function f(){n=Ft.Pop;let l=g(),a=l==null?null:l-d;d=l,u&&u({action:n,location:S.location,delta:a})}function m(l,a){n=Ft.Push;let o=sl(S.location,l,a);d=g()+1;let c=pc(o,d),_=S.createHref(o);try{v.pushState(c,"",_)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;i.location.assign(_)}h&&u&&u({action:n,location:S.location,delta:1})}function C(l,a){n=Ft.Replace;let o=sl(S.location,l,a);d=g();let c=pc(o,d),_=S.createHref(o);v.replaceState(c,"",_),h&&u&&u({action:n,location:S.location,delta:0})}function k(l){let a=i.location.origin!=="null"?i.location.origin:i.location.href,o=typeof l=="string"?l:Wh(l);return o=o.replace(/ $/,"%20"),we(a,"No window.location.(origin|href) available to create URL for href: "+o),new URL(o,a)}let S={get action(){return n},get location(){return e(i,v)},listen(l){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(fc,f),u=l,()=>{i.removeEventListener(fc,f),u=null}},createHref(l){return t(i,l)},createURL:k,encodeLocation(l){let a=k(l);return{pathname:a.pathname,search:a.search,hash:a.hash}},push:m,replace:C,go(l){return v.go(l)}};return S}var _c;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_c||(_c={}));function Qp(e,t,r){return r===void 0&&(r="/"),Yp(e,t,r)}function Yp(e,t,r,s){let i=typeof t=="string"?Qr(t):t,h=qh(i.pathname||"/",r);if(h==null)return null;let v=Vh(e);Jp(v);let n=null;for(let u=0;n==null&&u<v.length;++u){let d=u_(h);n=l_(v[u],d)}return n}function Vh(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(h,v,n)=>{let u={relativePath:n===void 0?h.path||"":n,caseSensitive:h.caseSensitive===!0,childrenIndex:v,route:h};u.relativePath.startsWith("/")&&(we(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=cr([s,u.relativePath]),g=r.concat(u);h.children&&h.children.length>0&&(we(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Vh(h.children,t,g,d)),!(h.path==null&&!h.index)&&t.push({path:d,score:n_(d,h.index),routesMeta:g})};return e.forEach((h,v)=>{var n;if(h.path===""||!((n=h.path)!=null&&n.includes("?")))i(h,v);else for(let u of Kh(h.path))i(h,v,u)}),t}function Kh(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),h=r.replace(/\?$/,"");if(s.length===0)return i?[h,""]:[h];let v=Kh(s.join("/")),n=[];return n.push(...v.map(u=>u===""?h:[h,u].join("/"))),i&&n.push(...v),n.map(u=>e.startsWith("/")&&u===""?"/":u)}function Jp(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:o_(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Zp=/^:[\w-]+$/,e_=3,t_=2,r_=1,s_=10,i_=-2,vc=e=>e==="*";function n_(e,t){let r=e.split("/"),s=r.length;return r.some(vc)&&(s+=i_),t&&(s+=t_),r.filter(i=>!vc(i)).reduce((i,h)=>i+(Zp.test(h)?e_:h===""?r_:s_),s)}function o_(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function l_(e,t,r){let{routesMeta:s}=e,i={},h="/",v=[];for(let n=0;n<s.length;++n){let u=s[n],d=n===s.length-1,g=h==="/"?t:t.slice(h.length)||"/",f=a_({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},g),m=u.route;if(!f)return null;Object.assign(i,f.params),v.push({params:i,pathname:cr([h,f.pathname]),pathnameBase:v_(cr([h,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(h=cr([h,f.pathnameBase]))}return v}function a_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=c_(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let h=i[0],v=h.replace(/(.)\/+$/,"$1"),n=i.slice(1);return{params:s.reduce((d,g,f)=>{let{paramName:m,isOptional:C}=g;if(m==="*"){let S=n[f]||"";v=h.slice(0,h.length-S.length).replace(/(.)\/+$/,"$1")}const k=n[f];return C&&!k?d[m]=void 0:d[m]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:h,pathnameBase:v,pattern:e}}function c_(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Uh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,n,u)=>(s.push({paramName:n,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function u_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function h_(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof e=="string"?Qr(e):e;return{pathname:r?r.startsWith("/")?r:d_(r,t):t,search:m_(s),hash:g_(i)}}function d_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function no(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function f_(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function p_(e,t){let r=f_(e);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function __(e,t,r,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=Qr(e):(i=Ws({},e),we(!i.pathname||!i.pathname.includes("?"),no("?","pathname","search",i)),we(!i.pathname||!i.pathname.includes("#"),no("#","pathname","hash",i)),we(!i.search||!i.search.includes("#"),no("#","search","hash",i)));let h=e===""||i.pathname==="",v=h?"/":i.pathname,n;if(v==null)n=r;else{let f=t.length-1;if(!s&&v.startsWith("..")){let m=v.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}n=f>=0?t[f]:"/"}let u=h_(i,n),d=v&&v!=="/"&&v.endsWith("/"),g=(h||v===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||g)&&(u.pathname+="/"),u}const cr=e=>e.join("/").replace(/\/\/+/g,"/"),v_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),m_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,g_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function y_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Gh=["post","put","patch","delete"];new Set(Gh);const S_=["get",...Gh];new Set(S_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vs.apply(this,arguments)}const Zl=I.createContext(null),w_=I.createContext(null),xn=I.createContext(null),kn=I.createContext(null),mr=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Xh=I.createContext(null);function bn(){return I.useContext(kn)!=null}function ea(){return bn()||we(!1),I.useContext(kn).location}function Qh(e){I.useContext(xn).static||I.useLayoutEffect(e)}function C_(){let{isDataRoute:e}=I.useContext(mr);return e?O_():x_()}function x_(){bn()||we(!1);let e=I.useContext(Zl),{basename:t,future:r,navigator:s}=I.useContext(xn),{matches:i}=I.useContext(mr),{pathname:h}=ea(),v=JSON.stringify(p_(i,r.v7_relativeSplatPath)),n=I.useRef(!1);return Qh(()=>{n.current=!0}),I.useCallback(function(d,g){if(g===void 0&&(g={}),!n.current)return;if(typeof d=="number"){s.go(d);return}let f=__(d,JSON.parse(v),h,g.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:cr([t,f.pathname])),(g.replace?s.replace:s.push)(f,g.state,g)},[t,s,v,h,e])}function cs(){let{matches:e}=I.useContext(mr),t=e[e.length-1];return t?t.params:{}}function k_(e,t){return b_(e,t)}function b_(e,t,r,s){bn()||we(!1);let{navigator:i}=I.useContext(xn),{matches:h}=I.useContext(mr),v=h[h.length-1],n=v?v.params:{};v&&v.pathname;let u=v?v.pathnameBase:"/";v&&v.route;let d=ea(),g;if(t){var f;let l=typeof t=="string"?Qr(t):t;u==="/"||(f=l.pathname)!=null&&f.startsWith(u)||we(!1),g=l}else g=d;let m=g.pathname||"/",C=m;if(u!=="/"){let l=u.replace(/^\//,"").split("/");C="/"+m.replace(/^\//,"").split("/").slice(l.length).join("/")}let k=Qp(e,{pathname:C}),S=T_(k&&k.map(l=>Object.assign({},l,{params:Object.assign({},n,l.params),pathname:cr([u,i.encodeLocation?i.encodeLocation(l.pathname).pathname:l.pathname]),pathnameBase:l.pathnameBase==="/"?u:cr([u,i.encodeLocation?i.encodeLocation(l.pathnameBase).pathname:l.pathnameBase])})),h,r,s);return t&&S?I.createElement(kn.Provider,{value:{location:Vs({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ft.Pop}},S):S}function E_(){let e=M_(),t=y_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,null)}const L_=I.createElement(E_,null);class R_ extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?I.createElement(mr.Provider,{value:this.props.routeContext},I.createElement(Xh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D_(e){let{routeContext:t,match:r,children:s}=e,i=I.useContext(Zl);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(mr.Provider,{value:t},s)}function T_(e,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var h;if(!r)return null;if(r.errors)e=r.matches;else if((h=s)!=null&&h.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let v=e,n=(i=r)==null?void 0:i.errors;if(n!=null){let g=v.findIndex(f=>f.route.id&&(n==null?void 0:n[f.route.id])!==void 0);g>=0||we(!1),v=v.slice(0,Math.min(v.length,g+1))}let u=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let g=0;g<v.length;g++){let f=v[g];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=g),f.route.id){let{loaderData:m,errors:C}=r,k=f.route.loader&&m[f.route.id]===void 0&&(!C||C[f.route.id]===void 0);if(f.route.lazy||k){u=!0,d>=0?v=v.slice(0,d+1):v=[v[0]];break}}}return v.reduceRight((g,f,m)=>{let C,k=!1,S=null,l=null;r&&(C=n&&f.route.id?n[f.route.id]:void 0,S=f.route.errorElement||L_,u&&(d<0&&m===0?(N_("route-fallback"),k=!0,l=null):d===m&&(k=!0,l=f.route.hydrateFallbackElement||null)));let a=t.concat(v.slice(0,m+1)),o=()=>{let c;return C?c=S:k?c=l:f.route.Component?c=I.createElement(f.route.Component,null):f.route.element?c=f.route.element:c=g,I.createElement(D_,{match:f,routeContext:{outlet:g,matches:a,isDataRoute:r!=null},children:c})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?I.createElement(R_,{location:r.location,revalidation:r.revalidation,component:S,error:C,children:o(),routeContext:{outlet:null,matches:a,isDataRoute:!0}}):o()},null)}var Yh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Yh||{}),Jh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jh||{});function P_(e){let t=I.useContext(Zl);return t||we(!1),t}function j_(e){let t=I.useContext(w_);return t||we(!1),t}function A_(e){let t=I.useContext(mr);return t||we(!1),t}function Zh(e){let t=A_(),r=t.matches[t.matches.length-1];return r.route.id||we(!1),r.route.id}function M_(){var e;let t=I.useContext(Xh),r=j_(),s=Zh();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function O_(){let{router:e}=P_(Yh.UseNavigateStable),t=Zh(Jh.UseNavigateStable),r=I.useRef(!1);return Qh(()=>{r.current=!0}),I.useCallback(function(i,h){h===void 0&&(h={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Vs({fromRouteId:t},h)))},[e,t])}const mc={};function N_(e,t,r){mc[e]||(mc[e]=!0)}function B_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sr(e){we(!1)}function I_(e){let{basename:t="/",children:r=null,location:s,navigationType:i=Ft.Pop,navigator:h,static:v=!1,future:n}=e;bn()&&we(!1);let u=t.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:h,static:v,future:Vs({v7_relativeSplatPath:!1},n)}),[u,n,h,v]);typeof s=="string"&&(s=Qr(s));let{pathname:g="/",search:f="",hash:m="",state:C=null,key:k="default"}=s,S=I.useMemo(()=>{let l=qh(g,u);return l==null?null:{location:{pathname:l,search:f,hash:m,state:C,key:k},navigationType:i}},[u,g,f,m,C,k,i]);return S==null?null:I.createElement(xn.Provider,{value:d},I.createElement(kn.Provider,{children:r,value:S}))}function H_(e){let{children:t,location:r}=e;return k_(il(t),r)}new Promise(()=>{});function il(e,t){t===void 0&&(t=[]);let r=[];return I.Children.forEach(e,(s,i)=>{if(!I.isValidElement(s))return;let h=[...t,i];if(s.type===I.Fragment){r.push.apply(r,il(s.props.children,h));return}s.type!==sr&&we(!1),!s.props.index||!s.props.children||we(!1);let v={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(v.children=il(s.props.children,h)),r.push(v)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const F_="6";try{window.__reactRouterVersion=F_}catch{}const $_="startTransition",gc=Md[$_];function z_(e){let{basename:t,children:r,future:s,window:i}=e,h=I.useRef();h.current==null&&(h.current=qp({window:i,v5Compat:!0}));let v=h.current,[n,u]=I.useState({action:v.action,location:v.location}),{v7_startTransition:d}=s||{},g=I.useCallback(f=>{d&&gc?gc(()=>u(f)):u(f)},[u,d]);return I.useLayoutEffect(()=>v.listen(g),[v,g]),I.useEffect(()=>B_(s),[s]),I.createElement(I_,{basename:t,children:r,location:n.location,navigationType:n.action,navigator:v,future:s})}var yc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yc||(yc={}));var Sc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sc||(Sc={}));function Ye({className:e="",variant:t="default",children:r}){const s=t==="outline"?"border border-slate-700/60 text-slate-300":t==="destructive"?"bg-rose-900/40 border border-rose-700/40 text-rose-200":t==="success"?"bg-emerald-900/40 border border-emerald-700/40 text-emerald-200":"bg-slate-800 text-slate-200";return w.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-[11px] ${s} ${e}`,children:r})}function re({className:e="",variant:t="default",size:r="md",...s}){const i="inline-flex items-center justify-center rounded-xl font-medium transition focus:outline-none focus-visible:ring-2 ring-offset-0",h=t==="outline"?"border border-slate-700 text-slate-200 bg-transparent hover:bg-slate-800":t==="ghost"?"bg-transparent hover:bg-slate-900":"bg-slate-800 hover:bg-slate-700 text-white",v=r==="sm"?"h-8 px-3 text-sm":r==="icon"?"h-10 w-10":"h-10 px-4";return w.jsx("button",{className:`${i} ${h} ${v} ${e}`,...s})}function U_({page:e,onGoHosts:t,onGoStacks:r,onGoImages:s,onGoNetworks:i,onGoVolumes:h}){const v=(n,u,d)=>w.jsx("button",{className:`w-full text-left px-3 py-2 rounded-lg text-sm transition border ${e===n?"bg-slate-800/60 border-slate-700 text-white":"hover:bg-slate-900/40 border-transparent text-slate-300"}`,onClick:d,children:u});return w.jsxs("div",{className:"hidden md:flex md:flex-col w-60 shrink-0 border-r border-slate-800 bg-slate-950/60",children:[w.jsx("div",{className:"px-4 py-4 border-b border-slate-800",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:"/DDUI-Logo.png",alt:"DDUI",className:"h-16 w-16 rounded-md"}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx("div",{className:"font-black uppercase tracking-tight leading-none text-slate-200 select-none text-lg",children:w.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-brand to-sky-400",children:"DDUI"})}),w.jsx(Ye,{variant:"outline",className:"mt-1 w-fit",children:"Community"})]})]})}),w.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"Infrastructure"}),w.jsxs("nav",{className:"px-2 pb-4 space-y-1",children:[v("hosts","Hosts",t),v("stacks","Stacks",r)]}),w.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"Resources"}),w.jsxs("nav",{className:"px-2 pb-4 space-y-1",children:[v("images","Images",s),v("networks","Networks",i),v("volumes","Volumes",h)]}),w.jsx("div",{className:"px-4 py-3 text-xs tracking-wide uppercase text-slate-400",children:"System"}),w.jsxs("nav",{className:"px-2 space-y-1",children:[w.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"Settings"}),w.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"About"}),w.jsx("div",{className:"px-3 py-2 text-slate-300 text-sm",children:"Help"}),w.jsx("form",{method:"post",action:"/logout",children:w.jsx(re,{type:"submit",variant:"ghost",className:"px-3 text-slate-300 hover:bg-slate-900/60",children:"Logout"})})]})]})}const gt=lt.forwardRef(({className:e="",children:t},r)=>w.jsx("div",{ref:r,className:`rounded-2xl border border-slate-800 ${e}`,children:t}));function Vr({className:e="",children:t}){return w.jsx("div",{className:`px-4 pt-4 ${e}`,children:t})}function Kr({className:e="",children:t}){return w.jsx("div",{className:`text-lg font-semibold ${e}`,children:t})}function yt({className:e="",children:t}){return w.jsx("div",{className:`px-4 pb-4 ${e}`,children:t})}function W_(){return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:w.jsxs(gt,{className:"w-full max-w-sm bg-slate-900/60 border-slate-800",children:[w.jsx(Vr,{children:w.jsxs(Kr,{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-black uppercase tracking-tight leading-none text-slate-200 select-none",children:w.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-brand to-sky-400",children:"DDUI"})}),w.jsx(Ye,{variant:"outline",children:"Community"})]})}),w.jsxs(yt,{className:"space-y-4",children:[w.jsx("p",{className:"text-slate-300 text-sm",children:"You're signed out. Continue to your identity provider to sign in."}),w.jsx(re,{className:"w-full bg-[#310937] hover:bg-[#2a0830] text-white",onClick:()=>{window.location.replace("/auth/login")},children:"Continue to Sign in"}),w.jsxs("p",{className:"text-xs text-slate-500",children:["If you get stuck, ensure your OIDC ",w.jsx("code",{children:"RedirectURL"})," points back to",w.jsx("code",{children:" /auth/callback"})," and that cookies aren't blocked."]})]})]})})}function ta(e){return w.jsx("input",{...e,className:`h-10 w-full rounded-xl border border-slate-800 bg-slate-900/60 px-3 text-sm outline-none focus:ring-2 focus:ring-brand ${e.className||""}`})}function us({title:e,value:t,icon:r,accent:s=!1}){return w.jsxs(gt,{className:`border-slate-800 ${s?"bg-slate-900/40 border-brand/40":"bg-slate-900/40"}`,children:[w.jsxs(Vr,{className:"flex flex-row items-center justify-between pb-2",children:[w.jsx(Kr,{className:"text-sm font-medium text-slate-300",children:e}),w.jsx(r,{className:"h-4 w-4 text-slate-400"})]}),w.jsx(yt,{children:w.jsx("div",{className:`text-2xl font-extrabold ${s?"text-brand":"text-white"}`,children:t})})]})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ed=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:h,iconNode:v,...n},u)=>I.createElement("svg",{ref:u,...K_,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:ed("lucide",i),...n},[...v.map(([d,g])=>I.createElement(d,g)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(e,t)=>{const r=I.forwardRef(({className:s,...i},h)=>I.createElement(q_,{ref:h,iconNode:t,className:ed(`lucide-${V_(e)}`,s),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ne("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ne("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ne("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ne("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=ne("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ne("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ne("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ne("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function pv({metrics:e,hosts:t,filteredHosts:r,loading:s,err:i,scanning:h,onScanAll:v,onFilter:n,onOpenHost:u,refreshMetricsForHosts:d}){const[g,f]=I.useState("");return w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[w.jsx(us,{title:"Hosts",value:e.hosts,icon:wc}),w.jsx(us,{title:"Stacks",value:e.stacks,icon:wc}),w.jsx(us,{title:"Containers",value:e.containers,icon:tv}),w.jsx(us,{title:"Drift",value:w.jsx("span",{className:"text-amber-400",children:e.drift}),icon:dv}),w.jsx(us,{title:"Errors",value:w.jsx("span",{className:"text-rose-400",children:e.errors}),icon:Z_})]}),w.jsx(gt,{className:"bg-slate-900/40 border-slate-800",children:w.jsx(yt,{className:"py-4",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs(re,{onClick:v,disabled:h,className:"bg-[#310937] hover:bg-[#2a0830] text-white",children:[w.jsx(Ks,{className:`h-4 w-4 mr-1 ${h?"animate-spin":""}`}),h?"Scanning…":"Sync"]}),w.jsx("div",{className:"relative w-full md:w-96",children:w.jsx(ta,{placeholder:"Filter by host, group, address…",className:"pl-3 bg-slate-900/50 border-slate-800 text-slate-200 placeholder:text-slate-500",value:g,onChange:m=>{f(m.target.value),n(m.target.value)}})})]})})}),w.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-3 text-left",children:"Host"}),w.jsx("th",{className:"p-3 text-left",children:"Address"}),w.jsx("th",{className:"p-3 text-left",children:"Groups"}),w.jsx("th",{className:"p-3 text-left",children:"Scan"}),w.jsx("th",{className:"p-3 text-left",children:"Status"})]})}),w.jsxs("tbody",{children:[s&&w.jsx("tr",{children:w.jsx("td",{className:"p-4 text-slate-500",colSpan:5,children:"Loading hosts…"})}),i&&!s&&w.jsx("tr",{children:w.jsx("td",{className:"p-4 text-rose-300",colSpan:5,children:i})}),!s&&r.map(m=>w.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-900/40",children:[w.jsx("td",{className:"p-3 font-medium text-slate-200",children:w.jsx("button",{className:"hover:underline",onClick:()=>u(m.name),children:m.name})}),w.jsx("td",{className:"p-3 text-slate-300",children:m.address||"—"}),w.jsx("td",{className:"p-3 text-slate-300",children:(m.groups||[]).length?(m.groups||[]).join(", "):"—"}),w.jsx("td",{className:"p-3",children:w.jsxs(re,{size:"sm",variant:"outline",className:"border-slate-700 text-slate-200 hover:bg-slate-800",onClick:async()=>{await fetch(`/api/scan/host/${encodeURIComponent(m.name)}`,{method:"POST",credentials:"include"}),await d([m.name])},children:[w.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Scan"]})}),w.jsx("td",{className:"p-3"})]},m.name)),!s&&r.length===0&&w.jsx("tr",{children:w.jsx("td",{className:"p-6 text-center text-slate-500",colSpan:5,children:"No hosts."})})]})]})})]})}function rd({checked:e,onCheckedChange:t,disabled:r=!1,id:s}){const i=()=>{r||t(!e)},h=v=>{r||(v.key===" "||v.key==="Enter")&&(v.preventDefault(),i())};return w.jsx("button",{id:s,type:"button",role:"switch","aria-checked":e,"aria-disabled":r,disabled:r,tabIndex:r?-1:0,onClick:i,onKeyDown:h,className:`h-6 w-10 rounded-full border border-slate-700 transition ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${e?"bg-brand/70":"bg-slate-800"}`,children:w.jsx("span",{className:`block h-5 w-5 rounded-full bg-white transition transform ${e?"translate-x-4":"translate-x-0.5"} mt-0.5 ml-0.5`})})}function sd({state:e,health:t}){const r=(e||"").toLowerCase(),s=(t||"").toLowerCase();let i="border-slate-700 bg-slate-900 text-slate-300",h=e||"unknown";return s==="healthy"?(i="border-emerald-700/60 bg-emerald-900/40 text-emerald-200",h="healthy"):r.includes("running")||r.includes("up")?i="border-emerald-700/60 bg-emerald-900/40 text-emerald-200":r.includes("restarting")?i="border-amber-700/60 bg-amber-900/40 text-amber-200":r.includes("paused")?i="border-sky-700/60 bg-sky-900/40 text-sky-200":(r.includes("exited")||r.includes("dead"))&&(i="border-rose-700/60 bg-rose-900/40 text-rose-200"),w.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${i}`,children:h})}function _v(e){return e==="in_sync"?w.jsx(Ye,{className:"bg-emerald-900/40 border-emerald-700/40 text-emerald-200",children:"In sync"}):e==="drift"?w.jsx(Ye,{variant:"destructive",children:"Drift"}):w.jsx(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:"Unknown"})}function st({title:e,onClick:t,icon:r,disabled:s=!1}){return w.jsx(re,{size:"icon",variant:"ghost",className:"h-6 w-6 shrink-0",title:e,onClick:t,disabled:s,children:w.jsx(r,{className:"h-3.5 w-3.5 text-slate-200"})})}function vv({host:e,container:t,onClose:r}){const[s,i]=I.useState([]),[h,v]=I.useState(!1),[n,u]=I.useState(!0),d=I.useRef(null),g=I.useRef(null),f=I.useCallback(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[]);I.useEffect(()=>{const C=d.current;if(!C)return;const k=()=>{if(!C)return;const S=C.scrollTop+C.clientHeight>=C.scrollHeight-40;n!==S&&u(S)};return C.addEventListener("scroll",k,{passive:!0}),()=>C.removeEventListener("scroll",k)},[n]),I.useEffect(()=>{var l;if(h){try{(l=g.current)==null||l.close()}catch{}g.current=null;return}const C=`/api/hosts/${encodeURIComponent(e)}/containers/${encodeURIComponent(t)}/logs/stream?tail=200`,k=new EventSource(C,{withCredentials:!0});g.current=k;const S=a=>o=>{const _=(o.data??"").split(/\r?\n/);i(y=>{const x=y.concat(_.map(E=>({stream:a,text:E})));return x.length>2e3?x.slice(x.length-2e3):x}),n&&requestAnimationFrame(f)};return k.addEventListener("stdout",S("stdout")),k.addEventListener("stderr",S("stderr")),k.onerror=()=>{},()=>{try{k.close()}catch{}}},[e,t,h,n,f]);const m=async()=>{const C=s.map(k=>k.text).join(`
`);try{await navigator.clipboard.writeText(C)}catch{}};return w.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:r,children:w.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-5xl p-4",onClick:C=>C.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"text-slate-200 font-semibold",children:["Live Logs: ",w.jsx("span",{className:"text-slate-400",children:e})," / ",w.jsx("span",{className:"text-slate-400",children:t}),w.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:h?"paused":"streaming"}),w.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:n?"auto-scroll":"free scroll"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>v(C=>!C),children:h?"Resume":"Pause"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>u(C=>!C),title:"Toggle following the newest lines",children:n?"Free scroll":"Follow newest"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:m,children:"Copy"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>i([]),children:"Clear"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:r,children:"Close"})]})]}),w.jsxs("div",{ref:d,className:"text-xs text-slate-200 bg-slate-900 border border-slate-800 rounded p-3 max-h-[70vh] h-[60vh] overflow-auto font-mono",children:[s.length===0&&w.jsx("div",{className:"text-slate-500",children:"Waiting for log events…"}),s.map((C,k)=>w.jsx("div",{className:C.stream==="stderr"?"text-rose-300":"text-slate-200",children:C.text},k))]})]})})}var id={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={4567:function(v,n,u){var d=this&&this.__decorate||function(c,_,y,x){var E,p=arguments.length,b=p<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,_,y,x);else for(var R=c.length-1;R>=0;R--)(E=c[R])&&(b=(p<3?E(b):p>3?E(_,y,b):E(_,y))||b);return p>3&&b&&Object.defineProperty(_,y,b),b},g=this&&this.__param||function(c,_){return function(y,x){_(y,x,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const f=u(9042),m=u(6114),C=u(9924),k=u(844),S=u(5596),l=u(4725),a=u(3656);let o=n.AccessibilityManager=class extends k.Disposable{constructor(c,_){super(),this._terminal=c,this._renderService=_,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(y=>this._handleResize(y.rows))),this.register(this._terminal.onRender(y=>this._refreshRows(y.start,y.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(y=>this._handleChar(y))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(y=>this._handleTab(y))),this.register(this._terminal.onKey(y=>this._handleKey(y.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,a.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,k.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let _=0;_<c;_++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,m.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(c)||this._charsToConsume.push(c)}_refreshRows(c,_){this._liveRegionDebouncer.refresh(c,_,this._terminal.rows)}_renderRows(c,_){const y=this._terminal.buffer,x=y.lines.length.toString();for(let E=c;E<=_;E++){const p=y.translateBufferLineToString(y.ydisp+E,!0),b=(y.ydisp+E+1).toString(),R=this._rowElements[E];R&&(p.length===0?R.innerText=" ":R.textContent=p,R.setAttribute("aria-posinset",b),R.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,_){const y=c.target,x=this._rowElements[_===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==x)return;let E,p;if(_===0?(E=y,p=this._rowElements.pop(),this._rowContainer.removeChild(p)):(E=this._rowElements.shift(),p=y,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),p.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{const b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};n.AccessibilityManager=o=d([g(1,l.IRenderService)],o)},3614:(v,n)=>{function u(m){return m.replace(/\r?\n/g,"\r")}function d(m,C){return C?"\x1B[200~"+m+"\x1B[201~":m}function g(m,C,k,S){m=d(m=u(m),k.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(m,!0),C.value=""}function f(m,C,k){const S=k.getBoundingClientRect(),l=m.clientX-S.left-10,a=m.clientY-S.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${l}px`,C.style.top=`${a}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=u,n.bracketTextForPaste=d,n.copyHandler=function(m,C){m.clipboardData&&m.clipboardData.setData("text/plain",C.selectionText),m.preventDefault()},n.handlePasteEvent=function(m,C,k,S){m.stopPropagation(),m.clipboardData&&g(m.clipboardData.getData("text/plain"),C,k,S)},n.paste=g,n.moveTextAreaUnderMouseCursor=f,n.rightClickHandler=function(m,C,k,S,l){f(m,C,k),l&&S.rightClickSelect(m),C.value=S.selectionText,C.select()}},7239:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const d=u(1505);n.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(g,f,m){this._css.set(g,f,m)}getCss(g,f){return this._css.get(g,f)}setColor(g,f,m){this._color.set(g,f,m)}getColor(g,f){return this._color.get(g,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(u,d,g,f){u.addEventListener(d,g,f);let m=!1;return{dispose:()=>{m||(m=!0,u.removeEventListener(d,g,f))}}}},6465:function(v,n,u){var d=this&&this.__decorate||function(l,a,o,c){var _,y=arguments.length,x=y<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,a,o,c);else for(var E=l.length-1;E>=0;E--)(_=l[E])&&(x=(y<3?_(x):y>3?_(a,o,x):_(a,o))||x);return y>3&&x&&Object.defineProperty(a,o,x),x},g=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const f=u(3656),m=u(8460),C=u(844),k=u(2585);let S=n.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const a=this._linkProviders.indexOf(l);a!==-1&&this._linkProviders.splice(a,1)}}}attachToDom(l,a,o){this._element=l,this._mouseService=a,this._renderService=o,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const a=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const o=l.composedPath();for(let c=0;c<o.length;c++){const _=o[c];if(_.classList.contains("xterm"))break;if(_.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,a){var o,c;this._activeProviderReplies&&a||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(y=>{y==null||y.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let _=!1;for(const[y,x]of this._linkProviders.entries())a?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(y)&&(_=this._checkLinkProviderResult(y,l,_)):x.provideLinks(l.y,E=>{var p,b;if(this._isMouseOut)return;const R=E==null?void 0:E.map(P=>({link:P}));(p=this._activeProviderReplies)===null||p===void 0||p.set(y,R),_=this._checkLinkProviderResult(y,l,_),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,a){const o=new Set;for(let c=0;c<a.size;c++){const _=a.get(c);if(_)for(let y=0;y<_.length;y++){const x=_[y],E=x.link.range.start.y<l?0:x.link.range.start.x,p=x.link.range.end.y>l?this._bufferService.cols:x.link.range.end.x;for(let b=E;b<=p;b++){if(o.has(b)){_.splice(y--,1);break}o.add(b)}}}}_checkLinkProviderResult(l,a,o){var c;if(!this._activeProviderReplies)return o;const _=this._activeProviderReplies.get(l);let y=!1;for(let x=0;x<l;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(y=!0);if(!y&&_){const x=_.find(E=>this._linkAtPosition(E.link,a));x&&(o=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let x=0;x<this._activeProviderReplies.size;x++){const E=(c=this._activeProviderReplies.get(x))===null||c===void 0?void 0:c.find(p=>this._linkAtPosition(p.link,a));if(E){o=!0,this._handleNewLink(E);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const a=this._positionFromMouseEvent(l,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,a){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!a||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(l.link,a)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:o=>{var c,_;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((_=this._element)===null||_===void 0||_.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.underline},set:o=>{var c,_,y;!((c=this._currentLink)===null||c===void 0)&&c.state&&((y=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||y===void 0?void 0:y.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const c=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,_=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_&&(this._clearCurrentLink(c,_),this._lastMouseEvent&&this._element)){const y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}})))}_linkHover(l,a,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(o,a.text)}_fireUnderlineEvent(l,a){const o=l.range,c=this._bufferService.buffer.ydisp,_=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(_)}_linkLeave(l,a,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(o,a.text)}_linkAtPosition(l,a){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,c=l.range.end.y*this._bufferService.cols+l.range.end.x,_=a.y*this._bufferService.cols+a.x;return o<=_&&_<=c}_positionFromMouseEvent(l,a,o){const c=o.getCoords(l,a,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,a,o,c,_){return{x1:l,y1:a,x2:o,y2:c,cols:this._bufferService.cols,fg:_}}};n.Linkifier2=S=d([g(0,k.IBufferService)],S)},9042:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,n,u){var d=this&&this.__decorate||function(S,l,a,o){var c,_=arguments.length,y=_<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,l,a,o);else for(var x=S.length-1;x>=0;x--)(c=S[x])&&(y=(_<3?c(y):_>3?c(l,a,y):c(l,a))||y);return _>3&&y&&Object.defineProperty(l,a,y),y},g=this&&this.__param||function(S,l){return function(a,o){l(a,o,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const f=u(511),m=u(2585);let C=n.OscLinkProvider=class{constructor(S,l,a){this._bufferService=S,this._optionsService=l,this._oscLinkService=a}provideLinks(S,l){var a;const o=this._bufferService.buffer.lines.get(S-1);if(!o)return void l(void 0);const c=[],_=this._optionsService.rawOptions.linkHandler,y=new f.CellData,x=o.getTrimmedLength();let E=-1,p=-1,b=!1;for(let R=0;R<x;R++)if(p!==-1||o.hasContent(R)){if(o.loadCell(R,y),y.hasExtendedAttrs()&&y.extended.urlId){if(p===-1){p=R,E=y.extended.urlId;continue}b=y.extended.urlId!==E}else p!==-1&&(b=!0);if(b||p!==-1&&R===x-1){const P=(a=this._oscLinkService.getLinkData(E))===null||a===void 0?void 0:a.uri;if(P){const D={start:{x:p+1,y:S},end:{x:R+(b||R!==x-1?0:1),y:S}};let O=!1;if(!(_!=null&&_.allowNonHttpProtocols))try{const N=new URL(P);["http:","https:"].includes(N.protocol)||(O=!0)}catch{O=!0}O||c.push({text:P,range:D,activate:(N,B)=>_?_.activate(N,B,D):k(0,B),hover:(N,B)=>{var $;return($=_==null?void 0:_.hover)===null||$===void 0?void 0:$.call(_,N,B,D)},leave:(N,B)=>{var $;return($=_==null?void 0:_.leave)===null||$===void 0?void 0:$.call(_,N,B,D)}})}b=!1,y.hasExtendedAttrs()&&y.extended.urlId?(p=R,E=y.extended.urlId):(p=-1,E=-1)}}l(c)}};function k(S,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}n.OscLinkProvider=C=d([g(0,m.IBufferService),g(1,m.IOptionsService),g(2,m.IOscLinkService)],C)},6193:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(u,d){this._parentWindow=u,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(u,d,g){this._rowCount=g,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},5596:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const d=u(844);class g extends d.Disposable{constructor(m){super(),this._parentWindow=m,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(m){this._listener&&this.clearListener(),this._listener=m,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)===null||m===void 0||m.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=g},3236:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const d=u(3614),g=u(3656),f=u(6465),m=u(9042),C=u(3730),k=u(1680),S=u(3107),l=u(5744),a=u(2950),o=u(1296),c=u(428),_=u(4269),y=u(5114),x=u(8934),E=u(3230),p=u(9312),b=u(4725),R=u(6731),P=u(8055),D=u(8969),O=u(8460),N=u(844),B=u(6114),$=u(8437),z=u(2584),L=u(7399),A=u(5941),j=u(9074),M=u(2585),H=u(5435),V=u(4567),X=typeof window<"u"?window.document:null;class K extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(T={}){super(T),this.browser=B,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(j.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((F,U)=>this.refresh(F,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(F=>this._reportWindowsOptions(F))),this.register(this._inputHandler.onColor(F=>this._handleColorEvent(F))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(F=>this._afterResize(F.cols,F.rows))),this.register((0,N.toDisposable)(()=>{var F,U;this._customKeyEventHandler=void 0,(U=(F=this.element)===null||F===void 0?void 0:F.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(T){if(this._themeService)for(const F of T){let U,W="";switch(F.index){case 256:U="foreground",W="10";break;case 257:U="background",W="11";break;case 258:U="cursor",W="12";break;default:U="ansi",W="4;"+F.index}switch(F.type){case 0:const Y=P.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${z.C0.ESC}]${W};${(0,A.toRgbString)(Y)}${z.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(G=>G.ansi[F.index]=P.rgba.toColor(...F.color));else{const G=U;this._themeService.modifyColors(te=>te[G]=P.rgba.toColor(...F.color))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(T){T?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(T){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[I"),this.updateCursorStyle(T),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var T;return(T=this.textarea)===null||T===void 0?void 0:T.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const T=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(T);if(!F)return;const U=Math.min(this.buffer.x,this.cols-1),W=this._renderService.dimensions.css.cell.height,Y=F.getWidth(U),G=this._renderService.dimensions.css.cell.width*Y,te=this.buffer.y*this._renderService.dimensions.css.cell.height,le=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=le+"px",this.textarea.style.top=te+"px",this.textarea.style.width=G+"px",this.textarea.style.height=W+"px",this.textarea.style.lineHeight=W+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,g.addDisposableDomListener)(this.element,"copy",F=>{this.hasSelection()&&(0,d.copyHandler)(F,this._selectionService)}));const T=F=>(0,d.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,g.addDisposableDomListener)(this.textarea,"paste",T)),this.register((0,g.addDisposableDomListener)(this.element,"paste",T)),B.isFirefox?this.register((0,g.addDisposableDomListener)(this.element,"mousedown",F=>{F.button===2&&(0,d.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,g.addDisposableDomListener)(this.element,"contextmenu",F=>{(0,d.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),B.isLinux&&this.register((0,g.addDisposableDomListener)(this.element,"auxclick",F=>{F.button===1&&(0,d.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,g.addDisposableDomListener)(this.textarea,"keyup",T=>this._keyUp(T),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keydown",T=>this._keyDown(T),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keypress",T=>this._keyPress(T),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionupdate",T=>this._compositionHelper.compositionupdate(T))),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,g.addDisposableDomListener)(this.textarea,"input",T=>this._inputEvent(T),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(T){var F;if(!T)throw new Error("Terminal requires a parent element.");T.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=T.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),T.appendChild(this.element);const U=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),B.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,(F=this._document.defaultView)!==null&&F!==void 0?F:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,g.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,g.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(p.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,g.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const T=this,F=this.element;function U(G){const te=T._mouseService.getMouseReportCoords(G,T.screenElement);if(!te)return!1;let le,ge;switch(G.overrideType||G.type){case"mousemove":ge=32,G.buttons===void 0?(le=3,G.button!==void 0&&(le=G.button<3?G.button:3)):le=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":ge=0,le=G.button<3?G.button:3;break;case"mousedown":ge=1,le=G.button<3?G.button:3;break;case"wheel":if(T.viewport.getLinesScrolled(G)===0)return!1;ge=G.deltaY<0?0:1,le=4;break;default:return!1}return!(ge===void 0||le===void 0||le>4)&&T.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:le,action:ge,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:G=>(U(G),G.buttons||(this._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.removeEventListener("mousemove",W.mousedrag)),this.cancel(G)),wheel:G=>(U(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&U(G)},mousemove:G=>{G.buttons||U(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?W.mousemove||(F.addEventListener("mousemove",Y.mousemove),W.mousemove=Y.mousemove):(F.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&G?W.wheel||(F.addEventListener("wheel",Y.wheel,{passive:!1}),W.wheel=Y.wheel):(F.removeEventListener("wheel",W.wheel),W.wheel=null),2&G?W.mouseup||(F.addEventListener("mouseup",Y.mouseup),W.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",W.mouseup),F.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&G?W.mousedrag||(W.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,g.addDisposableDomListener)(F,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return U(G),W.mouseup&&this._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.addEventListener("mousemove",W.mousedrag),this.cancel(G)})),this.register((0,g.addDisposableDomListener)(F,"wheel",G=>{if(!W.wheel){if(!this.buffer.hasScrollback){const te=this.viewport.getLinesScrolled(G);if(te===0)return;const le=z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let ge="";for(let Tt=0;Tt<Math.abs(te);Tt++)ge+=le;return this.coreService.triggerDataEvent(ge,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,g.addDisposableDomListener)(F,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,g.addDisposableDomListener)(F,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(T,F){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(T,F)}updateCursorStyle(T){var F;!((F=this._selectionService)===null||F===void 0)&&F.shouldColumnSelect(T)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(T,F,U=0){var W;U===1?(super.scrollLines(T,F,U),this.refresh(0,this.rows-1)):(W=this.viewport)===null||W===void 0||W.scrollLines(T)}paste(T){(0,d.paste)(T,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(T){this._customKeyEventHandler=T}registerLinkProvider(T){return this.linkifier2.registerLinkProvider(T)}registerCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(T);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(T)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(T){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+T)}registerDecoration(T){return this._decorationService.registerDecoration(T)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(T,F,U){this._selectionService.setSelection(T,F,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var T;(T=this._selectionService)===null||T===void 0||T.clearSelection()}selectAll(){var T;(T=this._selectionService)===null||T===void 0||T.selectAll()}selectLines(T,F){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(T,F)}_keyDown(T){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&T.altKey;if(!F&&!this._compositionHelper.keydown(T))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||T.key!=="Dead"&&T.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,L.evaluateKeyboardEvent)(T,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(T),U.type===3||U.type===2){const W=this.rows-1;return this.scrollLines(U.type===2?-W:W),this.cancel(T,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,T)||(U.cancel&&this.cancel(T,!0),!U.key||!!(T.key&&!T.ctrlKey&&!T.altKey&&!T.metaKey&&T.key.length===1&&T.key.charCodeAt(0)>=65&&T.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==z.C0.ETX&&U.key!==z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||T.altKey||T.ctrlKey?this.cancel(T,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(T,F){const U=T.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||T.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||T.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?U:U&&(!F.keyCode||F.keyCode>47)}_keyUp(T){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1||(function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18}(T)||this.focus(),this.updateCursorStyle(T),this._keyPressHandled=!1)}_keyPress(T){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;if(this.cancel(T),T.charCode)F=T.charCode;else if(T.which===null||T.which===void 0)F=T.keyCode;else{if(T.which===0||T.charCode===0)return!1;F=T.which}return!(!F||(T.altKey||T.ctrlKey||T.metaKey)&&!this._isThirdLevelShift(this.browser,T)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(T){if(T.data&&T.inputType==="insertText"&&(!T.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=T.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(T),!0}return!1}resize(T,F){T!==this.cols||F!==this.rows?super.resize(T,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(T,F){var U,W;(U=this._charSizeService)===null||U===void 0||U.measure(),(W=this.viewport)===null||W===void 0||W.syncScrollArea(!0)}clear(){var T;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(T=this.viewport)===null||T===void 0||T.reset(),this.refresh(0,this.rows-1)}}reset(){var T,F;this.options.rows=this.rows,this.options.cols=this.cols;const U=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)===null||T===void 0||T.reset(),this._decorationService.reset(),(F=this.viewport)===null||F===void 0||F.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var T;(T=this._renderService)===null||T===void 0||T.clearTextureAtlas()}_reportFocus(){var T;!((T=this.element)===null||T===void 0)&&T.classList.contains("focus")?this.coreService.triggerDataEvent(z.C0.ESC+"[I"):this.coreService.triggerDataEvent(z.C0.ESC+"[O")}_reportWindowsOptions(T){if(this._renderService)switch(T){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[4;${U};${F}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const W=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[6;${Y};${W}t`)}}cancel(T,F){if(this.options.cancelEvents||F)return T.preventDefault(),T.stopPropagation(),!1}}n.Terminal=K},9924:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(u,d=1e3){this._renderCallback=u,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,d,g){this._rowCount=g,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=f-this._lastRefreshMs,C=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d)}}},1680:function(v,n,u){var d=this&&this.__decorate||function(a,o,c,_){var y,x=arguments.length,E=x<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,o,c,_);else for(var p=a.length-1;p>=0;p--)(y=a[p])&&(E=(x<3?y(E):x>3?y(o,c,E):y(o,c))||E);return x>3&&E&&Object.defineProperty(o,c,E),E},g=this&&this.__param||function(a,o){return function(c,_){o(c,_,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const f=u(3656),m=u(4725),C=u(8460),k=u(844),S=u(2585);let l=n.Viewport=class extends k.Disposable{constructor(a,o,c,_,y,x,E,p){super(),this._viewportElement=a,this._scrollArea=o,this._bufferService=c,this._optionsService=_,this._charSizeService=y,this._renderService=x,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(p.colors),this.register(p.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const o=this._getPixelsScrolled(a);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(a,o))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let o=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(a,o){var c;let _,y="";const x=[],E=o??this._bufferService.buffer.lines.length,p=this._bufferService.buffer.lines;for(let b=a;b<E;b++){const R=p.get(b);if(!R)continue;const P=(c=p.get(b+1))===null||c===void 0?void 0:c.isWrapped;if(y+=R.translateToString(!P),!P||b===p.length-1){const D=document.createElement("div");D.textContent=y,x.push(D),y.length>0&&(_=D),y=""}}return{bufferElements:x,cursorElement:_}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let o=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(a,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const o=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(a,o))}};n.Viewport=l=d([g(2,S.IBufferService),g(3,S.IOptionsService),g(4,m.ICharSizeService),g(5,m.IRenderService),g(6,m.ICoreBrowserService),g(7,m.IThemeService)],l)},3107:function(v,n,u){var d=this&&this.__decorate||function(l,a,o,c){var _,y=arguments.length,x=y<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,a,o,c);else for(var E=l.length-1;E>=0;E--)(_=l[E])&&(x=(y<3?_(x):y>3?_(a,o,x):_(a,o))||x);return y>3&&x&&Object.defineProperty(a,o,x),x},g=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const f=u(3656),m=u(4725),C=u(844),k=u(2585);let S=n.BufferDecorationRenderer=class extends C.Disposable{constructor(l,a,o,c){super(),this._screenElement=l,this._bufferService=a,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var a,o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((a=l==null?void 0:l.options)===null||a===void 0?void 0:a.layer)==="top"),c.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const _=(o=l.options.x)!==null&&o!==void 0?o:0;return _&&_>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(l,c),c}_refreshStyle(l){const a=l.marker.line-this._bufferService.buffers.active.ydisp;if(a<0||a>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let o=this._decorationElements.get(l);o||(o=this._createElement(l),l.element=o,this._decorationElements.set(l,o),this._container.appendChild(o),l.onDispose(()=>{this._decorationElements.delete(l),o.remove()})),o.style.top=a*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(o)}}_refreshXPosition(l,a=l.element){var o;if(!a)return;const c=(o=l.options.x)!==null&&o!==void 0?o:0;(l.options.anchor||"left")==="right"?a.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":a.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var a;(a=this._decorationElements.get(l))===null||a===void 0||a.remove(),this._decorationElements.delete(l),l.dispose()}};n.BufferDecorationRenderer=S=d([g(1,k.IBufferService),g(2,k.IDecorationService),g(3,m.IRenderService)],S)},5871:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const d of this._zones)if(d.color===u.options.overviewRulerOptions.color&&d.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,u.marker.line))return;if(this._lineAdjacentToZone(d,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(d,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,d){return d>=u.startBufferLine&&d<=u.endBufferLine}_lineAdjacentToZone(u,d,g){return d>=u.startBufferLine-this._linePadding[g||"full"]&&d<=u.endBufferLine+this._linePadding[g||"full"]}_addLineToZone(u,d){u.startBufferLine=Math.min(u.startBufferLine,d),u.endBufferLine=Math.max(u.endBufferLine,d)}}},5744:function(v,n,u){var d=this&&this.__decorate||function(_,y,x,E){var p,b=arguments.length,R=b<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(_,y,x,E);else for(var P=_.length-1;P>=0;P--)(p=_[P])&&(R=(b<3?p(R):b>3?p(y,x,R):p(y,x))||R);return b>3&&R&&Object.defineProperty(y,x,R),R},g=this&&this.__param||function(_,y){return function(x,E){y(x,E,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const f=u(5871),m=u(3656),C=u(4725),k=u(844),S=u(2585),l={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let c=n.OverviewRulerRenderer=class extends k.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,y,x,E,p,b,R){var P;super(),this._viewportElement=_,this._screenElement=y,this._bufferService=x,this._decorationService=E,this._renderService=p,this._optionsService=b,this._coreBrowseService=R,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(P=this._viewportElement.parentElement)===null||P===void 0||P.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,k.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,m.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);a.full=this._canvas.width,a.left=_,a.center=y,a.right=_,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=a.left,o.right=a.left+a.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowseService.dpr);l.left=y,l.center=y,l.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const y of _)y.position!=="full"&&this._renderColorZone(y);for(const y of _)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(o[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-l[_.position||"full"]/2),a[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[_.position||"full"]))}_queueRefresh(_,y){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n.OverviewRulerRenderer=c=d([g(2,S.IBufferService),g(3,S.IDecorationService),g(4,C.IRenderService),g(5,S.IOptionsService),g(6,C.ICoreBrowserService)],c)},2950:function(v,n,u){var d=this&&this.__decorate||function(S,l,a,o){var c,_=arguments.length,y=_<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,l,a,o);else for(var x=S.length-1;x>=0;x--)(c=S[x])&&(y=(_<3?c(y):_>3?c(l,a,y):c(l,a))||y);return _>3&&y&&Object.defineProperty(l,a,y),y},g=this&&this.__param||function(S,l){return function(a,o){l(a,o,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const f=u(4725),m=u(2585),C=u(2584);let k=n.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,l,a,o,c,_){this._textarea=S,this._compositionView=l,this._bufferService=a,this._optionsService=o,this._coreService=c,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,a=l.replace(S,"");this._dataAlreadySent=a,l.length>S.length?this._coreService.triggerDataEvent(a,!0):l.length<S.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):l.length===S.length&&l!==S&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};n.CompositionHelper=k=d([g(2,m.IBufferService),g(3,m.IOptionsService),g(4,m.ICoreService),g(5,f.IRenderService)],k)},9806:(v,n)=>{function u(d,g,f){const m=f.getBoundingClientRect(),C=d.getComputedStyle(f),k=parseInt(C.getPropertyValue("padding-left")),S=parseInt(C.getPropertyValue("padding-top"));return[g.clientX-m.left-k,g.clientY-m.top-S]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=u,n.getCoords=function(d,g,f,m,C,k,S,l,a){if(!k)return;const o=u(d,g,f);return o?(o[0]=Math.ceil((o[0]+(a?S/2:0))/S),o[1]=Math.ceil(o[1]/l),o[0]=Math.min(Math.max(o[0],1),m+(a?1:0)),o[1]=Math.min(Math.max(o[1],1),C),o):void 0}},9504:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const d=u(2584);function g(l,a,o,c){const _=l-f(l,o),y=a-f(a,o),x=Math.abs(_-y)-function(E,p,b){let R=0;const P=E-f(E,b),D=p-f(p,b);for(let O=0;O<Math.abs(P-D);O++){const N=m(E,p)==="A"?-1:1,B=b.buffer.lines.get(P+N*O);B!=null&&B.isWrapped&&R++}return R}(l,a,o);return S(x,k(m(l,a),c))}function f(l,a){let o=0,c=a.buffer.lines.get(l),_=c==null?void 0:c.isWrapped;for(;_&&l>=0&&l<a.rows;)o++,c=a.buffer.lines.get(--l),_=c==null?void 0:c.isWrapped;return o}function m(l,a){return l>a?"A":"B"}function C(l,a,o,c,_,y){let x=l,E=a,p="";for(;x!==o||E!==c;)x+=_?1:-1,_&&x>y.cols-1?(p+=y.buffer.translateBufferLineToString(E,!1,l,x),x=0,l=0,E++):!_&&x<0&&(p+=y.buffer.translateBufferLineToString(E,!1,0,l+1),x=y.cols-1,l=x,E--);return p+y.buffer.translateBufferLineToString(E,!1,l,x)}function k(l,a){const o=a?"O":"[";return d.C0.ESC+o+l}function S(l,a){l=Math.floor(l);let o="";for(let c=0;c<l;c++)o+=a;return o}n.moveToCellSequence=function(l,a,o,c){const _=o.buffer.x,y=o.buffer.y;if(!o.buffer.hasScrollback)return function(p,b,R,P,D,O){return g(b,P,D,O).length===0?"":S(C(p,b,p,b-f(b,D),!1,D).length,k("D",O))}(_,y,0,a,o,c)+g(y,a,o,c)+function(p,b,R,P,D,O){let N;N=g(b,P,D,O).length>0?P-f(P,D):b;const B=P,$=function(z,L,A,j,M,H){let V;return V=g(A,j,M,H).length>0?j-f(j,M):L,z<A&&V<=j||z>=A&&V<j?"C":"D"}(p,b,R,P,D,O);return S(C(p,N,R,B,$==="C",D).length,k($,O))}(_,y,l,a,o,c);let x;if(y===a)return x=_>l?"D":"C",S(Math.abs(_-l),k(x,c));x=y>a?"D":"C";const E=Math.abs(y-a);return S(function(p,b){return b.cols-p}(y>a?l:_,o)+(E-1)*o.cols+1+((y>a?_:l)-1),k(x,c))}},1296:function(v,n,u){var d=this&&this.__decorate||function(D,O,N,B){var $,z=arguments.length,L=z<3?O:B===null?B=Object.getOwnPropertyDescriptor(O,N):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(D,O,N,B);else for(var A=D.length-1;A>=0;A--)($=D[A])&&(L=(z<3?$(L):z>3?$(O,N,L):$(O,N))||L);return z>3&&L&&Object.defineProperty(O,N,L),L},g=this&&this.__param||function(D,O){return function(N,B){O(N,B,D)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const f=u(3787),m=u(2550),C=u(2223),k=u(6171),S=u(4725),l=u(8055),a=u(8460),o=u(844),c=u(2585),_="xterm-dom-renderer-owner-",y="xterm-rows",x="xterm-fg-",E="xterm-bg-",p="xterm-focus",b="xterm-selection";let R=1,P=n.DomRenderer=class extends o.Disposable{constructor(D,O,N,B,$,z,L,A,j,M){super(),this._element=D,this._screenElement=O,this._viewportElement=N,this._linkifier2=B,this._charSizeService=z,this._optionsService=L,this._bufferService=A,this._coreBrowserService=j,this._themeService=M,this._terminalClass=R++,this._rowElements=[],this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(_+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(_+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${y} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${y} .xterm-dim { color: ${l.color.multiplyOpacity(D.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,O+=`${this._terminalSelector} .${y}.${p} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y}.${p} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[N,B]of D.ansi.entries())O+=`${this._terminalSelector} .${x}${N} { color: ${B.css}; }${this._terminalSelector} .${x}${N}.xterm-dim { color: ${l.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${E}${N} { background-color: ${B.css}; }`;O+=`${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(D.background).css}; }${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,O){for(let N=this._rowElements.length;N<=O;N++){const B=document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,O){this._refreshRowElements(D,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(p)}handleFocus(){this._rowContainer.classList.add(p),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,O,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,O,N),this.renderRows(0,this._bufferService.rows-1),!D||!O)return;const B=D[1]-this._bufferService.buffer.ydisp,$=O[1]-this._bufferService.buffer.ydisp,z=Math.max(B,0),L=Math.min($,this._bufferService.rows-1);if(z>=this._bufferService.rows||L<0)return;const A=document.createDocumentFragment();if(N){const j=D[0]>O[0];A.appendChild(this._createSelectionElement(z,j?O[0]:D[0],j?D[0]:O[0],L-z+1))}else{const j=B===z?D[0]:0,M=z===$?O[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(z,j,M));const H=L-z-1;if(A.appendChild(this._createSelectionElement(z+1,0,this._bufferService.cols,H)),z!==L){const V=$===L?O[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(L,0,V))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,O,N,B=1){const $=document.createElement("div");return $.style.height=B*this.dimensions.css.cell.height+"px",$.style.top=D*this.dimensions.css.cell.height+"px",$.style.left=O*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(N-O)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,O){const N=this._bufferService.buffer,B=N.ybase+N.y,$=Math.min(N.x,this._bufferService.cols-1),z=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let j=D;j<=O;j++){const M=j+N.ydisp,H=this._rowElements[j],V=N.lines.get(M);if(!H||!V)break;H.replaceChildren(...this._rowFactory.createRow(V,M,M===B,L,A,$,z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${_}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,O,N,B,$,z){N<0&&(D=0),B<0&&(O=0);const L=this._bufferService.rows-1;N=Math.max(Math.min(N,L),0),B=Math.max(Math.min(B,L),0),$=Math.min($,this._bufferService.cols);const A=this._bufferService.buffer,j=A.ybase+A.y,M=Math.min(A.x,$-1),H=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=N;K<=B;++K){const J=K+A.ydisp,T=this._rowElements[K],F=A.lines.get(J);if(!T||!F)break;T.replaceChildren(...this._rowFactory.createRow(F,J,J===j,V,X,M,H,this.dimensions.css.cell.width,this._widthCache,z?K===N?D:0:-1,z?(K===B?O:$)-1:-1))}}};n.DomRenderer=P=d([g(4,c.IInstantiationService),g(5,S.ICharSizeService),g(6,c.IOptionsService),g(7,c.IBufferService),g(8,S.ICoreBrowserService),g(9,S.IThemeService)],P)},3787:function(v,n,u){var d=this&&this.__decorate||function(x,E,p,b){var R,P=arguments.length,D=P<3?E:b===null?b=Object.getOwnPropertyDescriptor(E,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,E,p,b);else for(var O=x.length-1;O>=0;O--)(R=x[O])&&(D=(P<3?R(D):P>3?R(E,p,D):R(E,p))||D);return P>3&&D&&Object.defineProperty(E,p,D),D},g=this&&this.__param||function(x,E){return function(p,b){E(p,b,x)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=void 0;const f=u(2223),m=u(643),C=u(511),k=u(2585),S=u(8055),l=u(4725),a=u(4269),o=u(6171),c=u(3734);let _=n.DomRendererRowFactory=class{constructor(x,E,p,b,R,P,D){this._document=x,this._characterJoinerService=E,this._optionsService=p,this._coreBrowserService=b,this._coreService=R,this._decorationService=P,this._themeService=D,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,E,p){this._selectionStart=x,this._selectionEnd=E,this._columnSelectMode=p}createRow(x,E,p,b,R,P,D,O,N,B,$){const z=[],L=this._characterJoinerService.getJoinedCharacters(E),A=this._themeService.colors;let j,M=x.getNoBgTrimmedLength();p&&M<P+1&&(M=P+1);let H=0,V="",X=0,K=0,J=0,T=!1,F=0,U=!1,W=0;const Y=[],G=B!==-1&&$!==-1;for(let te=0;te<M;te++){x.loadCell(te,this._workCell);let le=this._workCell.getWidth();if(le===0)continue;let ge=!1,Tt=te,Z=this._workCell;if(L.length>0&&te===L[0][0]){ge=!0;const he=L.shift();Z=new a.JoinedCellData(this._workCell,x.translateToString(!0,he[0],he[1]),he[1]-he[0]),Tt=he[1]-1,le=Z.getWidth()}const Yr=this._isCellInSelection(te,E),Rn=p&&te===P,Dn=G&&te>=B&&te<=$;let Tn=!1;this._decorationService.forEachDecorationAtCell(te,E,void 0,he=>{Tn=!0});let ei=Z.getChars()||m.WHITESPACE_CELL_CHAR;if(ei===" "&&(Z.isUnderline()||Z.isOverline())&&(ei=" "),W=le*O-N.get(ei,Z.isBold(),Z.isItalic()),j){if(H&&(Yr&&U||!Yr&&!U&&Z.bg===X)&&(Yr&&U&&A.selectionForeground||Z.fg===K)&&Z.extended.ext===J&&Dn===T&&W===F&&!Rn&&!ge&&!Tn){V+=ei,H++;continue}H&&(j.textContent=V),j=this._document.createElement("span"),H=0,V=""}else j=this._document.createElement("span");if(X=Z.bg,K=Z.fg,J=Z.extended.ext,T=Dn,F=W,U=Yr,ge&&P>=te&&P<=Tt&&(P=te),!this._coreService.isCursorHidden&&Rn){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&Y.push("xterm-cursor-blink"),Y.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(Z.isBold()&&Y.push("xterm-bold"),Z.isItalic()&&Y.push("xterm-italic"),Z.isDim()&&Y.push("xterm-dim"),V=Z.isInvisible()?m.WHITESPACE_CELL_CHAR:Z.getChars()||m.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(Y.push(`xterm-underline-${Z.extended.underlineStyle}`),V===" "&&(V=" "),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())j.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let he=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&he<8&&(he+=8),j.style.textDecorationColor=A.ansi[he].css}Z.isOverline()&&(Y.push("xterm-overline"),V===" "&&(V=" ")),Z.isStrikethrough()&&Y.push("xterm-strikethrough"),Dn&&(j.style.textDecoration="underline");let Ge=Z.getFgColor(),Jr=Z.getFgColorMode(),ht=Z.getBgColor(),Zr=Z.getBgColorMode();const Pn=!!Z.isInverse();if(Pn){const he=Ge;Ge=ht,ht=he;const vd=Jr;Jr=Zr,Zr=vd}let Pt,jn,jt,es=!1;switch(this._decorationService.forEachDecorationAtCell(te,E,void 0,he=>{he.options.layer!=="top"&&es||(he.backgroundColorRGB&&(Zr=50331648,ht=he.backgroundColorRGB.rgba>>8&16777215,Pt=he.backgroundColorRGB),he.foregroundColorRGB&&(Jr=50331648,Ge=he.foregroundColorRGB.rgba>>8&16777215,jn=he.foregroundColorRGB),es=he.options.layer==="top")}),!es&&Yr&&(Pt=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,ht=Pt.rgba>>8&16777215,Zr=50331648,es=!0,A.selectionForeground&&(Jr=50331648,Ge=A.selectionForeground.rgba>>8&16777215,jn=A.selectionForeground)),es&&Y.push("xterm-decoration-top"),Zr){case 16777216:case 33554432:jt=A.ansi[ht],Y.push(`xterm-bg-${ht}`);break;case 50331648:jt=S.rgba.toColor(ht>>16,ht>>8&255,255&ht),this._addStyle(j,`background-color:#${y((ht>>>0).toString(16),"0",6)}`);break;default:Pn?(jt=A.foreground,Y.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):jt=A.background}switch(Pt||Z.isDim()&&(Pt=S.color.multiplyOpacity(jt,.5)),Jr){case 16777216:case 33554432:Z.isBold()&&Ge<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ge+=8),this._applyMinimumContrast(j,jt,A.ansi[Ge],Z,Pt,void 0)||Y.push(`xterm-fg-${Ge}`);break;case 50331648:const he=S.rgba.toColor(Ge>>16&255,Ge>>8&255,255&Ge);this._applyMinimumContrast(j,jt,he,Z,Pt,jn)||this._addStyle(j,`color:#${y(Ge.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(j,jt,A.foreground,Z,Pt,void 0)||Pn&&Y.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}Y.length&&(j.className=Y.join(" "),Y.length=0),Rn||ge||Tn?j.textContent=V:H++,W!==this.defaultSpacing&&(j.style.letterSpacing=`${W}px`),z.push(j),te=Tt}return j&&H&&(j.textContent=V),z}_applyMinimumContrast(x,E,p,b,R,P){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(b.getCode()))return!1;const D=this._getContrastCache(b);let O;if(R||P||(O=D.getColor(E.rgba,p.rgba)),O===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);O=S.color.ensureContrastRatio(R||E,P||p,N),D.setColor((R||E).rgba,(P||p).rgba,O??null)}return!!O&&(this._addStyle(x,`color:${O.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,E){x.setAttribute("style",`${x.getAttribute("style")||""}${E};`)}_isCellInSelection(x,E){const p=this._selectionStart,b=this._selectionEnd;return!(!p||!b)&&(this._columnSelectMode?p[0]<=b[0]?x>=p[0]&&E>=p[1]&&x<b[0]&&E<=b[1]:x<p[0]&&E>=p[1]&&x>=b[0]&&E<=b[1]:E>p[1]&&E<b[1]||p[1]===b[1]&&E===p[1]&&x>=p[0]&&x<b[0]||p[1]<b[1]&&E===b[1]&&x<b[0]||p[1]<b[1]&&E===p[1]&&x>=p[0])}};function y(x,E,p){for(;x.length<p;)x=E+x;return x}n.DomRendererRowFactory=_=d([g(1,l.ICharacterJoinerService),g(2,k.IOptionsService),g(3,l.ICoreBrowserService),g(4,k.ICoreService),g(5,k.IDecorationService),g(6,l.IThemeService)],_)},2550:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WidthCache=void 0,n.WidthCache=class{constructor(u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=u.createElement("span"),g=u.createElement("span");g.style.fontWeight="bold";const f=u.createElement("span");f.style.fontStyle="italic";const m=u.createElement("span");m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[d,g,f,m],this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(f),this._container.appendChild(m),u.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,d,g,f){u===this._font&&d===this._fontSize&&g===this._weight&&f===this._weightBold||(this._font=u,this._fontSize=d,this._weight=g,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${g}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${g}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(u,d,g){let f=0;if(!d&&!g&&u.length===1&&(f=u.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(u,0);let m=u;d&&(m+="B"),g&&(m+="I");let C=this._holey.get(m);if(C===void 0){let k=0;d&&(k|=1),g&&(k|=2),C=this._measure(u,k),this._holey.set(m,C)}return C}_measure(u,d){const g=this._measureElements[d];return g.textContent=u.repeat(32),g.offsetWidth/32}}},2223:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const d=u(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(v,n)=>{function u(d){return 57508<=d&&d<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},n.isPowerlineGlyph=u,n.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},n.excludeFromContrastRatioDemands=function(d){return u(d)||function(g){return 9472<=g&&g<=9631}(d)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,d=this.selectionEnd;return!(!u||!d)&&(u[1]>d[1]||u[1]===d[1]&&u[0]>d[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,n,u){var d=this&&this.__decorate||function(l,a,o,c){var _,y=arguments.length,x=y<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,a,o,c);else for(var E=l.length-1;E>=0;E--)(_=l[E])&&(x=(y<3?_(x):y>3?_(a,o,x):_(a,o))||x);return y>3&&x&&Object.defineProperty(a,o,x),x},g=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const f=u(2585),m=u(8460),C=u(844);let k=n.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,a,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(l,a,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};n.CharSizeService=k=d([g(2,f.IOptionsService)],k);class S{constructor(a,o,c){this._document=a,this._parentElement=o,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const a={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return a.width!==0&&a.height!==0&&(this._result.width=a.width/32,this._result.height=Math.ceil(a.height)),this._result}}},4269:function(v,n,u){var d=this&&this.__decorate||function(a,o,c,_){var y,x=arguments.length,E=x<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,o,c,_);else for(var p=a.length-1;p>=0;p--)(y=a[p])&&(E=(x<3?y(E):x>3?y(o,c,E):y(o,c))||E);return x>3&&E&&Object.defineProperty(o,c,E),E},g=this&&this.__param||function(a,o){return function(c,_){o(c,_,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const f=u(3734),m=u(643),C=u(511),k=u(2585);class S extends f.AttributeData{constructor(o,c,_){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=S;let l=n.CharacterJoinerService=class nd{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const _=[],y=c.translateToString(!0);let x=0,E=0,p=0,b=c.getFg(0),R=c.getBg(0);for(let P=0;P<c.getTrimmedLength();P++)if(c.loadCell(P,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==R){if(P-x>1){const D=this._getJoinedRanges(y,p,E,c,x);for(let O=0;O<D.length;O++)_.push(D[O])}x=P,p=E,b=this._workCell.fg,R=this._workCell.bg}E+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const P=this._getJoinedRanges(y,p,E,c,x);for(let D=0;D<P.length;D++)_.push(P[D])}return _}_getJoinedRanges(o,c,_,y,x){const E=o.substring(c,_);let p=[];try{p=this._characterJoiners[0].handler(E)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const R=this._characterJoiners[b].handler(E);for(let P=0;P<R.length;P++)nd._mergeRanges(p,R[P])}catch(R){console.error(R)}return this._stringRangesToCellRanges(p,y,x),p}_stringRangesToCellRanges(o,c,_){let y=0,x=!1,E=0,p=o[y];if(p){for(let b=_;b<this._bufferService.cols;b++){const R=c.getWidth(b),P=c.getString(b).length||m.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!x&&p[0]<=E&&(p[0]=b,x=!0),p[1]<=E){if(p[1]=b,p=o[++y],!p)break;p[0]<=E?(p[0]=b,x=!0):x=!1}E+=P}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let _=!1;for(let y=0;y<o.length;y++){const x=o[y];if(_){if(c[1]<=x[0])return o[y-1][1]=c[1],o;if(c[1]<=x[1])return o[y-1][1]=Math.max(c[1],x[1]),o.splice(y,1),o;o.splice(y,1),y--}else{if(c[1]<=x[0])return o.splice(y,0,c),o;if(c[1]<=x[1])return x[0]=Math.min(c[0],x[0]),o;c[0]<x[1]&&(x[0]=Math.min(c[0],x[0]),_=!0)}}return _?o[o.length-1][1]=c[1]:o.push(c),o}};n.CharacterJoinerService=l=d([g(0,k.IBufferService)],l)},5114:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(u,d){this._textarea=u,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,n,u){var d=this&&this.__decorate||function(k,S,l,a){var o,c=arguments.length,_=c<3?S:a===null?a=Object.getOwnPropertyDescriptor(S,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(k,S,l,a);else for(var y=k.length-1;y>=0;y--)(o=k[y])&&(_=(c<3?o(_):c>3?o(S,l,_):o(S,l))||_);return c>3&&_&&Object.defineProperty(S,l,_),_},g=this&&this.__param||function(k,S){return function(l,a){S(l,a,k)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const f=u(4725),m=u(9806);let C=n.MouseService=class{constructor(k,S){this._renderService=k,this._charSizeService=S}getCoords(k,S,l,a,o){return(0,m.getCoords)(window,k,S,l,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(k,S){const l=(0,m.getCoordsRelativeToElement)(window,k,S);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};n.MouseService=C=d([g(0,f.IRenderService),g(1,f.ICharSizeService)],C)},3230:function(v,n,u){var d=this&&this.__decorate||function(_,y,x,E){var p,b=arguments.length,R=b<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(_,y,x,E);else for(var P=_.length-1;P>=0;P--)(p=_[P])&&(R=(b<3?p(R):b>3?p(y,x,R):p(y,x))||R);return b>3&&R&&Object.defineProperty(y,x,R),R},g=this&&this.__param||function(_,y){return function(x,E){y(x,E,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const f=u(3656),m=u(6193),C=u(5596),k=u(4725),S=u(8460),l=u(844),a=u(7226),o=u(2585);let c=n.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(_,y,x,E,p,b,R,P){if(super(),this._rowCount=_,this._charSizeService=E,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new a.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new m.RenderDebouncer(R.window,(D,O)=>this._renderRows(D,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(R.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(p.onDecorationRegistered(()=>this._fullRefresh())),this.register(p.onDecorationRemoved(()=>this._fullRefresh())),this.register(x.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(x.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(R.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(P.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in R.window){const D=new R.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});D.observe(y),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(_){this._isPaused=_.isIntersecting===void 0?_.intersectionRatio===0:!_.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(_,y,x=!1){this._isPaused?this._needsFullRefresh=!0:(x||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(_,y,this._rowCount))}_renderRows(_,y){this._renderer.value&&(_=Math.min(_,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(_,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:_,end:y}),this._onRender.fire({start:_,end:y}),this._isNextRenderRedrawOnly=!0)}resize(_,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(_){this._renderer.value=_,this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(_){return this._renderDebouncer.addRefreshCallback(_)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var _,y;this._renderer.value&&((y=(_=this._renderer.value).clearTextureAtlas)===null||y===void 0||y.call(_),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(_,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(_,y)):this._renderer.value.handleResize(_,y),this._fullRefresh())}handleCharSizeChanged(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCharSizeChanged()}handleBlur(){var _;(_=this._renderer.value)===null||_===void 0||_.handleBlur()}handleFocus(){var _;(_=this._renderer.value)===null||_===void 0||_.handleFocus()}handleSelectionChanged(_,y,x){var E;this._selectionState.start=_,this._selectionState.end=y,this._selectionState.columnSelectMode=x,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(_,y,x)}handleCursorMove(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCursorMove()}clear(){var _;(_=this._renderer.value)===null||_===void 0||_.clear()}};n.RenderService=c=d([g(2,o.IOptionsService),g(3,k.ICharSizeService),g(4,o.IDecorationService),g(5,o.IBufferService),g(6,k.ICoreBrowserService),g(7,k.IThemeService)],c)},9312:function(v,n,u){var d=this&&this.__decorate||function(p,b,R,P){var D,O=arguments.length,N=O<3?b:P===null?P=Object.getOwnPropertyDescriptor(b,R):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(p,b,R,P);else for(var B=p.length-1;B>=0;B--)(D=p[B])&&(N=(O<3?D(N):O>3?D(b,R,N):D(b,R))||N);return O>3&&N&&Object.defineProperty(b,R,N),N},g=this&&this.__param||function(p,b){return function(R,P){b(R,P,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const f=u(9806),m=u(9504),C=u(456),k=u(4725),S=u(8460),l=u(844),a=u(6114),o=u(4841),c=u(511),_=u(2585),y=" ",x=new RegExp(y,"g");let E=n.SelectionService=class extends l.Disposable{constructor(p,b,R,P,D,O,N,B,$){super(),this._element=p,this._screenElement=b,this._linkifier=R,this._bufferService=P,this._coreService=D,this._mouseService=O,this._optionsService=N,this._renderService=B,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=z=>this._handleMouseMove(z),this._mouseUpListener=z=>this._handleMouseUp(z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(z=>this._handleTrim(z)),this.register(this._bufferService.buffers.onBufferActivate(z=>this._handleBufferActivate(z))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const p=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!p||!b||p[0]===b[0]&&p[1]===b[1])}get selectionText(){const p=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!p||!b)return"";const R=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(p[0]===b[0])return"";const D=p[0]<b[0]?p[0]:b[0],O=p[0]<b[0]?b[0]:p[0];for(let N=p[1];N<=b[1];N++){const B=R.translateBufferLineToString(N,!0,D,O);P.push(B)}}else{const D=p[1]===b[1]?b[0]:void 0;P.push(R.translateBufferLineToString(p[1],!0,p[0],D));for(let O=p[1]+1;O<=b[1]-1;O++){const N=R.lines.get(O),B=R.translateBufferLineToString(O,!0);N!=null&&N.isWrapped?P[P.length-1]+=B:P.push(B)}if(p[1]!==b[1]){const O=R.lines.get(b[1]),N=R.translateBufferLineToString(b[1],!0,0,b[0]);O&&O.isWrapped?P[P.length-1]+=N:P.push(N)}}return P.map(D=>D.replace(x," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(p){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&p&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(p){const b=this._getMouseBufferCoords(p),R=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(R&&P&&b)&&this._areCoordsInSelection(b,R,P)}isCellInSelection(p,b){const R=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!R||!P)&&this._areCoordsInSelection([p,b],R,P)}_areCoordsInSelection(p,b,R){return p[1]>b[1]&&p[1]<R[1]||b[1]===R[1]&&p[1]===b[1]&&p[0]>=b[0]&&p[0]<R[0]||b[1]<R[1]&&p[1]===R[1]&&p[0]<R[0]||b[1]<R[1]&&p[1]===b[1]&&p[0]>=b[0]}_selectWordAtCursor(p,b){var R,P;const D=(P=(R=this._linkifier.currentLink)===null||R===void 0?void 0:R.link)===null||P===void 0?void 0:P.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(p);return!!O&&(this._selectWordAt(O,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(p,b){this._model.clearSelection(),p=Math.max(p,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,p],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(p){this._model.handleTrim(p)&&this.refresh()}_getMouseBufferCoords(p){const b=this._mouseService.getCoords(p,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(p){let b=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,p,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=R?0:(b>R&&(b-=R),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(p){return a.isMac?p.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:p.shiftKey}handleMouseDown(p){if(this._mouseDownTimeStamp=p.timeStamp,(p.button!==2||!this.hasSelection)&&p.button===0){if(!this._enabled){if(!this.shouldForceSelection(p))return;p.stopPropagation()}p.preventDefault(),this._dragScrollAmount=0,this._enabled&&p.shiftKey?this._handleIncrementalClick(p):p.detail===1?this._handleSingleClick(p):p.detail===2?this._handleDoubleClick(p):p.detail===3&&this._handleTripleClick(p),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(p){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(p))}_handleSingleClick(p){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(p)?3:0,this._model.selectionStart=this._getMouseBufferCoords(p),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(p){this._selectWordAtCursor(p,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(p){const b=this._getMouseBufferCoords(p);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(p){return p.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(p){if(p.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(p),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(p),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const P=R.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const p=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(p.ydisp+this._bufferService.rows,p.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=p.ydisp),this.refresh()}}_handleMouseUp(p){const b=p.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&p.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(p,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const P=(0,m.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const p=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,R=!(!p||!b||p[0]===b[0]&&p[1]===b[1]);R?p&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&p[0]===this._oldSelectionStart[0]&&p[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(p,b,R)):this._oldHasSelection&&this._fireOnSelectionChange(p,b,R)}_fireOnSelectionChange(p,b,R){this._oldSelectionStart=p,this._oldSelectionEnd=b,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(p){this.clearSelection(),this._trimListener.dispose(),this._trimListener=p.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(p,b){let R=b;for(let P=0;b>=P;P++){const D=p.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:D>1&&b!==P&&(R+=D-1)}return R}setSelection(p,b,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[p,b],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(p){this._isClickInSelection(p)||(this._selectWordAtCursor(p,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(p,b,R=!0,P=!0){if(p[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,O=D.lines.get(p[1]);if(!O)return;const N=D.translateBufferLineToString(p[1],!1);let B=this._convertViewportColToCharacterIndex(O,p[0]),$=B;const z=p[0]-B;let L=0,A=0,j=0,M=0;if(N.charAt(B)===" "){for(;B>0&&N.charAt(B-1)===" ";)B--;for(;$<N.length&&N.charAt($+1)===" ";)$++}else{let X=p[0],K=p[0];O.getWidth(X)===0&&(L++,X--),O.getWidth(K)===2&&(A++,K++);const J=O.getString(K).length;for(J>1&&(M+=J-1,$+=J-1);X>0&&B>0&&!this._isCharWordSeparator(O.loadCell(X-1,this._workCell));){O.loadCell(X-1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,X--):T>1&&(j+=T-1,B-=T-1),B--,X--}for(;K<O.length&&$+1<N.length&&!this._isCharWordSeparator(O.loadCell(K+1,this._workCell));){O.loadCell(K+1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,K++):T>1&&(M+=T-1,$+=T-1),$++,K++}}$++;let H=B+z-L+j,V=Math.min(this._bufferService.cols,$-B+L+A-j-M);if(b||N.slice(B,$).trim()!==""){if(R&&H===0&&O.getCodePoint(0)!==32){const X=D.lines.get(p[1]-1);if(X&&O.isWrapped&&X.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,p[1]-1],!1,!0,!1);if(K){const J=this._bufferService.cols-K.start;H-=J,V+=J}}}if(P&&H+V===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const X=D.lines.get(p[1]+1);if(X!=null&&X.isWrapped&&X.getCodePoint(0)!==32){const K=this._getWordAt([0,p[1]+1],!1,!1,!0);K&&(V+=K.length)}}return{start:H,length:V}}}_selectWordAt(p,b){const R=this._getWordAt(p,b);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,p[1]--;this._model.selectionStart=[R.start,p[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(p){const b=this._getWordAt(p,!0);if(b){let R=p[1];for(;b.start<0;)b.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,R]}}_isCharWordSeparator(p){return p.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(p.getChars())>=0}_selectLineAt(p){const b=this._bufferService.buffer.getWrappedRangeForLine(p),R={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(R,this._bufferService.cols)}};n.SelectionService=E=d([g(3,_.IBufferService),g(4,_.ICoreService),g(5,k.IMouseService),g(6,_.IOptionsService),g(7,k.IRenderService),g(8,k.ICoreBrowserService)],E)},4725:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const d=u(8343);n.ICharSizeService=(0,d.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),n.IMouseService=(0,d.createDecorator)("MouseService"),n.IRenderService=(0,d.createDecorator)("RenderService"),n.ISelectionService=(0,d.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(v,n,u){var d=this&&this.__decorate||function(E,p,b,R){var P,D=arguments.length,O=D<3?p:R===null?R=Object.getOwnPropertyDescriptor(p,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,p,b,R);else for(var N=E.length-1;N>=0;N--)(P=E[N])&&(O=(D<3?P(O):D>3?P(p,b,O):P(p,b))||O);return D>3&&O&&Object.defineProperty(p,b,O),O},g=this&&this.__param||function(E,p){return function(b,R){p(b,R,E)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const f=u(7239),m=u(8055),C=u(8460),k=u(844),S=u(2585),l=m.css.toColor("#ffffff"),a=m.css.toColor("#000000"),o=m.css.toColor("#ffffff"),c=m.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],p=[0,95,135,175,215,255];for(let b=0;b<216;b++){const R=p[b/36%6|0],P=p[b/6%6|0],D=p[b%6];E.push({css:m.channels.toCss(R,P,D),rgba:m.channels.toRgba(R,P,D)})}for(let b=0;b<24;b++){const R=8+10*b;E.push({css:m.channels.toCss(R,R,R),rgba:m.channels.toRgba(R,R,R)})}return E})());let y=n.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:a,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:m.color.blend(a,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:m.color.blend(a,_),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const p=this._colors;if(p.foreground=x(E.foreground,l),p.background=x(E.background,a),p.cursor=x(E.cursor,o),p.cursorAccent=x(E.cursorAccent,c),p.selectionBackgroundTransparent=x(E.selectionBackground,_),p.selectionBackgroundOpaque=m.color.blend(p.background,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundTransparent=x(E.selectionInactiveBackground,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundOpaque=m.color.blend(p.background,p.selectionInactiveBackgroundTransparent),p.selectionForeground=E.selectionForeground?x(E.selectionForeground,m.NULL_COLOR):void 0,p.selectionForeground===m.NULL_COLOR&&(p.selectionForeground=void 0),m.color.isOpaque(p.selectionBackgroundTransparent)&&(p.selectionBackgroundTransparent=m.color.opacity(p.selectionBackgroundTransparent,.3)),m.color.isOpaque(p.selectionInactiveBackgroundTransparent)&&(p.selectionInactiveBackgroundTransparent=m.color.opacity(p.selectionInactiveBackgroundTransparent,.3)),p.ansi=n.DEFAULT_ANSI_COLORS.slice(),p.ansi[0]=x(E.black,n.DEFAULT_ANSI_COLORS[0]),p.ansi[1]=x(E.red,n.DEFAULT_ANSI_COLORS[1]),p.ansi[2]=x(E.green,n.DEFAULT_ANSI_COLORS[2]),p.ansi[3]=x(E.yellow,n.DEFAULT_ANSI_COLORS[3]),p.ansi[4]=x(E.blue,n.DEFAULT_ANSI_COLORS[4]),p.ansi[5]=x(E.magenta,n.DEFAULT_ANSI_COLORS[5]),p.ansi[6]=x(E.cyan,n.DEFAULT_ANSI_COLORS[6]),p.ansi[7]=x(E.white,n.DEFAULT_ANSI_COLORS[7]),p.ansi[8]=x(E.brightBlack,n.DEFAULT_ANSI_COLORS[8]),p.ansi[9]=x(E.brightRed,n.DEFAULT_ANSI_COLORS[9]),p.ansi[10]=x(E.brightGreen,n.DEFAULT_ANSI_COLORS[10]),p.ansi[11]=x(E.brightYellow,n.DEFAULT_ANSI_COLORS[11]),p.ansi[12]=x(E.brightBlue,n.DEFAULT_ANSI_COLORS[12]),p.ansi[13]=x(E.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),p.ansi[14]=x(E.brightCyan,n.DEFAULT_ANSI_COLORS[14]),p.ansi[15]=x(E.brightWhite,n.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const b=Math.min(p.ansi.length-16,E.extendedAnsi.length);for(let R=0;R<b;R++)p.ansi[R+16]=x(E.extendedAnsi[R],n.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let p=0;p<this._restoreColors.ansi.length;++p)this._colors.ansi[p]=this._restoreColors.ansi[p]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(E,p){if(E!==void 0)try{return m.css.toColor(E)}catch{}return p}n.ThemeService=y=d([g(0,S.IOptionsService)],y)},6349:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const d=u(8460),g=u(844);class f extends g.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const k=new Array(C);for(let S=0;S<Math.min(C,this.length);S++)k[S]=this._array[this._getCyclicIndex(S)];this._array=k,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let k=this._length;k<C;k++)this._array[k]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,k){this._array[this._getCyclicIndex(C)]=k}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,k,...S){if(k){for(let l=C;l<this._length-k;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+k)];this._length-=k,this.onDeleteEmitter.fire({index:C,amount:k})}for(let l=this._length-1;l>=C;l--)this._array[this._getCyclicIndex(l+S.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<S.length;l++)this._array[this._getCyclicIndex(C+l)]=S[l];if(S.length&&this.onInsertEmitter.fire({index:C,amount:S.length}),this._length+S.length>this._maxLength){const l=this._length+S.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=S.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,k,S){if(!(k<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let a=k-1;a>=0;a--)this.set(C+a+S,this.get(C+a));const l=C+k+S-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<k;l++)this.set(C+l+S,this.get(C+l))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}n.CircularList=f},1439:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function u(d,g=5){if(typeof d!="object")return d;const f=Array.isArray(d)?[]:{};for(const m in d)f[m]=g<=1?d[m]:d[m]&&u(d[m],g-1);return f}},8055:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const d=u(6114);let g=0,f=0,m=0,C=0;var k,S,l,a,o;function c(y){const x=y.toString(16);return x.length<2?"0"+x:x}function _(y,x){return y<x?(x+.05)/(y+.05):(y+.05)/(x+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(x,E,p,b){return b!==void 0?`#${c(x)}${c(E)}${c(p)}${c(b)}`:`#${c(x)}${c(E)}${c(p)}`},y.toRgba=function(x,E,p,b=255){return(x<<24|E<<16|p<<8|b)>>>0}}(k||(n.channels=k={})),function(y){function x(E,p){return C=Math.round(255*p),[g,f,m]=o.toChannels(E.rgba),{css:k.toCss(g,f,m,C),rgba:k.toRgba(g,f,m,C)}}y.blend=function(E,p){if(C=(255&p.rgba)/255,C===1)return{css:p.css,rgba:p.rgba};const b=p.rgba>>24&255,R=p.rgba>>16&255,P=p.rgba>>8&255,D=E.rgba>>24&255,O=E.rgba>>16&255,N=E.rgba>>8&255;return g=D+Math.round((b-D)*C),f=O+Math.round((R-O)*C),m=N+Math.round((P-N)*C),{css:k.toCss(g,f,m),rgba:k.toRgba(g,f,m)}},y.isOpaque=function(E){return(255&E.rgba)==255},y.ensureContrastRatio=function(E,p,b){const R=o.ensureContrastRatio(E.rgba,p.rgba,b);if(R)return o.toColor(R>>24&255,R>>16&255,R>>8&255)},y.opaque=function(E){const p=(255|E.rgba)>>>0;return[g,f,m]=o.toChannels(p),{css:k.toCss(g,f,m),rgba:p}},y.opacity=x,y.multiplyOpacity=function(E,p){return C=255&E.rgba,x(E,C*p/255)},y.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(S||(n.color=S={})),function(y){let x,E;if(!d.isNode){const p=document.createElement("canvas");p.width=1,p.height=1;const b=p.getContext("2d",{willReadFrequently:!0});b&&(x=b,x.globalCompositeOperation="copy",E=x.createLinearGradient(0,0,1,1))}y.toColor=function(p){if(p.match(/#[\da-f]{3,8}/i))switch(p.length){case 4:return g=parseInt(p.slice(1,2).repeat(2),16),f=parseInt(p.slice(2,3).repeat(2),16),m=parseInt(p.slice(3,4).repeat(2),16),o.toColor(g,f,m);case 5:return g=parseInt(p.slice(1,2).repeat(2),16),f=parseInt(p.slice(2,3).repeat(2),16),m=parseInt(p.slice(3,4).repeat(2),16),C=parseInt(p.slice(4,5).repeat(2),16),o.toColor(g,f,m,C);case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}const b=p.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return g=parseInt(b[1]),f=parseInt(b[2]),m=parseInt(b[3]),C=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),o.toColor(g,f,m,C);if(!x||!E)throw new Error("css.toColor: Unsupported css format");if(x.fillStyle=E,x.fillStyle=p,typeof x.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(x.fillRect(0,0,1,1),[g,f,m,C]=x.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:k.toRgba(g,f,m,C),css:p}}}(l||(n.css=l={})),function(y){function x(E,p,b){const R=E/255,P=p/255,D=b/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}y.relativeLuminance=function(E){return x(E>>16&255,E>>8&255,255&E)},y.relativeLuminance2=x}(a||(n.rgb=a={})),function(y){function x(p,b,R){const P=p>>24&255,D=p>>16&255,O=p>>8&255;let N=b>>24&255,B=b>>16&255,$=b>>8&255,z=_(a.relativeLuminance2(N,B,$),a.relativeLuminance2(P,D,O));for(;z<R&&(N>0||B>0||$>0);)N-=Math.max(0,Math.ceil(.1*N)),B-=Math.max(0,Math.ceil(.1*B)),$-=Math.max(0,Math.ceil(.1*$)),z=_(a.relativeLuminance2(N,B,$),a.relativeLuminance2(P,D,O));return(N<<24|B<<16|$<<8|255)>>>0}function E(p,b,R){const P=p>>24&255,D=p>>16&255,O=p>>8&255;let N=b>>24&255,B=b>>16&255,$=b>>8&255,z=_(a.relativeLuminance2(N,B,$),a.relativeLuminance2(P,D,O));for(;z<R&&(N<255||B<255||$<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),B=Math.min(255,B+Math.ceil(.1*(255-B))),$=Math.min(255,$+Math.ceil(.1*(255-$))),z=_(a.relativeLuminance2(N,B,$),a.relativeLuminance2(P,D,O));return(N<<24|B<<16|$<<8|255)>>>0}y.ensureContrastRatio=function(p,b,R){const P=a.relativeLuminance(p>>8),D=a.relativeLuminance(b>>8);if(_(P,D)<R){if(D<P){const B=x(p,b,R),$=_(P,a.relativeLuminance(B>>8));if($<R){const z=E(p,b,R);return $>_(P,a.relativeLuminance(z>>8))?B:z}return B}const O=E(p,b,R),N=_(P,a.relativeLuminance(O>>8));if(N<R){const B=x(p,b,R);return N>_(P,a.relativeLuminance(B>>8))?O:B}return O}},y.reduceLuminance=x,y.increaseLuminance=E,y.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},y.toColor=function(p,b,R,P){return{css:k.toCss(p,b,R,P),rgba:k.toRgba(p,b,R,P)}}}(o||(n.rgba=o={})),n.toPaddedHex=c,n.contrastRatio=_},8969:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const d=u(844),g=u(2585),f=u(4348),m=u(7866),C=u(744),k=u(7302),S=u(6975),l=u(8460),a=u(1753),o=u(1480),c=u(7994),_=u(9282),y=u(5435),x=u(5981),E=u(2660);let p=!1;class b extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(P=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(P.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(P){for(const D in P)this.optionsService.options[D]=P[D]}constructor(P){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new k.OptionsService(P)),this._instantiationService.setService(g.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(g.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(g.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(g.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(g.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(g.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(g.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(g.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((D,O)=>this._inputHandler.parse(D,O))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(P,D){this._writeBuffer.write(P,D)}writeSync(P,D){this._logService.logLevel<=g.LogLevelEnum.WARN&&!p&&(this._logService.warn("writeSync is unreliable and will be removed soon."),p=!0),this._writeBuffer.writeSync(P,D)}resize(P,D){isNaN(P)||isNaN(D)||(P=Math.max(P,C.MINIMUM_COLS),D=Math.max(D,C.MINIMUM_ROWS),this._bufferService.resize(P,D))}scroll(P,D=!1){this._bufferService.scroll(P,D)}scrollLines(P,D,O){this._bufferService.scrollLines(P,D,O)}scrollPages(P){this.scrollLines(P*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(P){const D=P-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(P,D){return this._inputHandler.registerEscHandler(P,D)}registerDcsHandler(P,D){return this._inputHandler.registerDcsHandler(P,D)}registerCsiHandler(P,D){return this._inputHandler.registerCsiHandler(P,D)}registerOscHandler(P,D){return this._inputHandler.registerOscHandler(P,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let P=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?P=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(P=!0),P?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const P=[];P.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const D of P)D.dispose()})}}}n.CoreTerminal=b},8460:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===u)return void this._listeners.splice(d,1)}}})),this._event}fire(u,d){const g=[];for(let f=0;f<this._listeners.length;f++)g.push(this._listeners[f]);for(let f=0;f<g.length;f++)g[f].call(void 0,u,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(u,d){return u(g=>d.fire(g))}},5435:function(v,n,u){var d=this&&this.__decorate||function(z,L,A,j){var M,H=arguments.length,V=H<3?L:j===null?j=Object.getOwnPropertyDescriptor(L,A):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(z,L,A,j);else for(var X=z.length-1;X>=0;X--)(M=z[X])&&(V=(H<3?M(V):H>3?M(L,A,V):M(L,A))||V);return H>3&&V&&Object.defineProperty(L,A,V),V},g=this&&this.__param||function(z,L){return function(A,j){L(A,j,z)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const f=u(2584),m=u(7116),C=u(2015),k=u(844),S=u(482),l=u(8437),a=u(8460),o=u(643),c=u(511),_=u(3734),y=u(2585),x=u(6242),E=u(6351),p=u(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function P(z,L){if(z>24)return L.setWinLines||!1;switch(z){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var D;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(n.WindowsOptionsReportType=D={}));let O=0;class N extends k.Disposable{getAttrData(){return this._curAttrData}constructor(L,A,j,M,H,V,X,K,J=new C.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=A,this._coreService=j,this._logService=M,this._optionsService=H,this._oscLinkService=V,this._coreMouseService=X,this._unicodeService=K,this._parser=J,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,F)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:F.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,F,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:F,data:U})}),this._parser.setDcsHandlerFallback((T,F,U)=>{F==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:F,payload:U})}),this._parser.setPrintHandler((T,F,U)=>this.print(T,F,U)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new x.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new x.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new x.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new x.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new x.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new x.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new x.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new x.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new x.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new x.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new x.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((T,F)=>this.requestStatusString(T,F)))}_preserveStack(L,A,j,M){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=j,this._parseStack.position=M}_logSlowResolvingAsync(L){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([L,new Promise((A,j)=>setTimeout(()=>j("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,A){let j,M=this._activeBuffer.x,H=this._activeBuffer.y,V=0;const X=this._parseStack.paused;if(X){if(j=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(j),j;M=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>R&&(V=this._parseStack.position+R)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,K=>String.fromCharCode(K)).join("")}"`),typeof L=="string"?L.split("").map(K=>K.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(L.length,R))),X||this._dirtyRowTracker.clearRange(),L.length>R)for(let K=V;K<L.length;K+=R){const J=K+R<L.length?K+R:L.length,T=typeof L=="string"?this._stringDecoder.decode(L.substring(K,J),this._parseBuffer):this._utf8Decoder.decode(L.subarray(K,J),this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,T))return this._preserveStack(M,H,T,K),this._logSlowResolvingAsync(j),j}else if(!X){const K=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,K))return this._preserveStack(M,H,K,0),this._logSlowResolvingAsync(j),j}this._activeBuffer.x===M&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,A,j){let M,H;const V=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,J=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,F=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&j-A>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,F.fg,F.bg,F.extended);for(let W=A;W<j;++W){if(M=L[W],H=this._unicodeService.wcwidth(M),M<127&&V){const Y=V[String.fromCharCode(M)];Y&&(M=Y.charCodeAt(0))}if(X&&this._onA11yChar.fire((0,S.stringFromCodePoint)(M)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=K){if(J){for(;this._activeBuffer.x<K;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,F.fg,F.bg,F.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,H===2)continue}if(T&&(U.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(F),F),U.getWidth(K-1)===2&&U.setCellFromCodePoint(K-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,F.fg,F.bg,F.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,M,H,F.fg,F.bg,F.extended),H>0)for(;--H;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,F.fg,F.bg,F.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,M):U.addCodepointToCell(this._activeBuffer.x-2,M)}j-A>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&j-A>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,F.fg,F.bg,F.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,A){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,A):this._parser.registerCsiHandler(L,j=>!P(j.params[0],this._optionsService.rawOptions.windowOptions)||A(j))}registerDcsHandler(L,A){return this._parser.registerDcsHandler(L,new E.DcsHandler(A))}registerEscHandler(L,A){return this._parser.registerEscHandler(L,A)}registerOscHandler(L,A){return this._parser.registerOscHandler(L,new x.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=L,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+A)}cursorUp(L){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const A=L.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=L.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=L.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const A=L.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,A,j,M=!1,H=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);V.replaceCells(A,j,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),M&&(V.isWrapped=!1)}_resetBufferLine(L,A=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);j&&(j.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),j.isWrapped=!1)}eraseInDisplay(L,A=!1){let j;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);j<this._bufferService.rows;j++)this._resetBufferLine(j,A);this._dirtyRowTracker.markDirty(j);break;case 1:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(j+1).isWrapped=!1);j--;)this._resetBufferLine(j,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(j=this._bufferService.rows,this._dirtyRowTracker.markDirty(j-1);j--;)this._resetBufferLine(j,A);this._dirtyRowTracker.markDirty(0);break;case 3:const M=this._activeBuffer.lines.length-this._bufferService.rows;M>0&&(this._activeBuffer.lines.trimStart(M),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-M,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-M,0),this._onScroll.fire(0))}return!0}eraseInLine(L,A=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let A=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y,M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-M+1;for(;A--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let A=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y;let M;for(M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,M=this._bufferService.rows-1+this._activeBuffer.ybase-M;A--;)this._activeBuffer.lines.splice(j,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let A=L.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let A=L.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);M.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);M.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);M.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);M.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const A=L.params[0]||1,j=new Uint32Array(A);for(let M=0;M<A;++M)j[M]=this._parser.precedingCodepoint;return this.print(j,0,j.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let A=0;A<L.length;A++)switch(L.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,A){const j=this._coreService.decPrivateModes,{activeProtocol:M,activeEncoding:H}=this._coreMouseService,V=this._coreService,{buffers:X,cols:K}=this._bufferService,{active:J,alt:T}=X,F=this._optionsService.rawOptions,U=te=>te?1:2,W=L.params[0];return Y=W,G=A?W===2?4:W===4?U(V.modes.insertMode):W===12?3:W===20?U(F.convertEol):0:W===1?U(j.applicationCursorKeys):W===3?F.windowOptions.setWinLines?K===80?2:K===132?1:0:0:W===6?U(j.origin):W===7?U(j.wraparound):W===8?3:W===9?U(M==="X10"):W===12?U(F.cursorBlink):W===25?U(!V.isCursorHidden):W===45?U(j.reverseWraparound):W===66?U(j.applicationKeypad):W===67?4:W===1e3?U(M==="VT200"):W===1002?U(M==="DRAG"):W===1003?U(M==="ANY"):W===1004?U(j.sendFocus):W===1005?4:W===1006?U(H==="SGR"):W===1015?4:W===1016?U(H==="SGR_PIXELS"):W===1048?1:W===47||W===1047||W===1049?U(J===T):W===2004?U(j.bracketedPasteMode):0,V.triggerDataEvent(`${f.C0.ESC}[${A?"":"?"}${Y};${G}$y`),!0;var Y,G}_updateAttrColor(L,A,j,M,H){return A===2?(L|=50331648,L&=-16777216,L|=_.AttributeData.fromColorRGB([j,M,H])):A===5&&(L&=-50331904,L|=33554432|255&j),L}_extractColor(L,A,j){const M=[0,0,-1,0,0,0];let H=0,V=0;do{if(M[V+H]=L.params[A+V],L.hasSubParams(A+V)){const X=L.getSubParams(A+V);let K=0;do M[1]===5&&(H=1),M[V+K+1+H]=X[K];while(++K<X.length&&K+V+1+H<M.length);break}if(M[1]===5&&V+H>=2||M[1]===2&&V+H>=5)break;M[1]&&(H=1)}while(++V+A<L.length&&V+H<M.length);for(let X=2;X<M.length;++X)M[X]===-1&&(M[X]=0);switch(M[0]){case 38:j.fg=this._updateAttrColor(j.fg,M[1],M[3],M[4],M[5]);break;case 48:j.bg=this._updateAttrColor(j.bg,M[1],M[3],M[4],M[5]);break;case 58:j.extended=j.extended.clone(),j.extended.underlineColor=this._updateAttrColor(j.extended.underlineColor,M[1],M[3],M[4],M[5])}return V}_processUnderline(L,A){A.extended=A.extended.clone(),(!~L||L>5)&&(L=1),A.extended.underlineStyle=L,A.fg|=268435456,L===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(L){L.fg=l.DEFAULT_ATTR_DATA.fg,L.bg=l.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=L.length;let j;const M=this._curAttrData;for(let H=0;H<A;H++)j=L.params[H],j>=30&&j<=37?(M.fg&=-50331904,M.fg|=16777216|j-30):j>=40&&j<=47?(M.bg&=-50331904,M.bg|=16777216|j-40):j>=90&&j<=97?(M.fg&=-50331904,M.fg|=16777224|j-90):j>=100&&j<=107?(M.bg&=-50331904,M.bg|=16777224|j-100):j===0?this._processSGR0(M):j===1?M.fg|=134217728:j===3?M.bg|=67108864:j===4?(M.fg|=268435456,this._processUnderline(L.hasSubParams(H)?L.getSubParams(H)[0]:1,M)):j===5?M.fg|=536870912:j===7?M.fg|=67108864:j===8?M.fg|=1073741824:j===9?M.fg|=2147483648:j===2?M.bg|=134217728:j===21?this._processUnderline(2,M):j===22?(M.fg&=-134217729,M.bg&=-134217729):j===23?M.bg&=-67108865:j===24?(M.fg&=-268435457,this._processUnderline(0,M)):j===25?M.fg&=-536870913:j===27?M.fg&=-67108865:j===28?M.fg&=-1073741825:j===29?M.fg&=2147483647:j===39?(M.fg&=-67108864,M.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):j===49?(M.bg&=-67108864,M.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):j===38||j===48||j===58?H+=this._extractColor(L,H,M):j===53?M.bg|=1073741824:j===55?M.bg&=-1073741825:j===59?(M.extended=M.extended.clone(),M.extended.underlineColor=-1,M.updateExtended()):j===100?(M.fg&=-67108864,M.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,M.bg&=-67108864,M.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",j);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${A};${j}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const A=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${A};${j}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const A=L.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const j=A%2==1;return this._optionsService.options.cursorBlink=j,!0}setScrollRegion(L){const A=L.params[0]||1;let j;return(L.length<2||(j=L.params[1])>this._bufferService.rows||j===0)&&(j=this._bufferService.rows),j>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=j-1,this._setCursor(0,0)),!0}windowOptions(L){if(!P(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const A=[],j=L.split(";");for(;j.length>1;){const M=j.shift(),H=j.shift();if(/^\d+$/.exec(M)){const V=parseInt(M);if($(V))if(H==="?")A.push({type:0,index:V});else{const X=(0,p.parseColor)(H);X&&A.push({type:1,index:V,color:X})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(L){const A=L.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(L,A){this._getCurrentLinkId()&&this._finishHyperlink();const j=L.split(":");let M;const H=j.findIndex(V=>V.startsWith("id="));return H!==-1&&(M=j[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:M,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,A){const j=L.split(";");for(let M=0;M<j.length&&!(A>=this._specialColors.length);++M,++A)if(j[M]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const H=(0,p.parseColor)(j[M]);H&&this._onColor.fire([{type:1,index:this._specialColors[A],color:H}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const A=[],j=L.split(";");for(let M=0;M<j.length;++M)if(/^\d+$/.exec(j[M])){const H=parseInt(j[M]);$(H)&&A.push({type:2,index:H})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(b[L[0]],m.CHARSETS[L[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new c.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const j=this._activeBuffer.ybase+this._activeBuffer.y+A,M=this._activeBuffer.lines.get(j);M&&(M.fill(L),M.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,A){const j=this._bufferService.buffer,M=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${H}${f.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${j.scrollTop+1};${j.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[M.cursorStyle]-(M.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,A){this._dirtyRowTracker.markRangeDirty(L,A)}}n.InputHandler=N;let B=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,L){z>L&&(O=z,z=L,L=O),z<this.start&&(this.start=z),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(z){return 0<=z&&z<256}B=d([g(0,y.IBufferService)],B)},844:(v,n)=>{function u(d){for(const g of d)g.dispose();d.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const g=this._disposables.indexOf(d);g!==-1&&this._disposables.splice(g,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var g;this._isDisposed||d===this._value||((g=this._value)===null||g===void 0||g.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},n.toDisposable=function(d){return{dispose:d}},n.disposeArray=u,n.getDisposeArrayDisposable=function(d){return{dispose:()=>u(d)}}},1505:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(g,f,m){this._data[g]||(this._data[g]={}),this._data[g][f]=m}get(g,f){return this._data[g]?this._data[g][f]:void 0}clear(){this._data={}}}n.TwoKeyMap=u,n.FourKeyMap=class{constructor(){this._data=new u}set(d,g,f,m,C){this._data.get(d,g)||this._data.set(d,g,new u),this._data.get(d,g).set(f,m,C)}get(d,g,f,m){var C;return(C=this._data.get(d,g))===null||C===void 0?void 0:C.get(f,m)}clear(){this._data.clear()}}},6114:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const u=n.isNode?"node":navigator.userAgent,d=n.isNode?"node":navigator.platform;n.isFirefox=u.includes("Firefox"),n.isLegacyEdge=u.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(u),n.getSafariVersion=function(){if(!n.isSafari)return 0;const g=u.match(/Version\/(\d+)/);return g===null||g.length<2?0:parseInt(g[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),n.isIpad=d==="iPad",n.isIphone=d==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),n.isLinux=d.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(u)},6106:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let u=0;n.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(u=this._search(this._getKey(d)),this._array.splice(u,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const g=this._getKey(d);if(g===void 0||(u=this._search(g),u===-1)||this._getKey(this._array[u])!==g)return!1;do if(this._array[u]===d)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===g);return!1}*getKeyIterator(d){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===d)}forEachByKey(d,g){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do g(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===d)}values(){return[...this._array].values()}_search(d){let g=0,f=this._array.length-1;for(;f>=g;){let m=g+f>>1;const C=this._getKey(this._array[m]);if(C>d)f=m-1;else{if(!(C<d)){for(;m>0&&this._getKey(this._array[m-1])===d;)m--;return m}g=m+1}}return g}}},7226:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const d=u(6114);class g{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let k=0,S=0,l=C.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),S=Math.max(k,S),a=C.timeRemaining(),1.5*S>a)return l-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-k))}ms`),void this._start();l=a}this.clear()}}class f extends g{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const k=Date.now()+C;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}n.PriorityTaskQueue=f,n.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends g{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:f,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const d=u(643);n.updateWindowsModeWrappedState=function(g){const f=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1),m=f==null?void 0:f.get(g.cols-1),C=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);C&&m&&(C.isWrapped=m[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&m[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new u;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=u;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,m=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=m}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=d},9092:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const d=u(6349),g=u(7226),f=u(3734),m=u(8437),C=u(4634),k=u(511),S=u(643),l=u(4863),a=u(7116);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(o,c,_){this._hasScrollback=o,this._optionsService=c,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new g.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new m.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=m.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const _=this.getNullCell(m.DEFAULT_ATTR_DATA);let y=0;const x=this._getCorrectBufferLength(c);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<o)for(let p=0;p<this.lines.length;p++)y+=+this.lines.get(p).resize(o,_);let E=0;if(this._rows<c)for(let p=this._rows;p<c;p++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(o,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(o,_)));else for(let p=this._rows;p>c;p--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const p=this.lines.length-x;p>0&&(this.lines.trimStart(p),this.ybase=Math.max(this.ybase-p,0),this.ydisp=Math.max(this.ydisp-p,0),this.savedY=Math.max(this.savedY-p,0)),this.lines.maxLength=x}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let E=0;E<this.lines.length;E++)y+=+this.lines.get(E).resize(o,_);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const _=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(_.length>0){const y=(0,C.reflowLargerCreateNewLayout)(this.lines,_);(0,C.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(o,c,y.countRemoved)}}_reflowLargerAdjustViewport(o,c,_){const y=this.getNullCell(m.DEFAULT_ATTR_DATA);let x=_;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new m.BufferLine(o,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(o,c){const _=this.getNullCell(m.DEFAULT_ATTR_DATA),y=[];let x=0;for(let E=this.lines.length-1;E>=0;E--){let p=this.lines.get(E);if(!p||!p.isWrapped&&p.getTrimmedLength()<=o)continue;const b=[p];for(;p.isWrapped&&E>0;)p=this.lines.get(--E),b.unshift(p);const R=this.ybase+this.y;if(R>=E&&R<E+b.length)continue;const P=b[b.length-1].getTrimmedLength(),D=(0,C.reflowSmallerGetNewLineLengths)(b,this._cols,o),O=D.length-b.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const B=[];for(let M=0;M<O;M++){const H=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);B.push(H)}B.length>0&&(y.push({start:E+b.length+x,newLines:B}),x+=B.length),b.push(...B);let $=D.length-1,z=D[$];z===0&&($--,z=D[$]);let L=b.length-O-1,A=P;for(;L>=0;){const M=Math.min(A,z);if(b[$]===void 0)break;if(b[$].copyCellsFrom(b[L],A-M,z-M,M,!0),z-=M,z===0&&($--,z=D[$]),A-=M,A===0){L--;const H=Math.max(L,0);A=(0,C.getWrappedLineTrimmedLength)(b,H,this._cols)}}for(let M=0;M<b.length;M++)D[M]<o&&b[M].setCell(D[M],_);let j=O-N;for(;j-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+c-1)}if(y.length>0){const E=[],p=[];for(let $=0;$<this.lines.length;$++)p.push(this.lines.get($));const b=this.lines.length;let R=b-1,P=0,D=y[P];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let O=0;for(let $=Math.min(this.lines.maxLength-1,b+x-1);$>=0;$--)if(D&&D.start>R+O){for(let z=D.newLines.length-1;z>=0;z--)this.lines.set($--,D.newLines[z]);$++,E.push({index:R+1,amount:D.newLines.length}),O+=D.newLines.length,D=y[++P]}else this.lines.set($,p[R--]);let N=0;for(let $=E.length-1;$>=0;$--)E[$].index+=N,this.lines.onInsertEmitter.fire(E[$]),N+=E[$].amount;const B=Math.max(0,b+x-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}}translateBufferLineToString(o,c,_=0,y){const x=this.lines.get(o);return x?x.translateToString(c,_,y):""}getWrappedRangeForLine(o){let c=o,_=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:c,last:_}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new l.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim(_=>{c.line-=_,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(_=>{c.line>=_.index&&(c.line+=_.amount)})),c.register(this.lines.onDelete(_=>{c.line>=_.index&&c.line<_.index+_.amount&&c.dispose(),c.line>_.index&&(c.line-=_.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const d=u(3734),g=u(511),f=u(643),m=u(482);n.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class k{constructor(l,a,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const c=a||g.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let _=0;_<l;++_)this.setCell(_,c);this.length=l}get(l){const a=this._data[3*l+0],o=2097151&a;return[this._data[3*l+1],2097152&a?this._combined[l]:o?(0,m.stringFromCodePoint)(o):"",a>>22,2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):o]}set(l,a){this._data[3*l+1]=a[f.CHAR_DATA_ATTR_INDEX],a[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=a[1],this._data[3*l+0]=2097152|l|a[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=a[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&a}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l]:2097151&a?(0,m.stringFromCodePoint)(2097151&a):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,a){return C=3*l,a.content=this._data[C+0],a.fg=this._data[C+1],a.bg=this._data[C+2],2097152&a.content&&(a.combinedData=this._combined[l]),268435456&a.bg&&(a.extended=this._extendedAttrs[l]),a}setCell(l,a){2097152&a.content&&(this._combined[l]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[l]=a.extended),this._data[3*l+0]=a.content,this._data[3*l+1]=a.fg,this._data[3*l+2]=a.bg}setCellFromCodePoint(l,a,o,c,_,y){268435456&_&&(this._extendedAttrs[l]=y),this._data[3*l+0]=a|o<<22,this._data[3*l+1]=c,this._data[3*l+2]=_}addCodepointToCell(l,a){let o=this._data[3*l+0];2097152&o?this._combined[l]+=(0,m.stringFromCodePoint)(a):(2097151&o?(this._combined[l]=(0,m.stringFromCodePoint)(2097151&o)+(0,m.stringFromCodePoint)(a),o&=-2097152,o|=2097152):o=a|4194304,this._data[3*l+0]=o)}insertCells(l,a,o,c){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),a<this.length-l){const _=new g.CellData;for(let y=this.length-l-a-1;y>=0;--y)this.setCell(l+a+y,this.loadCell(l+y,_));for(let y=0;y<a;++y)this.setCell(l+y,o)}else for(let _=l;_<this.length;++_)this.setCell(_,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs)}deleteCells(l,a,o,c){if(l%=this.length,a<this.length-l){const _=new g.CellData;for(let y=0;y<this.length-l-a;++y)this.setCell(l+y,this.loadCell(l+a+y,_));for(let y=this.length-a;y<this.length;++y)this.setCell(y,o)}else for(let _=l;_<this.length;++_)this.setCell(_,o);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs)}replaceCells(l,a,o,c,_=!1){if(_)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodePoint(a,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs);l<a&&l<this.length;)this.isProtected(l)||this.setCell(l,o),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new d.ExtendedAttrs);l<a&&l<this.length;)this.setCell(l++,o)}resize(l,a){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<l;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let y=0;y<c.length;y++){const x=parseInt(c[y],10);x>=l&&delete this._combined[x]}const _=Object.keys(this._extendedAttrs);for(let y=0;y<_.length;y++){const x=parseInt(_[y],10);x>=l&&delete this._extendedAttrs[x]}}return this.length=l,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,a=!1){if(a)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,l);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const a in l._combined)this._combined[a]=l._combined[a];this._extendedAttrs={};for(const a in l._extendedAttrs)this._extendedAttrs[a]=l._extendedAttrs[a];this.isWrapped=l.isWrapped}clone(){const l=new k(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const a in this._combined)l._combined[a]=this._combined[a];for(const a in this._extendedAttrs)l._extendedAttrs[a]=this._extendedAttrs[a];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,a,o,c,_){const y=l._data;if(_)for(let E=c-1;E>=0;E--){for(let p=0;p<3;p++)this._data[3*(o+E)+p]=y[3*(a+E)+p];268435456&y[3*(a+E)+2]&&(this._extendedAttrs[o+E]=l._extendedAttrs[a+E])}else for(let E=0;E<c;E++){for(let p=0;p<3;p++)this._data[3*(o+E)+p]=y[3*(a+E)+p];268435456&y[3*(a+E)+2]&&(this._extendedAttrs[o+E]=l._extendedAttrs[a+E])}const x=Object.keys(l._combined);for(let E=0;E<x.length;E++){const p=parseInt(x[E],10);p>=a&&(this._combined[p-a+o]=l._combined[p])}}translateToString(l=!1,a=0,o=this.length){l&&(o=Math.min(o,this.getTrimmedLength()));let c="";for(;a<o;){const _=this._data[3*a+0],y=2097151&_;c+=2097152&_?this._combined[a]:y?(0,m.stringFromCodePoint)(y):f.WHITESPACE_CELL_CHAR,a+=_>>22||1}return c}}n.BufferLine=k},4841:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(u,d){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return d*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(v,n)=>{function u(d,g,f){if(g===d.length-1)return d[g].getTrimmedLength();const m=!d[g].hasContent(f-1)&&d[g].getWidth(f-1)===1,C=d[g+1].getWidth(0)===2;return m&&C?f-1:f}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(d,g,f,m,C){const k=[];for(let S=0;S<d.length-1;S++){let l=S,a=d.get(++l);if(!a.isWrapped)continue;const o=[d.get(S)];for(;l<d.length&&a.isWrapped;)o.push(a),a=d.get(++l);if(m>=S&&m<l){S+=o.length-1;continue}let c=0,_=u(o,c,g),y=1,x=0;for(;y<o.length;){const p=u(o,y,g),b=p-x,R=f-_,P=Math.min(b,R);o[c].copyCellsFrom(o[y],x,_,P,!1),_+=P,_===f&&(c++,_=0),x+=P,x===p&&(y++,x=0),_===0&&c!==0&&o[c-1].getWidth(f-1)===2&&(o[c].copyCellsFrom(o[c-1],f-1,_++,1,!1),o[c-1].setCell(f-1,C))}o[c].replaceCells(_,f,C);let E=0;for(let p=o.length-1;p>0&&(p>c||o[p].getTrimmedLength()===0);p--)E++;E>0&&(k.push(S+o.length-E),k.push(E)),S+=o.length-1}return k},n.reflowLargerCreateNewLayout=function(d,g){const f=[];let m=0,C=g[m],k=0;for(let S=0;S<d.length;S++)if(C===S){const l=g[++m];d.onDeleteEmitter.fire({index:S-k,amount:l}),S+=l-1,k+=l,C=g[++m]}else f.push(S);return{layout:f,countRemoved:k}},n.reflowLargerApplyNewLayout=function(d,g){const f=[];for(let m=0;m<g.length;m++)f.push(d.get(g[m]));for(let m=0;m<f.length;m++)d.set(m,f[m]);d.length=g.length},n.reflowSmallerGetNewLineLengths=function(d,g,f){const m=[],C=d.map((a,o)=>u(d,o,g)).reduce((a,o)=>a+o);let k=0,S=0,l=0;for(;l<C;){if(C-l<f){m.push(C-l);break}k+=f;const a=u(d,S,g);k>a&&(k-=a,S++);const o=d[S].getWidth(k-1)===2;o&&k--;const c=o?f-1:f;m.push(c),l+=c}return m},n.getWrappedLineTrimmedLength=u},5295:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const d=u(8460),g=u(844),f=u(9092);class m extends g.Disposable{constructor(k,S){super(),this._optionsService=k,this._bufferService=S,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,S){this._normal.resize(k,S),this._alt.resize(k,S),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}n.BufferSet=m},511:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const d=u(482),g=u(643),f=u(3734);class m extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const S=new m;return S.setFromCharData(k),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[g.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(k[g.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(k[g.CHAR_DATA_CHAR_INDEX].length===2){const l=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const a=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(l-55296)+a-56320+65536|k[g.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[g.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=k[g.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[g.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=m},643:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const d=u(8460),g=u(844);class f{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,g.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}n.Marker=f,f._nextId=1},7116:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},n.CHARSETS.A={"#":"£"},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},n.CHARSETS.C=n.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},n.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},n.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},n.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},n.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},n.CHARSETS.E=n.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},n.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},n.CHARSETS.H=n.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},n.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(v,n)=>{var u,d,g;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(u||(n.C0=u={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(d||(n.C1=d={})),function(f){f.ST=`${u.ESC}\\`}(g||(n.C1_ESCAPED=g={}))},7399:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const d=u(2584),g={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(f,m,C,k){const S={type:0,cancel:!1,key:void 0},l=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?S.key=m?d.C0.ESC+"OA":d.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?S.key=m?d.C0.ESC+"OD":d.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?S.key=m?d.C0.ESC+"OC":d.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(S.key=m?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(f.altKey){S.key=d.C0.ESC+d.C0.DEL;break}S.key=d.C0.DEL;break;case 9:if(f.shiftKey){S.key=d.C0.ESC+"[Z";break}S.key=d.C0.HT,S.cancel=!0;break;case 13:S.key=f.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,S.cancel=!0;break;case 27:S.key=d.C0.ESC,f.altKey&&(S.key=d.C0.ESC+d.C0.ESC),S.cancel=!0;break;case 37:if(f.metaKey)break;l?(S.key=d.C0.ESC+"[1;"+(l+1)+"D",S.key===d.C0.ESC+"[1;3D"&&(S.key=d.C0.ESC+(C?"b":"[1;5D"))):S.key=m?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(f.metaKey)break;l?(S.key=d.C0.ESC+"[1;"+(l+1)+"C",S.key===d.C0.ESC+"[1;3C"&&(S.key=d.C0.ESC+(C?"f":"[1;5C"))):S.key=m?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(f.metaKey)break;l?(S.key=d.C0.ESC+"[1;"+(l+1)+"A",C||S.key!==d.C0.ESC+"[1;3A"||(S.key=d.C0.ESC+"[1;5A")):S.key=m?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(f.metaKey)break;l?(S.key=d.C0.ESC+"[1;"+(l+1)+"B",C||S.key!==d.C0.ESC+"[1;3B"||(S.key=d.C0.ESC+"[1;5B")):S.key=m?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(S.key=d.C0.ESC+"[2~");break;case 46:S.key=l?d.C0.ESC+"[3;"+(l+1)+"~":d.C0.ESC+"[3~";break;case 36:S.key=l?d.C0.ESC+"[1;"+(l+1)+"H":m?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:S.key=l?d.C0.ESC+"[1;"+(l+1)+"F":m?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:f.shiftKey?S.type=2:f.ctrlKey?S.key=d.C0.ESC+"[5;"+(l+1)+"~":S.key=d.C0.ESC+"[5~";break;case 34:f.shiftKey?S.type=3:f.ctrlKey?S.key=d.C0.ESC+"[6;"+(l+1)+"~":S.key=d.C0.ESC+"[6~";break;case 112:S.key=l?d.C0.ESC+"[1;"+(l+1)+"P":d.C0.ESC+"OP";break;case 113:S.key=l?d.C0.ESC+"[1;"+(l+1)+"Q":d.C0.ESC+"OQ";break;case 114:S.key=l?d.C0.ESC+"[1;"+(l+1)+"R":d.C0.ESC+"OR";break;case 115:S.key=l?d.C0.ESC+"[1;"+(l+1)+"S":d.C0.ESC+"OS";break;case 116:S.key=l?d.C0.ESC+"[15;"+(l+1)+"~":d.C0.ESC+"[15~";break;case 117:S.key=l?d.C0.ESC+"[17;"+(l+1)+"~":d.C0.ESC+"[17~";break;case 118:S.key=l?d.C0.ESC+"[18;"+(l+1)+"~":d.C0.ESC+"[18~";break;case 119:S.key=l?d.C0.ESC+"[19;"+(l+1)+"~":d.C0.ESC+"[19~";break;case 120:S.key=l?d.C0.ESC+"[20;"+(l+1)+"~":d.C0.ESC+"[20~";break;case 121:S.key=l?d.C0.ESC+"[21;"+(l+1)+"~":d.C0.ESC+"[21~";break;case 122:S.key=l?d.C0.ESC+"[23;"+(l+1)+"~":d.C0.ESC+"[23~";break;case 123:S.key=l?d.C0.ESC+"[24;"+(l+1)+"~":d.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(C&&!k||!f.altKey||f.metaKey)!C||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?S.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(S.key=d.C0.US),f.key==="@"&&(S.key=d.C0.NUL)):f.keyCode===65&&(S.type=1);else{const a=g[f.keyCode],o=a==null?void 0:a[f.shiftKey?1:0];if(o)S.key=d.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){const c=f.ctrlKey?f.keyCode-64:f.keyCode+32;let _=String.fromCharCode(c);f.shiftKey&&(_=_.toUpperCase()),S.key=d.C0.ESC+_}else if(f.keyCode===32)S.key=d.C0.ESC+(f.ctrlKey?d.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let c=f.code.slice(3,4);f.shiftKey||(c=c.toLowerCase()),S.key=d.C0.ESC+c,S.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?S.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?S.key=d.C0.NUL:f.keyCode>=51&&f.keyCode<=55?S.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?S.key=d.C0.DEL:f.keyCode===219?S.key=d.C0.ESC:f.keyCode===220?S.key=d.C0.FS:f.keyCode===221&&(S.key=d.C0.GS)}return S}},482:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},n.utf32ToString=function(u,d=0,g=u.length){let f="";for(let m=d;m<g;++m){let C=u[m];C>65535?(C-=65536,f+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):f+=String.fromCharCode(C)}return f},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,d){const g=u.length;if(!g)return 0;let f=0,m=0;if(this._interim){const C=u.charCodeAt(m++);56320<=C&&C<=57343?d[f++]=1024*(this._interim-55296)+C-56320+65536:(d[f++]=this._interim,d[f++]=C),this._interim=0}for(let C=m;C<g;++C){const k=u.charCodeAt(C);if(55296<=k&&k<=56319){if(++C>=g)return this._interim=k,f;const S=u.charCodeAt(C);56320<=S&&S<=57343?d[f++]=1024*(k-55296)+S-56320+65536:(d[f++]=k,d[f++]=S)}else k!==65279&&(d[f++]=k)}return f}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,d){const g=u.length;if(!g)return 0;let f,m,C,k,S=0,l=0,a=0;if(this.interim[0]){let _=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let x,E=0;for(;(x=63&this.interim[++E])&&E<4;)y<<=6,y|=x;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=p-E;for(;a<b;){if(a>=g)return 0;if(x=u[a++],(192&x)!=128){a--,_=!0;break}this.interim[E++]=x,y<<=6,y|=63&x}_||(p===2?y<128?a--:d[S++]=y:p===3?y<2048||y>=55296&&y<=57343||y===65279||(d[S++]=y):y<65536||y>1114111||(d[S++]=y)),this.interim.fill(0)}const o=g-4;let c=a;for(;c<g;){for(;!(!(c<o)||128&(f=u[c])||128&(m=u[c+1])||128&(C=u[c+2])||128&(k=u[c+3]));)d[S++]=f,d[S++]=m,d[S++]=C,d[S++]=k,c+=4;if(f=u[c++],f<128)d[S++]=f;else if((224&f)==192){if(c>=g)return this.interim[0]=f,S;if(m=u[c++],(192&m)!=128){c--;continue}if(l=(31&f)<<6|63&m,l<128){c--;continue}d[S++]=l}else if((240&f)==224){if(c>=g)return this.interim[0]=f,S;if(m=u[c++],(192&m)!=128){c--;continue}if(c>=g)return this.interim[0]=f,this.interim[1]=m,S;if(C=u[c++],(192&C)!=128){c--;continue}if(l=(15&f)<<12|(63&m)<<6|63&C,l<2048||l>=55296&&l<=57343||l===65279)continue;d[S++]=l}else if((248&f)==240){if(c>=g)return this.interim[0]=f,S;if(m=u[c++],(192&m)!=128){c--;continue}if(c>=g)return this.interim[0]=f,this.interim[1]=m,S;if(C=u[c++],(192&C)!=128){c--;continue}if(c>=g)return this.interim[0]=f,this.interim[1]=m,this.interim[2]=C,S;if(k=u[c++],(192&k)!=128){c--;continue}if(l=(7&f)<<18|(63&m)<<12|(63&C)<<6|63&k,l<65536||l>1114111)continue;d[S++]=l}}return S}}},225:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;n.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let f=0;f<u.length;++f)g.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?g[f]:function(m,C){let k,S=0,l=C.length-1;if(m<C[0][0]||m>C[l][1])return!1;for(;l>=S;)if(k=S+l>>1,m>C[k][1])S=k+1;else{if(!(m<C[k][0]))return!0;l=k-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const d=u(8460),g=u(844);class f extends g.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(k)}_innerWrite(C=0,k=!0){const S=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],a=this._action(l,k);if(a){const c=_=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(S,_);return void a.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=f},5941:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function g(f,m){const C=f.toString(16),k=C.length<2?"0"+C:C;switch(m){case 4:return C[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}n.parseColor=function(f){if(!f)return;let m=f.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const C=u.exec(m);if(C){const k=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/k*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/k*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/k*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),d.exec(m)&&[3,6,9,12].includes(m.length))){const C=m.length/3,k=[0,0,0];for(let S=0;S<3;++S){const l=parseInt(m.slice(C*S,C*S+C),16);k[S]=C===1?l<<4:C===2?l:C===3?l>>4:l>>8}return k}},n.toRgbString=function(f,m=16){const[C,k,S]=f;return`rgb:${g(C,m)}/${g(k,m)}/${g(S,m)}`}},5770:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const d=u(482),g=u(8742),f=u(5770),m=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(k,S){this._handlers[k]===void 0&&(this._handlers[k]=[]);const l=this._handlers[k];return l.push(S),{dispose:()=>{const a=l.indexOf(S);a!==-1&&l.splice(a,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(k,S){if(this.reset(),this._ident=k,this._active=this._handlers[k]||m,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(k,S,l){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(k,S,l);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(k,S,l))}unhook(k,S=!0){if(this._active.length){let l=!1,a=this._active.length-1,o=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,l=S,o=this._stack.fallThrough,this._stack.paused=!1),!o&&l===!1){for(;a>=0&&(l=this._active[a].unhook(k),l!==!0);a--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,l;a--}for(;a>=0;a--)if(l=this._active[a].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",k);this._active=m,this._ident=0}};const C=new g.Params;C.addParam(0),n.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=C,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():C,this._data="",this._hitLimit=!1}put(k,S,l){this._hitLimit||(this._data+=(0,d.utf32ToString)(k,S,l),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let S=!1;if(this._hitLimit)S=!1;else if(k&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(l=>(this._params=C,this._data="",this._hitLimit=!1,l));return this._params=C,this._data="",this._hitLimit=!1,S}}},2015:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const d=u(844),g=u(8742),f=u(6242),m=u(6351);class C{constructor(a){this.table=new Uint8Array(a)}setDefault(a,o){this.table.fill(a<<4|o)}add(a,o,c,_){this.table[o<<8|a]=c<<4|_}addMany(a,o,c,_){for(let y=0;y<a.length;y++)this.table[o<<8|a[y]]=c<<4|_}}n.TransitionTable=C;const k=160;n.VT500_TRANSITION_TABLE=function(){const l=new C(4095),a=Array.apply(null,Array(256)).map((E,p)=>p),o=(E,p)=>a.slice(E,p),c=o(32,127),_=o(0,24);_.push(25),_.push.apply(_,o(28,32));const y=o(0,14);let x;for(x in l.setDefault(1,0),l.addMany(c,0,2,0),y)l.addMany([24,26,153,154],x,3,0),l.addMany(o(128,144),x,3,0),l.addMany(o(144,152),x,3,0),l.add(156,x,0,0),l.add(27,x,11,1),l.add(157,x,4,8),l.addMany([152,158,159],x,0,7),l.add(155,x,11,3),l.add(144,x,11,9);return l.addMany(_,0,3,0),l.addMany(_,1,3,1),l.add(127,1,0,1),l.addMany(_,8,0,8),l.addMany(_,3,3,3),l.add(127,3,0,3),l.addMany(_,4,3,4),l.add(127,4,0,4),l.addMany(_,6,3,6),l.addMany(_,5,3,5),l.add(127,5,0,5),l.addMany(_,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(c,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(o(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(c,7,0,7),l.addMany(_,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(o(64,127),3,7,0),l.addMany(o(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(o(48,60),4,8,4),l.addMany(o(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(o(32,64),6,0,6),l.add(127,6,0,6),l.addMany(o(64,127),6,0,0),l.addMany(o(32,48),3,9,5),l.addMany(o(32,48),5,9,5),l.addMany(o(48,64),5,0,6),l.addMany(o(64,127),5,7,0),l.addMany(o(32,48),4,9,5),l.addMany(o(32,48),1,9,2),l.addMany(o(32,48),2,9,2),l.addMany(o(48,127),2,10,0),l.addMany(o(48,80),1,10,0),l.addMany(o(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(o(96,127),1,10,0),l.add(80,1,11,9),l.addMany(_,9,0,9),l.add(127,9,0,9),l.addMany(o(28,32),9,0,9),l.addMany(o(32,48),9,9,12),l.addMany(o(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(_,11,0,11),l.addMany(o(32,128),11,0,11),l.addMany(o(28,32),11,0,11),l.addMany(_,10,0,10),l.add(127,10,0,10),l.addMany(o(28,32),10,0,10),l.addMany(o(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(o(32,48),10,9,12),l.addMany(_,12,0,12),l.add(127,12,0,12),l.addMany(o(28,32),12,0,12),l.addMany(o(32,48),12,9,12),l.addMany(o(48,64),12,0,11),l.addMany(o(64,127),12,12,13),l.addMany(o(64,127),10,12,13),l.addMany(o(64,127),9,12,13),l.addMany(_,13,13,13),l.addMany(c,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(k,0,2,0),l.add(k,8,5,8),l.add(k,6,0,6),l.add(k,11,0,11),l.add(k,13,13,13),l}();class S extends d.Disposable{constructor(a=n.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new g.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,c,_)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,o=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<a.intermediates.length;++y){const x=a.intermediates.charCodeAt(y);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=x}}if(a.final.length!==1)throw new Error("final must be a single byte");const _=a.final.charCodeAt(0);if(o[0]>_||_>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=_,c}identToString(a){const o=[];for(;a;)o.push(String.fromCharCode(255&a)),a>>=8;return o.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,o){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const _=this._escHandlers[c];return _.push(o),{dispose:()=>{const y=_.indexOf(o);y!==-1&&_.splice(y,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,o){this._executeHandlers[a.charCodeAt(0)]=o}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,o){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const _=this._csiHandlers[c];return _.push(o),{dispose:()=>{const y=_.indexOf(o);y!==-1&&_.splice(y,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,o){return this._dcsParser.registerHandler(this._identifier(a),o)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,o){return this._oscParser.registerHandler(a,o)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,o,c,_,y){this._parseStack.state=a,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=_,this._parseStack.chunkPos=y}parse(a,o,c){let _,y=0,x=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const p=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&b>-1){for(;b>=0&&(_=p[b](this._params),_!==!0);b--)if(_ instanceof Promise)return this._parseStack.handlerPos=b,_}this._parseStack.handlers=[];break;case 4:if(c===!1&&b>-1){for(;b>=0&&(_=p[b](),_!==!0);b--)if(_ instanceof Promise)return this._parseStack.handlerPos=b,_}this._parseStack.handlers=[];break;case 6:if(y=a[this._parseStack.chunkPos],_=this._dcsParser.unhook(y!==24&&y!==26,c),_)return _;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=a[this._parseStack.chunkPos],_=this._oscParser.end(y!==24&&y!==26,c),_)return _;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let p=E;p<o;++p){switch(y=a[p],x=this._transitions.table[this.currentState<<8|(y<160?y:k)],x>>4){case 2:for(let O=p+1;;++O){if(O>=o||(y=a[O])<32||y>126&&y<k){this._printHandler(a,p,O),p=O-1;break}if(++O>=o||(y=a[O])<32||y>126&&y<k){this._printHandler(a,p,O),p=O-1;break}if(++O>=o||(y=a[O])<32||y>126&&y<k){this._printHandler(a,p,O),p=O-1;break}if(++O>=o||(y=a[O])<32||y>126&&y<k){this._printHandler(a,p,O),p=O-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|y];let R=b?b.length-1:-1;for(;R>=0&&(_=b[R](this._params),_!==!0);R--)if(_ instanceof Promise)return this._preserveStack(3,b,R,x,p),_;R<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++p<o&&(y=a[p])>47&&y<60);p--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:const P=this._escHandlers[this._collect<<8|y];let D=P?P.length-1:-1;for(;D>=0&&(_=P[D](),_!==!0);D--)if(_ instanceof Promise)return this._preserveStack(4,P,D,x,p),_;D<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let O=p+1;;++O)if(O>=o||(y=a[O])===24||y===26||y===27||y>127&&y<k){this._dcsParser.put(a,p,O),p=O-1;break}break;case 14:if(_=this._dcsParser.unhook(y!==24&&y!==26),_)return this._preserveStack(6,[],0,x,p),_;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=p+1;;O++)if(O>=o||(y=a[O])<32||y>127&&y<k){this._oscParser.put(a,p,O),p=O-1;break}break;case 6:if(_=this._oscParser.end(y!==24&&y!==26),_)return this._preserveStack(5,[],0,x,p),_;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&x}}}n.EscapeSequenceParser=S},6242:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const d=u(5770),g=u(482),f=[];n.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,C){this._handlers[m]===void 0&&(this._handlers[m]=[]);const k=this._handlers[m];return k.push(C),{dispose:()=>{const S=k.indexOf(C);S!==-1&&k.splice(S,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,C,k){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(m,C,k);else this._handlerFb(this._id,"PUT",(0,g.utf32ToString)(m,C,k))}start(){this.reset(),this._state=1}put(m,C,k){if(this._state!==3){if(this._state===1)for(;C<k;){const S=m[C++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&k-C>0&&this._put(m,C,k)}}end(m,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,S=this._active.length-1,l=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,k=C,l=this._stack.fallThrough,this._stack.paused=!1),!l&&k===!1){for(;S>=0&&(k=this._active[S].end(m),k!==!0);S--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,k;S--}for(;S>=0;S--)if(k=this._active[S].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",m);this._active=f,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,C,k){this._hitLimit||(this._data+=(0,g.utf32ToString)(m,C,k),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let C=!1;if(this._hitLimit)C=!1;else if(m&&(C=this._handler(this._data),C instanceof Promise))return C.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,C}}},8742:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const u=2147483647;class d{static fromArray(f){const m=new d;if(!f.length)return m;for(let C=Array.isArray(f[0])?1:0;C<f.length;++C){const k=f[C];if(Array.isArray(k))for(let S=0;S<k.length;++S)m.addSubParam(k[S]);else m.addParam(k)}return m}constructor(f=32,m=32){if(this.maxLength=f,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new d(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let m=0;m<this.length;++m){f.push(this.params[m]);const C=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-C>0&&f.push(Array.prototype.slice.call(this._subParams,C,k))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>u?u:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>u?u:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const m=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];return C-m>0?this._subParams.subarray(m,C):null}getSubParamsAll(){const f={};for(let m=0;m<this.length;++m){const C=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-C>0&&(f[m]=this._subParams.slice(C,k))}return f}addDigit(f){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,k=C[m-1];C[m-1]=~k?Math.min(10*k+f,u):f}}n.Params=d},5741:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,d){const g={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(g),d.dispose=()=>this._wrappedAddonDispose(g),d.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let d=-1;for(let g=0;g<this._addons.length;g++)if(this._addons[g]===u){d=g;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(d,1)}}},8771:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const d=u(3785),g=u(511);n.BufferApiView=class{constructor(f,m){this._buffer=f,this.type=m}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const m=this._buffer.lines.get(f);if(m)return new d.BufferLineApiView(m)}getNullCell(){return new g.CellData}}},3785:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const d=u(511);n.BufferLineApiView=class{constructor(g){this._line=g}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(g,f){if(!(g<0||g>=this._line.length))return f?(this._line.loadCell(g,f),f):this._line.loadCell(g,new d.CellData)}translateToString(g,f,m){return this._line.translateToString(g,f,m)}}},8285:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const d=u(8771),g=u(8460),f=u(844);class m extends f.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new g.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}n.BufferNamespaceApi=m},7975:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,d){return this._core.registerCsiHandler(u,g=>d(g.toArray()))}addCsiHandler(u,d){return this.registerCsiHandler(u,d)}registerDcsHandler(u,d){return this._core.registerDcsHandler(u,(g,f)=>d(g,f.toArray()))}addDcsHandler(u,d){return this.registerDcsHandler(u,d)}registerEscHandler(u,d){return this._core.registerEscHandler(u,d)}addEscHandler(u,d){return this.registerEscHandler(u,d)}registerOscHandler(u,d){return this._core.registerOscHandler(u,d)}addOscHandler(u,d){return this.registerOscHandler(u,d)}}},7090:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(v,n,u){var d=this&&this.__decorate||function(l,a,o,c){var _,y=arguments.length,x=y<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,a,o,c);else for(var E=l.length-1;E>=0;E--)(_=l[E])&&(x=(y<3?_(x):y>3?_(a,o,x):_(a,o))||x);return y>3&&x&&Object.defineProperty(a,o,x),x},g=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const f=u(8460),m=u(844),C=u(5295),k=u(2585);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let S=n.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(l,this))}resize(l,a){this.cols=l,this.rows=a,this.buffers.resize(l,a),this._onResize.fire({cols:l,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,a=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===l.fg&&c.getBg(0)===l.bg||(c=o.getBlankLine(l,a),this._cachedBlankLine=c),c.isWrapped=a;const _=o.ybase+o.scrollTop,y=o.ybase+o.scrollBottom;if(o.scrollTop===0){const x=o.lines.isFull;y===o.lines.length-1?x?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(y+1,0,c.clone()),x?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const x=y-_+1;o.lines.shiftElements(_+1,x-1,-1),o.lines.set(y,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(l,a,o){const c=this.buffer;if(l<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else l+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const _=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+l,c.ybase),0),_!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};n.BufferService=S=d([g(0,k.IOptionsService)],S)},7994:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,d){this._charsets[u]=d,this.glevel===u&&(this.charset=d)}}},1753:function(v,n,u){var d=this&&this.__decorate||function(c,_,y,x){var E,p=arguments.length,b=p<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,_,y,x);else for(var R=c.length-1;R>=0;R--)(E=c[R])&&(b=(p<3?E(b):p>3?E(_,y,b):E(_,y))||b);return p>3&&b&&Object.defineProperty(_,y,b),b},g=this&&this.__param||function(c,_){return function(y,x){_(y,x,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const f=u(2585),m=u(8460),C=u(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function S(c,_){let y=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(y|=64,y|=c.action):(y|=3&c.button,4&c.button&&(y|=64),8&c.button&&(y|=128),c.action===32?y|=32:c.action!==0||_||(y|=3)),y}const l=String.fromCharCode,a={DEFAULT:c=>{const _=[S(c,!1)+32,c.col+32,c.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${l(_[0])}${l(_[1])}${l(_[2])}`},SGR:c=>{const _=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.col};${c.row}${_}`},SGR_PIXELS:c=>{const _=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.x};${c.y}${_}`}};let o=n.CoreMouseService=class extends C.Disposable{constructor(c,_){super(),this._bufferService=c,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const y of Object.keys(k))this.addProtocol(y,k[y]);for(const y of Object.keys(a))this.addEncoding(y,a[y]);this.reset()}addProtocol(c,_){this._protocols[c]=_}addEncoding(c,_){this._encodings[c]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const _=this._encodings[this._activeEncoding](c);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,_,y){if(y){if(c.x!==_.x||c.y!==_.y)return!1}else if(c.col!==_.col||c.row!==_.row)return!1;return c.button===_.button&&c.action===_.action&&c.ctrl===_.ctrl&&c.alt===_.alt&&c.shift===_.shift}};n.CoreMouseService=o=d([g(0,f.IBufferService),g(1,f.ICoreService)],o)},6975:function(v,n,u){var d=this&&this.__decorate||function(o,c,_,y){var x,E=arguments.length,p=E<3?c:y===null?y=Object.getOwnPropertyDescriptor(c,_):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,c,_,y);else for(var b=o.length-1;b>=0;b--)(x=o[b])&&(p=(E<3?x(p):E>3?x(c,_,p):x(c,_))||p);return E>3&&p&&Object.defineProperty(c,_,p),p},g=this&&this.__param||function(o,c){return function(_,y){c(_,y,o)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const f=u(1439),m=u(8460),C=u(844),k=u(2585),S=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=n.CoreService=class extends C.Disposable{constructor(o,c,_){super(),this._bufferService=o,this._logService=c,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(l)}reset(){this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(l)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(y=>y.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(o))}};n.CoreService=a=d([g(0,k.IBufferService),g(1,k.ILogService),g(2,k.IOptionsService)],a)},9074:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const d=u(8055),g=u(8460),f=u(844),m=u(6106);let C=0,k=0;class S extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new g.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new g.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new l(o);if(c){const _=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),_.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,_){var y,x,E;let p=0,b=0;for(const R of this._decorations.getKeyIterator(c))p=(y=R.options.x)!==null&&y!==void 0?y:0,b=p+((x=R.options.width)!==null&&x!==void 0?x:1),o>=p&&o<b&&(!_||((E=R.options.layer)!==null&&E!==void 0?E:"bottom")===_)&&(yield R)}forEachDecorationAtCell(o,c,_,y){this._decorations.forEachByKey(c,x=>{var E,p,b;C=(E=x.options.x)!==null&&E!==void 0?E:0,k=C+((p=x.options.width)!==null&&p!==void 0?p:1),o>=C&&o<k&&(!_||((b=x.options.layer)!==null&&b!==void 0?b:"bottom")===_)&&y(x)})}}n.DecorationService=S;class l extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new g.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new g.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const d=u(2585),g=u(8343);class f{constructor(...C){this._entries=new Map;for(const[k,S]of C)this.set(k,S)}set(C,k){const S=this._entries.get(C);return this._entries.set(C,k),S}forEach(C){for(const[k,S]of this._entries.entries())C(k,S)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}n.ServiceCollection=f,n.InstantiationService=class{constructor(){this._services=new f,this._services.set(d.IInstantiationService,this)}setService(m,C){this._services.set(m,C)}getService(m){return this._services.get(m)}createInstance(m,...C){const k=(0,g.getServiceDependencies)(m).sort((a,o)=>a.index-o.index),S=[];for(const a of k){const o=this._services.get(a.id);if(!o)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${a.id}.`);S.push(o)}const l=k.length>0?k[0].index:C.length;if(C.length!==l)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${l+1} conflicts with ${C.length} static arguments`);return new m(...C,...S)}}},7866:function(v,n,u){var d=this&&this.__decorate||function(l,a,o,c){var _,y=arguments.length,x=y<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,a,o,c);else for(var E=l.length-1;E>=0;E--)(_=l[E])&&(x=(y<3?_(x):y>3?_(a,o,x):_(a,o))||x);return y>3&&x&&Object.defineProperty(a,o,x),x},g=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const f=u(844),m=u(2585),C={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let k,S=n.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let a=0;a<l.length;a++)typeof l[a]=="function"&&(l[a]=l[a]())}_log(l,a,o){this._evalLazyOptionalParams(o),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...o)}trace(l,...a){var o,c;this._logLevel<=m.LogLevelEnum.TRACE&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,a)}debug(l,...a){var o,c;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,a)}info(l,...a){var o,c;this._logLevel<=m.LogLevelEnum.INFO&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,l,a)}warn(l,...a){var o,c;this._logLevel<=m.LogLevelEnum.WARN&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,l,a)}error(l,...a){var o,c;this._logLevel<=m.LogLevelEnum.ERROR&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,l,a)}};n.LogService=S=d([g(0,m.IOptionsService)],S),n.setTraceLogger=function(l){k=l},n.traceCall=function(l,a,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(..._){if(k.logLevel!==m.LogLevelEnum.TRACE)return c.apply(this,_);k.trace(`GlyphRenderer#${c.name}(${_.map(x=>JSON.stringify(x)).join(", ")})`);const y=c.apply(this,_);return k.trace(`GlyphRenderer#${c.name} return`,y),y}}},7302:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const d=u(8460),g=u(844),f=u(6114);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends g.Disposable{constructor(S){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},n.DEFAULT_OPTIONS);for(const a in S)if(a in l)try{const o=S[a];l[a]=this._sanitizeAndValidateOption(a,o)}catch(o){console.error(o)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(S,l){return this.onOptionChange(a=>{a===S&&l(this.rawOptions[S])})}onMultipleOptionChange(S,l){return this.onOptionChange(a=>{S.indexOf(a)!==-1&&l()})}_setupOptions(){const S=a=>{if(!(a in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},l=(a,o)=>{if(!(a in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);o=this._sanitizeAndValidateOption(a,o),this.rawOptions[a]!==o&&(this.rawOptions[a]=o,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const o={get:S.bind(this,a),set:l.bind(this,a)};Object.defineProperty(this.options,a,o)}}_sanitizeAndValidateOption(S,l){switch(S){case"cursorStyle":if(l||(l=n.DEFAULT_OPTIONS[S]),!function(a){return a==="block"||a==="underline"||a==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${S}`);break;case"wordSeparator":l||(l=n.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=m.includes(l)?l:n.DEFAULT_OPTIONS[S];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${S} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${S} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}n.OptionsService=C},2660:function(v,n,u){var d=this&&this.__decorate||function(C,k,S,l){var a,o=arguments.length,c=o<3?k:l===null?l=Object.getOwnPropertyDescriptor(k,S):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(C,k,S,l);else for(var _=C.length-1;_>=0;_--)(a=C[_])&&(c=(o<3?a(c):o>3?a(k,S,c):a(k,S))||c);return o>3&&c&&Object.defineProperty(k,S,c),c},g=this&&this.__param||function(C,k){return function(S,l){k(S,l,C)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const f=u(2585);let m=n.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const k=this._bufferService.buffer;if(C.id===void 0){const _=k.addMarker(k.ybase+k.y),y={data:C,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(y,_)),this._dataByLinkId.set(y.id,y),y.id}const S=C,l=this._getEntryIdKey(S),a=this._entriesWithId.get(l);if(a)return this.addLineToLink(a.id,k.ybase+k.y),a.id;const o=k.addMarker(k.ybase+k.y),c={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(C,k){const S=this._dataByLinkId.get(C);if(S&&S.lines.every(l=>l.line!==k)){const l=this._bufferService.buffer.addMarker(k);S.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(S,l))}}getLinkData(C){var k;return(k=this._dataByLinkId.get(C))===null||k===void 0?void 0:k.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,k){const S=C.lines.indexOf(k);S!==-1&&(C.lines.splice(S,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};n.OscLinkService=m=d([g(0,f.IBufferService)],m)},8343:(v,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const u="di$target",d="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(g){return g[d]||[]},n.createDecorator=function(g){if(n.serviceRegistry.has(g))return n.serviceRegistry.get(g);const f=function(m,C,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,l,a){l[u]===l?l[d].push({id:S,index:a}):(l[d]=[{id:S,index:a}],l[u]=l)})(f,m,k)};return f.toString=()=>g,n.serviceRegistry.set(g,f),f}},2585:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const d=u(8343);var g;n.IBufferService=(0,d.createDecorator)("BufferService"),n.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),n.ICoreService=(0,d.createDecorator)("CoreService"),n.ICharsetService=(0,d.createDecorator)("CharsetService"),n.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(g||(n.LogLevelEnum=g={})),n.ILogService=(0,d.createDecorator)("LogService"),n.IOptionsService=(0,d.createDecorator)("OptionsService"),n.IOscLinkService=(0,d.createDecorator)("OscLinkService"),n.IUnicodeService=(0,d.createDecorator)("UnicodeService"),n.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(v,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const d=u(8460),g=u(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const f=new g.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let m=0;const C=f.length;for(let k=0;k<C;++k){let S=f.charCodeAt(k);if(55296<=S&&S<=56319){if(++k>=C)return m+this.wcwidth(S);const l=f.charCodeAt(k);56320<=l&&l<=57343?S=1024*(S-55296)+l-56320+65536:m+=this.wcwidth(l)}m+=this.wcwidth(S)}return m}}}},s={};function i(v){var n=s[v];if(n!==void 0)return n.exports;var u=s[v]={exports:{}};return r[v].call(u.exports,u,u.exports,i),u.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;const n=i(9042),u=i(3236),d=i(844),g=i(5741),f=i(8285),m=i(7975),C=i(7090),k=["cols","rows"];class S extends d.Disposable{constructor(a){super(),this._core=this.register(new u.Terminal(a)),this._addonManager=this.register(new g.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=_=>this._core.options[_],c=(_,y)=>{this._checkReadonlyOptions(_),this._core.options[_]=y};for(const _ in this._core.options){const y={get:o.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this._publicOptions,_,y)}}_checkReadonlyOptions(a){if(k.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const o in a)this._publicOptions[o]=a[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(a,o){this._verifyIntegers(a,o),this._core.resize(a,o)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){var o,c,_;return this._checkProposedApi(),this._verifyPositiveIntegers((o=a.x)!==null&&o!==void 0?o:0,(c=a.width)!==null&&c!==void 0?c:0,(_=a.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,o,c){this._verifyIntegers(a,o,c),this._core.select(a,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,o){this._verifyIntegers(a,o),this._core.selectLines(a,o)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,o){this._core.write(a,o)}writeln(a,o){this._core.write(a),this._core.write(`\r
`,o)}paste(a){this._core.paste(a)}refresh(a,o){this._verifyIntegers(a,o),this._core.refresh(a,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return n}_verifyIntegers(...a){for(const o of a)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const o of a)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}v.Terminal=S})(),h})())})(id);var kc=id.exports,od={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,function(){return(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const h=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(h._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,h=i._renderService.dimensions;if(h.css.cell.width===0||h.css.cell.height===0)return;const v=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(n.getPropertyValue("height")),d=Math.max(0,parseInt(n.getPropertyValue("width"))),g=window.getComputedStyle(this._terminal.element),f=u-(parseInt(g.getPropertyValue("padding-top"))+parseInt(g.getPropertyValue("padding-bottom"))),m=d-(parseInt(g.getPropertyValue("padding-right"))+parseInt(g.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(m/h.css.cell.width)),rows:Math.max(1,Math.floor(f/h.css.cell.height))}}}})(),r})()})})(od);var mv=od.exports;function gv({host:e,container:t,onClose:r,defaultShell:s="auto"}){const i=I.useRef(null),h=I.useRef(null),v=I.useRef(null),n=I.useRef(null),[u,d]=I.useState("connecting"),[g,f]=I.useState(s),[m,C]=I.useState(0),k=I.useCallback(()=>{var p;d("connecting");const S=location.protocol==="https:"?"wss":"ws",l=new URLSearchParams;l.set("shell",g);const a=`${S}://${location.host}/api/ws/hosts/${encodeURIComponent(e)}/containers/${encodeURIComponent(t)}/exec?${l.toString()}`,o=h.current||(h.current=new kc.Terminal({fontFamily:'Menlo, Monaco, "Courier New", monospace',fontSize:13,convertEol:!0,cursorBlink:!0,theme:{background:"#0b1220"},allowProposedApi:!0,scrollback:4e3}));let c=v.current;c||(c=new mv.FitAddon,o.loadAddon(c),v.current=c),i.current&&((p=o._core)==null?void 0:p.screenElement)==null&&(o.open(i.current),setTimeout(()=>c.fit(),10));const _=new WebSocket(a);_.binaryType="arraybuffer",n.current=_,_.onopen=()=>{d("open");try{c.fit(),_.send(JSON.stringify({type:"resize",cols:o.cols,rows:o.rows}))}catch{}o.focus(),o.writeln(`\x1B[38;5;67m[connected]\x1B[0m  shell=${g}`)},_.onclose=()=>{d("closed"),o.writeln(`\r
\x1B[38;5;203m[disconnected]\x1B[0m`)},_.onerror=()=>{d("closed"),o.writeln(`\r
\x1B[38;5;203m[error]\x1B[0m`)},_.onmessage=b=>{if(b.data instanceof ArrayBuffer){const R=new TextDecoder;o.write(R.decode(new Uint8Array(b.data)))}else o.write(String(b.data))};const y=o.onData(b=>{try{_.send(b)}catch{}}),x=()=>{try{c.fit(),_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"resize",cols:o.cols,rows:o.rows}))}catch{}};window.addEventListener("resize",x);const E=new ResizeObserver(x);return i.current&&E.observe(i.current),()=>{y.dispose(),window.removeEventListener("resize",x),E.disconnect();try{_.close()}catch{}}},[e,t,g,m]);return I.useEffect(()=>k(),[k]),I.useEffect(()=>{const S=h.current||(h.current=new kc.Terminal);return()=>{try{S.dispose()}catch{}h.current=null,v.current=null,n.current=null}},[]),w.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:w.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-5xl h-[70vh] p-3 flex flex-col",onClick:S=>S.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"text-slate-200 font-semibold",children:["Console: ",w.jsx("span",{className:"text-slate-400",children:e})," /"," ",w.jsx("span",{className:"text-slate-400",children:t}),w.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-slate-800/60 border border-slate-700 text-slate-300",children:u})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{className:"text-xs text-slate-300",children:"Shell"}),w.jsxs("select",{className:"text-xs bg-slate-900 border border-slate-700 rounded px-2 py-1 text-slate-200",value:g,onChange:S=>f(S.target.value),title:"Pick a shell; Auto tries bash → ash → dash → sh",children:[w.jsx("option",{value:"auto",children:"Auto"}),w.jsx("option",{value:"bash",children:"bash"}),w.jsx("option",{value:"ash",children:"ash"}),w.jsx("option",{value:"dash",children:"dash"}),w.jsx("option",{value:"sh",children:"sh"})]}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>C(S=>S+1),title:"Reconnect with current shell",children:"Reconnect"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>{var S;try{(S=n.current)==null||S.send("")}catch{}},children:"Ctrl-C"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>{var S;try{(S=n.current)==null||S.send("")}catch{}},children:"Ctrl-D"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:r,children:"Close"})]})]}),w.jsx("div",{className:"flex-1 rounded-md border border-slate-800 bg-[#0b1220] overflow-hidden",children:w.jsx("div",{ref:i,className:"w-full h-full"})}),w.jsxs("div",{className:"pt-2 text-xs text-slate-400",children:["Tip: Auto tries ",w.jsx("code",{children:"bash"})," → ",w.jsx("code",{children:"ash"})," → ",w.jsx("code",{children:"dash"})," → ",w.jsx("code",{children:"sh"}),". Resize is wired so the terminal fits your window."]})]})})}function sn(e){if(!e)return"—";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleString()}function yv(e){const t=Array.isArray(e)?e:e&&Array.isArray(e.ports)?e.ports:[],r=[];for(const s of t){const i=s.IP||s.Ip||s.ip||"",h=s.PublicPort??s.publicPort,v=s.PrivatePort??s.privatePort,n=(s.Type??s.type??"").toString().toLowerCase()||"tcp";if(v){const u=h?`${i?i+":":""}${h}`:"";r.push(`${u?u+" → ":""}${v}/${n}`)}}return r}function Sv({hosts:e,onOpenStack:t}){const[r,s]=I.useState(null),[i,h]=I.useState(!1),[v,n]=I.useState(null),[u,d]=I.useState([]),[g,f]=I.useState(""),[m,C]=I.useState(null),[k,S]=I.useState(null),[l,a]=I.useState(null);I.useEffect(()=>{e.length>0&&!r&&s(e[0])},[e,r]);function o(R,P){return P?[R.name,R.state,R.stack,R.imageRun,R.imageIac,R.ip,R.portsText,R.owner].filter(Boolean).join(" ").toLowerCase().includes(P.toLowerCase()):!0}async function c(R,P){if(r)try{await fetch(`/api/hosts/${encodeURIComponent(r.name)}/containers/${encodeURIComponent(R)}/action`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:P})}),y(r.name),d(D=>D.map(O=>({...O,rows:O.rows.map(N=>N.name===R?{...N,state:P==="pause"?"paused":P==="unpause"?"running":P==="stop"?"exited":P==="kill"?"dead":P==="remove"?"removed":P==="start"?"running":P==="restart"?"restarting":N.state}:N)})))}catch{alert("Action failed")}}function _(R){C({ctr:R})}const y=async R=>{h(!0),n(null);try{const[P,D]=await Promise.all([fetch(`/api/hosts/${encodeURIComponent(R)}/containers`,{credentials:"include"}),fetch(`/api/hosts/${encodeURIComponent(R)}/iac`,{credentials:"include"})]);if(P.status===401||D.status===401){window.location.replace("/auth/login");return}const O=await P.json(),N=await D.json(),B=O.items||[],$=N.stacks||[],z={};await Promise.all(($||[]).filter(H=>typeof(H==null?void 0:H.id)=="number").map(async H=>{var V;try{const X=await fetch(`/api/iac/stacks/${H.id}`,{credentials:"include"});if(!X.ok)return;const K=await X.json();(V=K==null?void 0:K.stack)!=null&&V.id&&(z[K.stack.id]=!!K.stack.effective_auto_devops)}catch{}}));const L=new Map;for(const H of B){const V=(H.compose_project||H.stack||"(none)").trim()||"(none)";L.has(V)||L.set(V,[]),L.get(V).push(H)}const A=new Map;for(const H of $)A.set(H.name,H);const j=new Set([...L.keys(),...A.keys()]),M=[];for(const H of Array.from(j).sort()){let V=function(G){if(!K||J.length===0)return;const te=J.find(le=>G.compose_service&&le.service_name===G.compose_service||le.container_name&&le.container_name===G.name);return(te==null?void 0:te.image)||void 0};const X=L.get(H)||[],K=A.get(H),J=Array.isArray(K==null?void 0:K.services)?K.services:[],T=!!K&&(J.length>0||!!K.compose),F=!!K&&(!!K.compose||J.length>0),U=[];for(const G of X){const le=yv(G.ports).join(`
`),ge=V(G),Tt=!!(ge&&ge.trim()&&ge.trim()!==(G.image||"").trim());U.push({name:G.name,state:G.state,stack:H,imageRun:G.image,imageIac:ge,created:sn(G.created_ts),ip:G.ip_addr,portsText:le,owner:G.owner||"—",drift:Tt})}if(K)for(const G of J)U.some(le=>le.name===(G.container_name||G.service_name))||U.push({name:G.container_name||G.service_name,state:"missing",stack:H,imageRun:void 0,imageIac:G.image,created:"—",ip:"—",portsText:"—",owner:"—",drift:!0});let W="unknown";T&&(W=U.some(G=>G.drift)?"drift":"in_sync");const Y=!!(K&&typeof K.id=="number"&&z[K.id]);M.push({name:H,drift:W,iacEnabled:Y,pullPolicy:T?K==null?void 0:K.pull_policy:void 0,sops:T?(K==null?void 0:K.sops_status)==="all":!1,deployKind:T?(K==null?void 0:K.deploy_kind)||"compose":"unmanaged",rows:U,iacId:K==null?void 0:K.id,hasIac:T,hasContent:F})}d(M)}catch(P){n((P==null?void 0:P.message)||"Failed to load host stacks")}finally{h(!1)}};I.useEffect(()=>{r&&y(r.name)},[r]);async function x(){if(!r)return;const R=new Set(u.map(D=>D.name));let P=prompt("New stack name:");if(P&&(P=P.trim(),!!P)){if(R.has(P)){alert("A stack with that name already exists.");return}try{const D=await fetch("/api/iac/stacks",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope_kind:"host",scope_name:r.name,stack_name:P,iac_enabled:!1})});if(!D.ok)throw new Error(`${D.status} ${D.statusText}`);const O=await D.json();t(r,P,O.id)}catch(D){alert((D==null?void 0:D.message)||"Failed to create stack")}}}async function E(R,P){const D=await fetch(`/api/iac/stacks/${R}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_devops:P})});if(!D.ok)throw new Error(`${D.status} ${D.statusText}`)}function p(R,P){const D=u[R];if(!D.iacId||!D.hasContent){P&&alert("This stack needs compose files or services before Auto DevOps can be enabled. Add content first.");return}d(O=>O.map((N,B)=>B===R?{...N,iacEnabled:P}:N)),E(D.iacId,P).catch(O=>{alert(`Failed to update Auto DevOps: ${(O==null?void 0:O.message)||O}`),d(N=>N.map((B,$)=>$===R?{...B,iacEnabled:!P}:B))})}async function b(R){const P=u[R];if(!P.iacId||!confirm(`Delete IaC for stack "${P.name}"? This removes IaC files/metadata but not runtime containers.`))return;const D=await fetch(`/api/iac/stacks/${P.iacId}`,{method:"DELETE",credentials:"include"});if(!D.ok){alert(`Failed to delete: ${D.status} ${D.statusText}`);return}d(O=>O.map((N,B)=>B===R?{...N,iacId:void 0,hasIac:!1,iacEnabled:!1,pullPolicy:void 0,sops:!1,drift:"unknown",hasContent:!1}:N))}return I.useEffect(()=>{if(!l)return;const R=P=>{P.key==="Escape"&&a(null)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[l]),w.jsxs("div",{className:"space-y-4",children:[m&&r&&w.jsx(vv,{host:r.name,container:m.ctr,onClose:()=>C(null)}),k&&r&&w.jsx(gv,{host:r.name,container:k.ctr,onClose:()=>S(null)}),l&&w.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"info-title",onClick:()=>a(null),children:w.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-xl w-full max-w-3xl p-4",onClick:R=>R.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("div",{className:"text-slate-200 font-semibold",id:"info-title",children:l.title}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>a(null),children:"Close"})]}),w.jsx("pre",{className:"text-xs text-slate-300 bg-slate-900 border border-slate-800 rounded p-3 max-h-[60vh] overflow-auto whitespace-pre-wrap",children:l.text})]})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"text-lg font-semibold text-white",children:"Stacks on:"}),w.jsxs("select",{value:(r==null?void 0:r.name)||"",onChange:R=>{const P=e.find(D=>D.name===R.target.value);P&&s(P)},className:"px-3 py-2 bg-slate-900/50 border border-slate-800 text-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#310937]",children:[w.jsx("option",{value:"",children:"Select a host"}),e.map(R=>w.jsxs("option",{value:R.name,children:[R.name," ",R.address&&`(${R.address})`]},R.name))]}),r&&w.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[w.jsxs(re,{onClick:()=>y(r.name),className:"bg-[#310937] hover:bg-[#2a0830] text-white",children:[w.jsx(Ks,{className:"h-4 w-4 mr-1"})," Sync"]}),w.jsxs(re,{onClick:x,variant:"outline",className:"border-slate-700 text-slate-200",children:[w.jsx(En,{className:"hidden"})," ","New Stack"]}),w.jsx("div",{className:"relative w-72",children:w.jsx(ta,{value:g,onChange:R=>f(R.target.value),placeholder:`Search ${r.name}…`,className:"pl-3 bg-slate-900/50 border-slate-800 text-slate-200 placeholder:text-slate-500"})})]})]}),r?w.jsxs(w.Fragment,{children:[i&&w.jsx("div",{className:"text-sm px-3 py-2 rounded-lg border border-slate-800 bg-slate-900/60 text-slate-300",children:"Loading stacks…"}),v&&w.jsxs("div",{className:"text-sm px-3 py-2 rounded-lg border border-rose-800/50 bg-rose-950/50 text-rose-200",children:["Error: ",v]}),u.map((R,P)=>w.jsxs(gt,{className:"bg-slate-900/50 border-slate-800 rounded-xl",children:[w.jsxs(Vr,{className:"pb-2 flex flex-row items-center justify-between",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx(Kr,{className:"text-xl text-white",children:w.jsx("button",{className:"hover:underline",onClick:()=>t(r,R.name,R.iacId),children:R.name})}),w.jsxs("div",{className:"flex items-center gap-2",children:[_v(R.drift),w.jsx(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:R.deployKind||"unknown"}),w.jsxs(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:["pull: ",R.hasIac&&R.pullPolicy||"—"]}),R.hasIac?R.sops?w.jsx(Ye,{className:"bg-indigo-900/40 border-indigo-700/40 text-indigo-200",children:"SOPS"}):w.jsx(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:"no SOPS"}):w.jsx(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:"No IaC"})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{htmlFor:`auto-${P}`,className:"text-sm text-slate-300",children:"Auto DevOps"}),w.jsx(rd,{id:`auto-${P}`,checked:!!R.iacEnabled,onCheckedChange:D=>p(P,!!D),disabled:!R.iacId||!R.hasContent}),R.iacId&&w.jsx(re,{size:"icon",variant:"ghost",title:"Delete IaC for this stack",onClick:()=>b(P),children:w.jsx(rn,{className:"h-4 w-4 text-rose-300"})})]})]}),w.jsxs(yt,{className:"pt-0",children:[w.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:w.jsxs("table",{className:"w-full text-xs table-fixed",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{className:"whitespace-nowrap",children:[w.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Name"}),w.jsx("th",{className:"px-2 py-2 text-left w-36",children:"State"}),w.jsx("th",{className:"px-2 py-2 text-left w-[24rem]",children:"Image"}),w.jsx("th",{className:"px-2 py-2 text-left w-40",children:"Created"}),w.jsx("th",{className:"px-2 py-2 text-left w-36",children:"IP"}),w.jsx("th",{className:"px-2 py-2 text-left w-56",children:"Published Ports"}),w.jsx("th",{className:"px-2 py-2 text-left w-32",children:"Owner"}),w.jsx("th",{className:"px-2 py-2 text-left w-[18rem]",children:"Actions"})]})}),w.jsxs("tbody",{children:[R.rows.filter(D=>o(D,g)).map(D=>{const O=(D.state||"").toLowerCase(),N=O.includes("running")||O.includes("up")||O.includes("healthy")||O.includes("restarting"),B=O.includes("paused");return w.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-900/40 align-top",children:[w.jsx("td",{className:"px-2 py-1.5 font-medium text-slate-200 truncate",children:D.name}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:w.jsx(sd,{state:D.state})}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"max-w-[24rem] truncate",title:D.imageRun||"",children:D.imageRun||"—"}),D.imageIac&&w.jsxs(w.Fragment,{children:[w.jsx(td,{className:"h-4 w-4 text-slate-500"}),w.jsx("div",{className:`max-w-[24rem] truncate ${D.drift?"text-amber-300":"text-slate-300"}`,title:D.imageIac,children:D.imageIac})]})]})}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.created||"—"}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.ip||"—"}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300 align-top",children:w.jsx("div",{className:"max-w-56 whitespace-pre-line leading-tight",children:D.portsText||"—"})}),w.jsx("td",{className:"px-2 py-1.5 text-slate-300",children:D.owner||"—"}),w.jsx("td",{className:"px-2 py-1",children:w.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto whitespace-nowrap py-0.5",children:[!N&&!B&&w.jsx(st,{title:"Start",icon:iv,onClick:()=>c(D.name,"start")}),N&&w.jsx(st,{title:"Stop",icon:xc,onClick:()=>c(D.name,"stop")}),(N||B)&&w.jsx(st,{title:"Restart",icon:ov,onClick:()=>c(D.name,"restart")}),N&&!B&&w.jsx(st,{title:"Pause",icon:xc,onClick:()=>c(D.name,"pause")}),B&&w.jsx(st,{title:"Resume",icon:J_,onClick:()=>c(D.name,"unpause")}),w.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),w.jsx(st,{title:"Live logs",icon:ev,onClick:()=>_(D.name)}),w.jsx(st,{title:"Inspect",icon:Q_,onClick:()=>t(r,R.name,R.iacId)}),w.jsx(st,{title:"Stats",icon:G_,onClick:async()=>{try{const z=await(await fetch(`/api/hosts/${encodeURIComponent(r.name)}/containers/${encodeURIComponent(D.name)}/stats`,{credentials:"include"})).text();a({title:`${D.name} (stats)`,text:z||"(no data)"})}catch{a({title:`${D.name} (stats)`,text:"(failed to load stats)"})}}}),w.jsx("span",{className:"mx-1 h-4 w-px bg-slate-700/60"}),w.jsx(st,{title:"Kill",icon:fv,onClick:()=>c(D.name,"kill")}),w.jsx(st,{title:"Remove",icon:rn,onClick:()=>c(D.name,"remove")}),w.jsx(st,{title:"Console",icon:hv,onClick:()=>S({ctr:D.name}),disabled:!N})]})})]},D.name)}),(!R.rows||R.rows.filter(D=>o(D,g)).length===0)&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:8,children:"No containers or services."})})]})]})}),w.jsx("div",{className:"pt-2 text-xs text-slate-400",children:"Tip: click the stack title to open the full compare & editor view."})]})]},`${r.name}:${R.name}`)),w.jsx(gt,{className:"bg-slate-900/40 border-slate-800",children:w.jsxs(yt,{className:"py-4 flex flex-wrap items-center gap-3 text-sm text-slate-300",children:["Security by default:",w.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"AGE key never persisted"}),w.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Decrypt to tmpfs only"}),w.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Redacted logs"}),w.jsx("span",{className:"px-2 py-1 rounded bg-slate-800/60 border border-slate-700",children:"Obscured paths"})]})})]}):w.jsx(gt,{className:"bg-slate-900/40 border-slate-800",children:w.jsx(yt,{className:"py-8 text-center",children:w.jsx("p",{className:"text-slate-400",children:"Select a host to view stacks"})})})]})}function wv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bc(Object(r),!0).forEach(function(s){wv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Cv(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,h;for(h=0;h<s.length;h++)i=s[h],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function xv(e,t){if(e==null)return{};var r=Cv(e,t),s,i;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(i=0;i<h.length;i++)s=h[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kv(e,t){return bv(e)||Ev(e,t)||Lv(e,t)||Rv()}function bv(e){if(Array.isArray(e))return e}function Ev(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,i=!1,h=void 0;try{for(var v=e[Symbol.iterator](),n;!(s=(n=v.next()).done)&&(r.push(n.value),!(t&&r.length===t));s=!0);}catch(u){i=!0,h=u}finally{try{!s&&v.return!=null&&v.return()}finally{if(i)throw h}}return r}}function Lv(e,t){if(e){if(typeof e=="string")return Lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lc(e,t)}}function Lc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Rv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Dc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rc(Object(r),!0).forEach(function(s){Dv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Tv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(i,h){return h(i)},s)}}function vs(e){return function t(){for(var r=this,s=arguments.length,i=new Array(s),h=0;h<s;h++)i[h]=arguments[h];return i.length>=e.length?e.apply(this,i):function(){for(var v=arguments.length,n=new Array(v),u=0;u<v;u++)n[u]=arguments[u];return t.apply(r,[].concat(i,n))}}}function nn(e){return{}.toString.call(e).includes("Object")}function Pv(e){return!Object.keys(e).length}function qs(e){return typeof e=="function"}function jv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Av(e,t){return nn(t)||Xt("changeType"),Object.keys(t).some(function(r){return!jv(e,r)})&&Xt("changeField"),t}function Mv(e){qs(e)||Xt("selectorType")}function Ov(e){qs(e)||nn(e)||Xt("handlerType"),nn(e)&&Object.values(e).some(function(t){return!qs(t)})&&Xt("handlersType")}function Nv(e){e||Xt("initialIsRequired"),nn(e)||Xt("initialType"),Pv(e)&&Xt("initialContent")}function Bv(e,t){throw new Error(e[t]||e.default)}var Iv={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Xt=vs(Bv)(Iv),gi={changes:Av,selector:Mv,handler:Ov,initial:Nv};function Hv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gi.initial(e),gi.handler(t);var r={current:e},s=vs(zv)(r,t),i=vs($v)(r),h=vs(gi.changes)(e),v=vs(Fv)(r);function n(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return gi.selector(d),d(r.current)}function u(d){Tv(s,i,h,v)(d)}return[n,u]}function Fv(e,t){return qs(t)?t(e.current):t}function $v(e,t){return e.current=Dc(Dc({},e.current),t),t}function zv(e,t,r){return qs(t)?t(e.current):Object.keys(r).forEach(function(s){var i;return(i=t[s])===null||i===void 0?void 0:i.call(t,e.current[s])}),r}var Uv={create:Hv},Wv={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Vv(e){return function t(){for(var r=this,s=arguments.length,i=new Array(s),h=0;h<s;h++)i[h]=arguments[h];return i.length>=e.length?e.apply(this,i):function(){for(var v=arguments.length,n=new Array(v),u=0;u<v;u++)n[u]=arguments[u];return t.apply(r,[].concat(i,n))}}}function Kv(e){return{}.toString.call(e).includes("Object")}function qv(e){return e||Tc("configIsRequired"),Kv(e)||Tc("configType"),e.urls?(Gv(),{paths:{vs:e.urls.monacoBase}}):e}function Gv(){console.warn(ld.deprecation)}function Xv(e,t){throw new Error(e[t]||e.default)}var ld={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Tc=Vv(Xv)(ld),Qv={config:qv},Yv=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return function(i){return r.reduceRight(function(h,v){return v(h)},i)}};function ad(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],ad(e[r],t[r]))}),Ec(Ec({},e),t)}var Jv={type:"cancelation",msg:"operation is manually canceled"};function oo(e){var t=!1,r=new Promise(function(s,i){e.then(function(h){return t?i(Jv):s(h)}),e.catch(i)});return r.cancel=function(){return t=!0},r}var Zv=Uv.create({config:Wv,isInitialized:!1,resolve:null,reject:null,monaco:null}),cd=kv(Zv,2),Zs=cd[0],Ln=cd[1];function em(e){var t=Qv.config(e),r=t.monaco,s=xv(t,["monaco"]);Ln(function(i){return{config:ad(i.config,s),monaco:r}})}function tm(){var e=Zs(function(t){var r=t.monaco,s=t.isInitialized,i=t.resolve;return{monaco:r,isInitialized:s,resolve:i}});if(!e.isInitialized){if(Ln({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),oo(lo);if(window.monaco&&window.monaco.editor)return ud(window.monaco),e.resolve(window.monaco),oo(lo);Yv(rm,im)(nm)}return oo(lo)}function rm(e){return document.body.appendChild(e)}function sm(e){var t=document.createElement("script");return e&&(t.src=e),t}function im(e){var t=Zs(function(s){var i=s.config,h=s.reject;return{config:i,reject:h}}),r=sm("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function nm(){var e=Zs(function(r){var s=r.config,i=r.resolve,h=r.reject;return{config:s,resolve:i,reject:h}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){ud(r),e.resolve(r)},function(r){e.reject(r)})}function ud(e){Zs().monaco||Ln({monaco:e})}function om(){return Zs(function(e){var t=e.monaco;return t})}var lo=new Promise(function(e,t){return Ln({resolve:e,reject:t})}),hd={config:em,init:tm,__getMonacoInstance:om},lm={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ao=lm,am={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cm=am;function um({children:e}){return lt.createElement("div",{style:cm.container},e)}var hm=um,dm=hm;function fm({width:e,height:t,isEditorReady:r,loading:s,_ref:i,className:h,wrapperProps:v}){return lt.createElement("section",{style:{...ao.wrapper,width:e,height:t},...v},!r&&lt.createElement(dm,null,s),lt.createElement("div",{ref:i,style:{...ao.fullWidth,...!r&&ao.hide},className:h}))}var pm=fm,dd=I.memo(pm);function _m(e){I.useEffect(e,[])}var fd=_m;function vm(e,t,r=!0){let s=I.useRef(!0);I.useEffect(s.current||!r?()=>{s.current=!1}:e,t)}var $e=vm;function Es(){}function Pr(e,t,r,s){return mm(e,s)||gm(e,t,r,s)}function mm(e,t){return e.editor.getModel(pd(e,t))}function gm(e,t,r,s){return e.editor.createModel(t,r,s?pd(e,s):void 0)}function pd(e,t){return e.Uri.parse(t)}function ym({original:e,modified:t,language:r,originalLanguage:s,modifiedLanguage:i,originalModelPath:h,modifiedModelPath:v,keepCurrentOriginalModel:n=!1,keepCurrentModifiedModel:u=!1,theme:d="light",loading:g="Loading...",options:f={},height:m="100%",width:C="100%",className:k,wrapperProps:S={},beforeMount:l=Es,onMount:a=Es}){let[o,c]=I.useState(!1),[_,y]=I.useState(!0),x=I.useRef(null),E=I.useRef(null),p=I.useRef(null),b=I.useRef(a),R=I.useRef(l),P=I.useRef(!1);fd(()=>{let B=hd.init();return B.then($=>(E.current=$)&&y(!1)).catch($=>($==null?void 0:$.type)!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>x.current?N():B.cancel()}),$e(()=>{if(x.current&&E.current){let B=x.current.getOriginalEditor(),$=Pr(E.current,e||"",s||r||"text",h||"");$!==B.getModel()&&B.setModel($)}},[h],o),$e(()=>{if(x.current&&E.current){let B=x.current.getModifiedEditor(),$=Pr(E.current,t||"",i||r||"text",v||"");$!==B.getModel()&&B.setModel($)}},[v],o),$e(()=>{let B=x.current.getModifiedEditor();B.getOption(E.current.editor.EditorOption.readOnly)?B.setValue(t||""):t!==B.getValue()&&(B.executeEdits("",[{range:B.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),B.pushUndoStop())},[t],o),$e(()=>{var B,$;($=(B=x.current)==null?void 0:B.getModel())==null||$.original.setValue(e||"")},[e],o),$e(()=>{let{original:B,modified:$}=x.current.getModel();E.current.editor.setModelLanguage(B,s||r||"text"),E.current.editor.setModelLanguage($,i||r||"text")},[r,s,i],o),$e(()=>{var B;(B=E.current)==null||B.editor.setTheme(d)},[d],o),$e(()=>{var B;(B=x.current)==null||B.updateOptions(f)},[f],o);let D=I.useCallback(()=>{var z;if(!E.current)return;R.current(E.current);let B=Pr(E.current,e||"",s||r||"text",h||""),$=Pr(E.current,t||"",i||r||"text",v||"");(z=x.current)==null||z.setModel({original:B,modified:$})},[r,t,i,e,s,h,v]),O=I.useCallback(()=>{var B;!P.current&&p.current&&(x.current=E.current.editor.createDiffEditor(p.current,{automaticLayout:!0,...f}),D(),(B=E.current)==null||B.editor.setTheme(d),c(!0),P.current=!0)},[f,d,D]);I.useEffect(()=>{o&&b.current(x.current,E.current)},[o]),I.useEffect(()=>{!_&&!o&&O()},[_,o,O]);function N(){var $,z,L,A;let B=($=x.current)==null?void 0:$.getModel();n||((z=B==null?void 0:B.original)==null||z.dispose()),u||((L=B==null?void 0:B.modified)==null||L.dispose()),(A=x.current)==null||A.dispose()}return lt.createElement(dd,{width:C,height:m,isEditorReady:o,loading:g,_ref:p,className:k,wrapperProps:S})}var Sm=ym;I.memo(Sm);function wm(e){let t=I.useRef();return I.useEffect(()=>{t.current=e},[e]),t.current}var Cm=wm,yi=new Map;function xm({defaultValue:e,defaultLanguage:t,defaultPath:r,value:s,language:i,path:h,theme:v="light",line:n,loading:u="Loading...",options:d={},overrideServices:g={},saveViewState:f=!0,keepCurrentModel:m=!1,width:C="100%",height:k="100%",className:S,wrapperProps:l={},beforeMount:a=Es,onMount:o=Es,onChange:c,onValidate:_=Es}){let[y,x]=I.useState(!1),[E,p]=I.useState(!0),b=I.useRef(null),R=I.useRef(null),P=I.useRef(null),D=I.useRef(o),O=I.useRef(a),N=I.useRef(),B=I.useRef(s),$=Cm(h),z=I.useRef(!1),L=I.useRef(!1);fd(()=>{let M=hd.init();return M.then(H=>(b.current=H)&&p(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>R.current?j():M.cancel()}),$e(()=>{var H,V,X,K;let M=Pr(b.current,e||s||"",t||i||"",h||r||"");M!==((H=R.current)==null?void 0:H.getModel())&&(f&&yi.set($,(V=R.current)==null?void 0:V.saveViewState()),(X=R.current)==null||X.setModel(M),f&&((K=R.current)==null||K.restoreViewState(yi.get(h))))},[h],y),$e(()=>{var M;(M=R.current)==null||M.updateOptions(d)},[d],y),$e(()=>{!R.current||s===void 0||(R.current.getOption(b.current.editor.EditorOption.readOnly)?R.current.setValue(s):s!==R.current.getValue()&&(L.current=!0,R.current.executeEdits("",[{range:R.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),R.current.pushUndoStop(),L.current=!1))},[s],y),$e(()=>{var H,V;let M=(H=R.current)==null?void 0:H.getModel();M&&i&&((V=b.current)==null||V.editor.setModelLanguage(M,i))},[i],y),$e(()=>{var M;n!==void 0&&((M=R.current)==null||M.revealLine(n))},[n],y),$e(()=>{var M;(M=b.current)==null||M.editor.setTheme(v)},[v],y);let A=I.useCallback(()=>{var M;if(!(!P.current||!b.current)&&!z.current){O.current(b.current);let H=h||r,V=Pr(b.current,s||e||"",t||i||"",H||"");R.current=(M=b.current)==null?void 0:M.editor.create(P.current,{model:V,automaticLayout:!0,...d},g),f&&R.current.restoreViewState(yi.get(H)),b.current.editor.setTheme(v),n!==void 0&&R.current.revealLine(n),x(!0),z.current=!0}},[e,t,r,s,i,h,d,g,f,v,n]);I.useEffect(()=>{y&&D.current(R.current,b.current)},[y]),I.useEffect(()=>{!E&&!y&&A()},[E,y,A]),B.current=s,I.useEffect(()=>{var M,H;y&&c&&((M=N.current)==null||M.dispose(),N.current=(H=R.current)==null?void 0:H.onDidChangeModelContent(V=>{L.current||c(R.current.getValue(),V)}))},[y,c]),I.useEffect(()=>{if(y){let M=b.current.editor.onDidChangeMarkers(H=>{var X;let V=(X=R.current.getModel())==null?void 0:X.uri;if(V&&H.find(K=>K.path===V.path)){let K=b.current.editor.getModelMarkers({resource:V});_==null||_(K)}});return()=>{M==null||M.dispose()}}return()=>{}},[y,_]);function j(){var M,H;(M=N.current)==null||M.dispose(),m?f&&yi.set(h,R.current.saveViewState()):(H=R.current.getModel())==null||H.dispose(),R.current.dispose()}return lt.createElement(dd,{width:C,height:k,isEditorReady:y,loading:u,_ref:P,className:S,wrapperProps:l})}var km=xm,bm=I.memo(km);function Em({id:e,initialPath:t,stackId:r,ensureStack:s,refresh:i,fileMeta:h}){const[v,n]=I.useState(t),[u,d]=I.useState(""),[g,f]=I.useState(!1),[m,C]=I.useState(!!(h!=null&&h.sops)),[k,S]=I.useState(()=>{if(h!=null&&h.sops)return!0;const P=t.toLowerCase();return P.endsWith("_private.env")||P.endsWith("_secret.env")}),[l,a]=I.useState(!1),[o,c]=I.useState(!1),_=I.useRef(null);I.useEffect(()=>{if(n(t),d(""),a(!1),C(!!(h!=null&&h.sops)),h!=null&&h.sops)S(!0);else{const P=t.toLowerCase();S(P.endsWith("_private.env")||P.endsWith("_secret.env"))}},[t,h]);const y=I.useMemo(()=>{const P=v.toLowerCase();return P.endsWith(".yml")||P.endsWith(".yaml")?"yaml":P.endsWith(".json")?"json":P.endsWith("dockerfile")||P.endsWith("/dockerfile")?"dockerfile":P.endsWith(".sh")?"shell":P.endsWith(".env")||P.includes(".env")?"ini":"plaintext"},[v]);async function x(P){if(!r){d("");return}f(!0);try{const D=new URLSearchParams({path:v});P!=null&&P.decrypt&&D.set("decrypt","1");const O=await fetch(`/api/iac/stacks/${r}/file?${D.toString()}`,{credentials:"include",headers:P!=null&&P.decrypt?{"X-Confirm-Reveal":"yes"}:void 0});if(O.status===404){d("");return}const N=await O.text();if(!O.ok)throw new Error(N||`${O.status} ${O.statusText}`);d(N)}catch(D){d(O=>O),console.error("Editor load failed:",D)}finally{f(!1)}}I.useEffect(()=>{x({decrypt:l&&(m||k)})},[r,v,l]);async function E(){f(!0);try{const P=r??await s();let D=u;if(!k&&m&&!l)try{const B=new URLSearchParams({path:v,decrypt:"1"}),$=await fetch(`/api/iac/stacks/${P}/file?${B.toString()}`,{credentials:"include",headers:{"X-Confirm-Reveal":"yes"}}),z=await $.text();if(!$.ok)throw new Error(z||`${$.status} ${$.statusText}`);D=z}catch{alert("Couldn't load decrypted content; saving the current editor text instead.")}const O=await fetch(`/api/iac/stacks/${P}/file`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:v,content:D,sops:k})}),N=await O.text();if(!O.ok)throw new Error(N||`${O.status} ${O.statusText}`);try{const B=JSON.parse(N);typeof(B==null?void 0:B.sops)=="boolean"&&(C(B.sops),!B.sops&&l&&a(!1))}catch{}i()}catch(P){alert((P==null?void 0:P.message)||"Failed to save")}finally{f(!1)}}function p(){(m||k)&&a(P=>!P)}function b(){S(P=>!P)}function R(){c(P=>!P)}return w.jsxs(gt,{ref:_,className:(o?"fixed inset-0 z-50 m-0 rounded-none":"h-full")+" bg-slate-900/40 border-slate-800 flex flex-col",children:[w.jsx(Vr,{className:"pb-2 shrink-0",children:w.jsxs("div",{className:"flex items-center justify-between gap-2",children:[w.jsx(Kr,{className:"text-sm text-slate-200",children:"Editor"}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs(re,{size:"sm",variant:"ghost",className:"h-8 px-2",onClick:b,title:k?"SOPS: On (save encrypted)":"SOPS: Off (save plaintext)",children:[k?w.jsx(cv,{className:"h-4 w-4 mr-1"}):w.jsx(av,{className:"h-4 w-4 mr-1"}),k?"SOPS On":"SOPS Off"]}),(m||k)&&w.jsxs(re,{size:"sm",variant:"outline",className:"h-8 px-2 border-indigo-700 text-indigo-200",onClick:p,disabled:g||!r,title:l?"Hide decrypted view":"Show decrypted view",children:[l?w.jsx(ra,{className:"h-4 w-4 mr-1"}):w.jsx(En,{className:"h-4 w-4 mr-1"}),l?"Hide":"Show"]}),w.jsx(re,{size:"sm",variant:"ghost",className:"h-8 px-2",onClick:R,title:o?"Exit full screen":"Full screen",children:o?w.jsx(sv,{className:"h-4 w-4"}):w.jsx(rv,{className:"h-4 w-4"})})]})]})}),w.jsxs(yt,{className:"flex-1 min-h-0 flex flex-col gap-3",children:[w.jsx("div",{className:"flex gap-2 shrink-0",children:w.jsx(ta,{value:v,onChange:P=>n(P.target.value),placeholder:"docker-compose/host/stack/docker-compose.yaml",className:"flex-1"})}),w.jsx("div",{className:"flex-1 min-h-0 rounded border border-slate-800 overflow-hidden",children:w.jsx(bm,{value:u,onChange:P=>d(P??""),language:y,theme:"vs-dark",options:{lineNumbers:"on",wordWrap:"on",minimap:{enabled:!1},fontSize:13,scrollBeyondLastLine:!1,tabSize:2,renderWhitespace:"selection",readOnly:g},height:"100%"},`${e}:${v}`)}),w.jsx("div",{className:"flex items-center justify-end gap-2 shrink-0",children:w.jsxs(re,{onClick:E,disabled:g,children:[w.jsx(lv,{className:"h-4 w-4 mr-1"})," Save"]})})]})]})}function pt({children:e,index:t}){const r=t%2===0?"bg-slate-900/30":"bg-slate-900/10";return w.jsx("div",{className:`grid grid-cols-12 items-center gap-2 px-2 py-1.5 rounded ${r}`,children:e})}function on({value:e,title:t}){return w.jsx("input",{readOnly:!0,value:e,title:t??e,onFocus:r=>r.currentTarget.select(),className:"w-full max-w-full bg-slate-900/40 border border-slate-700 text-slate-300 font-mono text-sm px-2 py-1 rounded outline-none focus:ring-1 focus:ring-slate-600 overflow-auto"})}function hs({title:e,count:t,rightAction:r,children:s,defaultOpen:i=!1}){const[h,v]=I.useState(i);return w.jsxs("div",{className:"border border-slate-800 rounded-lg",children:[w.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-3 py-2 hover:bg-slate-900/40",onClick:()=>v(n=>!n),"aria-expanded":h,children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(td,{className:`h-4 w-4 text-slate-400 transition-transform ${h?"rotate-90":""}`}),w.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:e})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[r,typeof t=="number"&&w.jsx(Ye,{variant:"outline",className:"border-slate-700 text-slate-300",children:t})]})]}),h&&w.jsx("div",{className:"px-3 pb-3 pt-1",children:s})]})}function Lm({k:e,v:t,forceShow:r,index:s}){const[i,h]=I.useState(!1),v=!!r||i,n=t?"•".repeat(Math.min(t.length,24)):"",u=v?t||"":n;return w.jsxs(pt,{index:s,children:[w.jsx("div",{className:"col-span-4 text-slate-300 text-sm font-medium break-words",children:e}),w.jsx("div",{className:"col-span-7",children:w.jsx(on,{value:u,title:v?t:void 0})}),w.jsx("div",{className:"col-span-1 flex justify-end",children:w.jsx(re,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>h(d=>!d),title:v?"Hide":"Reveal",children:v?w.jsx(ra,{className:"h-4 w-4"}):w.jsx(En,{className:"h-4 w-4"})})})]})}function Rm({k:e,v:t,index:r}){return w.jsxs(pt,{index:r,children:[w.jsx("div",{className:"col-span-4 text-slate-300 text-sm font-medium break-words",children:e}),w.jsx("div",{className:"col-span-8",children:w.jsx(on,{value:t})})]})}function Dm({ports:e}){const t=e||[];return t.length?w.jsx("div",{className:"space-y-1 text-sm",children:t.map((r,s)=>w.jsxs("div",{className:"text-slate-300",children:[r.published?r.published+" → ":"",r.target,r.protocol?"/"+r.protocol:""]},s))}):w.jsx("div",{className:"text-sm text-slate-500",children:"No port bindings."})}function Tm({vols:e}){const t=e||[];return t.length?w.jsx("div",{className:"space-y-1",children:t.map((r,s)=>{const i=s%2===0?"bg-slate-900/30":"bg-slate-900/10";return w.jsxs("div",{className:`grid grid-cols-3 gap-3 items-center px-2 py-1.5 rounded ${i}`,children:[w.jsx("div",{className:"text-slate-300 text-sm font-mono truncate",title:r.source,children:r.source}),w.jsx("div",{className:"text-slate-400 text-sm text-center",children:"mapped →"}),w.jsxs("div",{className:"text-slate-300 text-sm font-mono truncate",title:r.target,children:[r.target,r.mode?` (${r.mode}${r.rw===!1?", ro":""})`:r.rw===!1?" (ro)":""]})]},s)})}):w.jsx("div",{className:"text-sm text-slate-500",children:"No mounts."})}function _d(e){const t=e;return Array.isArray(t.networks_detail)?t.networks_detail.map(r=>({name:r.name??"",ip:r.ip??r.ip_address??r.ipv4??"",gateway:r.gateway??"",mac:r.mac??r.mac_address??""})):t.networks_map&&typeof t.networks_map=="object"?Object.entries(t.networks_map).map(([r,s])=>({name:r,ip:(s==null?void 0:s.ip)??(s==null?void 0:s.ip_address)??(s==null?void 0:s.IPAddress)??"",gateway:(s==null?void 0:s.gateway)??(s==null?void 0:s.Gateway)??"",mac:(s==null?void 0:s.mac)??(s==null?void 0:s.mac_address)??(s==null?void 0:s.MacAddress)??""})):Array.isArray(e.networks)?e.networks.map(r=>({name:r})):[]}function Pm({c:e}){const t=_d(e);return t.length?w.jsxs("div",{className:"space-y-1",children:[w.jsxs("div",{className:"grid grid-cols-4 gap-3 px-2 py-1.5",children:[w.jsx("div",{className:"text-xs text-slate-400",children:"Name"}),w.jsx("div",{className:"text-xs text-slate-400",children:"IP Address"}),w.jsx("div",{className:"text-xs text-slate-400",children:"Gateway"}),w.jsx("div",{className:"text-xs text-slate-400",children:"MAC Address"})]}),t.map((r,s)=>{const i=s%2===0?"bg-slate-900/30":"bg-slate-900/10";return w.jsxs("div",{className:`grid grid-cols-4 gap-3 px-2 py-1.5 rounded ${i}`,children:[w.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.name,children:r.name||"—"}),w.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.ip,children:r.ip||"—"}),w.jsx("div",{className:"text-slate-300 text-sm truncate",title:r.gateway,children:r.gateway||"—"}),w.jsx("div",{className:"text-slate-300 text-sm truncate font-mono",title:r.mac,children:r.mac||"—"})]},`${r.name}-${s}`)})]}):w.jsx("div",{className:"text-sm text-slate-500",children:"No networks."})}function jm({c:e}){const[t,r]=I.useState(!1),s=Object.entries(e.env||{}),i=Object.entries(e.labels||{}).sort(([g],[f])=>g.localeCompare(f)),h=s.length,v=i.length,n=(e.volumes||[]).length,u=_d(e).length,d=e.state||e.status||"unknown";return w.jsxs("div",{className:"rounded-lg border border-slate-800 p-3 space-y-3",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("div",{className:"font-medium text-slate-200 text-sm",children:e.name}),w.jsx("div",{children:w.jsx(sd,{state:d})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsxs(pt,{index:0,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Image"}),w.jsx("div",{className:"col-span-9 text-slate-300 text-sm font-mono truncate",title:e.image||"",children:e.image||"—"})]}),w.jsxs(pt,{index:1,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Ports"}),w.jsx("div",{className:"col-span-9",children:w.jsx(Dm,{ports:e.ports})})]})]}),w.jsx(hs,{title:"General",defaultOpen:!1,children:w.jsxs("div",{className:"space-y-1",children:[w.jsxs(pt,{index:0,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Created"}),w.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.created||e.created_at?sn(e.created||e.created_at):"—"})]}),w.jsxs(pt,{index:1,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Start time"}),w.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.started||e.started_at||e.start_time?sn(e.started||e.started_at||e.start_time):"—"})]}),w.jsxs(pt,{index:3,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"Restart policy"}),w.jsx("div",{className:"col-span-9 text-slate-300 text-sm",children:e.restart_policy||"—"})]}),w.jsxs(pt,{index:4,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"CMD"}),w.jsx("div",{className:"col-span-9",children:w.jsx(on,{value:(e.cmd||[]).join(" ")||"—"})})]}),w.jsxs(pt,{index:5,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"ENTRYPOINT"}),w.jsx("div",{className:"col-span-9",children:w.jsx(on,{value:(e.entrypoint||[]).join(" ")||"—"})})]}),w.jsxs(pt,{index:6,children:[w.jsx("div",{className:"col-span-3 text-slate-400 text-xs uppercase tracking-wide",children:"ID"}),w.jsx("div",{className:"col-span-9 text-slate-300 text-sm font-mono truncate",title:e.id||e.container_id||"",children:e.id||e.container_id||"—"})]})]})}),w.jsx(hs,{title:"Environment Variables",count:h,rightAction:h>0?w.jsx(re,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:g=>{g.stopPropagation(),r(f=>!f)},title:t?"Hide all":"Reveal all",children:t?w.jsx(ra,{className:"h-4 w-4"}):w.jsx(En,{className:"h-4 w-4"})}):null,children:h===0?w.jsx("div",{className:"text-sm text-slate-500",children:"No environment variables."}):w.jsx("div",{className:"space-y-1",children:s.map(([g,f],m)=>w.jsx(Lm,{k:g,v:f,forceShow:t,index:m},g))})}),w.jsx(hs,{title:"Labels",count:v,children:v===0?w.jsx("div",{className:"text-sm text-slate-500",children:"No labels."}):w.jsx("div",{className:"space-y-1",children:i.map(([g,f],m)=>w.jsx(Rm,{k:g,v:f,index:m},g))})}),w.jsx(hs,{title:"Networks",count:u,children:w.jsx(Pm,{c:e})}),w.jsx(hs,{title:"Volumes",count:n,children:w.jsx(Tm,{vols:e.volumes})})]})}function Am({host:e,stackName:t,iacId:r,onBack:s}){const[i,h]=I.useState([]),[v,n]=I.useState([]),[u,d]=I.useState([]),[g,f]=I.useState(!0),[m,C]=I.useState(null),[k,S]=I.useState(null),[l,a]=I.useState(r),[o,c]=I.useState(!1),[_,y]=I.useState(!1),[x,E]=I.useState(!1),p=I.useRef(null),b=I.useRef(0);I.useEffect(()=>{c(!1)},[t]);async function R(){if(!l)return;const j=await fetch(`/api/iac/stacks/${l}/files`,{credentials:"include"});if(!j.ok)return;const M=await j.json();d(M.files||[])}async function P(){try{const j=await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers`,{credentials:"include"});if(j.status===401){window.location.replace("/auth/login");return}const V=((await j.json()).items||[]).filter(K=>(K.compose_project||K.stack||"(none)")===t);h(V);const X=[];for(const K of V){const J=await fetch(`/api/hosts/${encodeURIComponent(e.name)}/containers/${encodeURIComponent(K.name)}/inspect`,{credentials:"include"});J.ok&&X.push(await J.json())}n(X)}catch(j){console.warn("refreshRuntime failed",j)}}I.useEffect(()=>{let j=!1;return(async()=>{f(!0),C(null);try{await P(),l&&await R()}catch(M){j||C((M==null?void 0:M.message)||"Failed to load stack")}finally{j||f(!1)}})(),()=>{j=!0}},[e.name,t,l]),I.useEffect(()=>{let j=!1;return(async()=>{var M;if(!l){c(!1);return}try{const H=await fetch(`/api/iac/stacks/${l}`,{credentials:"include"});if(!H.ok)return;const V=await H.json();j||c(!!((M=V==null?void 0:V.stack)!=null&&M.effective_auto_devops))}catch{}})(),()=>{j=!0}},[l]);async function D(){if(l)return l;const j=await fetch("/api/iac/stacks",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope_kind:"host",scope_name:e.name,stack_name:t,iac_enabled:!1})});if(!j.ok)throw new Error(`${j.status} ${j.statusText}`);const M=await j.json();return M.id&&a(M.id),M.id}async function O(){if(!l||!confirm(`Delete IaC stack "${t}"? This only deletes IaC metadata/files, not runtime containers.`))return;const j=await fetch(`/api/iac/stacks/${l}`,{method:"DELETE",credentials:"include"});if(!j.ok){alert(`Failed to delete: ${j.status} ${j.statusText}`);return}a(void 0),d([]),S(null)}async function N(j){let M=l;if(!M)try{M=await D(),a(M)}catch(H){alert((H==null?void 0:H.message)||"Unable to create stack for Auto DevOps");return}if(j&&u.length===0){alert("This stack needs compose files or services before Auto DevOps can be enabled. Add content first.");return}c(j),await fetch(`/api/iac/stacks/${M}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_devops:j})})}function B(j=12e4,M=3e3){p.current&&(window.clearTimeout(p.current),p.current=null),E(!0),b.current=Date.now()+j;const H=async()=>{await P(),Date.now()<b.current?p.current=window.setTimeout(H,M):(E(!1),p.current=null)};H()}function $(){p.current&&(window.clearTimeout(p.current),p.current=null),E(!1)}I.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=null)},[]);async function z(){if(!l){alert("Create the stack (save a file) before deploying.");return}if(u.length===0){alert("This stack has no files to deploy. Add a compose file or scripts first.");return}y(!0);try{const j=await fetch(`/api/iac/stacks/${l}/deploy`,{method:"POST",credentials:"include"}),M=await j.json();if(!j.ok){alert(`Deploy failed: ${j.status} ${M.error||"Unknown error"}`);return}if(M.status==="skipped"){alert(`Deploy skipped: ${M.reason}`);return}B(12e4,3e3)}catch(j){alert(`Deploy failed: ${(j==null?void 0:j.message)||j}`)}finally{y(!1)}}const L=u.some(j=>j.role==="compose")||u.length>0;function A(j,M){const V=`${`docker-compose/${e.name}/${t}/`}${M}`,X=u.some(K=>K.rel_path===V);S(X?j:V)}return w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs(re,{variant:"outline",className:"border-slate-700 text-slate-200 hover:bg-slate-800",onClick:s,children:[w.jsx(X_,{className:"h-4 w-4 mr-1"})," Back to ",e.name]}),w.jsxs("div",{className:"ml-2 text-lg font-semibold text-white",children:["Stack: ",t]}),w.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[w.jsx("span",{className:"text-sm text-slate-300",children:"Auto DevOps"}),w.jsx(rd,{checked:o,onCheckedChange:j=>N(!!j)}),l?w.jsxs(re,{onClick:async()=>{await P(),await R()},variant:"outline",className:"border-slate-700",title:"Refresh files and active containers",children:[w.jsx(Ks,{className:"h-4 w-4 mr-1"})," Refresh"]}):null,x&&w.jsxs("span",{className:"ml-1 inline-flex items-center gap-2 text-xs text-emerald-300",children:[w.jsx(Ks,{className:"h-3 w-3 animate-spin"}),"Watching updates…",w.jsxs(re,{size:"sm",variant:"ghost",className:"h-6 px-2 text-emerald-200",onClick:$,title:"Stop watching",children:[w.jsx(uv,{className:"h-3 w-3 mr-1"})," Stop"]})]})]})]}),g&&w.jsx("div",{className:"text-sm px-3 py-2 rounded-lg border border-slate-800 bg-slate-900/60 text-slate-300",children:"Loading…"}),m&&w.jsxs("div",{className:"text-sm px-3 py-2 rounded-lg border border-rose-800/50 bg-rose-950/50 text-rose-200",children:["Error: ",m]}),w.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[w.jsx("div",{className:"space-y-4",children:w.jsxs(gt,{className:"bg-slate-900/50 border-slate-800",children:[w.jsx(Vr,{className:"pb-2 flex items-center justify-between",children:w.jsx(Kr,{className:"text-slate-200 text-lg",children:"Active Containers"})}),w.jsxs(yt,{className:"space-y-3",children:[v.length===0&&w.jsxs("div",{className:"text-sm text-slate-500",children:["No containers are currently running for this stack on ",e.name,"."]}),v.map((j,M)=>w.jsx(jm,{c:j},M))]})]})}),w.jsx("div",{className:"space-y-4 lg:sticky lg:top-4 lg:h-[calc(100vh-140px)] lg:z-10",children:w.jsxs(gt,{className:"bg-slate-900/50 border-slate-800 h-full flex flex-col",children:[w.jsx(Vr,{className:"pb-2 shrink-0 flex flex-row items-center justify-between",children:w.jsx(Kr,{className:"text-slate-200 text-lg",children:"IaC Files"})}),w.jsxs(yt,{className:"flex-1 min-h-0 flex flex-col gap-3",children:[!l&&w.jsxs("div",{className:"text-sm text-amber-300 shrink-0",children:["No IaC yet. Use the buttons below — the ",w.jsx("b",{children:"first Save"})," will create the IaC stack automatically."]}),w.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[w.jsxs("div",{className:"text-slate-300 text-sm",children:[u.length," file(s)"]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(re,{size:"sm",onClick:()=>A(`docker-compose/${e.name}/${t}/`,"docker-compose.yaml"),children:"New compose"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>A(`docker-compose/${e.name}/${t}/`,".env"),children:"New env"}),w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>A(`docker-compose/${e.name}/${t}/`,"deploy.sh"),children:"New script"}),l?w.jsxs(re,{onClick:O,variant:"outline",className:"border-rose-700 text-rose-200",children:[w.jsx(rn,{className:"h-4 w-4 mr-1"})," Delete IaC"]}):null,L&&w.jsxs(re,{onClick:z,disabled:_,size:"sm",className:"bg-emerald-800 hover:bg-emerald-900 text-white",title:"Deploy this stack",children:[w.jsx(nv,{className:`h-4 w-4 mr-1 ${_?"animate-spin":""}`}),_?"Deploying...":"Deploy"]})]})]}),w.jsx("div",{className:"rounded-lg border border-slate-800 overflow-hidden shrink-0",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-2 text-left",children:"Path"}),w.jsx("th",{className:"p-2 text-left",children:"Role"}),w.jsx("th",{className:"p-2 text-left",children:"SOPS"}),w.jsx("th",{className:"p-2 text-left",children:"Size"}),w.jsx("th",{className:"p-2 text-left",children:"Updated"}),w.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),w.jsxs("tbody",{children:[u.map((j,M)=>w.jsxs("tr",{className:"border-t border-slate-800",children:[w.jsx("td",{className:"p-2 text-slate-200 font-mono",children:j.rel_path}),w.jsx("td",{className:"p-2 text-slate-300",children:j.role}),w.jsx("td",{className:"p-2",children:j.sops?w.jsx(Ye,{className:"bg-indigo-900/40 border-indigo-700/40 text-indigo-200",children:"SOPS"}):"—"}),w.jsx("td",{className:"p-2 text-slate-300",children:j.size_bytes}),w.jsx("td",{className:"p-2 text-slate-300",children:sn(j.updated_at)}),w.jsx("td",{className:"p-2",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(re,{size:"sm",variant:"outline",className:"border-slate-700",onClick:()=>S(j.rel_path),children:"Edit"}),w.jsx(re,{size:"icon",variant:"ghost",onClick:async()=>{if(!l)return;(await fetch(`/api/iac/stacks/${l}/file?path=${encodeURIComponent(j.rel_path)}`,{method:"DELETE",credentials:"include"})).ok&&R()},title:"Delete",children:w.jsx(rn,{className:"h-4 w-4 text-rose-300"})})]})})]},M)),u.length===0&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"No files yet. Add compose/env/script above."})})]})]})}),k&&w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(Em,{id:"stack-editor",initialPath:k,stackId:l,ensureStack:D,refresh:()=>{S(null),R()},fileMeta:u.find(j=>j.rel_path===k)},k)})]})]})})]}),!g&&v.length===0&&!l&&w.jsx(gt,{className:"bg-slate-900/40 border-slate-800",children:w.jsxs(yt,{className:"py-4 text-sm text-slate-300",children:["This stack has no running containers on ",w.jsx("b",{children:e.name})," and is not declared in IaC yet. Save a file to create the IaC entry, or just navigate away to leave nothing behind."]})})]})}function sa({hosts:e,activeHost:t,setActiveHost:r}){return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm text-slate-300",children:"Host"}),w.jsx("select",{className:"bg-slate-950 border border-slate-800 text-slate-200 text-sm rounded px-2 py-1",value:t,onChange:s=>r(s.target.value),children:e.map(s=>w.jsx("option",{value:s.name,children:s.name},s.name))})]})}function ze({children:e,sortKey:t,currentSort:r,onSort:s}){const i=r.key===t,h=i?r.direction:"asc";return w.jsx("th",{className:"p-2 text-left",children:w.jsxs("button",{className:"flex items-center gap-1 hover:text-white transition",onClick:()=>s(t),children:[e,i?h==="asc"?w.jsx(Cc,{className:"h-3 w-3"}):w.jsx(Y_,{className:"h-3 w-3"}):w.jsx(Cc,{className:"h-3 w-3 opacity-30"})]})})}function Mm({hosts:e}){var E;const[t,r]=I.useState(((E=e[0])==null?void 0:E.name)||""),[s,i]=I.useState([]),[h,v]=I.useState(!1),[n,u]=I.useState({key:"repo",direction:"asc"}),[d,g]=I.useState([]),[f,m]=I.useState(null),[C,k]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{v(!0);try{const b=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/images`,{credentials:"include"})).json();i(b.items||[]),g([]),m(null)}finally{v(!1)}})()},[t]);const S=I.useMemo(()=>{const p=[...s];return p.sort((b,R)=>{const P=b[n.key]||"",D=R[n.key]||"",O=P.localeCompare(D);return n.direction==="asc"?O:-O}),p},[s,n]),l=p=>{u(b=>({key:p,direction:b.key===p&&b.direction==="asc"?"desc":"asc"}))},a=p=>d.includes(p),o=p=>g(b=>b.includes(p)?b.filter(R=>R!==p):[...b,p]),c=(p,b,R)=>{if(p.shiftKey&&f!==null){const[P,D]=b<f?[b,f]:[f,b],O=S.slice(P,D+1).map(N=>N.id);g(N=>Array.from(new Set([...N,...O])))}else p.metaKey||p.ctrlKey?(o(R),m(b)):(g([R]),m(b))},_=S.length>0&&d.length===S.length,y=()=>{g(_?[]:S.map(p=>p.id))};async function x(){if(!d.length)return;const p=JSON.stringify({ids:d,force:C}),b=await fetch(`/api/hosts/${encodeURIComponent(t)}/images/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:p}),R=await b.json().catch(()=>({}));b.ok||alert(typeof R=="string"?R:"Delete failed");const D=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/images`,{credentials:"include"})).json();i(D.items||[]),g([]),m(null)}return w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex items-center justify-between gap-3",children:[w.jsx("div",{className:"text-lg font-semibold text-white",children:"Images"}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[w.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:C,onChange:p=>k(p.target.checked)}),"Force"]}),w.jsxs("button",{onClick:x,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),w.jsx(sa,{hosts:e,activeHost:t,setActiveHost:r})]})]}),w.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{children:[w.jsx("th",{className:"w-10 p-2 text-center",children:w.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:_,onChange:y})}),w.jsx(ze,{sortKey:"repo",currentSort:n,onSort:p=>l(p),children:"Repository"}),w.jsx(ze,{sortKey:"tag",currentSort:n,onSort:p=>l(p),children:"Tag"}),w.jsx(ze,{sortKey:"id",currentSort:n,onSort:p=>l(p),children:"ID"}),w.jsx(ze,{sortKey:"size",currentSort:n,onSort:p=>l(p),children:"Size"}),w.jsx(ze,{sortKey:"created",currentSort:n,onSort:p=>l(p),children:"Created"})]})}),w.jsxs("tbody",{children:[h&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"Loading…"})}),!h&&S.length===0&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:6,children:"No images."})}),S.map((p,b)=>{var P;const R=a(p.id);return w.jsxs("tr",{onClick:D=>c(D,b,p.id),className:`border-t border-slate-800 cursor-default ${R?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[w.jsx("td",{className:"p-2 text-center",onClick:D=>D.stopPropagation(),children:w.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:R,onChange:()=>o(p.id)})}),w.jsx("td",{className:"p-2 text-slate-300",children:p.repo||"—"}),w.jsx("td",{className:"p-2 text-slate-300",children:p.tag||"—"}),w.jsx("td",{className:"p-2 text-slate-300 font-mono",children:((P=p.id)==null?void 0:P.slice(7,19))||"—"}),w.jsx("td",{className:"p-2 text-slate-300",children:p.size||"—"}),w.jsx("td",{className:"p-2 text-slate-300",children:p.created||"—"})]},p.id)})]})]})}),w.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}function Om({hosts:e}){var y;const[t,r]=I.useState(((y=e[0])==null?void 0:y.name)||""),[s,i]=I.useState([]),[h,v]=I.useState(!1),[n,u]=I.useState({key:"name",direction:"asc"}),[d,g]=I.useState([]),[f,m]=I.useState(null);I.useEffect(()=>{t&&(async()=>{v(!0);try{const E=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/networks`,{credentials:"include"})).json();i(E.items||[]),g([]),m(null)}finally{v(!1)}})()},[t]);const C=I.useMemo(()=>{const x=[...s];return x.sort((E,p)=>{const b=E[n.key]||"",R=p[n.key]||"",P=b.localeCompare(R);return n.direction==="asc"?P:-P}),x},[s,n]),k=x=>{u(E=>({key:x,direction:E.key===x&&E.direction==="asc"?"desc":"asc"}))},S=x=>d.includes(x),l=x=>g(E=>E.includes(x)?E.filter(p=>p!==x):[...E,x]),a=(x,E,p)=>{if(x.shiftKey&&f!==null){const[b,R]=E<f?[E,f]:[f,E],P=C.slice(b,R+1).map(D=>D.name);g(D=>Array.from(new Set([...D,...P])))}else x.metaKey||x.ctrlKey?(l(p),m(E)):(g([p]),m(E))},o=C.length>0&&d.length===C.length,c=()=>{g(o?[]:C.map(x=>x.name))};async function _(){if(!d.length)return;const x=JSON.stringify({names:d}),E=await fetch(`/api/hosts/${encodeURIComponent(t)}/networks/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:x}),p=await E.json().catch(()=>({}));E.ok||alert(typeof p=="string"?p:"Delete failed");const R=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/networks`,{credentials:"include"})).json();i(R.items||[]),g([]),m(null)}return w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex items-center justify-between gap-3",children:[w.jsx("div",{className:"text-lg font-semibold text-white",children:"Networks"}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("button",{onClick:_,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),w.jsx(sa,{hosts:e,activeHost:t,setActiveHost:r})]})]}),w.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{children:[w.jsx("th",{className:"w-10 p-2 text-center",children:w.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:o,onChange:c})}),w.jsx(ze,{sortKey:"name",currentSort:n,onSort:x=>k(x),children:"Name"}),w.jsx(ze,{sortKey:"driver",currentSort:n,onSort:x=>k(x),children:"Driver"}),w.jsx(ze,{sortKey:"scope",currentSort:n,onSort:x=>k(x),children:"Scope"}),w.jsx(ze,{sortKey:"id",currentSort:n,onSort:x=>k(x),children:"ID"})]})}),w.jsxs("tbody",{children:[h&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"Loading…"})}),!h&&C.length===0&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"No networks."})}),C.map((x,E)=>{var b;const p=S(x.name);return w.jsxs("tr",{onClick:R=>a(R,E,x.name),className:`border-t border-slate-800 cursor-default ${p?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[w.jsx("td",{className:"p-2 text-center",onClick:R=>R.stopPropagation(),children:w.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p,onChange:()=>l(x.name)})}),w.jsx("td",{className:"p-2 text-slate-300",children:x.name}),w.jsx("td",{className:"p-2 text-slate-300",children:x.driver}),w.jsx("td",{className:"p-2 text-slate-300",children:x.scope}),w.jsx("td",{className:"p-2 text-slate-300 font-mono",children:(b=x.id)==null?void 0:b.slice(0,12)})]},x.name)})]})]})}),w.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}function Nm({hosts:e}){var E;const[t,r]=I.useState(((E=e[0])==null?void 0:E.name)||""),[s,i]=I.useState([]),[h,v]=I.useState(!1),[n,u]=I.useState({key:"name",direction:"asc"}),[d,g]=I.useState([]),[f,m]=I.useState(null),[C,k]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{v(!0);try{const b=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes`,{credentials:"include"})).json();i(b.items||[]),g([]),m(null)}finally{v(!1)}})()},[t]);const S=I.useMemo(()=>{const p=[...s];return p.sort((b,R)=>{const P=b[n.key]||"",D=R[n.key]||"",O=P.localeCompare(D);return n.direction==="asc"?O:-O}),p},[s,n]),l=p=>{u(b=>({key:p,direction:b.key===p&&b.direction==="asc"?"desc":"asc"}))},a=p=>d.includes(p),o=p=>g(b=>b.includes(p)?b.filter(R=>R!==p):[...b,p]),c=(p,b,R)=>{if(p.shiftKey&&f!==null){const[P,D]=b<f?[b,f]:[f,b],O=S.slice(P,D+1).map(N=>N.name);g(N=>Array.from(new Set([...N,...O])))}else p.metaKey||p.ctrlKey?(o(R),m(b)):(g([R]),m(b))},_=S.length>0&&d.length===S.length,y=()=>{g(_?[]:S.map(p=>p.name))};async function x(){if(!d.length)return;const p=JSON.stringify({names:d,force:C}),b=await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes/delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:p}),R=await b.json().catch(()=>({}));b.ok||alert(typeof R=="string"?R:"Delete failed");const D=await(await fetch(`/api/hosts/${encodeURIComponent(t)}/volumes`,{credentials:"include"})).json();i(D.items||[]),g([]),m(null)}return w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex items-center justify-between gap-3",children:[w.jsx("div",{className:"text-lg font-semibold text-white",children:"Volumes"}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[w.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:C,onChange:p=>k(p.target.checked)}),"Force"]}),w.jsxs("button",{onClick:x,disabled:!d.length||h,className:`px-3 py-1.5 rounded-lg text-sm ${d.length?"bg-rose-600 hover:bg-rose-700 text-white":"bg-slate-800 text-slate-400 cursor-not-allowed"}`,title:d.length?`Delete ${d.length} selected`:"Select rows to delete",children:["Delete selected",d.length?` (${d.length})`:""]}),w.jsx(sa,{hosts:e,activeHost:t,setActiveHost:r})]})]}),w.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-800",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-900/70 text-slate-300",children:w.jsxs("tr",{children:[w.jsx("th",{className:"w-10 p-2 text-center",children:w.jsx("input",{type:"checkbox","aria-label":"Select all",className:"h-4 w-4",checked:_,onChange:y})}),w.jsx(ze,{sortKey:"name",currentSort:n,onSort:p=>l(p),children:"Name"}),w.jsx(ze,{sortKey:"driver",currentSort:n,onSort:p=>l(p),children:"Driver"}),w.jsx(ze,{sortKey:"mountpoint",currentSort:n,onSort:p=>l(p),children:"Mountpoint"}),w.jsx(ze,{sortKey:"created",currentSort:n,onSort:p=>l(p),children:"Created"})]})}),w.jsxs("tbody",{children:[h&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"Loading…"})}),!h&&S.length===0&&w.jsx("tr",{children:w.jsx("td",{className:"p-3 text-slate-500",colSpan:5,children:"No volumes."})}),S.map((p,b)=>{const R=a(p.name);return w.jsxs("tr",{onClick:P=>c(P,b,p.name),className:`border-t border-slate-800 cursor-default ${R?"bg-slate-900/70":"hover:bg-slate-900/40"}`,children:[w.jsx("td",{className:"p-2 text-center",onClick:P=>P.stopPropagation(),children:w.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:R,onChange:()=>o(p.name)})}),w.jsx("td",{className:"p-2 text-slate-300",children:p.name}),w.jsx("td",{className:"p-2 text-slate-300",children:p.driver}),w.jsx("td",{className:"p-2 text-slate-300 font-mono text-xs",children:p.mountpoint}),w.jsx("td",{className:"p-2 text-slate-300",children:p.created||"—"})]},p.name)})]})]})}),w.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Click to select one, Ctrl/Cmd-click to toggle, Shift-click to select a range."})]})}const Bm=new Set(["running","created","restarting","healthy","up"]);function Im(e){const t=(e||"").toLowerCase();if(!t)return!1;for(const r of Bm)if(t.includes(r))return!1;return!0}function Hm(e,t){const r=new Map;for(const d of e){const g=(d.compose_project||d.stack||"(none)").trim()||"(none)";r.has(g)||r.set(g,[]),r.get(g).push(d)}const s=new Map;for(const d of t)s.set(d.name,d);const i=new Set([...r.keys(),...s.keys()]);let h=0,v=e.length,n=0,u=0;for(const d of e)Im(d.state)&&u++;for(const d of i){h++;const g=r.get(d)||[],f=s.get(d),m=Array.isArray(f==null?void 0:f.services)?f.services:[],C=!!f&&(m.length>0||!!f.compose);let k=!1;const S=l=>{if(!f||m.length===0)return;const a=m.find(o=>l.compose_service&&o.service_name===l.compose_service||o.container_name&&o.container_name===l.name);return(a==null?void 0:a.image)||void 0};for(const l of g){const a=S(l);if(a&&a.trim()&&a.trim()!==(l.image||"").trim()){k=!0;break}}if(!k&&f&&m.length>0){for(const l of m)if(!g.some(o=>o.compose_service&&l.service_name===o.compose_service||l.container_name&&o.name===l.container_name)){k=!0;break}}!g.length&&C&&m.length>0&&(k=!0),k&&n++}return{stacks:h,containers:v,drift:n,errors:u}}function Fm(){const[e,t]=I.useState([]),[r,s]=I.useState(!0),[i,h]=I.useState(null),[v,n]=I.useState(!1),[u,d]=I.useState({}),[g,f]=I.useState(!1),[m,C]=I.useState(!1),[k,S]=I.useState(""),l=C_(),a=ea(),o=()=>{const N=a.pathname;return N==="/hosts"?"hosts":/^\/hosts\/[^/]+\/stacks/.test(N)?"stacks":/^\/hosts\/[^/]+\/images/.test(N)?"images":/^\/hosts\/[^/]+\/networks/.test(N)?"networks":/^\/hosts\/[^/]+\/volumes/.test(N)?"volumes":"hosts"},c=()=>{var B;const N=a.pathname.match(/^\/hosts\/([^/]+)/);return N&&decodeURIComponent(N[1])||((B=e[0])==null?void 0:B.name)||""};I.useEffect(()=>{let N=!1;return(async()=>{try{const B=await fetch("/api/session",{credentials:"include"});if(!B.ok)throw new Error(`HTTP ${B.status}`);const $=await B.json();N||C(!!$.user)}catch{window.location.replace("/auth/login");return}finally{N||f(!0)}})(),()=>{N=!0}},[]),I.useEffect(()=>{m&&(async()=>{s(!0),h(null);try{const N=await fetch("/api/hosts",{credentials:"include"});if(N.status===401){window.location.replace("/auth/login");return}if(!N.ok)throw new Error(`HTTP ${N.status}`);const B=await N.json(),z=(Array.isArray(B.items)?B.items:[]).map(L=>({name:L.name,address:L.addr??L.address??"",groups:L.groups??[]}));t(z)}catch(N){h((N==null?void 0:N.message)||"Failed to load hosts")}finally{s(!1)}})()},[m]);const _=I.useMemo(()=>{const N=k.trim().toLowerCase();return N?e.filter(B=>[B.name,B.address||"",...B.groups||[]].join(" ").toLowerCase().includes(N)):e},[e,k]),y=I.useMemo(()=>e.map(N=>N.name).sort().join("|"),[e]);I.useEffect(()=>{d({})},[y]);async function x(N){if(!N.length)return;const B=4;let $=0;const z=Array.from({length:Math.min(B,N.length)},()=>(async()=>{for(;;){const L=$++;if(L>=N.length)break;const A=N[L];try{const[j,M]=await Promise.all([fetch(`/api/hosts/${encodeURIComponent(A)}/containers`,{credentials:"include"}),fetch(`/api/hosts/${encodeURIComponent(A)}/iac`,{credentials:"include"})]);if(j.status===401||M.status===401){window.location.replace("/auth/login");return}const H=await j.json(),V=await M.json(),X=H.items||[],K=V.stacks||[],J=Hm(X,K);d(T=>({...T,[A]:J}))}catch{}}})());await Promise.all(z)}I.useEffect(()=>{!m||!e.length||x(e.map(N=>N.name))},[m,e]);const E=I.useMemo(()=>{let N=0,B=0,$=0,z=0;for(const L of _){const A=u[L.name];A&&(N+=A.stacks,B+=A.containers,$+=A.drift,z+=A.errors)}return{hosts:_.length,stacks:N,containers:B,drift:$,errors:z}},[_,u]);async function p(){if(!v){n(!0);try{await fetch("/api/iac/scan",{method:"POST",credentials:"include"}).catch(()=>{}),await fetch("/api/scan/all",{method:"POST",credentials:"include"}),await x(e.map(N=>N.name))}finally{n(!1)}}}if(g&&!m)return w.jsx(W_,{});if(!g)return w.jsx("div",{className:"min-h-screen bg-slate-950"});const b=()=>{const{hostName:N}=cs();return w.jsx(Sv,{hosts:e,onOpenStack:(B,$,z)=>l(`/hosts/${encodeURIComponent(B.name)}/stacks/${encodeURIComponent($)}${z?`?iacId=${z}`:""}`)},N||"all")},R=()=>{const{hostName:N,stackName:B}=cs(),$=new URLSearchParams(a.search),z=$.get("iacId")?parseInt($.get("iacId")):void 0,L=e.find(A=>A.name===N);return!L||!B?(l("/hosts"),null):w.jsx(Am,{host:L,stackName:B,iacId:z,onBack:()=>l(`/hosts/${encodeURIComponent(L.name)}/stacks`)})},P=()=>{const{hostName:N}=cs();return w.jsx(Mm,{hosts:e},N||"all")},D=()=>{const{hostName:N}=cs();return w.jsx(Om,{hosts:e},N||"all")},O=()=>{const{hostName:N}=cs();return w.jsx(Nm,{hosts:e},N||"all")};return w.jsxs("div",{className:"min-h-screen bg-slate-950 flex",children:[w.jsx(U_,{page:o(),onGoHosts:()=>l("/hosts"),onGoStacks:()=>{const N=c();l(N?`/hosts/${encodeURIComponent(N)}/stacks`:"/hosts")},onGoImages:()=>{const N=c();l(N?`/hosts/${encodeURIComponent(N)}/images`:"/hosts")},onGoNetworks:()=>{const N=c();l(N?`/hosts/${encodeURIComponent(N)}/networks`:"/hosts")},onGoVolumes:()=>{const N=c();l(N?`/hosts/${encodeURIComponent(N)}/volumes`:"/hosts")}}),w.jsxs("div",{className:"flex-1 min-w-0 max-h-screen flex flex-col",children:[w.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-4 lg:p-6",children:w.jsxs(H_,{children:[w.jsx(sr,{path:"/hosts",element:w.jsx(pv,{metrics:E,hosts:e,filteredHosts:_,loading:r,err:i,scanning:v,onScanAll:p,onFilter:S,onOpenHost:N=>l(`/hosts/${encodeURIComponent(N)}/stacks`),refreshMetricsForHosts:()=>x(e.map(N=>N.name))})}),w.jsx(sr,{path:"/hosts/:hostName/stacks",element:w.jsx(b,{})}),w.jsx(sr,{path:"/hosts/:hostName/stacks/:stackName",element:w.jsx(R,{})}),w.jsx(sr,{path:"/hosts/:hostName/images",element:w.jsx(P,{})}),w.jsx(sr,{path:"/hosts/:hostName/networks",element:w.jsx(D,{})}),w.jsx(sr,{path:"/hosts/:hostName/volumes",element:w.jsx(O,{})})]})}),w.jsx("footer",{className:"shrink-0 border-t border-slate-800 bg-slate-950/80",children:w.jsxs("div",{className:"px-3 sm:px-4 lg:px-6 py-2 text-[10px] leading-none text-slate-500 text-center",children:["© ",new Date().getFullYear()," PrecisionPlanIT & SoFMeRight (Kai)"]})})]})]})}function $m(){const[e,t]=lt.useState({user:null,loading:!0});return lt.useEffect(()=>{let r=!0;return fetch("/api/session",{credentials:"include"}).then(async s=>{if(s.status===401){r&&t({user:null,loading:!1});return}const i=await s.json();r&&t({user:i.user??null,loading:!1})}).catch(()=>r&&t({user:null,loading:!1})),()=>{r=!1}},[]),e}function zm({children:e}){const{user:t,loading:r}=$m();return r?w.jsx("div",{className:"min-h-screen grid place-items-center bg-slate-950 text-slate-200",children:w.jsx("div",{className:"animate-pulse text-slate-400",children:"Loading…"})}):t?w.jsx(w.Fragment,{children:e}):w.jsx(Um,{})}function Um(){return w.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex items-center justify-center p-6",children:w.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-center",children:[w.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-2xl bg-slate-900 border border-slate-800 grid place-items-center shadow-[0_0_0_4px_rgba(116,236,190,0.12)]",children:w.jsxs("span",{className:"font-black text-lg",children:["DD",w.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-[#74ecbe] to-[#60a5fa]",children:"UI"})]})}),w.jsx("div",{className:"text-xl font-bold mb-2",children:"Designated Driver UI"}),w.jsx("div",{className:"text-sm text-slate-400 mb-6",children:"Sign in with your identity provider to continue."}),w.jsx("a",{href:"/auth/login",className:"inline-flex items-center justify-center rounded-md px-4 py-2 font-medium bg-[#74ecbe] text-slate-900 hover:bg-[#63d9ad]",children:"Sign in with SSO"}),w.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Community Edition • Security-first by default"})]})})}co.createRoot(document.getElementById("root")).render(w.jsx(lt.StrictMode,{children:w.jsx(z_,{children:w.jsx(zm,{children:w.jsx(Fm,{})})})}));
